(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ge(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var hw={exports:{}},tp={},cw={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jl=Symbol.for("react.element"),w5=Symbol.for("react.portal"),S5=Symbol.for("react.fragment"),C5=Symbol.for("react.strict_mode"),x5=Symbol.for("react.profiler"),O5=Symbol.for("react.provider"),P5=Symbol.for("react.context"),E5=Symbol.for("react.forward_ref"),T5=Symbol.for("react.suspense"),k5=Symbol.for("react.memo"),A5=Symbol.for("react.lazy"),_y=Symbol.iterator;function I5(n){return n===null||typeof n!="object"?null:(n=_y&&n[_y]||n["@@iterator"],typeof n=="function"?n:null)}var dw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uw=Object.assign,pw={};function ga(n,e,t){this.props=n,this.context=e,this.refs=pw,this.updater=t||dw}ga.prototype.isReactComponent={};ga.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};ga.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function fw(){}fw.prototype=ga.prototype;function b0(n,e,t){this.props=n,this.context=e,this.refs=pw,this.updater=t||dw}var _0=b0.prototype=new fw;_0.constructor=b0;uw(_0,ga.prototype);_0.isPureReactComponent=!0;var wy=Array.isArray,gw=Object.prototype.hasOwnProperty,w0={current:null},mw={key:!0,ref:!0,__self:!0,__source:!0};function vw(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)gw.call(e,r)&&!mw.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var h=Array(a),c=0;c<a;c++)h[c]=arguments[c+2];i.children=h}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Jl,type:n,key:s,ref:o,props:i,_owner:w0.current}}function M5(n,e){return{$$typeof:Jl,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function S0(n){return typeof n=="object"&&n!==null&&n.$$typeof===Jl}function N5(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Sy=/\/+/g;function nf(n,e){return typeof n=="object"&&n!==null&&n.key!=null?N5(""+n.key):e.toString(36)}function kc(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Jl:case w5:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+nf(o,0):r,wy(i)?(t="",n!=null&&(t=n.replace(Sy,"$&/")+"/"),kc(i,e,t,"",function(c){return c})):i!=null&&(S0(i)&&(i=M5(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Sy,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",wy(n))for(var a=0;a<n.length;a++){s=n[a];var h=r+nf(s,a);o+=kc(s,e,t,h,i)}else if(h=I5(n),typeof h=="function")for(n=h.call(n),a=0;!(s=n.next()).done;)s=s.value,h=r+nf(s,a++),o+=kc(s,e,t,h,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ah(n,e,t){if(n==null)return n;var r=[],i=0;return kc(n,r,"","",function(s){return e.call(t,s,i++)}),r}function D5(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var nn={current:null},Ac={transition:null},$5={ReactCurrentDispatcher:nn,ReactCurrentBatchConfig:Ac,ReactCurrentOwner:w0};function yw(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Ah,forEach:function(n,e,t){Ah(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Ah(n,function(){e++}),e},toArray:function(n){return Ah(n,function(e){return e})||[]},only:function(n){if(!S0(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};me.Component=ga;me.Fragment=S5;me.Profiler=x5;me.PureComponent=b0;me.StrictMode=C5;me.Suspense=T5;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$5;me.act=yw;me.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=uw({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=w0.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(h in e)gw.call(e,h)&&!mw.hasOwnProperty(h)&&(r[h]=e[h]===void 0&&a!==void 0?a[h]:e[h])}var h=arguments.length-2;if(h===1)r.children=t;else if(1<h){a=Array(h);for(var c=0;c<h;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Jl,type:n.type,key:i,ref:s,props:r,_owner:o}};me.createContext=function(n){return n={$$typeof:P5,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:O5,_context:n},n.Consumer=n};me.createElement=vw;me.createFactory=function(n){var e=vw.bind(null,n);return e.type=n,e};me.createRef=function(){return{current:null}};me.forwardRef=function(n){return{$$typeof:E5,render:n}};me.isValidElement=S0;me.lazy=function(n){return{$$typeof:A5,_payload:{_status:-1,_result:n},_init:D5}};me.memo=function(n,e){return{$$typeof:k5,type:n,compare:e===void 0?null:e}};me.startTransition=function(n){var e=Ac.transition;Ac.transition={};try{n()}finally{Ac.transition=e}};me.unstable_act=yw;me.useCallback=function(n,e){return nn.current.useCallback(n,e)};me.useContext=function(n){return nn.current.useContext(n)};me.useDebugValue=function(){};me.useDeferredValue=function(n){return nn.current.useDeferredValue(n)};me.useEffect=function(n,e){return nn.current.useEffect(n,e)};me.useId=function(){return nn.current.useId()};me.useImperativeHandle=function(n,e,t){return nn.current.useImperativeHandle(n,e,t)};me.useInsertionEffect=function(n,e){return nn.current.useInsertionEffect(n,e)};me.useLayoutEffect=function(n,e){return nn.current.useLayoutEffect(n,e)};me.useMemo=function(n,e){return nn.current.useMemo(n,e)};me.useReducer=function(n,e,t){return nn.current.useReducer(n,e,t)};me.useRef=function(n){return nn.current.useRef(n)};me.useState=function(n){return nn.current.useState(n)};me.useSyncExternalStore=function(n,e,t){return nn.current.useSyncExternalStore(n,e,t)};me.useTransition=function(){return nn.current.useTransition()};me.version="18.3.1";cw.exports=me;var G=cw.exports;const _=Ge(G);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R5=G,F5=Symbol.for("react.element"),L5=Symbol.for("react.fragment"),j5=Object.prototype.hasOwnProperty,B5=R5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,G5={key:!0,ref:!0,__self:!0,__source:!0};function bw(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)j5.call(e,r)&&!G5.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:F5,type:n,key:s,ref:o,props:i,_owner:B5.current}}tp.Fragment=L5;tp.jsx=bw;tp.jsxs=bw;hw.exports=tp;var N=hw.exports,_w={exports:{}},Pn={},ww={exports:{}},Sw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e($,j){var S=$.length;$.push(j);e:for(;0<S;){var A=S-1>>>1,D=$[A];if(0<i(D,j))$[A]=j,$[S]=D,S=A;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var j=$[0],S=$.pop();if(S!==j){$[0]=S;e:for(var A=0,D=$.length,F=D>>>1;A<F;){var B=2*(A+1)-1,z=$[B],Z=B+1,q=$[Z];if(0>i(z,S))Z<D&&0>i(q,z)?($[A]=q,$[Z]=S,A=Z):($[A]=z,$[B]=S,A=B);else if(Z<D&&0>i(q,S))$[A]=q,$[Z]=S,A=Z;else break e}}return j}function i($,j){var S=$.sortIndex-j.sortIndex;return S!==0?S:$.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var h=[],c=[],l=1,d=null,u=3,f=!1,m=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var j=t(c);j!==null;){if(j.callback===null)r(c);else if(j.startTime<=$)r(c),j.sortIndex=j.expirationTime,e(h,j);else break;j=t(c)}}function C($){if(g=!1,w($),!m)if(t(h)!==null)m=!0,H(O);else{var j=t(c);j!==null&&K(C,j.startTime-$)}}function O($,j){m=!1,g&&(g=!1,v(T),T=-1),f=!0;var S=u;try{for(w(j),d=t(h);d!==null&&(!(d.expirationTime>j)||$&&!I());){var A=d.callback;if(typeof A=="function"){d.callback=null,u=d.priorityLevel;var D=A(d.expirationTime<=j);j=n.unstable_now(),typeof D=="function"?d.callback=D:d===t(h)&&r(h),w(j)}else r(h);d=t(h)}if(d!==null)var F=!0;else{var B=t(c);B!==null&&K(C,B.startTime-j),F=!1}return F}finally{d=null,u=S,f=!1}}var x=!1,P=null,T=-1,k=5,E=-1;function I(){return!(n.unstable_now()-E<k)}function M(){if(P!==null){var $=n.unstable_now();E=$;var j=!0;try{j=P(!0,$)}finally{j?R():(x=!1,P=null)}}else x=!1}var R;if(typeof b=="function")R=function(){b(M)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,V=U.port2;U.port1.onmessage=M,R=function(){V.postMessage(null)}}else R=function(){y(M,0)};function H($){P=$,x||(x=!0,R())}function K($,j){T=y(function(){$(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_continueExecution=function(){m||f||(m=!0,H(O))},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return u},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function($){switch(u){case 1:case 2:case 3:var j=3;break;default:j=u}var S=u;u=j;try{return $()}finally{u=S}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($,j){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var S=u;u=$;try{return j()}finally{u=S}},n.unstable_scheduleCallback=function($,j,S){var A=n.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?A+S:A):S=A,$){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=S+D,$={id:l++,callback:j,priorityLevel:$,startTime:S,expirationTime:D,sortIndex:-1},S>A?($.sortIndex=S,e(c,$),t(h)===null&&$===t(c)&&(g?(v(T),T=-1):g=!0,K(C,S-A))):($.sortIndex=D,e(h,$),m||f||(m=!0,H(O))),$},n.unstable_shouldYield=I,n.unstable_wrapCallback=function($){var j=u;return function(){var S=u;u=j;try{return $.apply(this,arguments)}finally{u=S}}}})(Sw);ww.exports=Sw;var z5=ww.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U5=G,xn=z5;function W(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cw=new Set,Pl={};function Vs(n,e){Yo(n,e),Yo(n+"Capture",e)}function Yo(n,e){for(Pl[n]=e,n=0;n<e.length;n++)Cw.add(e[n])}var Yr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zg=Object.prototype.hasOwnProperty,V5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cy={},xy={};function H5(n){return zg.call(xy,n)?!0:zg.call(Cy,n)?!1:V5.test(n)?xy[n]=!0:(Cy[n]=!0,!1)}function K5(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function W5(n,e,t,r){if(e===null||typeof e>"u"||K5(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rn(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Rt[n]=new rn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Rt[e]=new rn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Rt[n]=new rn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Rt[n]=new rn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Rt[n]=new rn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Rt[n]=new rn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Rt[n]=new rn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Rt[n]=new rn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Rt[n]=new rn(n,5,!1,n.toLowerCase(),null,!1,!1)});var C0=/[\-:]([a-z])/g;function x0(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(C0,x0);Rt[e]=new rn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(C0,x0);Rt[e]=new rn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(C0,x0);Rt[e]=new rn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Rt[n]=new rn(n,1,!1,n.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Rt[n]=new rn(n,1,!1,n.toLowerCase(),null,!0,!0)});function O0(n,e,t,r){var i=Rt.hasOwnProperty(e)?Rt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(W5(e,t,i,r)&&(t=null),r||i===null?H5(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ei=U5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ih=Symbol.for("react.element"),xo=Symbol.for("react.portal"),Oo=Symbol.for("react.fragment"),P0=Symbol.for("react.strict_mode"),Ug=Symbol.for("react.profiler"),xw=Symbol.for("react.provider"),Ow=Symbol.for("react.context"),E0=Symbol.for("react.forward_ref"),Vg=Symbol.for("react.suspense"),Hg=Symbol.for("react.suspense_list"),T0=Symbol.for("react.memo"),_i=Symbol.for("react.lazy"),Pw=Symbol.for("react.offscreen"),Oy=Symbol.iterator;function Na(n){return n===null||typeof n!="object"?null:(n=Oy&&n[Oy]||n["@@iterator"],typeof n=="function"?n:null)}var nt=Object.assign,rf;function il(n){if(rf===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);rf=e&&e[1]||""}return`
`+rf+n}var sf=!1;function of(n,e){if(!n||sf)return"";sf=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var h=`
`+i[o].replace(" at new "," at ");return n.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",n.displayName)),h}while(1<=o&&0<=a);break}}}finally{sf=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?il(n):""}function X5(n){switch(n.tag){case 5:return il(n.type);case 16:return il("Lazy");case 13:return il("Suspense");case 19:return il("SuspenseList");case 0:case 2:case 15:return n=of(n.type,!1),n;case 11:return n=of(n.type.render,!1),n;case 1:return n=of(n.type,!0),n;default:return""}}function Kg(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Oo:return"Fragment";case xo:return"Portal";case Ug:return"Profiler";case P0:return"StrictMode";case Vg:return"Suspense";case Hg:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Ow:return(n.displayName||"Context")+".Consumer";case xw:return(n._context.displayName||"Context")+".Provider";case E0:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case T0:return e=n.displayName||null,e!==null?e:Kg(n.type)||"Memo";case _i:e=n._payload,n=n._init;try{return Kg(n(e))}catch{}}return null}function Y5(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kg(e);case 8:return e===P0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ji(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ew(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function q5(n){var e=Ew(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Mh(n){n._valueTracker||(n._valueTracker=q5(n))}function Tw(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=Ew(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function qc(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Wg(n,e){var t=e.checked;return nt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Py(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=ji(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kw(n,e){e=e.checked,e!=null&&O0(n,"checked",e,!1)}function Xg(n,e){kw(n,e);var t=ji(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Yg(n,e.type,t):e.hasOwnProperty("defaultValue")&&Yg(n,e.type,ji(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Ey(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Yg(n,e,t){(e!=="number"||qc(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var sl=Array.isArray;function Lo(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+ji(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function qg(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return nt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ty(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(W(92));if(sl(t)){if(1<t.length)throw Error(W(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ji(t)}}function Aw(n,e){var t=ji(e.value),r=ji(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function ky(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Iw(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zg(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Iw(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Nh,Mw=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Nh=Nh||document.createElement("div"),Nh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function El(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var pl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Z5=["Webkit","ms","Moz","O"];Object.keys(pl).forEach(function(n){Z5.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),pl[e]=pl[n]})});function Nw(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||pl.hasOwnProperty(n)&&pl[n]?(""+e).trim():e+"px"}function Dw(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=Nw(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var Q5=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qg(n,e){if(e){if(Q5[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Jg(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var em=null;function k0(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var tm=null,jo=null,Bo=null;function Ay(n){if(n=nh(n)){if(typeof tm!="function")throw Error(W(280));var e=n.stateNode;e&&(e=op(e),tm(n.stateNode,n.type,e))}}function $w(n){jo?Bo?Bo.push(n):Bo=[n]:jo=n}function Rw(){if(jo){var n=jo,e=Bo;if(Bo=jo=null,Ay(n),e)for(n=0;n<e.length;n++)Ay(e[n])}}function Fw(n,e){return n(e)}function Lw(){}var af=!1;function jw(n,e,t){if(af)return n(e,t);af=!0;try{return Fw(n,e,t)}finally{af=!1,(jo!==null||Bo!==null)&&(Lw(),Rw())}}function Tl(n,e){var t=n.stateNode;if(t===null)return null;var r=op(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(W(231,e,typeof t));return t}var nm=!1;if(Yr)try{var Da={};Object.defineProperty(Da,"passive",{get:function(){nm=!0}}),window.addEventListener("test",Da,Da),window.removeEventListener("test",Da,Da)}catch{nm=!1}function J5(n,e,t,r,i,s,o,a,h){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(l){this.onError(l)}}var fl=!1,Zc=null,Qc=!1,rm=null,e4={onError:function(n){fl=!0,Zc=n}};function t4(n,e,t,r,i,s,o,a,h){fl=!1,Zc=null,J5.apply(e4,arguments)}function n4(n,e,t,r,i,s,o,a,h){if(t4.apply(this,arguments),fl){if(fl){var c=Zc;fl=!1,Zc=null}else throw Error(W(198));Qc||(Qc=!0,rm=c)}}function Hs(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Bw(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Iy(n){if(Hs(n)!==n)throw Error(W(188))}function r4(n){var e=n.alternate;if(!e){if(e=Hs(n),e===null)throw Error(W(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Iy(i),n;if(s===r)return Iy(i),e;s=s.sibling}throw Error(W(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(t.alternate!==r)throw Error(W(190))}if(t.tag!==3)throw Error(W(188));return t.stateNode.current===t?n:e}function Gw(n){return n=r4(n),n!==null?zw(n):null}function zw(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=zw(n);if(e!==null)return e;n=n.sibling}return null}var Uw=xn.unstable_scheduleCallback,My=xn.unstable_cancelCallback,i4=xn.unstable_shouldYield,s4=xn.unstable_requestPaint,pt=xn.unstable_now,o4=xn.unstable_getCurrentPriorityLevel,A0=xn.unstable_ImmediatePriority,Vw=xn.unstable_UserBlockingPriority,Jc=xn.unstable_NormalPriority,a4=xn.unstable_LowPriority,Hw=xn.unstable_IdlePriority,np=null,Sr=null;function l4(n){if(Sr&&typeof Sr.onCommitFiberRoot=="function")try{Sr.onCommitFiberRoot(np,n,void 0,(n.current.flags&128)===128)}catch{}}var or=Math.clz32?Math.clz32:d4,h4=Math.log,c4=Math.LN2;function d4(n){return n>>>=0,n===0?32:31-(h4(n)/c4|0)|0}var Dh=64,$h=4194304;function ol(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ed(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=ol(a):(s&=o,s!==0&&(r=ol(s)))}else o=t&~i,o!==0?r=ol(o):s!==0&&(r=ol(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-or(e),i=1<<t,r|=n[t],e&=~i;return r}function u4(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function p4(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-or(s),a=1<<o,h=i[o];h===-1?(!(a&t)||a&r)&&(i[o]=u4(a,e)):h<=e&&(n.expiredLanes|=a),s&=~a}}function im(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Kw(){var n=Dh;return Dh<<=1,!(Dh&4194240)&&(Dh=64),n}function lf(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function eh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-or(e),n[e]=t}function f4(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-or(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function I0(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-or(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Me=0;function Ww(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Xw,M0,Yw,qw,Zw,sm=!1,Rh=[],Ti=null,ki=null,Ai=null,kl=new Map,Al=new Map,Ci=[],g4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ny(n,e){switch(n){case"focusin":case"focusout":Ti=null;break;case"dragenter":case"dragleave":ki=null;break;case"mouseover":case"mouseout":Ai=null;break;case"pointerover":case"pointerout":kl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Al.delete(e.pointerId)}}function $a(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=nh(e),e!==null&&M0(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function m4(n,e,t,r,i){switch(e){case"focusin":return Ti=$a(Ti,n,e,t,r,i),!0;case"dragenter":return ki=$a(ki,n,e,t,r,i),!0;case"mouseover":return Ai=$a(Ai,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return kl.set(s,$a(kl.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Al.set(s,$a(Al.get(s)||null,n,e,t,r,i)),!0}return!1}function Qw(n){var e=ys(n.target);if(e!==null){var t=Hs(e);if(t!==null){if(e=t.tag,e===13){if(e=Bw(t),e!==null){n.blockedOn=e,Zw(n.priority,function(){Yw(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ic(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=om(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);em=r,t.target.dispatchEvent(r),em=null}else return e=nh(t),e!==null&&M0(e),n.blockedOn=t,!1;e.shift()}return!0}function Dy(n,e,t){Ic(n)&&t.delete(e)}function v4(){sm=!1,Ti!==null&&Ic(Ti)&&(Ti=null),ki!==null&&Ic(ki)&&(ki=null),Ai!==null&&Ic(Ai)&&(Ai=null),kl.forEach(Dy),Al.forEach(Dy)}function Ra(n,e){n.blockedOn===e&&(n.blockedOn=null,sm||(sm=!0,xn.unstable_scheduleCallback(xn.unstable_NormalPriority,v4)))}function Il(n){function e(i){return Ra(i,n)}if(0<Rh.length){Ra(Rh[0],n);for(var t=1;t<Rh.length;t++){var r=Rh[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Ti!==null&&Ra(Ti,n),ki!==null&&Ra(ki,n),Ai!==null&&Ra(Ai,n),kl.forEach(e),Al.forEach(e),t=0;t<Ci.length;t++)r=Ci[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Ci.length&&(t=Ci[0],t.blockedOn===null);)Qw(t),t.blockedOn===null&&Ci.shift()}var Go=ei.ReactCurrentBatchConfig,td=!0;function y4(n,e,t,r){var i=Me,s=Go.transition;Go.transition=null;try{Me=1,N0(n,e,t,r)}finally{Me=i,Go.transition=s}}function b4(n,e,t,r){var i=Me,s=Go.transition;Go.transition=null;try{Me=4,N0(n,e,t,r)}finally{Me=i,Go.transition=s}}function N0(n,e,t,r){if(td){var i=om(n,e,t,r);if(i===null)yf(n,e,r,nd,t),Ny(n,r);else if(m4(i,n,e,t,r))r.stopPropagation();else if(Ny(n,r),e&4&&-1<g4.indexOf(n)){for(;i!==null;){var s=nh(i);if(s!==null&&Xw(s),s=om(n,e,t,r),s===null&&yf(n,e,r,nd,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else yf(n,e,r,null,t)}}var nd=null;function om(n,e,t,r){if(nd=null,n=k0(r),n=ys(n),n!==null)if(e=Hs(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Bw(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return nd=n,null}function Jw(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o4()){case A0:return 1;case Vw:return 4;case Jc:case a4:return 16;case Hw:return 536870912;default:return 16}default:return 16}}var Oi=null,D0=null,Mc=null;function eS(){if(Mc)return Mc;var n,e=D0,t=e.length,r,i="value"in Oi?Oi.value:Oi.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Mc=i.slice(n,1<r?1-r:void 0)}function Nc(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Fh(){return!0}function $y(){return!1}function En(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Fh:$y,this.isPropagationStopped=$y,this}return nt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Fh)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Fh)},persist:function(){},isPersistent:Fh}),e}var ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$0=En(ma),th=nt({},ma,{view:0,detail:0}),_4=En(th),hf,cf,Fa,rp=nt({},th,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:R0,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Fa&&(Fa&&n.type==="mousemove"?(hf=n.screenX-Fa.screenX,cf=n.screenY-Fa.screenY):cf=hf=0,Fa=n),hf)},movementY:function(n){return"movementY"in n?n.movementY:cf}}),Ry=En(rp),w4=nt({},rp,{dataTransfer:0}),S4=En(w4),C4=nt({},th,{relatedTarget:0}),df=En(C4),x4=nt({},ma,{animationName:0,elapsedTime:0,pseudoElement:0}),O4=En(x4),P4=nt({},ma,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),E4=En(P4),T4=nt({},ma,{data:0}),Fy=En(T4),k4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function M4(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=I4[n])?!!e[n]:!1}function R0(){return M4}var N4=nt({},th,{key:function(n){if(n.key){var e=k4[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Nc(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?A4[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:R0,charCode:function(n){return n.type==="keypress"?Nc(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Nc(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),D4=En(N4),$4=nt({},rp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ly=En($4),R4=nt({},th,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:R0}),F4=En(R4),L4=nt({},ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),j4=En(L4),B4=nt({},rp,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),G4=En(B4),z4=[9,13,27,32],F0=Yr&&"CompositionEvent"in window,gl=null;Yr&&"documentMode"in document&&(gl=document.documentMode);var U4=Yr&&"TextEvent"in window&&!gl,tS=Yr&&(!F0||gl&&8<gl&&11>=gl),jy=" ",By=!1;function nS(n,e){switch(n){case"keyup":return z4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rS(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Po=!1;function V4(n,e){switch(n){case"compositionend":return rS(e);case"keypress":return e.which!==32?null:(By=!0,jy);case"textInput":return n=e.data,n===jy&&By?null:n;default:return null}}function H4(n,e){if(Po)return n==="compositionend"||!F0&&nS(n,e)?(n=eS(),Mc=D0=Oi=null,Po=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tS&&e.locale!=="ko"?null:e.data;default:return null}}var K4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gy(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!K4[n.type]:e==="textarea"}function iS(n,e,t,r){$w(r),e=rd(e,"onChange"),0<e.length&&(t=new $0("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var ml=null,Ml=null;function W4(n){gS(n,0)}function ip(n){var e=ko(n);if(Tw(e))return n}function X4(n,e){if(n==="change")return e}var sS=!1;if(Yr){var uf;if(Yr){var pf="oninput"in document;if(!pf){var zy=document.createElement("div");zy.setAttribute("oninput","return;"),pf=typeof zy.oninput=="function"}uf=pf}else uf=!1;sS=uf&&(!document.documentMode||9<document.documentMode)}function Uy(){ml&&(ml.detachEvent("onpropertychange",oS),Ml=ml=null)}function oS(n){if(n.propertyName==="value"&&ip(Ml)){var e=[];iS(e,Ml,n,k0(n)),jw(W4,e)}}function Y4(n,e,t){n==="focusin"?(Uy(),ml=e,Ml=t,ml.attachEvent("onpropertychange",oS)):n==="focusout"&&Uy()}function q4(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ip(Ml)}function Z4(n,e){if(n==="click")return ip(e)}function Q4(n,e){if(n==="input"||n==="change")return ip(e)}function J4(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var lr=typeof Object.is=="function"?Object.is:J4;function Nl(n,e){if(lr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!zg.call(e,i)||!lr(n[i],e[i]))return!1}return!0}function Vy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Hy(n,e){var t=Vy(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Vy(t)}}function aS(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?aS(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function lS(){for(var n=window,e=qc();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=qc(n.document)}return e}function L0(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function eO(n){var e=lS(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&aS(t.ownerDocument.documentElement,t)){if(r!==null&&L0(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=Hy(t,s);var o=Hy(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var tO=Yr&&"documentMode"in document&&11>=document.documentMode,Eo=null,am=null,vl=null,lm=!1;function Ky(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;lm||Eo==null||Eo!==qc(r)||(r=Eo,"selectionStart"in r&&L0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vl&&Nl(vl,r)||(vl=r,r=rd(am,"onSelect"),0<r.length&&(e=new $0("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Eo)))}function Lh(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var To={animationend:Lh("Animation","AnimationEnd"),animationiteration:Lh("Animation","AnimationIteration"),animationstart:Lh("Animation","AnimationStart"),transitionend:Lh("Transition","TransitionEnd")},ff={},hS={};Yr&&(hS=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function sp(n){if(ff[n])return ff[n];if(!To[n])return n;var e=To[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in hS)return ff[n]=e[t];return n}var cS=sp("animationend"),dS=sp("animationiteration"),uS=sp("animationstart"),pS=sp("transitionend"),fS=new Map,Wy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ui(n,e){fS.set(n,e),Vs(e,[n])}for(var gf=0;gf<Wy.length;gf++){var mf=Wy[gf],nO=mf.toLowerCase(),rO=mf[0].toUpperCase()+mf.slice(1);Ui(nO,"on"+rO)}Ui(cS,"onAnimationEnd");Ui(dS,"onAnimationIteration");Ui(uS,"onAnimationStart");Ui("dblclick","onDoubleClick");Ui("focusin","onFocus");Ui("focusout","onBlur");Ui(pS,"onTransitionEnd");Yo("onMouseEnter",["mouseout","mouseover"]);Yo("onMouseLeave",["mouseout","mouseover"]);Yo("onPointerEnter",["pointerout","pointerover"]);Yo("onPointerLeave",["pointerout","pointerover"]);Vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iO=new Set("cancel close invalid load scroll toggle".split(" ").concat(al));function Xy(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,n4(r,e,void 0,n),n.currentTarget=null}function gS(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],h=a.instance,c=a.currentTarget;if(a=a.listener,h!==s&&i.isPropagationStopped())break e;Xy(i,a,c),s=h}else for(o=0;o<r.length;o++){if(a=r[o],h=a.instance,c=a.currentTarget,a=a.listener,h!==s&&i.isPropagationStopped())break e;Xy(i,a,c),s=h}}}if(Qc)throw n=rm,Qc=!1,rm=null,n}function Ke(n,e){var t=e[pm];t===void 0&&(t=e[pm]=new Set);var r=n+"__bubble";t.has(r)||(mS(e,n,2,!1),t.add(r))}function vf(n,e,t){var r=0;e&&(r|=4),mS(t,n,r,e)}var jh="_reactListening"+Math.random().toString(36).slice(2);function Dl(n){if(!n[jh]){n[jh]=!0,Cw.forEach(function(t){t!=="selectionchange"&&(iO.has(t)||vf(t,!1,n),vf(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[jh]||(e[jh]=!0,vf("selectionchange",!1,e))}}function mS(n,e,t,r){switch(Jw(e)){case 1:var i=y4;break;case 4:i=b4;break;default:i=N0}t=i.bind(null,e,t,n),i=void 0,!nm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function yf(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var h=o.tag;if((h===3||h===4)&&(h=o.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ys(a),o===null)return;if(h=o.tag,h===5||h===6){r=s=o;continue e}a=a.parentNode}}r=r.return}jw(function(){var c=s,l=k0(t),d=[];e:{var u=fS.get(n);if(u!==void 0){var f=$0,m=n;switch(n){case"keypress":if(Nc(t)===0)break e;case"keydown":case"keyup":f=D4;break;case"focusin":m="focus",f=df;break;case"focusout":m="blur",f=df;break;case"beforeblur":case"afterblur":f=df;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Ry;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=S4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=F4;break;case cS:case dS:case uS:f=O4;break;case pS:f=j4;break;case"scroll":f=_4;break;case"wheel":f=G4;break;case"copy":case"cut":case"paste":f=E4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Ly}var g=(e&4)!==0,y=!g&&n==="scroll",v=g?u!==null?u+"Capture":null:u;g=[];for(var b=c,w;b!==null;){w=b;var C=w.stateNode;if(w.tag===5&&C!==null&&(w=C,v!==null&&(C=Tl(b,v),C!=null&&g.push($l(b,C,w)))),y)break;b=b.return}0<g.length&&(u=new f(u,m,null,t,l),d.push({event:u,listeners:g}))}}if(!(e&7)){e:{if(u=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",u&&t!==em&&(m=t.relatedTarget||t.fromElement)&&(ys(m)||m[qr]))break e;if((f||u)&&(u=l.window===l?l:(u=l.ownerDocument)?u.defaultView||u.parentWindow:window,f?(m=t.relatedTarget||t.toElement,f=c,m=m?ys(m):null,m!==null&&(y=Hs(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=c),f!==m)){if(g=Ry,C="onMouseLeave",v="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(g=Ly,C="onPointerLeave",v="onPointerEnter",b="pointer"),y=f==null?u:ko(f),w=m==null?u:ko(m),u=new g(C,b+"leave",f,t,l),u.target=y,u.relatedTarget=w,C=null,ys(l)===c&&(g=new g(v,b+"enter",m,t,l),g.target=w,g.relatedTarget=y,C=g),y=C,f&&m)t:{for(g=f,v=m,b=0,w=g;w;w=Js(w))b++;for(w=0,C=v;C;C=Js(C))w++;for(;0<b-w;)g=Js(g),b--;for(;0<w-b;)v=Js(v),w--;for(;b--;){if(g===v||v!==null&&g===v.alternate)break t;g=Js(g),v=Js(v)}g=null}else g=null;f!==null&&Yy(d,u,f,g,!1),m!==null&&y!==null&&Yy(d,y,m,g,!0)}}e:{if(u=c?ko(c):window,f=u.nodeName&&u.nodeName.toLowerCase(),f==="select"||f==="input"&&u.type==="file")var O=X4;else if(Gy(u))if(sS)O=Q4;else{O=q4;var x=Y4}else(f=u.nodeName)&&f.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")&&(O=Z4);if(O&&(O=O(n,c))){iS(d,O,t,l);break e}x&&x(n,u,c),n==="focusout"&&(x=u._wrapperState)&&x.controlled&&u.type==="number"&&Yg(u,"number",u.value)}switch(x=c?ko(c):window,n){case"focusin":(Gy(x)||x.contentEditable==="true")&&(Eo=x,am=c,vl=null);break;case"focusout":vl=am=Eo=null;break;case"mousedown":lm=!0;break;case"contextmenu":case"mouseup":case"dragend":lm=!1,Ky(d,t,l);break;case"selectionchange":if(tO)break;case"keydown":case"keyup":Ky(d,t,l)}var P;if(F0)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Po?nS(n,t)&&(T="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(T="onCompositionStart");T&&(tS&&t.locale!=="ko"&&(Po||T!=="onCompositionStart"?T==="onCompositionEnd"&&Po&&(P=eS()):(Oi=l,D0="value"in Oi?Oi.value:Oi.textContent,Po=!0)),x=rd(c,T),0<x.length&&(T=new Fy(T,n,null,t,l),d.push({event:T,listeners:x}),P?T.data=P:(P=rS(t),P!==null&&(T.data=P)))),(P=U4?V4(n,t):H4(n,t))&&(c=rd(c,"onBeforeInput"),0<c.length&&(l=new Fy("onBeforeInput","beforeinput",null,t,l),d.push({event:l,listeners:c}),l.data=P))}gS(d,e)})}function $l(n,e,t){return{instance:n,listener:e,currentTarget:t}}function rd(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Tl(n,t),s!=null&&r.unshift($l(n,s,i)),s=Tl(n,e),s!=null&&r.push($l(n,s,i))),n=n.return}return r}function Js(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Yy(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,h=a.alternate,c=a.stateNode;if(h!==null&&h===r)break;a.tag===5&&c!==null&&(a=c,i?(h=Tl(t,s),h!=null&&o.unshift($l(t,h,a))):i||(h=Tl(t,s),h!=null&&o.push($l(t,h,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var sO=/\r\n?/g,oO=/\u0000|\uFFFD/g;function qy(n){return(typeof n=="string"?n:""+n).replace(sO,`
`).replace(oO,"")}function Bh(n,e,t){if(e=qy(e),qy(n)!==e&&t)throw Error(W(425))}function id(){}var hm=null,cm=null;function dm(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var um=typeof setTimeout=="function"?setTimeout:void 0,aO=typeof clearTimeout=="function"?clearTimeout:void 0,Zy=typeof Promise=="function"?Promise:void 0,lO=typeof queueMicrotask=="function"?queueMicrotask:typeof Zy<"u"?function(n){return Zy.resolve(null).then(n).catch(hO)}:um;function hO(n){setTimeout(function(){throw n})}function bf(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Il(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Il(e)}function Ii(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Qy(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var va=Math.random().toString(36).slice(2),yr="__reactFiber$"+va,Rl="__reactProps$"+va,qr="__reactContainer$"+va,pm="__reactEvents$"+va,cO="__reactListeners$"+va,dO="__reactHandles$"+va;function ys(n){var e=n[yr];if(e)return e;for(var t=n.parentNode;t;){if(e=t[qr]||t[yr]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Qy(n);n!==null;){if(t=n[yr])return t;n=Qy(n)}return e}n=t,t=n.parentNode}return null}function nh(n){return n=n[yr]||n[qr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ko(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(W(33))}function op(n){return n[Rl]||null}var fm=[],Ao=-1;function Vi(n){return{current:n}}function Ye(n){0>Ao||(n.current=fm[Ao],fm[Ao]=null,Ao--)}function Ve(n,e){Ao++,fm[Ao]=n.current,n.current=e}var Bi={},Wt=Vi(Bi),hn=Vi(!1),Is=Bi;function qo(n,e){var t=n.type.contextTypes;if(!t)return Bi;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function cn(n){return n=n.childContextTypes,n!=null}function sd(){Ye(hn),Ye(Wt)}function Jy(n,e,t){if(Wt.current!==Bi)throw Error(W(168));Ve(Wt,e),Ve(hn,t)}function vS(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,Y5(n)||"Unknown",i));return nt({},t,r)}function od(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Bi,Is=Wt.current,Ve(Wt,n),Ve(hn,hn.current),!0}function e1(n,e,t){var r=n.stateNode;if(!r)throw Error(W(169));t?(n=vS(n,e,Is),r.__reactInternalMemoizedMergedChildContext=n,Ye(hn),Ye(Wt),Ve(Wt,n)):Ye(hn),Ve(hn,t)}var Gr=null,ap=!1,_f=!1;function yS(n){Gr===null?Gr=[n]:Gr.push(n)}function uO(n){ap=!0,yS(n)}function Hi(){if(!_f&&Gr!==null){_f=!0;var n=0,e=Me;try{var t=Gr;for(Me=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Gr=null,ap=!1}catch(i){throw Gr!==null&&(Gr=Gr.slice(n+1)),Uw(A0,Hi),i}finally{Me=e,_f=!1}}return null}var Io=[],Mo=0,ad=null,ld=0,Nn=[],Dn=0,Ms=null,zr=1,Ur="";function fs(n,e){Io[Mo++]=ld,Io[Mo++]=ad,ad=n,ld=e}function bS(n,e,t){Nn[Dn++]=zr,Nn[Dn++]=Ur,Nn[Dn++]=Ms,Ms=n;var r=zr;n=Ur;var i=32-or(r)-1;r&=~(1<<i),t+=1;var s=32-or(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,zr=1<<32-or(e)+i|t<<i|r,Ur=s+n}else zr=1<<s|t<<i|r,Ur=n}function j0(n){n.return!==null&&(fs(n,1),bS(n,1,0))}function B0(n){for(;n===ad;)ad=Io[--Mo],Io[Mo]=null,ld=Io[--Mo],Io[Mo]=null;for(;n===Ms;)Ms=Nn[--Dn],Nn[Dn]=null,Ur=Nn[--Dn],Nn[Dn]=null,zr=Nn[--Dn],Nn[Dn]=null}var wn=null,bn=null,qe=!1,er=null;function _S(n,e){var t=$n(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function t1(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,wn=n,bn=Ii(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,wn=n,bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ms!==null?{id:zr,overflow:Ur}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=$n(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,wn=n,bn=null,!0):!1;default:return!1}}function gm(n){return(n.mode&1)!==0&&(n.flags&128)===0}function mm(n){if(qe){var e=bn;if(e){var t=e;if(!t1(n,e)){if(gm(n))throw Error(W(418));e=Ii(t.nextSibling);var r=wn;e&&t1(n,e)?_S(r,t):(n.flags=n.flags&-4097|2,qe=!1,wn=n)}}else{if(gm(n))throw Error(W(418));n.flags=n.flags&-4097|2,qe=!1,wn=n}}}function n1(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;wn=n}function Gh(n){if(n!==wn)return!1;if(!qe)return n1(n),qe=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!dm(n.type,n.memoizedProps)),e&&(e=bn)){if(gm(n))throw wS(),Error(W(418));for(;e;)_S(n,e),e=Ii(e.nextSibling)}if(n1(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(W(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){bn=Ii(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}bn=null}}else bn=wn?Ii(n.stateNode.nextSibling):null;return!0}function wS(){for(var n=bn;n;)n=Ii(n.nextSibling)}function Zo(){bn=wn=null,qe=!1}function G0(n){er===null?er=[n]:er.push(n)}var pO=ei.ReactCurrentBatchConfig;function La(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(W(309));var r=t.stateNode}if(!r)throw Error(W(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(W(284));if(!t._owner)throw Error(W(290,n))}return n}function zh(n,e){throw n=Object.prototype.toString.call(e),Error(W(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function r1(n){var e=n._init;return e(n._payload)}function SS(n){function e(v,b){if(n){var w=v.deletions;w===null?(v.deletions=[b],v.flags|=16):w.push(b)}}function t(v,b){if(!n)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function r(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function i(v,b){return v=$i(v,b),v.index=0,v.sibling=null,v}function s(v,b,w){return v.index=w,n?(w=v.alternate,w!==null?(w=w.index,w<b?(v.flags|=2,b):w):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,b,w,C){return b===null||b.tag!==6?(b=Ef(w,v.mode,C),b.return=v,b):(b=i(b,w),b.return=v,b)}function h(v,b,w,C){var O=w.type;return O===Oo?l(v,b,w.props.children,C,w.key):b!==null&&(b.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===_i&&r1(O)===b.type)?(C=i(b,w.props),C.ref=La(v,b,w),C.return=v,C):(C=Bc(w.type,w.key,w.props,null,v.mode,C),C.ref=La(v,b,w),C.return=v,C)}function c(v,b,w,C){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=Tf(w,v.mode,C),b.return=v,b):(b=i(b,w.children||[]),b.return=v,b)}function l(v,b,w,C,O){return b===null||b.tag!==7?(b=Os(w,v.mode,C,O),b.return=v,b):(b=i(b,w),b.return=v,b)}function d(v,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Ef(""+b,v.mode,w),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ih:return w=Bc(b.type,b.key,b.props,null,v.mode,w),w.ref=La(v,null,b),w.return=v,w;case xo:return b=Tf(b,v.mode,w),b.return=v,b;case _i:var C=b._init;return d(v,C(b._payload),w)}if(sl(b)||Na(b))return b=Os(b,v.mode,w,null),b.return=v,b;zh(v,b)}return null}function u(v,b,w,C){var O=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return O!==null?null:a(v,b,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ih:return w.key===O?h(v,b,w,C):null;case xo:return w.key===O?c(v,b,w,C):null;case _i:return O=w._init,u(v,b,O(w._payload),C)}if(sl(w)||Na(w))return O!==null?null:l(v,b,w,C,null);zh(v,w)}return null}function f(v,b,w,C,O){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(w)||null,a(b,v,""+C,O);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ih:return v=v.get(C.key===null?w:C.key)||null,h(b,v,C,O);case xo:return v=v.get(C.key===null?w:C.key)||null,c(b,v,C,O);case _i:var x=C._init;return f(v,b,w,x(C._payload),O)}if(sl(C)||Na(C))return v=v.get(w)||null,l(b,v,C,O,null);zh(b,C)}return null}function m(v,b,w,C){for(var O=null,x=null,P=b,T=b=0,k=null;P!==null&&T<w.length;T++){P.index>T?(k=P,P=null):k=P.sibling;var E=u(v,P,w[T],C);if(E===null){P===null&&(P=k);break}n&&P&&E.alternate===null&&e(v,P),b=s(E,b,T),x===null?O=E:x.sibling=E,x=E,P=k}if(T===w.length)return t(v,P),qe&&fs(v,T),O;if(P===null){for(;T<w.length;T++)P=d(v,w[T],C),P!==null&&(b=s(P,b,T),x===null?O=P:x.sibling=P,x=P);return qe&&fs(v,T),O}for(P=r(v,P);T<w.length;T++)k=f(P,v,T,w[T],C),k!==null&&(n&&k.alternate!==null&&P.delete(k.key===null?T:k.key),b=s(k,b,T),x===null?O=k:x.sibling=k,x=k);return n&&P.forEach(function(I){return e(v,I)}),qe&&fs(v,T),O}function g(v,b,w,C){var O=Na(w);if(typeof O!="function")throw Error(W(150));if(w=O.call(w),w==null)throw Error(W(151));for(var x=O=null,P=b,T=b=0,k=null,E=w.next();P!==null&&!E.done;T++,E=w.next()){P.index>T?(k=P,P=null):k=P.sibling;var I=u(v,P,E.value,C);if(I===null){P===null&&(P=k);break}n&&P&&I.alternate===null&&e(v,P),b=s(I,b,T),x===null?O=I:x.sibling=I,x=I,P=k}if(E.done)return t(v,P),qe&&fs(v,T),O;if(P===null){for(;!E.done;T++,E=w.next())E=d(v,E.value,C),E!==null&&(b=s(E,b,T),x===null?O=E:x.sibling=E,x=E);return qe&&fs(v,T),O}for(P=r(v,P);!E.done;T++,E=w.next())E=f(P,v,T,E.value,C),E!==null&&(n&&E.alternate!==null&&P.delete(E.key===null?T:E.key),b=s(E,b,T),x===null?O=E:x.sibling=E,x=E);return n&&P.forEach(function(M){return e(v,M)}),qe&&fs(v,T),O}function y(v,b,w,C){if(typeof w=="object"&&w!==null&&w.type===Oo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ih:e:{for(var O=w.key,x=b;x!==null;){if(x.key===O){if(O=w.type,O===Oo){if(x.tag===7){t(v,x.sibling),b=i(x,w.props.children),b.return=v,v=b;break e}}else if(x.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===_i&&r1(O)===x.type){t(v,x.sibling),b=i(x,w.props),b.ref=La(v,x,w),b.return=v,v=b;break e}t(v,x);break}else e(v,x);x=x.sibling}w.type===Oo?(b=Os(w.props.children,v.mode,C,w.key),b.return=v,v=b):(C=Bc(w.type,w.key,w.props,null,v.mode,C),C.ref=La(v,b,w),C.return=v,v=C)}return o(v);case xo:e:{for(x=w.key;b!==null;){if(b.key===x)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){t(v,b.sibling),b=i(b,w.children||[]),b.return=v,v=b;break e}else{t(v,b);break}else e(v,b);b=b.sibling}b=Tf(w,v.mode,C),b.return=v,v=b}return o(v);case _i:return x=w._init,y(v,b,x(w._payload),C)}if(sl(w))return m(v,b,w,C);if(Na(w))return g(v,b,w,C);zh(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(t(v,b.sibling),b=i(b,w),b.return=v,v=b):(t(v,b),b=Ef(w,v.mode,C),b.return=v,v=b),o(v)):t(v,b)}return y}var Qo=SS(!0),CS=SS(!1),hd=Vi(null),cd=null,No=null,z0=null;function U0(){z0=No=cd=null}function V0(n){var e=hd.current;Ye(hd),n._currentValue=e}function vm(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function zo(n,e){cd=n,z0=No=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(ln=!0),n.firstContext=null)}function Fn(n){var e=n._currentValue;if(z0!==n)if(n={context:n,memoizedValue:e,next:null},No===null){if(cd===null)throw Error(W(308));No=n,cd.dependencies={lanes:0,firstContext:n}}else No=No.next=n;return e}var bs=null;function H0(n){bs===null?bs=[n]:bs.push(n)}function xS(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,H0(e)):(t.next=i.next,i.next=t),e.interleaved=t,Zr(n,r)}function Zr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var wi=!1;function K0(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OS(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Kr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Mi(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Zr(n,t)}return i=r.interleaved,i===null?(e.next=e,H0(r)):(e.next=i.next,i.next=e),r.interleaved=e,Zr(n,t)}function Dc(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,I0(n,t)}}function i1(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function dd(n,e,t,r){var i=n.updateQueue;wi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var h=a,c=h.next;h.next=null,o===null?s=c:o.next=c,o=h;var l=n.alternate;l!==null&&(l=l.updateQueue,a=l.lastBaseUpdate,a!==o&&(a===null?l.firstBaseUpdate=c:a.next=c,l.lastBaseUpdate=h))}if(s!==null){var d=i.baseState;o=0,l=c=h=null,a=s;do{var u=a.lane,f=a.eventTime;if((r&u)===u){l!==null&&(l=l.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=n,g=a;switch(u=e,f=t,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(f,d,u);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,u=typeof m=="function"?m.call(f,d,u):m,u==null)break e;d=nt({},d,u);break e;case 2:wi=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,u=i.effects,u===null?i.effects=[a]:u.push(a))}else f={eventTime:f,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},l===null?(c=l=f,h=d):l=l.next=f,o|=u;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;u=a,a=u.next,u.next=null,i.lastBaseUpdate=u,i.shared.pending=null}}while(!0);if(l===null&&(h=d),i.baseState=h,i.firstBaseUpdate=c,i.lastBaseUpdate=l,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ds|=o,n.lanes=o,n.memoizedState=d}}function s1(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var rh={},Cr=Vi(rh),Fl=Vi(rh),Ll=Vi(rh);function _s(n){if(n===rh)throw Error(W(174));return n}function W0(n,e){switch(Ve(Ll,e),Ve(Fl,n),Ve(Cr,rh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zg(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Zg(e,n)}Ye(Cr),Ve(Cr,e)}function Jo(){Ye(Cr),Ye(Fl),Ye(Ll)}function PS(n){_s(Ll.current);var e=_s(Cr.current),t=Zg(e,n.type);e!==t&&(Ve(Fl,n),Ve(Cr,t))}function X0(n){Fl.current===n&&(Ye(Cr),Ye(Fl))}var et=Vi(0);function ud(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wf=[];function Y0(){for(var n=0;n<wf.length;n++)wf[n]._workInProgressVersionPrimary=null;wf.length=0}var $c=ei.ReactCurrentDispatcher,Sf=ei.ReactCurrentBatchConfig,Ns=0,tt=null,Ct=null,kt=null,pd=!1,yl=!1,jl=0,fO=0;function Ft(){throw Error(W(321))}function q0(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!lr(n[t],e[t]))return!1;return!0}function Z0(n,e,t,r,i,s){if(Ns=s,tt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$c.current=n===null||n.memoizedState===null?yO:bO,n=t(r,i),yl){s=0;do{if(yl=!1,jl=0,25<=s)throw Error(W(301));s+=1,kt=Ct=null,e.updateQueue=null,$c.current=_O,n=t(r,i)}while(yl)}if($c.current=fd,e=Ct!==null&&Ct.next!==null,Ns=0,kt=Ct=tt=null,pd=!1,e)throw Error(W(300));return n}function Q0(){var n=jl!==0;return jl=0,n}function mr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?tt.memoizedState=kt=n:kt=kt.next=n,kt}function Ln(){if(Ct===null){var n=tt.alternate;n=n!==null?n.memoizedState:null}else n=Ct.next;var e=kt===null?tt.memoizedState:kt.next;if(e!==null)kt=e,Ct=n;else{if(n===null)throw Error(W(310));Ct=n,n={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},kt===null?tt.memoizedState=kt=n:kt=kt.next=n}return kt}function Bl(n,e){return typeof e=="function"?e(n):e}function Cf(n){var e=Ln(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var r=Ct,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,h=null,c=s;do{var l=c.lane;if((Ns&l)===l)h!==null&&(h=h.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var d={lane:l,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};h===null?(a=h=d,o=r):h=h.next=d,tt.lanes|=l,Ds|=l}c=c.next}while(c!==null&&c!==s);h===null?o=r:h.next=a,lr(r,e.memoizedState)||(ln=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=h,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,tt.lanes|=s,Ds|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function xf(n){var e=Ln(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);lr(s,e.memoizedState)||(ln=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function ES(){}function TS(n,e){var t=tt,r=Ln(),i=e(),s=!lr(r.memoizedState,i);if(s&&(r.memoizedState=i,ln=!0),r=r.queue,J0(IS.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||kt!==null&&kt.memoizedState.tag&1){if(t.flags|=2048,Gl(9,AS.bind(null,t,r,i,e),void 0,null),It===null)throw Error(W(349));Ns&30||kS(t,e,i)}return i}function kS(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function AS(n,e,t,r){e.value=t,e.getSnapshot=r,MS(e)&&NS(n)}function IS(n,e,t){return t(function(){MS(e)&&NS(n)})}function MS(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!lr(n,t)}catch{return!0}}function NS(n){var e=Zr(n,1);e!==null&&ar(e,n,1,-1)}function o1(n){var e=mr();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:n},e.queue=n,n=n.dispatch=vO.bind(null,tt,n),[e.memoizedState,n]}function Gl(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function DS(){return Ln().memoizedState}function Rc(n,e,t,r){var i=mr();tt.flags|=n,i.memoizedState=Gl(1|e,t,void 0,r===void 0?null:r)}function lp(n,e,t,r){var i=Ln();r=r===void 0?null:r;var s=void 0;if(Ct!==null){var o=Ct.memoizedState;if(s=o.destroy,r!==null&&q0(r,o.deps)){i.memoizedState=Gl(e,t,s,r);return}}tt.flags|=n,i.memoizedState=Gl(1|e,t,s,r)}function a1(n,e){return Rc(8390656,8,n,e)}function J0(n,e){return lp(2048,8,n,e)}function $S(n,e){return lp(4,2,n,e)}function RS(n,e){return lp(4,4,n,e)}function FS(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function LS(n,e,t){return t=t!=null?t.concat([n]):null,lp(4,4,FS.bind(null,e,n),t)}function ev(){}function jS(n,e){var t=Ln();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&q0(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function BS(n,e){var t=Ln();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&q0(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function GS(n,e,t){return Ns&21?(lr(t,e)||(t=Kw(),tt.lanes|=t,Ds|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,ln=!0),n.memoizedState=t)}function gO(n,e){var t=Me;Me=t!==0&&4>t?t:4,n(!0);var r=Sf.transition;Sf.transition={};try{n(!1),e()}finally{Me=t,Sf.transition=r}}function zS(){return Ln().memoizedState}function mO(n,e,t){var r=Di(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},US(n))VS(e,t);else if(t=xS(n,e,t,r),t!==null){var i=en();ar(t,n,r,i),HS(t,e,r)}}function vO(n,e,t){var r=Di(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(US(n))VS(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,lr(a,o)){var h=e.interleaved;h===null?(i.next=i,H0(e)):(i.next=h.next,h.next=i),e.interleaved=i;return}}catch{}finally{}t=xS(n,e,i,r),t!==null&&(i=en(),ar(t,n,r,i),HS(t,e,r))}}function US(n){var e=n.alternate;return n===tt||e!==null&&e===tt}function VS(n,e){yl=pd=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function HS(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,I0(n,t)}}var fd={readContext:Fn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},yO={readContext:Fn,useCallback:function(n,e){return mr().memoizedState=[n,e===void 0?null:e],n},useContext:Fn,useEffect:a1,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Rc(4194308,4,FS.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Rc(4194308,4,n,e)},useInsertionEffect:function(n,e){return Rc(4,2,n,e)},useMemo:function(n,e){var t=mr();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=mr();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=mO.bind(null,tt,n),[r.memoizedState,n]},useRef:function(n){var e=mr();return n={current:n},e.memoizedState=n},useState:o1,useDebugValue:ev,useDeferredValue:function(n){return mr().memoizedState=n},useTransition:function(){var n=o1(!1),e=n[0];return n=gO.bind(null,n[1]),mr().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=tt,i=mr();if(qe){if(t===void 0)throw Error(W(407));t=t()}else{if(t=e(),It===null)throw Error(W(349));Ns&30||kS(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,a1(IS.bind(null,r,s,n),[n]),r.flags|=2048,Gl(9,AS.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=mr(),e=It.identifierPrefix;if(qe){var t=Ur,r=zr;t=(r&~(1<<32-or(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=jl++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=fO++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},bO={readContext:Fn,useCallback:jS,useContext:Fn,useEffect:J0,useImperativeHandle:LS,useInsertionEffect:$S,useLayoutEffect:RS,useMemo:BS,useReducer:Cf,useRef:DS,useState:function(){return Cf(Bl)},useDebugValue:ev,useDeferredValue:function(n){var e=Ln();return GS(e,Ct.memoizedState,n)},useTransition:function(){var n=Cf(Bl)[0],e=Ln().memoizedState;return[n,e]},useMutableSource:ES,useSyncExternalStore:TS,useId:zS,unstable_isNewReconciler:!1},_O={readContext:Fn,useCallback:jS,useContext:Fn,useEffect:J0,useImperativeHandle:LS,useInsertionEffect:$S,useLayoutEffect:RS,useMemo:BS,useReducer:xf,useRef:DS,useState:function(){return xf(Bl)},useDebugValue:ev,useDeferredValue:function(n){var e=Ln();return Ct===null?e.memoizedState=n:GS(e,Ct.memoizedState,n)},useTransition:function(){var n=xf(Bl)[0],e=Ln().memoizedState;return[n,e]},useMutableSource:ES,useSyncExternalStore:TS,useId:zS,unstable_isNewReconciler:!1};function Zn(n,e){if(n&&n.defaultProps){e=nt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function ym(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:nt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var hp={isMounted:function(n){return(n=n._reactInternals)?Hs(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=en(),i=Di(n),s=Kr(r,i);s.payload=e,t!=null&&(s.callback=t),e=Mi(n,s,i),e!==null&&(ar(e,n,i,r),Dc(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=en(),i=Di(n),s=Kr(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Mi(n,s,i),e!==null&&(ar(e,n,i,r),Dc(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=en(),r=Di(n),i=Kr(t,r);i.tag=2,e!=null&&(i.callback=e),e=Mi(n,i,r),e!==null&&(ar(e,n,r,t),Dc(e,n,r))}};function l1(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Nl(t,r)||!Nl(i,s):!0}function KS(n,e,t){var r=!1,i=Bi,s=e.contextType;return typeof s=="object"&&s!==null?s=Fn(s):(i=cn(e)?Is:Wt.current,r=e.contextTypes,s=(r=r!=null)?qo(n,i):Bi),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hp,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function h1(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&hp.enqueueReplaceState(e,e.state,null)}function bm(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},K0(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Fn(s):(s=cn(e)?Is:Wt.current,i.context=qo(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ym(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&hp.enqueueReplaceState(i,i.state,null),dd(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function ea(n,e){try{var t="",r=e;do t+=X5(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function Of(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function _m(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var wO=typeof WeakMap=="function"?WeakMap:Map;function WS(n,e,t){t=Kr(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){md||(md=!0,Am=r),_m(n,e)},t}function XS(n,e,t){t=Kr(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){_m(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){_m(n,e),typeof r!="function"&&(Ni===null?Ni=new Set([this]):Ni.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function c1(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new wO;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=$O.bind(null,n,e,t),e.then(n,n))}function d1(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function u1(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Kr(-1,1),e.tag=2,Mi(t,e,1))),t.lanes|=1),n)}var SO=ei.ReactCurrentOwner,ln=!1;function Qt(n,e,t,r){e.child=n===null?CS(e,null,t,r):Qo(e,n.child,t,r)}function p1(n,e,t,r,i){t=t.render;var s=e.ref;return zo(e,i),r=Z0(n,e,t,r,s,i),t=Q0(),n!==null&&!ln?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Qr(n,e,i)):(qe&&t&&j0(e),e.flags|=1,Qt(n,e,r,i),e.child)}function f1(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!lv(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,YS(n,e,s,r,i)):(n=Bc(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Nl,t(o,r)&&n.ref===e.ref)return Qr(n,e,i)}return e.flags|=1,n=$i(s,r),n.ref=e.ref,n.return=e,e.child=n}function YS(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Nl(s,r)&&n.ref===e.ref)if(ln=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(ln=!0);else return e.lanes=n.lanes,Qr(n,e,i)}return wm(n,e,t,r,i)}function qS(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve($o,gn),gn|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Ve($o,gn),gn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Ve($o,gn),gn|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Ve($o,gn),gn|=r;return Qt(n,e,i,t),e.child}function ZS(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function wm(n,e,t,r,i){var s=cn(t)?Is:Wt.current;return s=qo(e,s),zo(e,i),t=Z0(n,e,t,r,s,i),r=Q0(),n!==null&&!ln?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Qr(n,e,i)):(qe&&r&&j0(e),e.flags|=1,Qt(n,e,t,i),e.child)}function g1(n,e,t,r,i){if(cn(t)){var s=!0;od(e)}else s=!1;if(zo(e,i),e.stateNode===null)Fc(n,e),KS(e,t,r),bm(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var h=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Fn(c):(c=cn(t)?Is:Wt.current,c=qo(e,c));var l=t.getDerivedStateFromProps,d=typeof l=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||h!==c)&&h1(e,o,r,c),wi=!1;var u=e.memoizedState;o.state=u,dd(e,r,o,i),h=e.memoizedState,a!==r||u!==h||hn.current||wi?(typeof l=="function"&&(ym(e,t,l,r),h=e.memoizedState),(a=wi||l1(e,t,a,r,u,h,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=h),o.props=r,o.state=h,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,OS(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Zn(e.type,a),o.props=c,d=e.pendingProps,u=o.context,h=t.contextType,typeof h=="object"&&h!==null?h=Fn(h):(h=cn(t)?Is:Wt.current,h=qo(e,h));var f=t.getDerivedStateFromProps;(l=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||u!==h)&&h1(e,o,r,h),wi=!1,u=e.memoizedState,o.state=u,dd(e,r,o,i);var m=e.memoizedState;a!==d||u!==m||hn.current||wi?(typeof f=="function"&&(ym(e,t,f,r),m=e.memoizedState),(c=wi||l1(e,t,c,r,u,m,h)||!1)?(l||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,h),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,h)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&u===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&u===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=h,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&u===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&u===n.memoizedState||(e.flags|=1024),r=!1)}return Sm(n,e,t,r,s,i)}function Sm(n,e,t,r,i,s){ZS(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&e1(e,t,!1),Qr(n,e,s);r=e.stateNode,SO.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Qo(e,n.child,null,s),e.child=Qo(e,null,a,s)):Qt(n,e,a,s),e.memoizedState=r.state,i&&e1(e,t,!0),e.child}function QS(n){var e=n.stateNode;e.pendingContext?Jy(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Jy(n,e.context,!1),W0(n,e.containerInfo)}function m1(n,e,t,r,i){return Zo(),G0(i),e.flags|=256,Qt(n,e,t,r),e.child}var Cm={dehydrated:null,treeContext:null,retryLane:0};function xm(n){return{baseLanes:n,cachePool:null,transitions:null}}function JS(n,e,t){var r=e.pendingProps,i=et.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Ve(et,i&1),n===null)return mm(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=up(o,r,0,null),n=Os(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=xm(t),e.memoizedState=Cm,n):tv(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return CO(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var h={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=h,e.deletions=null):(r=$i(i,h),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=$i(a,s):(s=Os(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?xm(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=Cm,r}return s=n.child,n=s.sibling,r=$i(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function tv(n,e){return e=up({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Uh(n,e,t,r){return r!==null&&G0(r),Qo(e,n.child,null,t),n=tv(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function CO(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=Of(Error(W(422))),Uh(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=up({mode:"visible",children:r.children},i,0,null),s=Os(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Qo(e,n.child,null,o),e.child.memoizedState=xm(o),e.memoizedState=Cm,s);if(!(e.mode&1))return Uh(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=Of(s,r,void 0),Uh(n,e,o,r)}if(a=(o&n.childLanes)!==0,ln||a){if(r=It,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Zr(n,i),ar(r,n,i,-1))}return av(),r=Of(Error(W(421))),Uh(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=RO.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,bn=Ii(i.nextSibling),wn=e,qe=!0,er=null,n!==null&&(Nn[Dn++]=zr,Nn[Dn++]=Ur,Nn[Dn++]=Ms,zr=n.id,Ur=n.overflow,Ms=e),e=tv(e,r.children),e.flags|=4096,e)}function v1(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),vm(n.return,e,t)}function Pf(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function eC(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Qt(n,e,r.children,t),r=et.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&v1(n,t,e);else if(n.tag===19)v1(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Ve(et,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&ud(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Pf(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&ud(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}Pf(e,!0,t,null,s);break;case"together":Pf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fc(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Qr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Ds|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(W(153));if(e.child!==null){for(n=e.child,t=$i(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=$i(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function xO(n,e,t){switch(e.tag){case 3:QS(e),Zo();break;case 5:PS(e);break;case 1:cn(e.type)&&od(e);break;case 4:W0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ve(hd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ve(et,et.current&1),e.flags|=128,null):t&e.child.childLanes?JS(n,e,t):(Ve(et,et.current&1),n=Qr(n,e,t),n!==null?n.sibling:null);Ve(et,et.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return eC(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ve(et,et.current),r)break;return null;case 22:case 23:return e.lanes=0,qS(n,e,t)}return Qr(n,e,t)}var tC,Om,nC,rC;tC=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Om=function(){};nC=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,_s(Cr.current);var s=null;switch(t){case"input":i=Wg(n,i),r=Wg(n,r),s=[];break;case"select":i=nt({},i,{value:void 0}),r=nt({},r,{value:void 0}),s=[];break;case"textarea":i=qg(n,i),r=qg(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=id)}Qg(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Pl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var h=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&h!==a&&(h!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||h&&h.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in h)h.hasOwnProperty(o)&&a[o]!==h[o]&&(t||(t={}),t[o]=h[o])}else t||(s||(s=[]),s.push(c,t)),t=h;else c==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,a=a?a.__html:void 0,h!=null&&a!==h&&(s=s||[]).push(c,h)):c==="children"?typeof h!="string"&&typeof h!="number"||(s=s||[]).push(c,""+h):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Pl.hasOwnProperty(c)?(h!=null&&c==="onScroll"&&Ke("scroll",n),s||a===h||(s=[])):(s=s||[]).push(c,h))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};rC=function(n,e,t,r){t!==r&&(e.flags|=4)};function ja(n,e){if(!qe)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Lt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function OO(n,e,t){var r=e.pendingProps;switch(B0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(e),null;case 1:return cn(e.type)&&sd(),Lt(e),null;case 3:return r=e.stateNode,Jo(),Ye(hn),Ye(Wt),Y0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Gh(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,er!==null&&(Nm(er),er=null))),Om(n,e),Lt(e),null;case 5:X0(e);var i=_s(Ll.current);if(t=e.type,n!==null&&e.stateNode!=null)nC(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Lt(e),null}if(n=_s(Cr.current),Gh(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[yr]=e,r[Rl]=s,n=(e.mode&1)!==0,t){case"dialog":Ke("cancel",r),Ke("close",r);break;case"iframe":case"object":case"embed":Ke("load",r);break;case"video":case"audio":for(i=0;i<al.length;i++)Ke(al[i],r);break;case"source":Ke("error",r);break;case"img":case"image":case"link":Ke("error",r),Ke("load",r);break;case"details":Ke("toggle",r);break;case"input":Py(r,s),Ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ke("invalid",r);break;case"textarea":Ty(r,s),Ke("invalid",r)}Qg(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Bh(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Bh(r.textContent,a,n),i=["children",""+a]):Pl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ke("scroll",r)}switch(t){case"input":Mh(r),Ey(r,s,!0);break;case"textarea":Mh(r),ky(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=id)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Iw(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[yr]=e,n[Rl]=r,tC(n,e,!1,!1),e.stateNode=n;e:{switch(o=Jg(t,r),t){case"dialog":Ke("cancel",n),Ke("close",n),i=r;break;case"iframe":case"object":case"embed":Ke("load",n),i=r;break;case"video":case"audio":for(i=0;i<al.length;i++)Ke(al[i],n);i=r;break;case"source":Ke("error",n),i=r;break;case"img":case"image":case"link":Ke("error",n),Ke("load",n),i=r;break;case"details":Ke("toggle",n),i=r;break;case"input":Py(n,r),i=Wg(n,r),Ke("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=nt({},r,{value:void 0}),Ke("invalid",n);break;case"textarea":Ty(n,r),i=qg(n,r),Ke("invalid",n);break;default:i=r}Qg(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var h=a[s];s==="style"?Dw(n,h):s==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Mw(n,h)):s==="children"?typeof h=="string"?(t!=="textarea"||h!=="")&&El(n,h):typeof h=="number"&&El(n,""+h):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Pl.hasOwnProperty(s)?h!=null&&s==="onScroll"&&Ke("scroll",n):h!=null&&O0(n,s,h,o))}switch(t){case"input":Mh(n),Ey(n,r,!1);break;case"textarea":Mh(n),ky(n);break;case"option":r.value!=null&&n.setAttribute("value",""+ji(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Lo(n,!!r.multiple,s,!1):r.defaultValue!=null&&Lo(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=id)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lt(e),null;case 6:if(n&&e.stateNode!=null)rC(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(t=_s(Ll.current),_s(Cr.current),Gh(e)){if(r=e.stateNode,t=e.memoizedProps,r[yr]=e,(s=r.nodeValue!==t)&&(n=wn,n!==null))switch(n.tag){case 3:Bh(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Bh(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[yr]=e,e.stateNode=r}return Lt(e),null;case 13:if(Ye(et),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(qe&&bn!==null&&e.mode&1&&!(e.flags&128))wS(),Zo(),e.flags|=98560,s=!1;else if(s=Gh(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[yr]=e}else Zo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lt(e),s=!1}else er!==null&&(Nm(er),er=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||et.current&1?xt===0&&(xt=3):av())),e.updateQueue!==null&&(e.flags|=4),Lt(e),null);case 4:return Jo(),Om(n,e),n===null&&Dl(e.stateNode.containerInfo),Lt(e),null;case 10:return V0(e.type._context),Lt(e),null;case 17:return cn(e.type)&&sd(),Lt(e),null;case 19:if(Ye(et),s=e.memoizedState,s===null)return Lt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ja(s,!1);else{if(xt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=ud(n),o!==null){for(e.flags|=128,ja(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Ve(et,et.current&1|2),e.child}n=n.sibling}s.tail!==null&&pt()>ta&&(e.flags|=128,r=!0,ja(s,!1),e.lanes=4194304)}else{if(!r)if(n=ud(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),ja(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!qe)return Lt(e),null}else 2*pt()-s.renderingStartTime>ta&&t!==1073741824&&(e.flags|=128,r=!0,ja(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=pt(),e.sibling=null,t=et.current,Ve(et,r?t&1|2:t&1),e):(Lt(e),null);case 22:case 23:return ov(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?gn&1073741824&&(Lt(e),e.subtreeFlags&6&&(e.flags|=8192)):Lt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function PO(n,e){switch(B0(e),e.tag){case 1:return cn(e.type)&&sd(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Jo(),Ye(hn),Ye(Wt),Y0(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return X0(e),null;case 13:if(Ye(et),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Zo()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ye(et),null;case 4:return Jo(),null;case 10:return V0(e.type._context),null;case 22:case 23:return ov(),null;case 24:return null;default:return null}}var Vh=!1,Vt=!1,EO=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Do(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){lt(n,e,r)}else t.current=null}function Pm(n,e,t){try{t()}catch(r){lt(n,e,r)}}var y1=!1;function TO(n,e){if(hm=td,n=lS(),L0(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,h=-1,c=0,l=0,d=n,u=null;t:for(;;){for(var f;d!==t||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(h=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)u=d,d=f;for(;;){if(d===n)break t;if(u===t&&++c===i&&(a=o),u===s&&++l===r&&(h=o),(f=d.nextSibling)!==null)break;d=u,u=d.parentNode}d=f}t=a===-1||h===-1?null:{start:a,end:h}}else t=null}t=t||{start:0,end:0}}else t=null;for(cm={focusedElem:n,selectionRange:t},td=!1,Q=e;Q!==null;)if(e=Q,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Q=n;else for(;Q!==null;){e=Q;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,y=m.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:Zn(e.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(C){lt(e,e.return,C)}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}return m=y1,y1=!1,m}function bl(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&Pm(e,t,s)}i=i.next}while(i!==r)}}function cp(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Em(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function iC(n){var e=n.alternate;e!==null&&(n.alternate=null,iC(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[yr],delete e[Rl],delete e[pm],delete e[cO],delete e[dO])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function sC(n){return n.tag===5||n.tag===3||n.tag===4}function b1(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||sC(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Tm(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=id));else if(r!==4&&(n=n.child,n!==null))for(Tm(n,e,t),n=n.sibling;n!==null;)Tm(n,e,t),n=n.sibling}function km(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(km(n,e,t),n=n.sibling;n!==null;)km(n,e,t),n=n.sibling}var Nt=null,Qn=!1;function ii(n,e,t){for(t=t.child;t!==null;)oC(n,e,t),t=t.sibling}function oC(n,e,t){if(Sr&&typeof Sr.onCommitFiberUnmount=="function")try{Sr.onCommitFiberUnmount(np,t)}catch{}switch(t.tag){case 5:Vt||Do(t,e);case 6:var r=Nt,i=Qn;Nt=null,ii(n,e,t),Nt=r,Qn=i,Nt!==null&&(Qn?(n=Nt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Nt.removeChild(t.stateNode));break;case 18:Nt!==null&&(Qn?(n=Nt,t=t.stateNode,n.nodeType===8?bf(n.parentNode,t):n.nodeType===1&&bf(n,t),Il(n)):bf(Nt,t.stateNode));break;case 4:r=Nt,i=Qn,Nt=t.stateNode.containerInfo,Qn=!0,ii(n,e,t),Nt=r,Qn=i;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Pm(t,e,o),i=i.next}while(i!==r)}ii(n,e,t);break;case 1:if(!Vt&&(Do(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){lt(t,e,a)}ii(n,e,t);break;case 21:ii(n,e,t);break;case 22:t.mode&1?(Vt=(r=Vt)||t.memoizedState!==null,ii(n,e,t),Vt=r):ii(n,e,t);break;default:ii(n,e,t)}}function _1(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new EO),e.forEach(function(r){var i=FO.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Un(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Nt=a.stateNode,Qn=!1;break e;case 3:Nt=a.stateNode.containerInfo,Qn=!0;break e;case 4:Nt=a.stateNode.containerInfo,Qn=!0;break e}a=a.return}if(Nt===null)throw Error(W(160));oC(s,o,i),Nt=null,Qn=!1;var h=i.alternate;h!==null&&(h.return=null),i.return=null}catch(c){lt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aC(e,n),e=e.sibling}function aC(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Un(e,n),dr(n),r&4){try{bl(3,n,n.return),cp(3,n)}catch(g){lt(n,n.return,g)}try{bl(5,n,n.return)}catch(g){lt(n,n.return,g)}}break;case 1:Un(e,n),dr(n),r&512&&t!==null&&Do(t,t.return);break;case 5:if(Un(e,n),dr(n),r&512&&t!==null&&Do(t,t.return),n.flags&32){var i=n.stateNode;try{El(i,"")}catch(g){lt(n,n.return,g)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,h=n.updateQueue;if(n.updateQueue=null,h!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&kw(i,s),Jg(a,o);var c=Jg(a,s);for(o=0;o<h.length;o+=2){var l=h[o],d=h[o+1];l==="style"?Dw(i,d):l==="dangerouslySetInnerHTML"?Mw(i,d):l==="children"?El(i,d):O0(i,l,d,c)}switch(a){case"input":Xg(i,s);break;case"textarea":Aw(i,s);break;case"select":var u=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Lo(i,!!s.multiple,f,!1):u!==!!s.multiple&&(s.defaultValue!=null?Lo(i,!!s.multiple,s.defaultValue,!0):Lo(i,!!s.multiple,s.multiple?[]:"",!1))}i[Rl]=s}catch(g){lt(n,n.return,g)}}break;case 6:if(Un(e,n),dr(n),r&4){if(n.stateNode===null)throw Error(W(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(g){lt(n,n.return,g)}}break;case 3:if(Un(e,n),dr(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Il(e.containerInfo)}catch(g){lt(n,n.return,g)}break;case 4:Un(e,n),dr(n);break;case 13:Un(e,n),dr(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(iv=pt())),r&4&&_1(n);break;case 22:if(l=t!==null&&t.memoizedState!==null,n.mode&1?(Vt=(c=Vt)||l,Un(e,n),Vt=c):Un(e,n),dr(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!l&&n.mode&1)for(Q=n,l=n.child;l!==null;){for(d=Q=l;Q!==null;){switch(u=Q,f=u.child,u.tag){case 0:case 11:case 14:case 15:bl(4,u,u.return);break;case 1:Do(u,u.return);var m=u.stateNode;if(typeof m.componentWillUnmount=="function"){r=u,t=u.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){lt(r,t,g)}}break;case 5:Do(u,u.return);break;case 22:if(u.memoizedState!==null){S1(d);continue}}f!==null?(f.return=u,Q=f):S1(d)}l=l.sibling}e:for(l=null,d=n;;){if(d.tag===5){if(l===null){l=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,h=d.memoizedProps.style,o=h!=null&&h.hasOwnProperty("display")?h.display:null,a.style.display=Nw("display",o))}catch(g){lt(n,n.return,g)}}}else if(d.tag===6){if(l===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){lt(n,n.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;l===d&&(l=null),d=d.return}l===d&&(l=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Un(e,n),dr(n),r&4&&_1(n);break;case 21:break;default:Un(e,n),dr(n)}}function dr(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(sC(t)){var r=t;break e}t=t.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(El(i,""),r.flags&=-33);var s=b1(n);km(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=b1(n);Tm(n,a,o);break;default:throw Error(W(161))}}catch(h){lt(n,n.return,h)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function kO(n,e,t){Q=n,lC(n)}function lC(n,e,t){for(var r=(n.mode&1)!==0;Q!==null;){var i=Q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Vh;if(!o){var a=i.alternate,h=a!==null&&a.memoizedState!==null||Vt;a=Vh;var c=Vt;if(Vh=o,(Vt=h)&&!c)for(Q=i;Q!==null;)o=Q,h=o.child,o.tag===22&&o.memoizedState!==null?C1(i):h!==null?(h.return=o,Q=h):C1(i);for(;s!==null;)Q=s,lC(s),s=s.sibling;Q=i,Vh=a,Vt=c}w1(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Q=s):w1(n)}}function w1(n){for(;Q!==null;){var e=Q;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||cp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vt)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Zn(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&s1(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}s1(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&t.focus();break;case"img":h.src&&(t.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var l=c.memoizedState;if(l!==null){var d=l.dehydrated;d!==null&&Il(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Vt||e.flags&512&&Em(e)}catch(u){lt(e,e.return,u)}}if(e===n){Q=null;break}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}}function S1(n){for(;Q!==null;){var e=Q;if(e===n){Q=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Q=t;break}Q=e.return}}function C1(n){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{cp(4,e)}catch(h){lt(e,t,h)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(h){lt(e,i,h)}}var s=e.return;try{Em(e)}catch(h){lt(e,s,h)}break;case 5:var o=e.return;try{Em(e)}catch(h){lt(e,o,h)}}}catch(h){lt(e,e.return,h)}if(e===n){Q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Q=a;break}Q=e.return}}var AO=Math.ceil,gd=ei.ReactCurrentDispatcher,nv=ei.ReactCurrentOwner,Rn=ei.ReactCurrentBatchConfig,we=0,It=null,mt=null,$t=0,gn=0,$o=Vi(0),xt=0,zl=null,Ds=0,dp=0,rv=0,_l=null,on=null,iv=0,ta=1/0,Br=null,md=!1,Am=null,Ni=null,Hh=!1,Pi=null,vd=0,wl=0,Im=null,Lc=-1,jc=0;function en(){return we&6?pt():Lc!==-1?Lc:Lc=pt()}function Di(n){return n.mode&1?we&2&&$t!==0?$t&-$t:pO.transition!==null?(jc===0&&(jc=Kw()),jc):(n=Me,n!==0||(n=window.event,n=n===void 0?16:Jw(n.type)),n):1}function ar(n,e,t,r){if(50<wl)throw wl=0,Im=null,Error(W(185));eh(n,t,r),(!(we&2)||n!==It)&&(n===It&&(!(we&2)&&(dp|=t),xt===4&&xi(n,$t)),dn(n,r),t===1&&we===0&&!(e.mode&1)&&(ta=pt()+500,ap&&Hi()))}function dn(n,e){var t=n.callbackNode;p4(n,e);var r=ed(n,n===It?$t:0);if(r===0)t!==null&&My(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&My(t),e===1)n.tag===0?uO(x1.bind(null,n)):yS(x1.bind(null,n)),lO(function(){!(we&6)&&Hi()}),t=null;else{switch(Ww(r)){case 1:t=A0;break;case 4:t=Vw;break;case 16:t=Jc;break;case 536870912:t=Hw;break;default:t=Jc}t=mC(t,hC.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function hC(n,e){if(Lc=-1,jc=0,we&6)throw Error(W(327));var t=n.callbackNode;if(Uo()&&n.callbackNode!==t)return null;var r=ed(n,n===It?$t:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=yd(n,r);else{e=r;var i=we;we|=2;var s=dC();(It!==n||$t!==e)&&(Br=null,ta=pt()+500,xs(n,e));do try{NO();break}catch(a){cC(n,a)}while(!0);U0(),gd.current=s,we=i,mt!==null?e=0:(It=null,$t=0,e=xt)}if(e!==0){if(e===2&&(i=im(n),i!==0&&(r=i,e=Mm(n,i))),e===1)throw t=zl,xs(n,0),xi(n,r),dn(n,pt()),t;if(e===6)xi(n,r);else{if(i=n.current.alternate,!(r&30)&&!IO(i)&&(e=yd(n,r),e===2&&(s=im(n),s!==0&&(r=s,e=Mm(n,s))),e===1))throw t=zl,xs(n,0),xi(n,r),dn(n,pt()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:gs(n,on,Br);break;case 3:if(xi(n,r),(r&130023424)===r&&(e=iv+500-pt(),10<e)){if(ed(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){en(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=um(gs.bind(null,n,on,Br),e);break}gs(n,on,Br);break;case 4:if(xi(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-or(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*AO(r/1960))-r,10<r){n.timeoutHandle=um(gs.bind(null,n,on,Br),r);break}gs(n,on,Br);break;case 5:gs(n,on,Br);break;default:throw Error(W(329))}}}return dn(n,pt()),n.callbackNode===t?hC.bind(null,n):null}function Mm(n,e){var t=_l;return n.current.memoizedState.isDehydrated&&(xs(n,e).flags|=256),n=yd(n,e),n!==2&&(e=on,on=t,e!==null&&Nm(e)),n}function Nm(n){on===null?on=n:on.push.apply(on,n)}function IO(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!lr(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xi(n,e){for(e&=~rv,e&=~dp,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-or(e),r=1<<t;n[t]=-1,e&=~r}}function x1(n){if(we&6)throw Error(W(327));Uo();var e=ed(n,0);if(!(e&1))return dn(n,pt()),null;var t=yd(n,e);if(n.tag!==0&&t===2){var r=im(n);r!==0&&(e=r,t=Mm(n,r))}if(t===1)throw t=zl,xs(n,0),xi(n,e),dn(n,pt()),t;if(t===6)throw Error(W(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,gs(n,on,Br),dn(n,pt()),null}function sv(n,e){var t=we;we|=1;try{return n(e)}finally{we=t,we===0&&(ta=pt()+500,ap&&Hi())}}function $s(n){Pi!==null&&Pi.tag===0&&!(we&6)&&Uo();var e=we;we|=1;var t=Rn.transition,r=Me;try{if(Rn.transition=null,Me=1,n)return n()}finally{Me=r,Rn.transition=t,we=e,!(we&6)&&Hi()}}function ov(){gn=$o.current,Ye($o)}function xs(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,aO(t)),mt!==null)for(t=mt.return;t!==null;){var r=t;switch(B0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sd();break;case 3:Jo(),Ye(hn),Ye(Wt),Y0();break;case 5:X0(r);break;case 4:Jo();break;case 13:Ye(et);break;case 19:Ye(et);break;case 10:V0(r.type._context);break;case 22:case 23:ov()}t=t.return}if(It=n,mt=n=$i(n.current,null),$t=gn=e,xt=0,zl=null,rv=dp=Ds=0,on=_l=null,bs!==null){for(e=0;e<bs.length;e++)if(t=bs[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}bs=null}return n}function cC(n,e){do{var t=mt;try{if(U0(),$c.current=fd,pd){for(var r=tt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}pd=!1}if(Ns=0,kt=Ct=tt=null,yl=!1,jl=0,nv.current=null,t===null||t.return===null){xt=1,zl=e,mt=null;break}e:{var s=n,o=t.return,a=t,h=e;if(e=$t,a.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var c=h,l=a,d=l.tag;if(!(l.mode&1)&&(d===0||d===11||d===15)){var u=l.alternate;u?(l.updateQueue=u.updateQueue,l.memoizedState=u.memoizedState,l.lanes=u.lanes):(l.updateQueue=null,l.memoizedState=null)}var f=d1(o);if(f!==null){f.flags&=-257,u1(f,o,a,s,e),f.mode&1&&c1(s,c,e),e=f,h=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(h),e.updateQueue=g}else m.add(h);break e}else{if(!(e&1)){c1(s,c,e),av();break e}h=Error(W(426))}}else if(qe&&a.mode&1){var y=d1(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),u1(y,o,a,s,e),G0(ea(h,a));break e}}s=h=ea(h,a),xt!==4&&(xt=2),_l===null?_l=[s]:_l.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=WS(s,h,e);i1(s,v);break e;case 1:a=h;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ni===null||!Ni.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=XS(s,a,e);i1(s,C);break e}}s=s.return}while(s!==null)}pC(t)}catch(O){e=O,mt===t&&t!==null&&(mt=t=t.return);continue}break}while(!0)}function dC(){var n=gd.current;return gd.current=fd,n===null?fd:n}function av(){(xt===0||xt===3||xt===2)&&(xt=4),It===null||!(Ds&268435455)&&!(dp&268435455)||xi(It,$t)}function yd(n,e){var t=we;we|=2;var r=dC();(It!==n||$t!==e)&&(Br=null,xs(n,e));do try{MO();break}catch(i){cC(n,i)}while(!0);if(U0(),we=t,gd.current=r,mt!==null)throw Error(W(261));return It=null,$t=0,xt}function MO(){for(;mt!==null;)uC(mt)}function NO(){for(;mt!==null&&!i4();)uC(mt)}function uC(n){var e=gC(n.alternate,n,gn);n.memoizedProps=n.pendingProps,e===null?pC(n):mt=e,nv.current=null}function pC(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=PO(t,e),t!==null){t.flags&=32767,mt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{xt=6,mt=null;return}}else if(t=OO(t,e,gn),t!==null){mt=t;return}if(e=e.sibling,e!==null){mt=e;return}mt=e=n}while(e!==null);xt===0&&(xt=5)}function gs(n,e,t){var r=Me,i=Rn.transition;try{Rn.transition=null,Me=1,DO(n,e,t,r)}finally{Rn.transition=i,Me=r}return null}function DO(n,e,t,r){do Uo();while(Pi!==null);if(we&6)throw Error(W(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(W(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(f4(n,s),n===It&&(mt=It=null,$t=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Hh||(Hh=!0,mC(Jc,function(){return Uo(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Rn.transition,Rn.transition=null;var o=Me;Me=1;var a=we;we|=4,nv.current=null,TO(n,t),aC(t,n),eO(cm),td=!!hm,cm=hm=null,n.current=t,kO(t),s4(),we=a,Me=o,Rn.transition=s}else n.current=t;if(Hh&&(Hh=!1,Pi=n,vd=i),s=n.pendingLanes,s===0&&(Ni=null),l4(t.stateNode),dn(n,pt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(md)throw md=!1,n=Am,Am=null,n;return vd&1&&n.tag!==0&&Uo(),s=n.pendingLanes,s&1?n===Im?wl++:(wl=0,Im=n):wl=0,Hi(),null}function Uo(){if(Pi!==null){var n=Ww(vd),e=Rn.transition,t=Me;try{if(Rn.transition=null,Me=16>n?16:n,Pi===null)var r=!1;else{if(n=Pi,Pi=null,vd=0,we&6)throw Error(W(331));var i=we;for(we|=4,Q=n.current;Q!==null;){var s=Q,o=s.child;if(Q.flags&16){var a=s.deletions;if(a!==null){for(var h=0;h<a.length;h++){var c=a[h];for(Q=c;Q!==null;){var l=Q;switch(l.tag){case 0:case 11:case 15:bl(8,l,s)}var d=l.child;if(d!==null)d.return=l,Q=d;else for(;Q!==null;){l=Q;var u=l.sibling,f=l.return;if(iC(l),l===c){Q=null;break}if(u!==null){u.return=f,Q=u;break}Q=f}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Q=o;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:bl(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Q=v;break e}Q=s.return}}var b=n.current;for(Q=b;Q!==null;){o=Q;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Q=w;else e:for(o=b;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:cp(9,a)}}catch(O){lt(a,a.return,O)}if(a===o){Q=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,Q=C;break e}Q=a.return}}if(we=i,Hi(),Sr&&typeof Sr.onPostCommitFiberRoot=="function")try{Sr.onPostCommitFiberRoot(np,n)}catch{}r=!0}return r}finally{Me=t,Rn.transition=e}}return!1}function O1(n,e,t){e=ea(t,e),e=WS(n,e,1),n=Mi(n,e,1),e=en(),n!==null&&(eh(n,1,e),dn(n,e))}function lt(n,e,t){if(n.tag===3)O1(n,n,t);else for(;e!==null;){if(e.tag===3){O1(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ni===null||!Ni.has(r))){n=ea(t,n),n=XS(e,n,1),e=Mi(e,n,1),n=en(),e!==null&&(eh(e,1,n),dn(e,n));break}}e=e.return}}function $O(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=en(),n.pingedLanes|=n.suspendedLanes&t,It===n&&($t&t)===t&&(xt===4||xt===3&&($t&130023424)===$t&&500>pt()-iv?xs(n,0):rv|=t),dn(n,e)}function fC(n,e){e===0&&(n.mode&1?(e=$h,$h<<=1,!($h&130023424)&&($h=4194304)):e=1);var t=en();n=Zr(n,e),n!==null&&(eh(n,e,t),dn(n,t))}function RO(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),fC(n,t)}function FO(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),fC(n,t)}var gC;gC=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||hn.current)ln=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return ln=!1,xO(n,e,t);ln=!!(n.flags&131072)}else ln=!1,qe&&e.flags&1048576&&bS(e,ld,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fc(n,e),n=e.pendingProps;var i=qo(e,Wt.current);zo(e,t),i=Z0(null,e,r,n,i,t);var s=Q0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,cn(r)?(s=!0,od(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,K0(e),i.updater=hp,e.stateNode=i,i._reactInternals=e,bm(e,r,n,t),e=Sm(null,e,r,!0,s,t)):(e.tag=0,qe&&s&&j0(e),Qt(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Fc(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=jO(r),n=Zn(r,n),i){case 0:e=wm(null,e,r,n,t);break e;case 1:e=g1(null,e,r,n,t);break e;case 11:e=p1(null,e,r,n,t);break e;case 14:e=f1(null,e,r,Zn(r.type,n),t);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),wm(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),g1(n,e,r,i,t);case 3:e:{if(QS(e),n===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,OS(n,e),dd(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ea(Error(W(423)),e),e=m1(n,e,r,t,i);break e}else if(r!==i){i=ea(Error(W(424)),e),e=m1(n,e,r,t,i);break e}else for(bn=Ii(e.stateNode.containerInfo.firstChild),wn=e,qe=!0,er=null,t=CS(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Zo(),r===i){e=Qr(n,e,t);break e}Qt(n,e,r,t)}e=e.child}return e;case 5:return PS(e),n===null&&mm(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,dm(r,i)?o=null:s!==null&&dm(r,s)&&(e.flags|=32),ZS(n,e),Qt(n,e,o,t),e.child;case 6:return n===null&&mm(e),null;case 13:return JS(n,e,t);case 4:return W0(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Qo(e,null,r,t):Qt(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),p1(n,e,r,i,t);case 7:return Qt(n,e,e.pendingProps,t),e.child;case 8:return Qt(n,e,e.pendingProps.children,t),e.child;case 12:return Qt(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ve(hd,r._currentValue),r._currentValue=o,s!==null)if(lr(s.value,o)){if(s.children===i.children&&!hn.current){e=Qr(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var h=a.firstContext;h!==null;){if(h.context===r){if(s.tag===1){h=Kr(-1,t&-t),h.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var l=c.pending;l===null?h.next=h:(h.next=l.next,l.next=h),c.pending=h}}s.lanes|=t,h=s.alternate,h!==null&&(h.lanes|=t),vm(s.return,t,e),a.lanes|=t;break}h=h.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),vm(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Qt(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,zo(e,t),i=Fn(i),r=r(i),e.flags|=1,Qt(n,e,r,t),e.child;case 14:return r=e.type,i=Zn(r,e.pendingProps),i=Zn(r.type,i),f1(n,e,r,i,t);case 15:return YS(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),Fc(n,e),e.tag=1,cn(r)?(n=!0,od(e)):n=!1,zo(e,t),KS(e,r,i),bm(e,r,i,t),Sm(null,e,r,!0,n,t);case 19:return eC(n,e,t);case 22:return qS(n,e,t)}throw Error(W(156,e.tag))};function mC(n,e){return Uw(n,e)}function LO(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(n,e,t,r){return new LO(n,e,t,r)}function lv(n){return n=n.prototype,!(!n||!n.isReactComponent)}function jO(n){if(typeof n=="function")return lv(n)?1:0;if(n!=null){if(n=n.$$typeof,n===E0)return 11;if(n===T0)return 14}return 2}function $i(n,e){var t=n.alternate;return t===null?(t=$n(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Bc(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")lv(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Oo:return Os(t.children,i,s,e);case P0:o=8,i|=8;break;case Ug:return n=$n(12,t,e,i|2),n.elementType=Ug,n.lanes=s,n;case Vg:return n=$n(13,t,e,i),n.elementType=Vg,n.lanes=s,n;case Hg:return n=$n(19,t,e,i),n.elementType=Hg,n.lanes=s,n;case Pw:return up(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case xw:o=10;break e;case Ow:o=9;break e;case E0:o=11;break e;case T0:o=14;break e;case _i:o=16,r=null;break e}throw Error(W(130,n==null?n:typeof n,""))}return e=$n(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Os(n,e,t,r){return n=$n(7,n,r,e),n.lanes=t,n}function up(n,e,t,r){return n=$n(22,n,r,e),n.elementType=Pw,n.lanes=t,n.stateNode={isHidden:!1},n}function Ef(n,e,t){return n=$n(6,n,null,e),n.lanes=t,n}function Tf(n,e,t){return e=$n(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function BO(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lf(0),this.expirationTimes=lf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function hv(n,e,t,r,i,s,o,a,h){return n=new BO(n,e,t,a,h),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$n(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},K0(s),n}function GO(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xo,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function vC(n){if(!n)return Bi;n=n._reactInternals;e:{if(Hs(n)!==n||n.tag!==1)throw Error(W(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(n.tag===1){var t=n.type;if(cn(t))return vS(n,t,e)}return e}function yC(n,e,t,r,i,s,o,a,h){return n=hv(t,r,!0,n,i,s,o,a,h),n.context=vC(null),t=n.current,r=en(),i=Di(t),s=Kr(r,i),s.callback=e??null,Mi(t,s,i),n.current.lanes=i,eh(n,i,r),dn(n,r),n}function pp(n,e,t,r){var i=e.current,s=en(),o=Di(i);return t=vC(t),e.context===null?e.context=t:e.pendingContext=t,e=Kr(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Mi(i,e,o),n!==null&&(ar(n,i,o,s),Dc(n,i,o)),o}function bd(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function P1(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function cv(n,e){P1(n,e),(n=n.alternate)&&P1(n,e)}function zO(){return null}var bC=typeof reportError=="function"?reportError:function(n){console.error(n)};function dv(n){this._internalRoot=n}fp.prototype.render=dv.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(W(409));pp(n,e,null,null)};fp.prototype.unmount=dv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;$s(function(){pp(null,n,null,null)}),e[qr]=null}};function fp(n){this._internalRoot=n}fp.prototype.unstable_scheduleHydration=function(n){if(n){var e=qw();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ci.length&&e!==0&&e<Ci[t].priority;t++);Ci.splice(t,0,n),t===0&&Qw(n)}};function uv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function gp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function E1(){}function UO(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=bd(o);s.call(c)}}var o=yC(e,r,n,0,null,!1,!1,"",E1);return n._reactRootContainer=o,n[qr]=o.current,Dl(n.nodeType===8?n.parentNode:n),$s(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=bd(h);a.call(c)}}var h=hv(n,0,!1,null,null,!1,!1,"",E1);return n._reactRootContainer=h,n[qr]=h.current,Dl(n.nodeType===8?n.parentNode:n),$s(function(){pp(e,h,t,r)}),h}function mp(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var h=bd(o);a.call(h)}}pp(e,o,n,i)}else o=UO(t,e,n,i,r);return bd(o)}Xw=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=ol(e.pendingLanes);t!==0&&(I0(e,t|1),dn(e,pt()),!(we&6)&&(ta=pt()+500,Hi()))}break;case 13:$s(function(){var r=Zr(n,1);if(r!==null){var i=en();ar(r,n,1,i)}}),cv(n,1)}};M0=function(n){if(n.tag===13){var e=Zr(n,134217728);if(e!==null){var t=en();ar(e,n,134217728,t)}cv(n,134217728)}};Yw=function(n){if(n.tag===13){var e=Di(n),t=Zr(n,e);if(t!==null){var r=en();ar(t,n,e,r)}cv(n,e)}};qw=function(){return Me};Zw=function(n,e){var t=Me;try{return Me=n,e()}finally{Me=t}};tm=function(n,e,t){switch(e){case"input":if(Xg(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=op(r);if(!i)throw Error(W(90));Tw(r),Xg(r,i)}}}break;case"textarea":Aw(n,t);break;case"select":e=t.value,e!=null&&Lo(n,!!t.multiple,e,!1)}};Fw=sv;Lw=$s;var VO={usingClientEntryPoint:!1,Events:[nh,ko,op,$w,Rw,sv]},Ba={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HO={bundleType:Ba.bundleType,version:Ba.version,rendererPackageName:Ba.rendererPackageName,rendererConfig:Ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ei.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Gw(n),n===null?null:n.stateNode},findFiberByHostInstance:Ba.findFiberByHostInstance||zO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kh.isDisabled&&Kh.supportsFiber)try{np=Kh.inject(HO),Sr=Kh}catch{}}Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VO;Pn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uv(e))throw Error(W(200));return GO(n,e,null,t)};Pn.createRoot=function(n,e){if(!uv(n))throw Error(W(299));var t=!1,r="",i=bC;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=hv(n,1,!1,null,null,t,!1,r,i),n[qr]=e.current,Dl(n.nodeType===8?n.parentNode:n),new dv(e)};Pn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(W(188)):(n=Object.keys(n).join(","),Error(W(268,n)));return n=Gw(e),n=n===null?null:n.stateNode,n};Pn.flushSync=function(n){return $s(n)};Pn.hydrate=function(n,e,t){if(!gp(e))throw Error(W(200));return mp(null,n,e,!0,t)};Pn.hydrateRoot=function(n,e,t){if(!uv(n))throw Error(W(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=bC;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=yC(e,null,n,1,t??null,i,!1,s,o),n[qr]=e.current,Dl(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new fp(e)};Pn.render=function(n,e,t){if(!gp(e))throw Error(W(200));return mp(null,n,e,!1,t)};Pn.unmountComponentAtNode=function(n){if(!gp(n))throw Error(W(40));return n._reactRootContainer?($s(function(){mp(null,null,n,!1,function(){n._reactRootContainer=null,n[qr]=null})}),!0):!1};Pn.unstable_batchedUpdates=sv;Pn.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!gp(t))throw Error(W(200));if(n==null||n._reactInternals===void 0)throw Error(W(38));return mp(n,e,t,!1,r)};Pn.version="18.3.1-next-f1338f8080-20240426";function _C(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_C)}catch(n){console.error(n)}}_C(),_w.exports=Pn;var ih=_w.exports;const nr=Ge(ih);var wC,T1=ih;wC=T1.createRoot,T1.hydrateRoot;function KO(){}var WO=KO;const Y=Ge(WO);var XO=Array.isArray,fn=XO;const YO=Ge(fn);var qO=typeof kh=="object"&&kh&&kh.Object===Object&&kh,SC=qO,ZO=SC,QO=typeof self=="object"&&self&&self.Object===Object&&self,JO=ZO||QO||Function("return this")(),hr=JO,eP=hr,tP=eP.Symbol,ya=tP,k1=ya,CC=Object.prototype,nP=CC.hasOwnProperty,rP=CC.toString,Ga=k1?k1.toStringTag:void 0;function iP(n){var e=nP.call(n,Ga),t=n[Ga];try{n[Ga]=void 0;var r=!0}catch{}var i=rP.call(n);return r&&(e?n[Ga]=t:delete n[Ga]),i}var sP=iP,oP=Object.prototype,aP=oP.toString;function lP(n){return aP.call(n)}var hP=lP,A1=ya,cP=sP,dP=hP,uP="[object Null]",pP="[object Undefined]",I1=A1?A1.toStringTag:void 0;function fP(n){return n==null?n===void 0?pP:uP:I1&&I1 in Object(n)?cP(n):dP(n)}var Ki=fP;function gP(n){return n!=null&&typeof n=="object"}var cr=gP,mP=Ki,vP=cr,yP="[object Symbol]";function bP(n){return typeof n=="symbol"||vP(n)&&mP(n)==yP}var vp=bP,_P=fn,wP=vp,SP=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,CP=/^\w*$/;function xP(n,e){if(_P(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||wP(n)?!0:CP.test(n)||!SP.test(n)||e!=null&&n in Object(e)}var OP=xP;function PP(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Bn=PP,EP=Ki,TP=Bn,kP="[object AsyncFunction]",AP="[object Function]",IP="[object GeneratorFunction]",MP="[object Proxy]";function NP(n){if(!TP(n))return!1;var e=EP(n);return e==AP||e==IP||e==kP||e==MP}var yp=NP;const Ht=Ge(yp);var DP=hr,$P=DP["__core-js_shared__"],RP=$P,kf=RP,M1=function(){var n=/[^.]+$/.exec(kf&&kf.keys&&kf.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function FP(n){return!!M1&&M1 in n}var LP=FP,jP=Function.prototype,BP=jP.toString;function GP(n){if(n!=null){try{return BP.call(n)}catch{}try{return n+""}catch{}}return""}var xC=GP,zP=yp,UP=LP,VP=Bn,HP=xC,KP=/[\\^$.*+?()[\]{}|]/g,WP=/^\[object .+?Constructor\]$/,XP=Function.prototype,YP=Object.prototype,qP=XP.toString,ZP=YP.hasOwnProperty,QP=RegExp("^"+qP.call(ZP).replace(KP,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function JP(n){if(!VP(n)||UP(n))return!1;var e=zP(n)?QP:WP;return e.test(HP(n))}var eE=JP;function tE(n,e){return n==null?void 0:n[e]}var nE=tE,rE=eE,iE=nE;function sE(n,e){var t=iE(n,e);return rE(t)?t:void 0}var Ks=sE,oE=Ks,aE=oE(Object,"create"),bp=aE,N1=bp;function lE(){this.__data__=N1?N1(null):{},this.size=0}var hE=lE;function cE(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var dE=cE,uE=bp,pE="__lodash_hash_undefined__",fE=Object.prototype,gE=fE.hasOwnProperty;function mE(n){var e=this.__data__;if(uE){var t=e[n];return t===pE?void 0:t}return gE.call(e,n)?e[n]:void 0}var vE=mE,yE=bp,bE=Object.prototype,_E=bE.hasOwnProperty;function wE(n){var e=this.__data__;return yE?e[n]!==void 0:_E.call(e,n)}var SE=wE,CE=bp,xE="__lodash_hash_undefined__";function OE(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=CE&&e===void 0?xE:e,this}var PE=OE,EE=hE,TE=dE,kE=vE,AE=SE,IE=PE;function ba(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ba.prototype.clear=EE;ba.prototype.delete=TE;ba.prototype.get=kE;ba.prototype.has=AE;ba.prototype.set=IE;var ME=ba;function NE(){this.__data__=[],this.size=0}var DE=NE;function $E(n,e){return n===e||n!==n&&e!==e}var sh=$E,RE=sh;function FE(n,e){for(var t=n.length;t--;)if(RE(n[t][0],e))return t;return-1}var _p=FE,LE=_p,jE=Array.prototype,BE=jE.splice;function GE(n){var e=this.__data__,t=LE(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():BE.call(e,t,1),--this.size,!0}var zE=GE,UE=_p;function VE(n){var e=this.__data__,t=UE(e,n);return t<0?void 0:e[t][1]}var HE=VE,KE=_p;function WE(n){return KE(this.__data__,n)>-1}var XE=WE,YE=_p;function qE(n,e){var t=this.__data__,r=YE(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}var ZE=qE,QE=DE,JE=zE,eT=HE,tT=XE,nT=ZE;function _a(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}_a.prototype.clear=QE;_a.prototype.delete=JE;_a.prototype.get=eT;_a.prototype.has=tT;_a.prototype.set=nT;var wp=_a,rT=Ks,iT=hr,sT=rT(iT,"Map"),pv=sT,D1=ME,oT=wp,aT=pv;function lT(){this.size=0,this.__data__={hash:new D1,map:new(aT||oT),string:new D1}}var hT=lT;function cT(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var dT=cT,uT=dT;function pT(n,e){var t=n.__data__;return uT(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Sp=pT,fT=Sp;function gT(n){var e=fT(this,n).delete(n);return this.size-=e?1:0,e}var mT=gT,vT=Sp;function yT(n){return vT(this,n).get(n)}var bT=yT,_T=Sp;function wT(n){return _T(this,n).has(n)}var ST=wT,CT=Sp;function xT(n,e){var t=CT(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}var OT=xT,PT=hT,ET=mT,TT=bT,kT=ST,AT=OT;function wa(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}wa.prototype.clear=PT;wa.prototype.delete=ET;wa.prototype.get=TT;wa.prototype.has=kT;wa.prototype.set=AT;var fv=wa,OC=fv,IT="Expected a function";function gv(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(IT);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var o=n.apply(this,r);return t.cache=s.set(i,o)||s,o};return t.cache=new(gv.Cache||OC),t}gv.Cache=OC;var MT=gv,NT=MT,DT=500;function $T(n){var e=NT(n,function(r){return t.size===DT&&t.clear(),r}),t=e.cache;return e}var RT=$T,FT=RT,LT=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jT=/\\(\\)?/g,BT=FT(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(LT,function(t,r,i,s){e.push(i?s.replace(jT,"$1"):r||t)}),e}),GT=BT;function zT(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var mv=zT,$1=ya,UT=mv,VT=fn,HT=vp,KT=1/0,R1=$1?$1.prototype:void 0,F1=R1?R1.toString:void 0;function PC(n){if(typeof n=="string")return n;if(VT(n))return UT(n,PC)+"";if(HT(n))return F1?F1.call(n):"";var e=n+"";return e=="0"&&1/n==-KT?"-0":e}var WT=PC,XT=WT;function YT(n){return n==null?"":XT(n)}var EC=YT;const eo=Ge(EC);var qT=fn,ZT=OP,QT=GT,JT=EC;function e6(n,e){return qT(n)?n:ZT(n,e)?[n]:QT(JT(n))}var Sa=e6,t6=vp,n6=1/0;function r6(n){if(typeof n=="string"||t6(n))return n;var e=n+"";return e=="0"&&1/n==-n6?"-0":e}var Cp=r6,i6=Sa,s6=Cp;function o6(n,e){e=i6(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[s6(e[t++])];return t&&t==r?n:void 0}var vv=o6,a6=vv;function l6(n,e,t){var r=n==null?void 0:a6(n,e);return r===void 0?t:r}var h6=l6;const oe=Ge(h6),TC=function(n){if(oe(process,"env.NODE_ENV")==="development"){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];console.log(n,...t)}};class ze{static get cssClasses(){return{}}static get strings(){return{}}static get numbers(){return{}}static get defaultAdapter(){return{getProp:Y,getProps:Y,getState:Y,getStates:Y,setState:Y,getContext:Y,getContexts:Y,getCache:Y,setCache:Y,getCaches:Y,stopPropagation:Y,persistEvent:Y}}constructor(e){this._adapter=Object.assign(Object.assign({},ze.defaultAdapter),e)}getProp(e){return this._adapter.getProp(e)}getProps(){return this._adapter.getProps()}getState(e){return this._adapter.getState(e)}getStates(){return this._adapter.getStates()}setState(e,t){return this._adapter.setState(Object.assign({},e),t)}getContext(e){return this._adapter.getContext(e)}getContexts(){return this._adapter.getContexts()}getCaches(){return this._adapter.getCaches()}getCache(e){return this._adapter.getCache(e)}setCache(e,t){return e&&this._adapter.setCache(e,t)}stopPropagation(e){this._adapter.stopPropagation(e)}_isControlledComponent(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"value";const t=this.getProps();return e in t}_isInProps(e){const t=this.getProps();return e in t}init(e){}destroy(){}log(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];TC(e,...r)}_persistEvent(e){this._adapter.persistEvent(e)}}function Ca(n){return Object.keys(n).reduce((e,t)=>(t.substr(0,5)==="data-"&&(e[t]=n[t]),e),{})}const{hasOwnProperty:c6}=Object.prototype;class Ee extends G.Component{constructor(e){super(e),this.isControlled=t=>!!(t&&this.props&&typeof this.props=="object"&&c6.call(this.props,t)),this.setStateAsync=t=>new Promise(r=>{this.setState(t,r)}),this.cache={},this.foundation=null}componentDidMount(){this.foundation&&typeof this.foundation.init=="function"&&this.foundation.init()}componentWillUnmount(){this.foundation&&typeof this.foundation.destroy=="function"&&this.foundation.destroy(),this.cache={}}get adapter(){return{getContext:e=>{if(this.context&&e)return this.context[e]},getContexts:()=>this.context,getProp:e=>this.props[e],getProps:()=>this.props,getState:e=>this.state[e],getStates:()=>this.state,setState:(e,t)=>this.setState(Object.assign({},e),t),getCache:e=>e&&this.cache[e],getCaches:()=>this.cache,setCache:(e,t)=>e&&(this.cache[e]=t),stopPropagation:e=>{try{e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation()}catch{}},persistEvent:e=>{e&&e.persist&&typeof e.persist=="function"&&e.persist()}}}log(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return TC(e,...r)}getDataAttr(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return Ca(e)}}Ee.propTypes={};Ee.defaultProps={};var d6=hr,u6=function(){return d6.Date.now()},p6=u6,f6=/\s/;function g6(n){for(var e=n.length;e--&&f6.test(n.charAt(e)););return e}var m6=g6,v6=m6,y6=/^\s+/;function b6(n){return n&&n.slice(0,v6(n)+1).replace(y6,"")}var _6=b6,w6=_6,L1=Bn,S6=vp,j1=NaN,C6=/^[-+]0x[0-9a-f]+$/i,x6=/^0b[01]+$/i,O6=/^0o[0-7]+$/i,P6=parseInt;function E6(n){if(typeof n=="number")return n;if(S6(n))return j1;if(L1(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=L1(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=w6(n);var t=x6.test(n);return t||O6.test(n)?P6(n.slice(2),t?2:8):C6.test(n)?j1:+n}var yv=E6;const za=Ge(yv);var T6=Bn,Af=p6,B1=yv,k6="Expected a function",A6=Math.max,I6=Math.min;function M6(n,e,t){var r,i,s,o,a,h,c=0,l=!1,d=!1,u=!0;if(typeof n!="function")throw new TypeError(k6);e=B1(e)||0,T6(t)&&(l=!!t.leading,d="maxWait"in t,s=d?A6(B1(t.maxWait)||0,e):s,u="trailing"in t?!!t.trailing:u);function f(x){var P=r,T=i;return r=i=void 0,c=x,o=n.apply(T,P),o}function m(x){return c=x,a=setTimeout(v,e),l?f(x):o}function g(x){var P=x-h,T=x-c,k=e-P;return d?I6(k,s-T):k}function y(x){var P=x-h,T=x-c;return h===void 0||P>=e||P<0||d&&T>=s}function v(){var x=Af();if(y(x))return b(x);a=setTimeout(v,g(x))}function b(x){return a=void 0,u&&r?f(x):(r=i=void 0,o)}function w(){a!==void 0&&clearTimeout(a),c=0,r=h=i=a=void 0}function C(){return a===void 0?o:b(Af())}function O(){var x=Af(),P=y(x);if(r=arguments,i=this,h=x,P){if(a===void 0)return m(h);if(d)return clearTimeout(a),a=setTimeout(v,e),f(h)}return a===void 0&&(a=setTimeout(v,e)),o}return O.cancel=w,O.flush=C,O}var N6=M6,D6=N6,$6=Bn,R6="Expected a function";function F6(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new TypeError(R6);return $6(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),D6(n,e,{leading:r,maxWait:e,trailing:i})}var L6=F6;const G1=Ge(L6);var kC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(kC);var j6=kC.exports;const L=Ge(j6);var AC={exports:{}},B6="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",G6=B6,z6=G6;function IC(){}function MC(){}MC.resetWarningCache=IC;var U6=function(){function n(r,i,s,o,a,h){if(h!==z6){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:MC,resetWarningCache:IC};return t.PropTypes=t,t};AC.exports=U6();var V6=AC.exports;const p=Ge(V6),te="semi",H6=["default","error","warning","success"],xp={PREFIX:`${te}-typography`},Kt={WEIGHT:["light","regular","medium","semibold","bold","default"],TYPE:["primary","secondary","danger","warning","success","tertiary","quaternary"],SIZE:["normal","small","inherit"],SPACING:["normal","extended"],HEADING:[1,2,3,4,5,6],RULE:["text","numbers","bytes-decimal","bytes-binary","percentages","exponential"],TRUNCATE:["ceil","floor","round"]};var K6=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const W6=xp.PREFIX;let Op=class extends G.PureComponent{render(){const e=this.props,{component:t,className:r,children:i,forwardRef:s}=e,o=K6(e,["component","className","children","forwardRef"]),a=t,h=L(W6,r);return _.createElement(a,Object.assign({className:h,ref:s},o),i)}};Op.defaultProps={component:"article",style:{},className:""};Op.propTypes={component:p.string,style:p.object,className:p.string};function X6(n){return n===null}var Y6=X6;const q6=Ge(Y6);var Z6=Ki,Q6=fn,J6=cr,e9="[object String]";function t9(n){return typeof n=="string"||!Q6(n)&&J6(n)&&Z6(n)==e9}var n9=t9;const vt=Ge(n9);var r9=wp;function i9(){this.__data__=new r9,this.size=0}var s9=i9;function o9(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var a9=o9;function l9(n){return this.__data__.get(n)}var h9=l9;function c9(n){return this.__data__.has(n)}var d9=c9,u9=wp,p9=pv,f9=fv,g9=200;function m9(n,e){var t=this.__data__;if(t instanceof u9){var r=t.__data__;if(!p9||r.length<g9-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new f9(r)}return t.set(n,e),this.size=t.size,this}var v9=m9,y9=wp,b9=s9,_9=a9,w9=h9,S9=d9,C9=v9;function xa(n){var e=this.__data__=new y9(n);this.size=e.size}xa.prototype.clear=b9;xa.prototype.delete=_9;xa.prototype.get=w9;xa.prototype.has=S9;xa.prototype.set=C9;var bv=xa,x9=Ks,O9=function(){try{var n=x9(Object,"defineProperty");return n({},"",{}),n}catch{}}(),NC=O9,z1=NC;function P9(n,e,t){e=="__proto__"&&z1?z1(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var _v=P9,E9=_v,T9=sh;function k9(n,e,t){(t!==void 0&&!T9(n[e],t)||t===void 0&&!(e in n))&&E9(n,e,t)}var DC=k9;function A9(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var h=o[n?a:++i];if(t(s[h],h,s)===!1)break}return e}}var I9=A9,M9=I9,N9=M9(),$C=N9,_d={exports:{}};_d.exports;(function(n,e){var t=hr,r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,o=s?t.Buffer:void 0,a=o?o.allocUnsafe:void 0;function h(c,l){if(l)return c.slice();var d=c.length,u=a?a(d):new c.constructor(d);return c.copy(u),u}n.exports=h})(_d,_d.exports);var RC=_d.exports,D9=hr,$9=D9.Uint8Array,FC=$9,U1=FC;function R9(n){var e=new n.constructor(n.byteLength);return new U1(e).set(new U1(n)),e}var wv=R9,F9=wv;function L9(n,e){var t=e?F9(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var LC=L9;function j9(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var jC=j9,B9=Bn,V1=Object.create,G9=function(){function n(){}return function(e){if(!B9(e))return{};if(V1)return V1(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}(),z9=G9;function U9(n,e){return function(t){return n(e(t))}}var BC=U9,V9=BC,H9=V9(Object.getPrototypeOf,Object),Sv=H9,K9=Object.prototype;function W9(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||K9;return n===t}var Pp=W9,X9=z9,Y9=Sv,q9=Pp;function Z9(n){return typeof n.constructor=="function"&&!q9(n)?X9(Y9(n)):{}}var GC=Z9,Q9=Ki,J9=cr,e8="[object Arguments]";function t8(n){return J9(n)&&Q9(n)==e8}var n8=t8,H1=n8,r8=cr,zC=Object.prototype,i8=zC.hasOwnProperty,s8=zC.propertyIsEnumerable,o8=H1(function(){return arguments}())?H1:function(n){return r8(n)&&i8.call(n,"callee")&&!s8.call(n,"callee")},oh=o8,a8=9007199254740991;function l8(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=a8}var Cv=l8,h8=yp,c8=Cv;function d8(n){return n!=null&&c8(n.length)&&!h8(n)}var Oa=d8,u8=Oa,p8=cr;function f8(n){return p8(n)&&u8(n)}var UC=f8,wd={exports:{}};function g8(){return!1}var m8=g8;wd.exports;(function(n,e){var t=hr,r=m8,i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,o=s&&s.exports===i,a=o?t.Buffer:void 0,h=a?a.isBuffer:void 0,c=h||r;n.exports=c})(wd,wd.exports);var ah=wd.exports,v8=Ki,y8=Sv,b8=cr,_8="[object Object]",w8=Function.prototype,S8=Object.prototype,VC=w8.toString,C8=S8.hasOwnProperty,x8=VC.call(Object);function O8(n){if(!b8(n)||v8(n)!=_8)return!1;var e=y8(n);if(e===null)return!0;var t=C8.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&VC.call(t)==x8}var HC=O8,P8=Ki,E8=Cv,T8=cr,k8="[object Arguments]",A8="[object Array]",I8="[object Boolean]",M8="[object Date]",N8="[object Error]",D8="[object Function]",$8="[object Map]",R8="[object Number]",F8="[object Object]",L8="[object RegExp]",j8="[object Set]",B8="[object String]",G8="[object WeakMap]",z8="[object ArrayBuffer]",U8="[object DataView]",V8="[object Float32Array]",H8="[object Float64Array]",K8="[object Int8Array]",W8="[object Int16Array]",X8="[object Int32Array]",Y8="[object Uint8Array]",q8="[object Uint8ClampedArray]",Z8="[object Uint16Array]",Q8="[object Uint32Array]",We={};We[V8]=We[H8]=We[K8]=We[W8]=We[X8]=We[Y8]=We[q8]=We[Z8]=We[Q8]=!0;We[k8]=We[A8]=We[z8]=We[I8]=We[U8]=We[M8]=We[N8]=We[D8]=We[$8]=We[R8]=We[F8]=We[L8]=We[j8]=We[B8]=We[G8]=!1;function J8(n){return T8(n)&&E8(n.length)&&!!We[P8(n)]}var ek=J8;function tk(n){return function(e){return n(e)}}var Ep=tk,Sd={exports:{}};Sd.exports;(function(n,e){var t=SC,r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,o=s&&t.process,a=function(){try{var h=i&&i.require&&i.require("util").types;return h||o&&o.binding&&o.binding("util")}catch{}}();n.exports=a})(Sd,Sd.exports);var xv=Sd.exports,nk=ek,rk=Ep,K1=xv,W1=K1&&K1.isTypedArray,ik=W1?rk(W1):nk,Tp=ik;function sk(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var KC=sk,ok=_v,ak=sh,lk=Object.prototype,hk=lk.hasOwnProperty;function ck(n,e,t){var r=n[e];(!(hk.call(n,e)&&ak(r,t))||t===void 0&&!(e in n))&&ok(n,e,t)}var Ov=ck,dk=Ov,uk=_v;function pk(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],h=r?r(t[a],n[a],a,t,n):void 0;h===void 0&&(h=n[a]),i?uk(t,a,h):dk(t,a,h)}return t}var Pa=pk;function fk(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var WC=fk,gk=9007199254740991,mk=/^(?:0|[1-9]\d*)$/;function vk(n,e){var t=typeof n;return e=e??gk,!!e&&(t=="number"||t!="symbol"&&mk.test(n))&&n>-1&&n%1==0&&n<e}var kp=vk,yk=WC,bk=oh,_k=fn,wk=ah,Sk=kp,Ck=Tp,xk=Object.prototype,Ok=xk.hasOwnProperty;function Pk(n,e){var t=_k(n),r=!t&&bk(n),i=!t&&!r&&wk(n),s=!t&&!r&&!i&&Ck(n),o=t||r||i||s,a=o?yk(n.length,String):[],h=a.length;for(var c in n)(e||Ok.call(n,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Sk(c,h)))&&a.push(c);return a}var XC=Pk;function Ek(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var Tk=Ek,kk=Bn,Ak=Pp,Ik=Tk,Mk=Object.prototype,Nk=Mk.hasOwnProperty;function Dk(n){if(!kk(n))return Ik(n);var e=Ak(n),t=[];for(var r in n)r=="constructor"&&(e||!Nk.call(n,r))||t.push(r);return t}var $k=Dk,Rk=XC,Fk=$k,Lk=Oa;function jk(n){return Lk(n)?Rk(n,!0):Fk(n)}var lh=jk,Bk=Pa,Gk=lh;function zk(n){return Bk(n,Gk(n))}var Uk=zk,X1=DC,Vk=RC,Hk=LC,Kk=jC,Wk=GC,Y1=oh,q1=fn,Xk=UC,Yk=ah,qk=yp,Zk=Bn,Qk=HC,Jk=Tp,Z1=KC,eA=Uk;function tA(n,e,t,r,i,s,o){var a=Z1(n,t),h=Z1(e,t),c=o.get(h);if(c){X1(n,t,c);return}var l=s?s(a,h,t+"",n,e,o):void 0,d=l===void 0;if(d){var u=q1(h),f=!u&&Yk(h),m=!u&&!f&&Jk(h);l=h,u||f||m?q1(a)?l=a:Xk(a)?l=Kk(a):f?(d=!1,l=Vk(h,!0)):m?(d=!1,l=Hk(h,!0)):l=[]:Qk(h)||Y1(h)?(l=a,Y1(a)?l=eA(a):(!Zk(a)||qk(a))&&(l=Wk(h))):d=!1}d&&(o.set(h,l),i(l,h,r,s,o),o.delete(h)),X1(n,t,l)}var nA=tA,rA=bv,iA=DC,sA=$C,oA=nA,aA=Bn,lA=lh,hA=KC;function YC(n,e,t,r,i){n!==e&&sA(e,function(s,o){if(i||(i=new rA),aA(s))oA(n,e,o,t,YC,r,i);else{var a=r?r(hA(n,o),s,o+"",n,e,i):void 0;a===void 0&&(a=s),iA(n,o,a)}},lA)}var cA=YC;function dA(n){return n}var Pv=dA;function uA(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var pA=uA,fA=pA,Q1=Math.max;function gA(n,e,t){return e=Q1(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,s=Q1(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(o),fA(n,this,a)}}var qC=gA;function mA(n){return function(){return n}}var vA=mA,yA=vA,J1=NC,bA=Pv,_A=J1?function(n,e){return J1(n,"toString",{configurable:!0,enumerable:!1,value:yA(e),writable:!0})}:bA,wA=_A,SA=800,CA=16,xA=Date.now;function OA(n){var e=0,t=0;return function(){var r=xA(),i=CA-(r-t);if(t=r,i>0){if(++e>=SA)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var PA=OA,EA=wA,TA=PA,kA=TA(EA),ZC=kA,AA=Pv,IA=qC,MA=ZC;function NA(n,e){return MA(IA(n,e,AA),n+"")}var QC=NA,DA=sh,$A=Oa,RA=kp,FA=Bn;function LA(n,e,t){if(!FA(t))return!1;var r=typeof e;return(r=="number"?$A(t)&&RA(e,t.length):r=="string"&&e in t)?DA(t[e],n):!1}var jA=LA,BA=QC,GA=jA;function zA(n){return BA(function(e,t){var r=-1,i=t.length,s=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(i--,s):void 0,o&&GA(t[0],t[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=t[r];a&&n(e,a,r,s)}return e})}var UA=zA,VA=cA,HA=UA,KA=HA(function(n,e,t){VA(n,e,t)}),WA=KA;const XA=Ge(WA);function YA(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var JC=YA,qA=BC,ZA=qA(Object.keys,Object),QA=ZA,JA=Pp,eI=QA,tI=Object.prototype,nI=tI.hasOwnProperty;function rI(n){if(!JA(n))return eI(n);var e=[];for(var t in Object(n))nI.call(n,t)&&t!="constructor"&&e.push(t);return e}var ex=rI,iI=XC,sI=ex,oI=Oa;function aI(n){return oI(n)?iI(n):sI(n)}var Ap=aI,lI=Pa,hI=Ap;function cI(n,e){return n&&lI(e,hI(e),n)}var dI=cI,uI=Pa,pI=lh;function fI(n,e){return n&&uI(e,pI(e),n)}var gI=fI;function mI(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}var vI=mI;function yI(){return[]}var tx=yI,bI=vI,_I=tx,wI=Object.prototype,SI=wI.propertyIsEnumerable,eb=Object.getOwnPropertySymbols,CI=eb?function(n){return n==null?[]:(n=Object(n),bI(eb(n),function(e){return SI.call(n,e)}))}:_I,Ev=CI,xI=Pa,OI=Ev;function PI(n,e){return xI(n,OI(n),e)}var EI=PI;function TI(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var Tv=TI,kI=Tv,AI=Sv,II=Ev,MI=tx,NI=Object.getOwnPropertySymbols,DI=NI?function(n){for(var e=[];n;)kI(e,II(n)),n=AI(n);return e}:MI,nx=DI,$I=Pa,RI=nx;function FI(n,e){return $I(n,RI(n),e)}var LI=FI,jI=Tv,BI=fn;function GI(n,e,t){var r=e(n);return BI(n)?r:jI(r,t(n))}var rx=GI,zI=rx,UI=Ev,VI=Ap;function HI(n){return zI(n,VI,UI)}var ix=HI,KI=rx,WI=nx,XI=lh;function YI(n){return KI(n,XI,WI)}var sx=YI,qI=Ks,ZI=hr,QI=qI(ZI,"DataView"),JI=QI,e7=Ks,t7=hr,n7=e7(t7,"Promise"),r7=n7,i7=Ks,s7=hr,o7=i7(s7,"Set"),a7=o7,l7=Ks,h7=hr,c7=l7(h7,"WeakMap"),d7=c7,Dm=JI,$m=pv,Rm=r7,Fm=a7,Lm=d7,ox=Ki,Ea=xC,tb="[object Map]",u7="[object Object]",nb="[object Promise]",rb="[object Set]",ib="[object WeakMap]",sb="[object DataView]",p7=Ea(Dm),f7=Ea($m),g7=Ea(Rm),m7=Ea(Fm),v7=Ea(Lm),ms=ox;(Dm&&ms(new Dm(new ArrayBuffer(1)))!=sb||$m&&ms(new $m)!=tb||Rm&&ms(Rm.resolve())!=nb||Fm&&ms(new Fm)!=rb||Lm&&ms(new Lm)!=ib)&&(ms=function(n){var e=ox(n),t=e==u7?n.constructor:void 0,r=t?Ea(t):"";if(r)switch(r){case p7:return sb;case f7:return tb;case g7:return nb;case m7:return rb;case v7:return ib}return e});var hh=ms,y7=Object.prototype,b7=y7.hasOwnProperty;function _7(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&b7.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var w7=_7,S7=wv;function C7(n,e){var t=e?S7(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var x7=C7,O7=/\w*$/;function P7(n){var e=new n.constructor(n.source,O7.exec(n));return e.lastIndex=n.lastIndex,e}var E7=P7,ob=ya,ab=ob?ob.prototype:void 0,lb=ab?ab.valueOf:void 0;function T7(n){return lb?Object(lb.call(n)):{}}var k7=T7,A7=wv,I7=x7,M7=E7,N7=k7,D7=LC,$7="[object Boolean]",R7="[object Date]",F7="[object Map]",L7="[object Number]",j7="[object RegExp]",B7="[object Set]",G7="[object String]",z7="[object Symbol]",U7="[object ArrayBuffer]",V7="[object DataView]",H7="[object Float32Array]",K7="[object Float64Array]",W7="[object Int8Array]",X7="[object Int16Array]",Y7="[object Int32Array]",q7="[object Uint8Array]",Z7="[object Uint8ClampedArray]",Q7="[object Uint16Array]",J7="[object Uint32Array]";function eM(n,e,t){var r=n.constructor;switch(e){case U7:return A7(n);case $7:case R7:return new r(+n);case V7:return I7(n,t);case H7:case K7:case W7:case X7:case Y7:case q7:case Z7:case Q7:case J7:return D7(n,t);case F7:return new r;case L7:case G7:return new r(n);case j7:return M7(n);case B7:return new r;case z7:return N7(n)}}var tM=eM,nM=hh,rM=cr,iM="[object Map]";function sM(n){return rM(n)&&nM(n)==iM}var oM=sM,aM=oM,lM=Ep,hb=xv,cb=hb&&hb.isMap,hM=cb?lM(cb):aM,cM=hM,dM=hh,uM=cr,pM="[object Set]";function fM(n){return uM(n)&&dM(n)==pM}var gM=fM,mM=gM,vM=Ep,db=xv,ub=db&&db.isSet,yM=ub?vM(ub):mM,bM=yM,_M=bv,wM=JC,SM=Ov,CM=dI,xM=gI,OM=RC,PM=jC,EM=EI,TM=LI,kM=ix,AM=sx,IM=hh,MM=w7,NM=tM,DM=GC,$M=fn,RM=ah,FM=cM,LM=Bn,jM=bM,BM=Ap,GM=lh,zM=1,UM=2,VM=4,ax="[object Arguments]",HM="[object Array]",KM="[object Boolean]",WM="[object Date]",XM="[object Error]",lx="[object Function]",YM="[object GeneratorFunction]",qM="[object Map]",ZM="[object Number]",hx="[object Object]",QM="[object RegExp]",JM="[object Set]",eN="[object String]",tN="[object Symbol]",nN="[object WeakMap]",rN="[object ArrayBuffer]",iN="[object DataView]",sN="[object Float32Array]",oN="[object Float64Array]",aN="[object Int8Array]",lN="[object Int16Array]",hN="[object Int32Array]",cN="[object Uint8Array]",dN="[object Uint8ClampedArray]",uN="[object Uint16Array]",pN="[object Uint32Array]",Ue={};Ue[ax]=Ue[HM]=Ue[rN]=Ue[iN]=Ue[KM]=Ue[WM]=Ue[sN]=Ue[oN]=Ue[aN]=Ue[lN]=Ue[hN]=Ue[qM]=Ue[ZM]=Ue[hx]=Ue[QM]=Ue[JM]=Ue[eN]=Ue[tN]=Ue[cN]=Ue[dN]=Ue[uN]=Ue[pN]=!0;Ue[XM]=Ue[lx]=Ue[nN]=!1;function Gc(n,e,t,r,i,s){var o,a=e&zM,h=e&UM,c=e&VM;if(t&&(o=i?t(n,r,i,s):t(n)),o!==void 0)return o;if(!LM(n))return n;var l=$M(n);if(l){if(o=MM(n),!a)return PM(n,o)}else{var d=IM(n),u=d==lx||d==YM;if(RM(n))return OM(n,a);if(d==hx||d==ax||u&&!i){if(o=h||u?{}:DM(n),!a)return h?TM(n,xM(o,n)):EM(n,CM(o,n))}else{if(!Ue[d])return i?n:{};o=NM(n,d,a)}}s||(s=new _M);var f=s.get(n);if(f)return f;s.set(n,o),jM(n)?n.forEach(function(y){o.add(Gc(y,e,t,y,n,s))}):FM(n)&&n.forEach(function(y,v){o.set(v,Gc(y,e,t,v,n,s))});var m=c?h?AM:kM:h?GM:BM,g=l?void 0:m(n);return wM(g||n,function(y,v){g&&(v=y,y=n[v]),SM(o,v,Gc(y,e,t,v,n,s))}),o}var cx=Gc;function fN(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}var gN=fN;function mN(n,e,t){var r=-1,i=n.length;e<0&&(e=-e>i?0:i+e),t=t>i?i:t,t<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=n[r+e];return s}var vN=mN,yN=vv,bN=vN;function _N(n,e){return e.length<2?n:yN(n,bN(e,0,-1))}var wN=_N,SN=Sa,CN=gN,xN=wN,ON=Cp;function PN(n,e){return e=SN(e,n),n=xN(n,e),n==null||delete n[ON(CN(e))]}var EN=PN,TN=HC;function kN(n){return TN(n)?void 0:n}var AN=kN,pb=ya,IN=oh,MN=fn,fb=pb?pb.isConcatSpreadable:void 0;function NN(n){return MN(n)||IN(n)||!!(fb&&n&&n[fb])}var DN=NN,$N=Tv,RN=DN;function dx(n,e,t,r,i){var s=-1,o=n.length;for(t||(t=RN),i||(i=[]);++s<o;){var a=n[s];e>0&&t(a)?e>1?dx(a,e-1,t,r,i):$N(i,a):r||(i[i.length]=a)}return i}var FN=dx,LN=FN;function jN(n){var e=n==null?0:n.length;return e?LN(n,1):[]}var BN=jN,GN=BN,zN=qC,UN=ZC;function VN(n){return UN(zN(n,void 0,GN),n+"")}var ux=VN,HN=mv,KN=cx,WN=EN,XN=Sa,YN=Pa,qN=AN,ZN=ux,QN=sx,JN=1,eD=2,tD=4,nD=ZN(function(n,e){var t={};if(n==null)return t;var r=!1;e=HN(e,function(s){return s=XN(s,n),r||(r=s.length>1),s}),YN(n,QN(n),t),r&&(t=KN(t,JN|eD|tD,qN));for(var i=e.length;i--;)WN(t,e[i]);return t}),rD=nD;const Gi=Ge(rD);function iD(n){return n===void 0}var sD=iD;const ll=Ge(sD);var oD="__lodash_hash_undefined__";function aD(n){return this.__data__.set(n,oD),this}var lD=aD;function hD(n){return this.__data__.has(n)}var cD=hD,dD=fv,uD=lD,pD=cD;function Cd(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new dD;++e<t;)this.add(n[e])}Cd.prototype.add=Cd.prototype.push=uD;Cd.prototype.has=pD;var px=Cd;function fD(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}var gD=fD;function mD(n,e){return n.has(e)}var fx=mD,vD=px,yD=gD,bD=fx,_D=1,wD=2;function SD(n,e,t,r,i,s){var o=t&_D,a=n.length,h=e.length;if(a!=h&&!(o&&h>a))return!1;var c=s.get(n),l=s.get(e);if(c&&l)return c==e&&l==n;var d=-1,u=!0,f=t&wD?new vD:void 0;for(s.set(n,e),s.set(e,n);++d<a;){var m=n[d],g=e[d];if(r)var y=o?r(g,m,d,e,n,s):r(m,g,d,n,e,s);if(y!==void 0){if(y)continue;u=!1;break}if(f){if(!yD(e,function(v,b){if(!bD(f,b)&&(m===v||i(m,v,t,r,s)))return f.push(b)})){u=!1;break}}else if(!(m===g||i(m,g,t,r,s))){u=!1;break}}return s.delete(n),s.delete(e),u}var gx=SD;function CD(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}var xD=CD;function OD(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var PD=OD,gb=ya,mb=FC,ED=sh,TD=gx,kD=xD,AD=PD,ID=1,MD=2,ND="[object Boolean]",DD="[object Date]",$D="[object Error]",RD="[object Map]",FD="[object Number]",LD="[object RegExp]",jD="[object Set]",BD="[object String]",GD="[object Symbol]",zD="[object ArrayBuffer]",UD="[object DataView]",vb=gb?gb.prototype:void 0,If=vb?vb.valueOf:void 0;function VD(n,e,t,r,i,s,o){switch(t){case UD:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case zD:return!(n.byteLength!=e.byteLength||!s(new mb(n),new mb(e)));case ND:case DD:case FD:return ED(+n,+e);case $D:return n.name==e.name&&n.message==e.message;case LD:case BD:return n==e+"";case RD:var a=kD;case jD:var h=r&ID;if(a||(a=AD),n.size!=e.size&&!h)return!1;var c=o.get(n);if(c)return c==e;r|=MD,o.set(n,e);var l=TD(a(n),a(e),r,i,s,o);return o.delete(n),l;case GD:if(If)return If.call(n)==If.call(e)}return!1}var HD=VD,yb=ix,KD=1,WD=Object.prototype,XD=WD.hasOwnProperty;function YD(n,e,t,r,i,s){var o=t&KD,a=yb(n),h=a.length,c=yb(e),l=c.length;if(h!=l&&!o)return!1;for(var d=h;d--;){var u=a[d];if(!(o?u in e:XD.call(e,u)))return!1}var f=s.get(n),m=s.get(e);if(f&&m)return f==e&&m==n;var g=!0;s.set(n,e),s.set(e,n);for(var y=o;++d<h;){u=a[d];var v=n[u],b=e[u];if(r)var w=o?r(b,v,u,e,n,s):r(v,b,u,n,e,s);if(!(w===void 0?v===b||i(v,b,t,r,s):w)){g=!1;break}y||(y=u=="constructor")}if(g&&!y){var C=n.constructor,O=e.constructor;C!=O&&"constructor"in n&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof O=="function"&&O instanceof O)&&(g=!1)}return s.delete(n),s.delete(e),g}var qD=YD,Mf=bv,ZD=gx,QD=HD,JD=qD,bb=hh,_b=fn,wb=ah,e$=Tp,t$=1,Sb="[object Arguments]",Cb="[object Array]",Wh="[object Object]",n$=Object.prototype,xb=n$.hasOwnProperty;function r$(n,e,t,r,i,s){var o=_b(n),a=_b(e),h=o?Cb:bb(n),c=a?Cb:bb(e);h=h==Sb?Wh:h,c=c==Sb?Wh:c;var l=h==Wh,d=c==Wh,u=h==c;if(u&&wb(n)){if(!wb(e))return!1;o=!0,l=!1}if(u&&!l)return s||(s=new Mf),o||e$(n)?ZD(n,e,t,r,i,s):QD(n,e,h,t,r,i,s);if(!(t&t$)){var f=l&&xb.call(n,"__wrapped__"),m=d&&xb.call(e,"__wrapped__");if(f||m){var g=f?n.value():n,y=m?e.value():e;return s||(s=new Mf),i(g,y,t,r,s)}}return u?(s||(s=new Mf),JD(n,e,t,r,i,s)):!1}var i$=r$,s$=i$,Ob=cr;function mx(n,e,t,r,i){return n===e?!0:n==null||e==null||!Ob(n)&&!Ob(e)?n!==n&&e!==e:s$(n,e,t,r,mx,i)}var o$=mx,a$=o$;function l$(n,e){return a$(n,e)}var h$=l$;const yt=Ge(h$);var c$=ex,d$=hh,u$=oh,p$=fn,f$=Oa,g$=ah,m$=Pp,v$=Tp,y$="[object Map]",b$="[object Set]",_$=Object.prototype,w$=_$.hasOwnProperty;function S$(n){if(n==null)return!0;if(f$(n)&&(p$(n)||typeof n=="string"||typeof n.splice=="function"||g$(n)||v$(n)||u$(n)))return!n.length;var e=d$(n);if(e==y$||e==b$)return!n.size;if(m$(n))return!c$(n).length;for(var t in n)if(w$.call(n,t))return!1;return!0}var C$=S$;const vr=Ge(C$);var x$=$C,O$=Ap;function P$(n,e){return n&&x$(n,e,O$)}var E$=P$,T$=Oa;function k$(n,e){return function(t,r){if(t==null)return t;if(!T$(t))return n(t,r);for(var i=t.length,s=e?i:-1,o=Object(t);(e?s--:++s<i)&&r(o[s],s,o)!==!1;);return t}}var A$=k$,I$=E$,M$=A$,N$=M$(I$),D$=N$,$$=Pv;function R$(n){return typeof n=="function"?n:$$}var vx=R$,F$=JC,L$=D$,j$=vx,B$=fn;function G$(n,e){var t=B$(n)?F$:L$;return t(n,j$(e))}var z$=G$,U$=z$;const V$=Ge(U$);function Jr(n,e){n&&console.warn(`Warning: ${e}`)}function tn(n){return n==null}class yx{constructor(){this._eventMap=new Map}on(e,t){return e&&typeof t=="function"&&(this._eventMap.has(e)||this._eventMap.set(e,[]),this._eventMap.get(e).push(t)),this}once(e,t){var r=this;if(e&&typeof t=="function"){const i=function(){t(...arguments),r.off(e,i)};this.on(e,i)}}off(e,t){if(e)if(typeof t=="function"){const r=this._eventMap.get(e);if(Array.isArray(r)&&r.length){let i=-1;for(;(i=r.findIndex(s=>s===t))>-1;)r.splice(i,1)}}else tn(t)&&this._eventMap.delete(e);return this}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return this._eventMap.has(e)?([...this._eventMap.get(e)].forEach(o=>o(...r)),!0):!1}}function ws(n){try{return n instanceof HTMLElement}catch{return typeof n=="object"&&n.nodeType===1&&typeof n.style=="object"&&typeof n.ownerDocument=="object"}}function H$(n){if(n&&typeof n=="object")return typeof n.toJSON=="function"?n.toJSON():["left","top","right","bottom","width","height"].reduce((t,r)=>(t[r]=n[r],t),{})}function Jt(n){n.stopPropagation(),n.preventDefault()}function K$(n){return n.length===1&&n.match(/\S/)}function ch(n,e){for(let t=0;t<n.length;t++)n[t]===e?(n[t].tabIndex=0,n[t].focus()):n[t].tabIndex=-1}function W$(n){n.length>0&&ch(n,n[0])}function X$(n){n.length>0&&ch(n,n[n.length-1])}function Y$(n,e){let t,r;n.length>0&&(e===n[0]?t=n[n.length-1]:(r=n.indexOf(e),t=n[r-1]),ch(n,t))}function q$(n,e){let t,r;n.length>0&&(e===n[n.length-1]?t=n[0]:(r=n.indexOf(e),t=n[r+1]),ch(n,t))}function Z$(n,e,t,r){let i,s;return!n||!t||!r||r.length>1?-1:(r=r.toLowerCase(),i=n.indexOf(e)+1,i>=n.length&&(i=0),s=t.indexOf(r,i),s===-1&&(s=t.indexOf(r,0)),s>=0?s:-1)}function Q$(n,e){if(!n)return null;for(;n.parentElement&&oe(n.parentElement,"attributes.role.value","")!==e;)n=n.parentElement;return n.parentElement}function J$(n,e){for(let t=0;t<n.length;t++){const r=n[t].attributes["data-popupid"];if(r&&r.value===e)return n[t]}return null}const Xh={TOP:/top/i,RIGHT:/right/i,BOTTOM:/bottom/i,LEFT:/left/i},to={left:0,top:0,height:0,width:0,scrollLeft:0,scrollTop:0};let eR=class extends ze{constructor(e){var t;super(Object.assign({},e)),t=this,this.removePortal=()=>{this._adapter.removePortal()},this.setDisplayNone=(r,i)=>{this._adapter.setDisplayNone(r,i)},this.updateStateIfCursorOnTrigger=r=>{var i,s;if(!((i=r==null?void 0:r.matches)===null||i===void 0)&&i.call(r,":hover")){const o=this._adapter.getEventName(),a=this.getState("triggerEventSet");(s=a[o.mouseEnter])===null||s===void 0||s.call(a)}},this.onResize=()=>{this.calcPosition()},this.delayShow=()=>{const r=this.getProp("mouseEnterDelay");this.clearDelayTimer(),r>0?this._timer=setTimeout(()=>{this.show(),this.clearDelayTimer()},r):this.show()},this.show=()=>{if(this._adapter.getAnimatingState())return;const r=this.getProp("content"),i=this.getProp("trigger"),s=this.getProp("clickTriggerToHide"),{visible:o,displayNone:a}=this.getStates();if(a&&this.setDisplayNone(!1),!o){if(this.clearDelayTimer(),this._adapter.on("portalInserted",()=>{this.calcPosition()}),i==="hover"){const h=()=>{var c;const l=this._adapter.getTriggerDOM();i&&!(!((c=l==null?void 0:l.matches)===null||c===void 0)&&c.call(l,":hover"))&&this.hide(),this._adapter.off("portalInserted",h)};this._adapter.on("portalInserted",h)}this._adapter.on("positionUpdated",()=>{this._togglePortalVisible(!0)}),this._adapter.insertPortal(r,{left:-9999,top:-9999}),i==="custom"&&this._adapter.registerClickOutsideHandler(()=>{}),(i==="click"||s||i==="contextMenu")&&this._adapter.registerClickOutsideHandler(this.hide),this._bindScrollEvent(),this._bindResizeEvent()}},this.calcPosition=function(r,i,s){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;r=(vr(r)?t._adapter.getTriggerBounding():r)||Object.assign({},to),s=(vr(s)?t._adapter.getPopupContainerRect():s)||Object.assign({},to),i=(vr(i)?t._adapter.getWrapperBounding():i)||Object.assign({},to);let a=t.calcPosStyle({triggerRect:r,wrapperRect:i,containerRect:s}),h=t.getProp("position");if(t.getProp("autoAdjustOverflow")){const{position:c,isHeightOverFlow:l,isWidthOverFlow:d}=t.adjustPosIfNeed(h,a,r,i,s);(h!==c||l||d)&&(h=c,a=t.calcPosStyle({triggerRect:r,wrapperRect:i,containerRect:s,position:h,spacing:null,isOverFlow:[l,d]}))}return o&&t._mounted&&t._adapter.setPosition(Object.assign(Object.assign({},a),{position:h})),a},this.delayHide=()=>{const r=this.getProp("mouseLeaveDelay");this.clearDelayTimer(),r>0?this._timer=setTimeout(()=>{this.hide(),this.clearDelayTimer()},r):this.hide()},this.hide=()=>{this.clearDelayTimer(),this._togglePortalVisible(!1),this._adapter.off("portalInserted"),this._adapter.off("positionUpdated")},this.handleContainerKeydown=r=>{const{guardFocus:i,closeOnEsc:s}=this.getProps();switch(r&&r.key){case"Escape":s&&this._handleEscKeyDown(r);break;case"Tab":if(i){const o=this._adapter.getContainer(),a=this._adapter.getFocusableElements(o);a.length&&(r.shiftKey?this._handleContainerShiftTabKeyDown(a,r):this._handleContainerTabKeyDown(a,r))}break}},this._timer=null}init(){const{wrapperId:e}=this.getProps();this._mounted=!0,this._bindEvent(),this._shouldShow(),this._initContainerPosition(),e||this._adapter.setId()}destroy(){this._mounted=!1,this.unBindEvent()}_bindEvent(){const e=this.getProp("trigger"),{triggerEventSet:t,portalEventSet:r}=this._generateEvent(e);this._bindTriggerEvent(t),this._bindPortalEvent(r),this._bindResizeEvent()}unBindEvent(){this._adapter.unregisterClickOutsideHandler(),this.unBindResizeEvent(),this.unBindScrollEvent(),clearTimeout(this._timer)}_bindTriggerEvent(e){this._adapter.registerTriggerEvent(e)}_bindPortalEvent(e){this._adapter.registerPortalEvent(e)}_bindResizeEvent(){this._adapter.registerResizeHandler(this.onResize)}unBindResizeEvent(){this._adapter.unregisterResizeHandler(this.onResize)}_adjustPos(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"reverse",i=arguments.length>3?arguments[3]:void 0;switch(r){case"reverse":return this._reversePos(e,t);case"expand":return this._expandPos(e,i);case"reduce":return this._reducePos(e);default:return this._reversePos(e,t)}}_reversePos(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1){if(Xh.TOP.test(e))return e.replace("top","bottom").replace("Top","Bottom");if(Xh.BOTTOM.test(e))return e.replace("bottom","top").replace("Bottom","Top")}else{if(Xh.LEFT.test(e))return e.replace("left","right").replace("Left","Right");if(Xh.RIGHT.test(e))return e.replace("right","left").replace("Right","Left")}return e}_expandPos(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return e.concat(t)}_reducePos(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const t=["Top","Bottom","Left","Right"].find(r=>e.endsWith(r));return t?e.replace(t,""):e}clearDelayTimer(){this._timer&&(clearTimeout(this._timer),this._timer=null)}_generateEvent(e){const t=this._adapter.getEventName(),r={[t.keydown]:s=>{this._handleTriggerKeydown(s)}};let i={};switch(e){case"focus":r[t.focus]=()=>{this.delayShow()},r[t.blur]=()=>{this.delayHide()},i=r;break;case"click":r[t.click]=()=>{this.show()},i={};break;case"hover":r[t.mouseEnter]=()=>{this.setCache("isClickToHide",!1),this.delayShow()},r[t.mouseLeave]=()=>{this.delayHide()},r[t.focus]=()=>{const{disableFocusListener:s}=this.getProps();!s&&this.delayShow()},r[t.blur]=()=>{const{disableFocusListener:s}=this.getProps();!s&&this.delayHide()},i=Object.assign({},r),this.getProp("clickToHide")&&(i[t.click]=()=>{this.setCache("isClickToHide",!0),this.hide()},i[t.mouseEnter]=()=>{this.getCache("isClickToHide")||this.delayShow()});break;case"custom":break;case"contextMenu":r[t.contextMenu]=s=>{s.preventDefault(),this.show()};break}return{triggerEventSet:r,portalEventSet:i}}_shouldShow(){this.getProp("visible")&&this.show()}_togglePortalVisible(e){this.getState("visible")!==e&&this._adapter.togglePortalVisible(e,()=>{e&&this._adapter.setInitialFocus(),this._adapter.notifyVisibleChange(e)})}_roundPixel(e){return typeof e=="number"?Math.round(e):e}calcTransformOrigin(e,t,r,i){if(e&&t&&r!=null&&i!=null){if(this.getProp("transformFromCenter")){if(["topLeft","bottomLeft"].includes(e))return`${this._roundPixel(t.width/2)}px ${-i*100}%`;if(["topRight","bottomRight"].includes(e))return`calc(100% - ${this._roundPixel(t.width/2)}px) ${-i*100}%`;if(["leftTop","rightTop"].includes(e))return`${-r*100}% ${this._roundPixel(t.height/2)}px`;if(["leftBottom","rightBottom"].includes(e))return`${-r*100}% calc(100% - ${this._roundPixel(t.height/2)}px)`}return`${-r*100}% ${-i*100}%`}return null}calcPosStyle(e){var t;const{spacing:r,isOverFlow:i}=e,{innerWidth:s}=window,o=(vr(e.triggerRect)?e.triggerRect:this._adapter.getTriggerBounding())||Object.assign({},to),a=(vr(e.containerRect)?e.containerRect:this._adapter.getPopupContainerRect())||Object.assign({},to),h=(vr(e.wrapperRect)?e.wrapperRect:this._adapter.getWrapperBounding())||Object.assign({},to),c=e.position!=null?e.position:this.getProp("position"),l=r??this.getProp("spacing"),{arrowPointAtCenter:d,showArrow:u,arrowBounding:f}=this.getProps(),m=u&&d;let g=l,y=0;if(typeof l!="number"){const J=c.includes("top")||c.includes("bottom");g=J?l.y:l.x,y=J?l.x:l.y}const v=oe(f,"width",24),b=oe(f,"width",24),w=oe(f,"offsetY",0),C=6,O=6;let x,P,T=0,k=0;const E=o.left+o.width/2,I=o.top+o.height/2,M=C+v/2,R=O+b/2,U=h.height-a.height,V=h.width-a.width,H=U>0?U:0,K=V>0?V:0,$=i&&i[0],j=i&&i[1],S=E-a.left<a.right-E,A=I-a.top<a.bottom-I,D=h.width>s,F=Math.abs((h==null?void 0:h.width)-((t=this._adapter.getContainer())===null||t===void 0?void 0:t.clientWidth))>1;switch(F&&(g=g*h.width/this._adapter.getContainer().clientWidth),c){case"top":x=j?S?a.left+h.width/2:a.right-h.width/2+K:E+y,P=$?a.bottom+H:o.top-g,T=-.5,k=-1;break;case"topLeft":x=j?D?a.left:a.right-h.width:m?E-M+y:o.left+y,P=$?a.bottom+H:o.top-g,k=-1;break;case"topRight":x=j?a.right+K:m?E+M+y:o.right+y,P=$?a.bottom+H:o.top-g,k=-1,T=-1;break;case"left":x=j?a.right+K-g+M:o.left-g,P=$?A?a.top+h.height/2:a.bottom-h.height/2+H:I+y,T=-1,k=-.5;break;case"leftTop":x=j?a.right+K-g+M:o.left-g,P=$?a.top:m?I-R+y:o.top+y,T=-1;break;case"leftBottom":x=j?a.right+K-g+M:o.left-g,P=$?a.bottom+H:m?I+R+y:o.bottom+y,T=-1,k=-1;break;case"bottom":x=j?S?a.left+h.width/2:a.right-h.width/2+K:E+y,P=$?a.top+R-g:o.top+o.height+g,T=-.5;break;case"bottomLeft":x=j?D?a.left:a.right-h.width:m?E-M+y:o.left+y,P=$?a.top+R-g:o.top+o.height+g;break;case"bottomRight":x=j?a.right+K:m?E+M+y:o.right+y,P=$?a.top+R-g:o.top+o.height+g,T=-1;break;case"right":x=j?a.left-g+M:o.right+g,P=$?A?a.top+h.height/2:a.bottom-h.height/2+H:I+y,k=-.5;break;case"rightTop":x=j?a.left-g+M:o.right+g,P=$?a.top:m?I-R+y:o.top+y;break;case"rightBottom":x=j?a.left-g+M:o.right+g,P=$?a.bottom+H:m?I+R+y:o.bottom+y,k=-1;break;case"leftTopOver":x=o.left-g,P=o.top-g;break;case"rightTopOver":x=o.right+g,P=o.top-g,T=-1;break;case"leftBottomOver":x=o.left-g,P=o.bottom+g,k=-1;break;case"rightBottomOver":x=o.right+g,P=o.bottom+g,T=-1,k=-1;break}const B=this.calcTransformOrigin(c,o,T,k),z=this._adapter.containerIsBody();if(x=x-a.left,P=P-a.top,F&&(x/=h.width/this._adapter.getContainer().clientWidth),F&&(P/=h.height/this._adapter.getContainer().clientHeight),z&&!this._adapter.containerIsRelativeOrAbsolute()){const J=this._adapter.getDocumentElementBounding();x+=a.left-J.left,P+=a.top-J.top}x=z?x:x+a.scrollLeft,P=z?P:P+a.scrollTop;const Z=o.height;if(this.getProp("showArrow")&&!d&&Z<=(b/2+w)*2){const J=Z/2-(w+b/2);(c.includes("Top")||c.includes("Bottom"))&&!c.includes("Over")&&(P=c.includes("Top")?P+J:P-J)}const q={left:this._roundPixel(x),top:this._roundPixel(P)};let se="";return T!=null&&(se+=`translateX(${T*100}%) `,Object.defineProperty(q,"translateX",{enumerable:!1,value:T})),k!=null&&(se+=`translateY(${k*100}%) `,Object.defineProperty(q,"translateY",{enumerable:!1,value:k})),B!=null&&(q.transformOrigin=B),se&&(q.transform=se),q}isLR(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e.includes("left")||e.includes("right")}isTB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e.includes("top")||e.includes("bottom")}isReverse(e,t,r){return e<r&&t>r}isOverFlow(e,t,r){return e<r&&t<r}isHalfOverFlow(e,t,r){return e<r||t<r}isHalfAllEnough(e,t,r){return e>=r||t>=r}getReverse(e,t,r,i){return e&&i||r}adjustPosIfNeed(e,t,r,i,s){const{innerWidth:o,innerHeight:a}=window,{margin:h}=this.getProps(),c=typeof h=="number"?h:h.marginLeft,l=typeof h=="number"?h:h.marginTop,d=typeof h=="number"?h:h.marginRight,u=typeof h=="number"?h:h.marginBottom;let f=!1,m=!1;const g=this.getProp("spacing");let y=g,v=0;if(typeof g!="number"){const b=e.includes("top")||e.includes("bottom");y=b?g.y:g.x,v=b?g.x:g.y}if(i.width>0&&i.height>0){const b=r.left,w=r.right,C=r.top,O=r.bottom,x=o-b,P=a-C,T=o-w,k=a-O,E=i.width>r.width,I=i.height>r.height,M=C-l<i.height+y&&k-u>i.height+y,R=b-c<i.width+y&&T-d>i.width+y,U=k-u<i.height+y&&C-l>i.height+y,V=T-d<i.width+y&&b-c>i.width+y;P-u<i.height+y&&O-l>i.height+y,O-l<i.height+y&&P-u>i.height+y;const H=P<i.height+v&&O>i.height+v,K=O<i.height+v&&P>i.height+v,$=x<i.width+v&&w>i.width+v,j=w<i.width+v&&x>i.width+v,S=P<i.height+y&&O>i.height+y,A=O<i.height+y&&P>i.height+y,D=x<i.width&&w>i.width,F=w<i.width&&x>i.width,B=C-s.top,z=b-s.left,Z=B+r.height,q=z+r.width,se=s.bottom-O,J=s.right-w,xe=se+r.height,Xt=J+r.width,p5=this.isReverse(B-l,se-u,i.height+y),f5=this.isReverse(z-c,J-d,i.width+y),g5=this.isReverse(se-u,B-l,i.height+y),m5=this.isReverse(J-d,z-c,i.width+y);this.isReverse(xe-u,Z-l,i.height+y),this.isReverse(Z-l,xe-u,i.height+y);const v5=this.isReverse(xe,Z,i.height+v),y5=this.isReverse(Z,xe,i.height+v),b5=this.isReverse(Xt,q,i.width+v),_5=this.isReverse(q,Xt,i.width+v),ni=r.height/2,ri=r.width/2,Vp=this.isOverFlow(C-l,k-u,i.height+y),Hp=this.isOverFlow(b-c,T-d,i.width+y),Kp=this.isOverFlow(O-l,P-u,i.height+y),Wp=this.isOverFlow(w-c,x-d,i.width+y),fy=this.isHalfOverFlow(O-ni,P-ni,(i.height+v)/2),gy=this.isHalfOverFlow(w-ri,x-ri,(i.width+v)/2),Ch=this.isHalfAllEnough(O-ni,P-ni,(i.height+v)/2),xh=this.isHalfAllEnough(w-ri,x-ri,(i.width+v)/2),Xp=this.isOverFlow(B-l,se-u,i.height+y),Yp=this.isOverFlow(z-c,J-d,i.width+y),qp=this.isOverFlow(Z-l,xe-u,i.height+y),Zp=this.isOverFlow(q-c,Xt-d,i.width+y),my=this.isHalfOverFlow(Z-ni,xe-ni,(i.height+v)/2),vy=this.isHalfOverFlow(q-ri,Xt-ri,(i.width+v)/2),Oh=this.isHalfAllEnough(Z-ni,xe-ni,(i.height+v)/2),Ph=this.isHalfAllEnough(q-ri,Xt-ri,(i.width+v)/2),Qp=this.getReverse(Vp,Xp,M,p5),Jp=this.getReverse(Hp,Yp,R,f5),ef=this.getReverse(Vp,Xp,U,g5),tf=this.getReverse(Hp,Yp,V,m5),Zs=this.getReverse(Kp,qp,H,v5),Eh=this.getReverse(Kp,qp,K,y5),Qs=this.getReverse(Wp,Zp,$,b5),Th=this.getReverse(Wp,Zp,j,_5),yy=fy&&my,by=gy&&vy;switch(e){case"top":Qp&&(e=this._adjustPos(e,!0)),by&&(Qs||Th)&&(e=this._adjustPos(e,!0,"expand",Qs?"Right":"Left"));break;case"topLeft":Qp&&(e=this._adjustPos(e,!0)),Qs&&E&&(e=this._adjustPos(e)),m&&(xh||Ph)&&(e=this._adjustPos(e,!0,"reduce"));break;case"topRight":Qp&&(e=this._adjustPos(e,!0)),Th&&E&&(e=this._adjustPos(e)),m&&(xh||Ph)&&(e=this._adjustPos(e,!0,"reduce"));break;case"left":Jp&&(e=this._adjustPos(e)),yy&&(Zs||Eh)&&(e=this._adjustPos(e,!1,"expand",Zs?"Bottom":"Top"));break;case"leftTop":Jp&&(e=this._adjustPos(e)),Zs&&I&&(e=this._adjustPos(e,!0)),f&&(Ch||Oh)&&(e=this._adjustPos(e,!1,"reduce"));break;case"leftBottom":Jp&&(e=this._adjustPos(e)),Eh&&I&&(e=this._adjustPos(e,!0)),f&&(Ch||Oh)&&(e=this._adjustPos(e,!1,"reduce"));break;case"bottom":ef&&(e=this._adjustPos(e,!0)),by&&(Qs||Th)&&(e=this._adjustPos(e,!0,"expand",Qs?"Right":"Left"));break;case"bottomLeft":ef&&(e=this._adjustPos(e,!0)),Qs&&E&&(e=this._adjustPos(e)),m&&(xh||Ph)&&(e=this._adjustPos(e,!0,"reduce"));break;case"bottomRight":ef&&(e=this._adjustPos(e,!0)),Th&&E&&(e=this._adjustPos(e)),m&&(xh||Ph)&&(e=this._adjustPos(e,!0,"reduce"));break;case"right":tf&&(e=this._adjustPos(e)),yy&&(Zs||Eh)&&(e=this._adjustPos(e,!1,"expand",Zs?"Bottom":"Top"));break;case"rightTop":tf&&(e=this._adjustPos(e)),Zs&&I&&(e=this._adjustPos(e,!0)),f&&(Ch||Oh)&&(e=this._adjustPos(e,!1,"reduce"));break;case"rightBottom":tf&&(e=this._adjustPos(e)),Eh&&I&&(e=this._adjustPos(e,!0)),f&&(Ch||Oh)&&(e=this._adjustPos(e,!1,"reduce"));break;case"leftTopOver":S&&(e=this._adjustPos(e,!0)),D&&(e=this._adjustPos(e));break;case"leftBottomOver":A&&(e=this._adjustPos(e,!0)),D&&(e=this._adjustPos(e));break;case"rightTopOver":S&&(e=this._adjustPos(e,!0)),F&&(e=this._adjustPos(e));break;case"rightBottomOver":A&&(e=this._adjustPos(e,!0)),F&&(e=this._adjustPos(e));break}this.isTB(e)&&(f=Vp&&Xp,e==="top"||e==="bottom"?m=gy&&vy||w<0||T<0:m=Wp&&Zp||w<0||T<0),this.isLR(e)&&(m=Hp&&Yp,e==="left"||e==="right"?f=fy&&my||C<0||P<0:f=Kp&&qp||C<0||P<0)}return{position:e,isHeightOverFlow:f,isWidthOverFlow:m}}_bindScrollEvent(){this._adapter.registerScrollHandler(()=>this.calcPosition())}unBindScrollEvent(){this._adapter.unregisterScrollHandler()}_initContainerPosition(){this._adapter.updateContainerPosition()}_handleTriggerKeydown(e){const{closeOnEsc:t,disableArrowKeyDown:r}=this.getProps(),i=this._adapter.getContainer(),s=this._adapter.getFocusableElements(i),o=s.length;switch(e&&e.key){case"Escape":Jt(e),t&&this._handleEscKeyDown(e);break;case"ArrowUp":!r&&o&&this._handleTriggerArrowUpKeydown(s,e);break;case"ArrowDown":!r&&o&&this._handleTriggerArrowDownKeydown(s,e);break}}focusTrigger(){const{trigger:e,returnFocusOnClose:t,preventScroll:r}=this.getProps();if(t&&e!=="custom"){const i=this._adapter.getTriggerNode();i&&"focus"in i&&i.focus({preventScroll:r})}}_handleEscKeyDown(e){const{trigger:t}=this.getProps();t!=="custom"&&(this.focusTrigger(),this.hide()),this._adapter.notifyEscKeydown(e)}_handleContainerTabKeyDown(e,t){const{preventScroll:r}=this.getProps(),i=this._adapter.getActiveElement();e[e.length-1]===i&&(e[0].focus({preventScroll:r}),t.preventDefault())}_handleContainerShiftTabKeyDown(e,t){const{preventScroll:r}=this.getProps(),i=this._adapter.getActiveElement();e[0]===i&&(e[e.length-1].focus({preventScroll:r}),t.preventDefault())}_handleTriggerArrowDownKeydown(e,t){const{preventScroll:r}=this.getProps();e[0].focus({preventScroll:r}),t.preventDefault()}_handleTriggerArrowUpKeydown(e,t){const{preventScroll:r}=this.getProps();e[e.length-1].focus({preventScroll:r}),t.preventDefault()}};const tR={PREFIX:`${te}-tooltip`},Ps={POSITION_SET:["top","topLeft","topRight","left","leftTop","leftBottom","right","rightTop","rightBottom","bottom","bottomLeft","bottomRight","leftTopOver","rightTopOver","leftBottomOver","rightBottomOver"],TRIGGER_SET:["hover","focus","click","custom","contextMenu"],STATUS_DISABLED:"disabled",STATUS_LOADING:"loading"},Si={ARROW_BOUNDING:{offsetX:0,offsetY:2,width:24,height:7},DEFAULT_Z_INDEX:1060,MOUSE_ENTER_DELAY:50,MOUSE_LEAVE_DELAY:50,SPACING:8,MARGIN:0};function xd(n){return`${n}-${new Date().getTime()}-${Math.random()}`}function nR(){var n,e;try{return(e=(n=crypto==null?void 0:crypto.randomUUID)===null||n===void 0?void 0:n.call(crypto))!==null&&e!==void 0?e:String(9987e3+-1e11).replace(/[018]/g,t=>(Number(t)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(t)/4).toString(16))}catch{return xd("semi")}}function Od(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{prefix:e="",length:t=7}=n,r="0123456789abcdefghijklmnopqrstuvwxyz",i=r.length;let s="";for(let o=0;o<t;o++){const a=Math.floor(Math.random()*i);s+=r.charAt(a)}return e?`${e}-${s}`:s}var rR=Ov,iR=Sa,sR=kp,Pb=Bn,oR=Cp;function aR(n,e,t,r){if(!Pb(n))return n;e=iR(e,n);for(var i=-1,s=e.length,o=s-1,a=n;a!=null&&++i<s;){var h=oR(e[i]),c=t;if(h==="__proto__"||h==="constructor"||h==="prototype")return n;if(i!=o){var l=a[h];c=r?r(l,h,a):void 0,c===void 0&&(c=Pb(l)?l:sR(e[i+1])?[]:{})}rR(a,h,c),a=a[h]}return n}var bx=aR,lR=bx;function hR(n,e,t){return n==null?n:lR(n,e,t)}var cR=hR;const _x=Ge(cR);var dR=cx,uR=1,pR=4;function fR(n,e){return e=typeof e=="function"?e:void 0,dR(n,uR|pR,e)}var gR=fR;const mR=Ge(gR),vR=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),yR=n=>{let{autoEscape:e,caseSensitive:t,searchWords:r,sourceString:i}=n;return r.filter(s=>s).reduce((s,o)=>{e&&(o=vR(o));const a=new RegExp(o,t?"g":"gi");let h;for(;h=a.exec(i);){const c=h.index,l=a.lastIndex;l>c&&s.push({highlight:!1,start:c,end:l}),h.index===a.lastIndex&&a.lastIndex++}return s},[])},bR=n=>{let{chunks:e}=n;return e=e.sort((t,r)=>t.start-r.start).reduce((t,r)=>{if(t.length===0)return[r];{const i=t.pop();if(r.start<=i.end){const s=Math.max(i.end,r.end);t.push({highlight:!1,start:i.start,end:s})}else t.push(i,r);return t}},[]),e},_R=n=>{let{chunksToHighlight:e,totalLength:t}=n;const r=[],i=(s,o,a)=>{o-s>0&&r.push({start:s,end:o,highlight:a})};if(e.length===0)i(0,t,!1);else{let s=0;e.forEach(o=>{i(s,o.start,!1),i(o.start,o.end,!0),s=o.end}),i(s,t,!1)}return r},wR=n=>{let{autoEscape:e=!0,caseSensitive:t=!1,searchWords:r,sourceString:i}=n;vt(r)&&(r=[r]);const s=yR({autoEscape:e,caseSensitive:t,searchWords:r,sourceString:i}),o=bR({chunks:s});return _R({chunksToHighlight:o,totalLength:i?i.length:0})};class SR{constructor(){this.config={}}}const Nf=new SR;var Eb=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function h(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,h)}c((r=r.apply(n,e||[])).next())})};function Yh(n,e){n&&typeof n.stopPropagation=="function"&&n.stopPropagation(),n.nativeEvent&&typeof n.nativeEvent.stopImmediatePropagation=="function"&&n.nativeEvent.stopImmediatePropagation()}function CR(n,e){return mR(n,t=>{if(typeof e=="function")return e(t);if(typeof t=="function"||_.isValidElement(t)||Object.prototype.toString.call(t)==="[object Error]")return t;if(Array.isArray(t)&&t.length===0){const r=Object.keys(t);if(r.length){const i=[];r.forEach(s=>{_x(i,s,t[s])});try{Jr(oe(process,"env.NODE_ENV")!=="production",`[Semi] You may use an out-of-bounds array. In some cases, your program may not behave as expected.
                    The maximum length of an array is 4294967295.
                    Please check whether the array subscript in your data exceeds the maximum value of the JS array subscript`)}catch{}return i}else return}})}const xR=n=>{let{sourceString:e="",searchWords:t=[],option:r={autoEscape:!0,caseSensitive:!1}}=n;const i=wR(Object.assign({sourceString:e,searchWords:t},r)),s=r.highlightTag||"mark",o=r.highlightClassName||"",a=r.highlightStyle||{};return i.map((h,c)=>{const{end:l,start:d,highlight:u}=h,f=e.substr(d,l-d);return u?_.createElement(s,{style:a,className:o,key:f+c},f):f})},wx=(n,e)=>{let{match:t,unmatch:r,callInInit:i=!0}=e;if(typeof window<"u"){let a=function(h){h.matches?t&&t(h):r&&r(h)};var s=a;const o=window.matchMedia(n);return i&&a(o),Object.prototype.hasOwnProperty.call(o,"addEventListener")?(o.addEventListener("change",a),()=>o.removeEventListener("change",a)):(o.addListener(a),()=>o.removeListener(a))}return()=>{}},tr=n=>_.isValidElement(n)&&oe(n.type,"elementType")==="Icon";function Sx(){return document?document.activeElement:null}function Cx(n){if(!ws(n))return[];const t=["input:not([disabled]):not([tabindex='-1'])","textarea:not([disabled]):not([tabindex='-1'])","button:not([disabled]):not([tabindex='-1'])","a[href]:not([tabindex='-1'])","select:not([disabled]):not([tabindex='-1'])","area[href]:not([tabindex='-1'])","iframe:not([tabindex='-1'])","object:not([tabindex='-1'])","*[tabindex]:not([tabindex='-1'])","*[contenteditable]:not([tabindex='-1'])"].join(",");return Array.from(n.querySelectorAll(t))}function kv(n,e){return Eb(this,void 0,void 0,function*(){if(e===0){yield n();return}else{yield new Promise(t=>{setTimeout(()=>Eb(this,void 0,void 0,function*(){yield kv(n,e-1),t()}),0)});return}})}function OR(){return globalThis&&Object.prototype.toString.call(globalThis)==="[object Window]"?window.innerWidth-document.documentElement.clientWidth:0}function Tn(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=()=>{var r,i;return((i=(r=Nf==null?void 0:Nf.config)===null||r===void 0?void 0:r.overrideDefaultProps)===null||i===void 0?void 0:i[n])||{}};return new Proxy(Object.assign({},e),{get(r,i,s){const o=t();return i in o?o[i]:Reflect.get(r,i,s)},set(r,i,s,o){return Reflect.set(r,i,s,o)},ownKeys(){const r=t();return Array.from(new Set([...Reflect.ownKeys(e),...Object.keys(r)]))},getOwnPropertyDescriptor(r,i){const s=t();return i in s?Reflect.getOwnPropertyDescriptor(s,i):Reflect.getOwnPropertyDescriptor(r,i)}})}const Wi=_.createContext({}),PR=()=>document.body;class dh extends G.PureComponent{constructor(e,t){var r;super(e),r=this,this.initContainer=function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;var o,a;try{let h;if(!r.el||!(!((o=r.state)===null||o===void 0)&&o.container)||!Array.from(r.state.container.childNodes).includes(r.el)){r.el=document.createElement("div");const l=(r.props.getPopupContainer||i.getPopupContainer||PR)();return l.appendChild(r.el),r.addStyle(r.props.style),r.addClass(r.props.prefixCls,i,r.props.className),h=l,h}}catch(h){if(!s)throw h}return(a=r.state)===null||a===void 0?void 0:a.container},this.addStyle=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(r.el)for(const s of Object.keys(i))r.el.style[s]=i[s]},this.addClass=function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r.context;const{direction:o}=s;for(var a=arguments.length,h=new Array(a>2?a-2:0),c=2;c<a;c++)h[c-2]=arguments[c];const l=L(i,...h,{[`${i}-rtl`]:o==="rtl"});r.el&&(r.el.className=l)},this.state={container:this.initContainer(t,!0)}}componentDidMount(){const e=this.initContainer(this.context);e!==this.state.container&&this.setState({container:e})}componentDidUpdate(e){const{didUpdate:t}=this.props;t&&t(e)}componentWillUnmount(){const{container:e}=this.state;e&&e.removeChild(this.el)}render(){const{state:e,props:t}=this;return e.container?ih.createPortal(t.children,this.el):null}}dh.contextType=Wi;dh.defaultProps={prefixCls:`${te}-portal`};dh.propTypes={children:p.node,prefixCls:p.string,getPopupContainer:p.func,className:p.string,didUpdate:p.func};var ER=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const TR=n=>{const{className:e,style:t}=n,r=ER(n,["className","style"]);return _.createElement("svg",Object.assign({"aria-hidden":!0,className:e,style:t},r,{width:"24",height:"7",viewBox:"0 0 24 7",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}),_.createElement("path",{d:"M24 0V1C20 1 18.5 2 16.5 4C14.5 6 14 7 12 7C10 7 9.5 6 7.5 4C5.5 2 4 1 0 1V0H24Z"}))};var kR=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const AR=n=>{const{className:e,style:t}=n,r=kR(n,["className","style"]);return _.createElement("svg",Object.assign({"aria-hidden":!0,className:e,style:t},r,{width:"7",height:"24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"}),_.createElement("path",{d:"M0 0L1 0C1 4, 2 5.5, 4 7.5S7,10 7,12S6 14.5, 4 16.5S1,20 1,24L0 24L0 0z"}))},IR=p.shape({offsetX:p.number,offsetY:p.number,width:p.number,height:p.number});class Rs extends _.Component{constructor(e){super(e),this.handleAnimationStart=()=>{var t,r;(r=(t=this.props).onAnimationStart)===null||r===void 0||r.call(t)},this.handleAnimationEnd=()=>{this.setState({currentClassName:this.props.endClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!1},()=>{var t,r;(r=(t=this.props).onAnimationEnd)===null||r===void 0||r.call(t,!1)})},this.state={currentClassName:this.props.startClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!0}}componentDidMount(){var e,t,r,i;(t=(e=this.props).onAnimationStart)===null||t===void 0||t.call(e),this.props.motion||((i=(r=this.props).onAnimationEnd)===null||i===void 0||i.call(r,!1),this.setState({isAnimating:!1}))}componentDidUpdate(e,t,r){const i=Object.keys(this.props).filter(s=>!yt(this.props[s],e[s]));i.includes("animationState"),(i.includes("startClassName")||i.includes("replayKey")||i.includes("motion"))&&this.setState({currentClassName:this.props.startClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!0},()=>{var s,o,a,h;(o=(s=this.props).onAnimationStart)===null||o===void 0||o.call(s),this.props.motion||((h=(a=this.props).onAnimationEnd)===null||h===void 0||h.call(a,this.state.isAnimating),this.setState({isAnimating:!1}))})}render(){var e;return this.props.motion?this.props.children({animationClassName:(e=this.state.currentClassName)!==null&&e!==void 0?e:"",animationStyle:this.state.extraStyle,animationEventsNeedBind:{onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},isAnimating:this.state.isAnimating}):this.props.children({animationClassName:"",animationStyle:{},animationEventsNeedBind:{},isAnimating:this.state.isAnimating})}}Rs.defaultProps={motion:!0,replayKey:""};var Tb=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const zc=tR.PREFIX,MR=Ps.POSITION_SET,NR=Ps.TRIGGER_SET,DR=["flex","block","table","flow-root","grid"],$R=()=>document.body;class gt extends Ee{constructor(e){super(e),this.isAnimating=!1,this.setContainerEl=t=>this.containerEl={current:t},this.isSpecial=t=>{if(ws(t))return!!t.disabled;if(G.isValidElement(t)){if(oe(t,"props.disabled"))return Ps.STATUS_DISABLED;const i=oe(t,"props.loading"),s=!vr(t)&&!vr(t.type)&&(oe(t,"type.elementType")==="Button"||oe(t,"type.elementType")==="IconButton");if(i&&s)return Ps.STATUS_LOADING}return!1},this.didLeave=()=>{this.props.keepDOM?this.foundation.setDisplayNone(!0):this.foundation.removePortal(),this.foundation.unBindEvent()},this.renderIcon=()=>{const{placement:t}=this.state,{showArrow:r,prefixCls:i,style:s}=this.props;let o=null;const a=L([`${i}-icon-arrow`]),h=oe(s,"backgroundColor"),c=t!=null&&t.includes("left")||t!=null&&t.includes("right")?_.createElement(AR,null):_.createElement(TR,null);return r&&(G.isValidElement(r)?o=r:o=_.cloneElement(c,{className:a,style:{color:h,fill:"currentColor"}})),o},this.handlePortalInnerClick=t=>{this.props.clickToHide&&this.foundation.hide(),this.props.stopPropagation&&Yh(t)},this.handlePortalMouseDown=t=>{this.props.stopPropagation&&Yh(t)},this.handlePortalFocus=t=>{this.props.stopPropagation&&Yh(t)},this.handlePortalBlur=t=>{this.props.stopPropagation&&Yh(t)},this.handlePortalInnerKeyDown=t=>{this.foundation.handleContainerKeydown(t)},this.renderContentNode=t=>{const r={initialFocusRef:this.initialFocusRef};return Ht(t)?t(r):t},this.renderPortal=()=>{const{containerStyle:t={},visible:r,portalEventSet:i,placement:s,displayNone:o,transitionState:a,id:h,isPositionUpdated:c}=this.state,{prefixCls:l,content:d,showArrow:u,style:f,motion:m,role:g,zIndex:y}=this.props,v=this.renderContentNode(d),{className:b}=this.props,w=this.context.direction,C=L(b,{[`${l}-wrapper`]:!0,[`${l}-wrapper-show`]:r,[`${l}-with-arrow`]:!!u,[`${l}-rtl`]:w==="rtl"}),O=this.renderIcon(),x=Gi(t,m?["transformOrigin"]:void 0),P=oe(t,"transformOrigin"),T=oe(f,"opacity",null),k=T||1,E=_.createElement(Rs,{fillMode:"forwards",animationState:a,motion:m&&c,startClassName:a==="enter"?`${zc}-animation-show`:`${zc}-animation-hide`,onAnimationStart:()=>this.isAnimating=!0,onAnimationEnd:()=>{var I,M;a==="leave"&&(this.didLeave(),(M=(I=this.props).afterClose)===null||M===void 0||M.call(I)),this.isAnimating=!1}},I=>{let{animationStyle:M,animationClassName:R,animationEventsNeedBind:U}=I;return _.createElement("div",Object.assign({className:L(C,R),style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},M),o?{display:"none"}:{}),{transformOrigin:P}),f),T?{opacity:c?k:"0"}:{})},i,U,{role:g,"x-placement":s,id:h}),_.createElement("div",{className:`${zc}-content`},v),O)});return _.createElement(dh,{getPopupContainer:this.props.getPopupContainer,style:{zIndex:y}},_.createElement("div",{tabIndex:-1,className:`${te}-portal-inner`,style:x,ref:this.setContainerEl,onClick:this.handlePortalInnerClick,onFocus:this.handlePortalFocus,onBlur:this.handlePortalBlur,onMouseDown:this.handlePortalMouseDown,onKeyDown:this.handlePortalInnerKeyDown},E))},this.wrapSpan=t=>{const{wrapperClassName:r}=this.props,i=oe(t,"props.style.display"),s=oe(t,"props.block"),o=typeof t=="string",a={};return o||(a.display="inline-block"),(s||DR.includes(i))&&(a.width="100%"),_.createElement("span",{className:r,style:a},t)},this.mergeEvents=(t,r)=>{const i={};return V$(r,(s,o)=>{typeof s=="function"&&(i[o]=function(){s(...arguments),t&&typeof t[o]=="function"&&t[o](...arguments)})}),i},this.getPopupId=()=>this.state.id,this.state={visible:!1,transitionState:"",triggerEventSet:{},portalEventSet:{},containerStyle:{},isInsert:!1,placement:e.position||"top",transitionStyle:{},isPositionUpdated:!1,id:e.wrapperId,displayNone:!1},this.foundation=new eR(this.adapter),this.eventManager=new yx,this.triggerEl=_.createRef(),this.containerEl=_.createRef(),this.initialFocusRef=_.createRef(),this.clickOutsideHandler=null,this.resizeHandler=null,this.isWrapped=!1,this.containerPosition=void 0}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{on:function(){return e.eventManager.on(...arguments)},off:function(){return e.eventManager.off(...arguments)},getAnimatingState:()=>this.isAnimating,insertPortal:(t,r)=>{var i=Tb(r,["position"]);this.setState({isInsert:!0,transitionState:"enter",containerStyle:Object.assign(Object.assign({},this.state.containerStyle),i)},()=>{setTimeout(()=>{this.eventManager.emit("portalInserted")},0)})},removePortal:()=>{this.setState({isInsert:!1,isPositionUpdated:!1})},getEventName:()=>({mouseEnter:"onMouseEnter",mouseLeave:"onMouseLeave",mouseOut:"onMouseOut",mouseOver:"onMouseOver",click:"onClick",focus:"onFocus",blur:"onBlur",keydown:"onKeyDown",contextMenu:"onContextMenu"}),registerTriggerEvent:t=>{this.setState({triggerEventSet:t})},registerPortalEvent:t=>{this.setState({portalEventSet:t})},getTriggerBounding:()=>{const t=this.adapter.getTriggerNode();return this.triggerEl.current=t,t&&t.getBoundingClientRect()},getPopupContainerRect:()=>{const t=this.getPopupContainer();let r=null;if(t&&ws(t)){const i=H$(t.getBoundingClientRect());r=Object.assign(Object.assign({},i),{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop})}return r},containerIsBody:()=>this.getPopupContainer()===document.body,containerIsRelative:()=>{const t=this.getPopupContainer();return window.getComputedStyle(t).getPropertyValue("position")==="relative"},containerIsRelativeOrAbsolute:()=>["relative","absolute"].includes(this.containerPosition),getWrapperBounding:()=>{const t=this.containerEl&&this.containerEl.current;return t&&t.getBoundingClientRect()},getDocumentElementBounding:()=>document.documentElement.getBoundingClientRect(),setPosition:t=>{var{position:r}=t,i=Tb(t,["position"]);this.setState({containerStyle:Object.assign(Object.assign({},this.state.containerStyle),i),placement:r,isPositionUpdated:!0},()=>{this.eventManager.emit("positionUpdated")})},setDisplayNone:(t,r)=>{this.setState({displayNone:t},r)},updatePlacementAttr:t=>{this.setState({placement:t})},togglePortalVisible:(t,r)=>{const i={};i.transitionState=t?"enter":"leave",i.visible=t,this.mounted&&this.setState(i,()=>{r()})},registerClickOutsideHandler:t=>{this.clickOutsideHandler&&this.adapter.unregisterClickOutsideHandler(),this.clickOutsideHandler=r=>{if(!this.mounted)return!1;let i=this.triggerEl&&this.triggerEl.current,s=this.containerEl&&this.containerEl.current;i=nr.findDOMNode(i),s=nr.findDOMNode(s);const o=r.target,a=r.composedPath&&r.composedPath()||[o],h=this.props.clickTriggerToHide?i&&i.contains(o)||a.includes(i):!1;(i&&!i.contains(o)&&s&&!s.contains(o)&&!(a.includes(s)||a.includes(i))||h)&&(this.props.onClickOutSide(r),t())},window.addEventListener("mousedown",this.clickOutsideHandler)},unregisterClickOutsideHandler:()=>{this.clickOutsideHandler&&(window.removeEventListener("mousedown",this.clickOutsideHandler),this.clickOutsideHandler=null)},registerResizeHandler:t=>{this.resizeHandler&&this.adapter.unregisterResizeHandler(),this.resizeHandler=G1(r=>{if(!this.mounted)return!1;t(r)},10),window.addEventListener("resize",this.resizeHandler,!1)},unregisterResizeHandler:()=>{this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler,!1),this.resizeHandler=null)},notifyVisibleChange:t=>{this.props.onVisibleChange(t)},registerScrollHandler:t=>{this.scrollHandler&&this.adapter.unregisterScrollHandler(),this.scrollHandler=G1(r=>{if(!this.mounted)return!1;const i=this.adapter.getTriggerNode();if(r.target.contains(i)){const o={x:r.target.scrollLeft,y:r.target.scrollTop};t(o)}},10),window.addEventListener("scroll",this.scrollHandler,!0)},unregisterScrollHandler:()=>{this.scrollHandler&&(window.removeEventListener("scroll",this.scrollHandler,!0),this.scrollHandler=null)},canMotion:()=>!!this.props.motion,updateContainerPosition:()=>{const t=this.getPopupContainer();if(t&&ws(t)){const i=window.getComputedStyle(t).getPropertyValue("position");this.containerPosition=i}},getContainerPosition:()=>this.containerPosition,getContainer:()=>this.containerEl&&this.containerEl.current,getTriggerNode:()=>{let t=this.triggerEl.current;return ws(this.triggerEl.current)||(t=nr.findDOMNode(this.triggerEl.current)),t},getFocusableElements:t=>Cx(t),getActiveElement:()=>Sx(),setInitialFocus:()=>{const{preventScroll:t}=this.props,r=oe(this,"initialFocusRef.current");r&&"focus"in r&&r.focus({preventScroll:t})},notifyEscKeydown:t=>{this.props.onEscKeyDown(t)},setId:()=>{this.setState({id:Od()})},getTriggerDOM:()=>this.triggerEl.current?nr.findDOMNode(this.triggerEl.current):null})}componentDidMount(){this.mounted=!0,this.getPopupContainer=this.props.getPopupContainer||this.context.getPopupContainer||$R,this.foundation.init(),kv(()=>{let e=this.triggerEl.current;e&&(e instanceof HTMLElement||(e=ih.findDOMNode(e))),this.foundation.updateStateIfCursorOnTrigger(e)},1)}componentWillUnmount(){this.mounted=!1,this.foundation.destroy()}focusTrigger(){this.foundation.focusTrigger()}rePosition(){return this.foundation.calcPosition()}componentDidUpdate(e,t){Jr(this.props.mouseLeaveDelay<this.props.mouseEnterDelay,"[Semi Tooltip] 'mouseLeaveDelay' cannot be less than 'mouseEnterDelay', which may cause the dropdown layer to not be hidden."),e.visible!==this.props.visible&&(["hover","focus"].includes(this.props.trigger)?this.props.visible?this.foundation.delayShow():this.foundation.delayHide():this.props.visible?this.foundation.show():this.foundation.hide()),yt(e.rePosKey,this.props.rePosKey)||this.rePosition()}render(){const{isInsert:e,triggerEventSet:t,visible:r,id:i}=this.state,{wrapWhenSpecial:s,role:o,trigger:a}=this.props;let{children:h}=this.props;const c=Object.assign({},oe(h,"props.style")),l={};if(s){const f=this.isSpecial(h);f?(c.pointerEvents="none",f===Ps.STATUS_DISABLED&&(l.cursor="not-allowed"),h=G.cloneElement(h,{style:c}),a!=="custom"&&(h=this.wrapSpan(h)),this.isWrapped=!0):G.isValidElement(h)||(h=this.wrapSpan(h),this.isWrapped=!0)}let d={};o==="dialog"?(d["aria-expanded"]=r?"true":"false",d["aria-haspopup"]="dialog",d["aria-controls"]=i):d["aria-describedby"]=i;const u=_.cloneElement(h,Object.assign(Object.assign(Object.assign(Object.assign({},d),h.props),this.mergeEvents(h.props,t)),{style:Object.assign(Object.assign({},oe(h,"props.style")),l),className:L(oe(h,"props.className")),ref:f=>{this.triggerEl.current=f;const{ref:m}=h;typeof m=="function"?m(f):m&&typeof m=="object"&&(m.current=f)},tabIndex:h.props.tabIndex||0,"data-popupid":i}));return _.createElement(_.Fragment,null,e?this.renderPortal():null,u)}}gt.contextType=Wi;gt.propTypes={children:p.node,motion:p.bool,autoAdjustOverflow:p.bool,position:p.oneOf(MR),getPopupContainer:p.func,mouseEnterDelay:p.number,mouseLeaveDelay:p.number,trigger:p.oneOf(NR).isRequired,className:p.string,wrapperClassName:p.string,clickToHide:p.bool,clickTriggerToHide:p.bool,visible:p.bool,style:p.object,content:p.oneOfType([p.node,p.func]),prefixCls:p.string,onVisibleChange:p.func,onClickOutSide:p.func,spacing:p.oneOfType([p.number,p.object]),margin:p.oneOfType([p.number,p.object]),showArrow:p.oneOfType([p.bool,p.node]),zIndex:p.number,rePosKey:p.oneOfType([p.string,p.number]),arrowBounding:IR,transformFromCenter:p.bool,arrowPointAtCenter:p.bool,stopPropagation:p.bool,role:p.string,wrapWhenSpecial:p.bool,guardFocus:p.bool,returnFocusOnClose:p.bool,preventScroll:p.bool,keepDOM:p.bool};gt.__SemiComponentName__="Tooltip";gt.defaultProps=Tn(gt.__SemiComponentName__,{arrowBounding:Si.ARROW_BOUNDING,autoAdjustOverflow:!0,arrowPointAtCenter:!0,trigger:"hover",transformFromCenter:!0,position:"top",prefixCls:zc,role:"tooltip",mouseEnterDelay:Si.MOUSE_ENTER_DELAY,mouseLeaveDelay:Si.MOUSE_LEAVE_DELAY,motion:!0,onVisibleChange:Y,onClickOutSide:Y,spacing:Si.SPACING,margin:Si.MARGIN,showArrow:!0,wrapWhenSpecial:!0,zIndex:Si.DEFAULT_Z_INDEX,closeOnEsc:!1,guardFocus:!1,returnFocusOnClose:!1,onEscKeyDown:Y,disableFocusListener:!1,disableArrowKeyDown:!1,keepDOM:!1});var Av={exports:{}};const xx=(n,{target:e=document.body}={})=>{const t=document.createElement("textarea"),r=document.activeElement;t.value=n,t.setAttribute("readonly",""),t.style.contain="strict",t.style.position="absolute",t.style.left="-9999px",t.style.fontSize="12pt";const i=document.getSelection();let s=!1;i.rangeCount>0&&(s=i.getRangeAt(0)),e.append(t),t.select(),t.selectionStart=0,t.selectionEnd=n.length;let o=!1;try{o=document.execCommand("copy")}catch{}return t.remove(),s&&(i.removeAllRanges(),i.addRange(s)),r&&r.focus(),o};Av.exports=xx;Av.exports.default=xx;var RR=Av.exports;const FR=Ge(RR);function _n(){}const LR=_.createContext(null);function Df(n){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):n.defaultWidth,r=n.formats[t]||n.formats[n.defaultWidth];return r}}function Ua(n){return function(e,t){var r=t!=null&&t.context?String(t.context):"standalone",i;if(r==="formatting"&&n.formattingValues){var s=n.defaultFormattingWidth||n.defaultWidth,o=t!=null&&t.width?String(t.width):s;i=n.formattingValues[o]||n.formattingValues[s]}else{var a=n.defaultWidth,h=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[h]||n.values[a]}var c=n.argumentCallback?n.argumentCallback(e):e;return i[c]}}function Va(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;var o=s[0],a=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],h=Array.isArray(a)?BR(a,function(d){return d.test(o)}):jR(a,function(d){return d.test(o)}),c;c=n.valueCallback?n.valueCallback(h):h,c=t.valueCallback?t.valueCallback(c):c;var l=e.slice(o.length);return{value:c,rest:l}}}function jR(n,e){for(var t in n)if(n.hasOwnProperty(t)&&e(n[t]))return t}function BR(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return t}function GR(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(n.matchPattern);if(!r)return null;var i=r[0],s=e.match(n.parsePattern);if(!s)return null;var o=n.valueCallback?n.valueCallback(s[0]):s[0];o=t.valueCallback?t.valueCallback(o):o;var a=e.slice(i.length);return{value:o,rest:a}}}function jm(n){"@babel/helpers - typeof";return jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jm(n)}function zR(n){if(n===null||n===!0||n===!1)return NaN;var e=Number(n);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Iv(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}function UR(n){Iv(1,arguments);var e=Object.prototype.toString.call(n);return n instanceof Date||jm(n)==="object"&&e==="[object Date]"?new Date(n.getTime()):typeof n=="number"||e==="[object Number]"?new Date(n):((typeof n=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var VR={};function HR(){return VR}function kb(n,e){var t,r,i,s,o,a,h,c;Iv(1,arguments);var l=HR(),d=zR((t=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:l.weekStartsOn)!==null&&r!==void 0?r:(h=l.locale)===null||h===void 0||(c=h.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&t!==void 0?t:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=UR(n),f=u.getUTCDay(),m=(f<d?7:0)+f-d;return u.setUTCDate(u.getUTCDate()-m),u.setUTCHours(0,0,0,0),u}function Ab(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Bm(n,e){return Bm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Bm(n,e)}function KR(n,e,t){Iv(2,arguments);var r=kb(n,t),i=kb(e,t);return r.getTime()===i.getTime()}var WR={lessThanXSeconds:{one:"不到 1 秒",other:"不到 {{count}} 秒"},xSeconds:{one:"1 秒",other:"{{count}} 秒"},halfAMinute:"半分钟",lessThanXMinutes:{one:"不到 1 分钟",other:"不到 {{count}} 分钟"},xMinutes:{one:"1 分钟",other:"{{count}} 分钟"},xHours:{one:"1 小时",other:"{{count}} 小时"},aboutXHours:{one:"大约 1 小时",other:"大约 {{count}} 小时"},xDays:{one:"1 天",other:"{{count}} 天"},aboutXWeeks:{one:"大约 1 个星期",other:"大约 {{count}} 个星期"},xWeeks:{one:"1 个星期",other:"{{count}} 个星期"},aboutXMonths:{one:"大约 1 个月",other:"大约 {{count}} 个月"},xMonths:{one:"1 个月",other:"{{count}} 个月"},aboutXYears:{one:"大约 1 年",other:"大约 {{count}} 年"},xYears:{one:"1 年",other:"{{count}} 年"},overXYears:{one:"超过 1 年",other:"超过 {{count}} 年"},almostXYears:{one:"将近 1 年",other:"将近 {{count}} 年"}},XR=function(e,t,r){var i,s=WR[e];return typeof s=="string"?i=s:t===1?i=s.one:i=s.other.replace("{{count}}",String(t)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?i+"内":i+"前":i},YR={full:"y'年'M'月'd'日' EEEE",long:"y'年'M'月'd'日'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},qR={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},ZR={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},QR={date:Df({formats:YR,defaultWidth:"full"}),time:Df({formats:qR,defaultWidth:"full"}),dateTime:Df({formats:ZR,defaultWidth:"full"})};function Ib(n,e,t){var r="eeee p";return KR(n,e,t)?r:n.getTime()>e.getTime()?"'下个'"+r:"'上个'"+r}var JR={lastWeek:Ib,yesterday:"'昨天' p",today:"'今天' p",tomorrow:"'明天' p",nextWeek:Ib,other:"PP p"},eF=function(e,t,r,i){var s=JR[e];return typeof s=="function"?s(t,r,i):s},tF={narrow:["前","公元"],abbreviated:["前","公元"],wide:["公元前","公元"]},nF={narrow:["1","2","3","4"],abbreviated:["第一季","第二季","第三季","第四季"],wide:["第一季度","第二季度","第三季度","第四季度"]},rF={narrow:["一","二","三","四","五","六","七","八","九","十","十一","十二"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},iF={narrow:["日","一","二","三","四","五","六"],short:["日","一","二","三","四","五","六"],abbreviated:["周日","周一","周二","周三","周四","周五","周六"],wide:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},sF={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},oF={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},aF=function(e,t){var r=Number(e);switch(t==null?void 0:t.unit){case"date":return r.toString()+"日";case"hour":return r.toString()+"时";case"minute":return r.toString()+"分";case"second":return r.toString()+"秒";default:return"第 "+r.toString()}},lF={ordinalNumber:aF,era:Ua({values:tF,defaultWidth:"wide"}),quarter:Ua({values:nF,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Ua({values:rF,defaultWidth:"wide"}),day:Ua({values:iF,defaultWidth:"wide"}),dayPeriod:Ua({values:sF,defaultWidth:"wide",formattingValues:oF,defaultFormattingWidth:"wide"})},hF=/^(第\s*)?\d+(日|时|分|秒)?/i,cF=/\d+/i,dF={narrow:/^(前)/i,abbreviated:/^(前)/i,wide:/^(公元前|公元)/i},uF={any:[/^(前)/i,/^(公元)/i]},pF={narrow:/^[1234]/i,abbreviated:/^第[一二三四]刻/i,wide:/^第[一二三四]刻钟/i},fF={any:[/(1|一)/i,/(2|二)/i,/(3|三)/i,/(4|四)/i]},gF={narrow:/^(一|二|三|四|五|六|七|八|九|十[二一])/i,abbreviated:/^(一|二|三|四|五|六|七|八|九|十[二一]|\d|1[12])月/i,wide:/^(一|二|三|四|五|六|七|八|九|十[二一])月/i},mF={narrow:[/^一/i,/^二/i,/^三/i,/^四/i,/^五/i,/^六/i,/^七/i,/^八/i,/^九/i,/^十(?!(一|二))/i,/^十一/i,/^十二/i],any:[/^一|1/i,/^二|2/i,/^三|3/i,/^四|4/i,/^五|5/i,/^六|6/i,/^七|7/i,/^八|8/i,/^九|9/i,/^十(?!(一|二))|10/i,/^十一|11/i,/^十二|12/i]},vF={narrow:/^[一二三四五六日]/i,short:/^[一二三四五六日]/i,abbreviated:/^周[一二三四五六日]/i,wide:/^星期[一二三四五六日]/i},yF={any:[/日/i,/一/i,/二/i,/三/i,/四/i,/五/i,/六/i]},bF={any:/^(上午?|下午?|午夜|[中正]午|早上?|下午|晚上?|凌晨|)/i},_F={any:{am:/^上午?/i,pm:/^下午?/i,midnight:/^午夜/i,noon:/^[中正]午/i,morning:/^早上/i,afternoon:/^下午/i,evening:/^晚上?/i,night:/^凌晨/i}},wF={ordinalNumber:GR({matchPattern:hF,parsePattern:cF,valueCallback:function(e){return parseInt(e,10)}}),era:Va({matchPatterns:dF,defaultMatchWidth:"wide",parsePatterns:uF,defaultParseWidth:"any"}),quarter:Va({matchPatterns:pF,defaultMatchWidth:"wide",parsePatterns:fF,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Va({matchPatterns:gF,defaultMatchWidth:"wide",parsePatterns:mF,defaultParseWidth:"any"}),day:Va({matchPatterns:vF,defaultMatchWidth:"wide",parsePatterns:yF,defaultParseWidth:"any"}),dayPeriod:Va({matchPatterns:bF,defaultMatchWidth:"any",parsePatterns:_F,defaultParseWidth:"any"})},SF={code:"zh-CN",formatDistance:XR,formatLong:QR,formatRelative:eF,localize:lF,match:wF,options:{weekStartsOn:1,firstWeekContainsDate:4}};const Mb={code:"zh-CN",dateFnsLocale:SF,Pagination:{pageSize:"每页条数：${pageSize}",total:"总页数：${total}",jumpTo:"跳至",page:"页"},Modal:{confirm:"确定",cancel:"取消"},Tabs:{more:"更多"},TimePicker:{placeholder:{time:"请选择时间",timeRange:"请选择时间范围"},begin:"开始时间",end:"结束时间",hour:"时",minute:"分",second:"秒",AM:"上午",PM:"下午"},DatePicker:{placeholder:{date:"请选择日期",dateTime:"请选择日期及时间",dateRange:["开始日期","结束日期"],dateTimeRange:["开始日期","结束日期"],monthRange:["开始月份","结束月份"]},presets:"快捷选择",footer:{confirm:"确定",cancel:"取消"},selectDate:"返回选择日期",selectTime:"选择时间",year:"年",month:"月",day:"日",monthText:"${year}年 ${month}",months:{1:"1月",2:"2月",3:"3月",4:"4月",5:"5月",6:"6月",7:"7月",8:"8月",9:"9月",10:"10月",11:"11月",12:"12月"},fullMonths:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},weeks:{Mon:"一",Tue:"二",Wed:"三",Thu:"四",Fri:"五",Sat:"六",Sun:"日"},localeFormatToken:{FORMAT_SWITCH_DATE:"yyyy-MM-dd"}},Navigation:{collapseText:"收起侧边栏",expandText:"展开侧边栏"},Popconfirm:{confirm:"确定",cancel:"取消"},Table:{emptyText:"暂无数据",pageText:"显示第 ${currentStart} 条-第 ${currentEnd} 条，共 ${total} 条",descend:"点击降序",ascend:"点击升序",cancelSort:"取消排序"},Select:{emptyText:"暂无数据",createText:"创建"},Cascader:{emptyText:"暂无数据"},Tree:{emptyText:"暂无数据",searchPlaceholder:"搜索"},List:{emptyText:"暂无数据"},Calendar:{allDay:"全天",AM:"上午${time}时",PM:"下午${time}时",datestring:"日",remaining:"还有${remained}项"},Upload:{mainText:"点击上传文件或拖拽文件到这里",illegalTips:"不支持此类型文件",legalTips:"松手开始上传",retry:"重试",replace:"替换文件",clear:"清空",selectedFiles:"已选择文件",illegalSize:"文件尺寸不合法",fail:"上传失败"},TreeSelect:{searchPlaceholder:"搜索"},Typography:{copy:"复制",copied:"复制成功",expand:"展开",collapse:"收起"},Transfer:{emptyLeft:"暂无数据",emptySearch:"无搜索结果",emptyRight:"暂无内容，可从左侧勾选",placeholder:"搜索",clear:"清空",selectAll:"全选",clearSelectAll:"取消全选",total:"总个数：${total}",selected:"已选个数：${total}"},Form:{optional:"（可选）"},Image:{preview:"预览",loading:"加载中",loadError:"加载失败",prevTip:"上一张",nextTip:"下一张",zoomInTip:"放大",zoomOutTip:"缩小",rotateTip:"旋转",downloadTip:"下载",adaptiveTip:"适应页面",originTip:"原始尺寸"},Chat:{deleteConfirm:"确认删除该会话吗？",clearContext:"上下文已清除",copySuccess:"复制成功",stop:"停止",copy:"复制",copied:"复制成功",dropAreaText:"将文件放到这里"}};class jn extends G.Component{renderChildren(e,t){const{componentName:r}=this.props;let i=e;e!=null&&e.code||(i=Mb);const s=oe(Mb,"dateFnsLocale"),o=oe(i,"dateFnsLocale",s);return t(i[r],i.code,o)}render(){const{children:e}=this.props;return _.createElement(Wi.Consumer,null,t=>{let{locale:r}=t;return _.createElement(LR.Consumer,null,i=>this.renderChildren(r||i,e))})}}jn.propTypes={componentName:p.string.isRequired,children:p.any};jn.defaultProps={componentName:""};const CF="semi";var xF=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Ox=_.forwardRef((n,e)=>{const{svg:t,spin:r=!1,rotate:i,style:s,className:o,prefixCls:a=CF,type:h,size:c="default"}=n,l=xF(n,["svg","spin","rotate","style","className","prefixCls","type","size"]),d=L(`${a}-icon`,{[`${a}-icon-extra-small`]:c==="extra-small",[`${a}-icon-small`]:c==="small",[`${a}-icon-default`]:c==="default",[`${a}-icon-large`]:c==="large",[`${a}-icon-extra-large`]:c==="extra-large",[`${a}-icon-spinning`]:r===!0,[`${a}-icon-${h}`]:!!h},o),u={};return Number.isSafeInteger(i)&&(u.transform=`rotate(${i}deg)`),Object.assign(u,s),_.createElement("span",Object.assign({role:"img",ref:e,"aria-label":h,className:d,style:u},l),t)});Ox.elementType="Icon";const Mt=(n,e)=>{const t=_.forwardRef((r,i)=>_.createElement(Ox,Object.assign({svg:_.createElement(n),type:e,ref:i},r)));return t.elementType="Icon",t};function OF(n){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM13.5 17.5C13.5 16.6716 12.8284 16 12 16C11.1716 16 10.5 16.6716 10.5 17.5C10.5 18.3284 11.1716 19 12 19C12.8284 19 13.5 18.3284 13.5 17.5ZM12 5C10.9138 5 10.0507 5.91244 10.1109 6.99692L10.4168 12.5023C10.4635 13.3426 11.1584 14 12 14C12.8416 14 13.5365 13.3426 13.5832 12.5023L13.8891 6.99692C13.9493 5.91244 13.0862 5 12 5Z",fill:"currentColor"}))}const Px=Mt(OF,"alert_circle");function PF(n){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.2268 2.3986L1.52616 19.0749C0.831449 20.4064 1.79747 22 3.29933 22H20.7007C22.2025 22 23.1686 20.4064 22.4739 19.0749L13.7732 2.3986C13.0254 0.965441 10.9746 0.965442 10.2268 2.3986ZM13.1415 14.0101C13.0603 14.5781 12.5739 15 12.0001 15C11.4263 15 10.9398 14.5781 10.8586 14.0101L10.2829 9.97992C10.1336 8.93495 10.9445 8.00002 12.0001 8.00002C13.0556 8.00002 13.8665 8.93495 13.7172 9.97992L13.1415 14.0101ZM13.5001 18.5C13.5001 19.3284 12.8285 20 12.0001 20C11.1716 20 10.5001 19.3284 10.5001 18.5C10.5001 17.6716 11.1716 17 12.0001 17C12.8285 17 13.5001 17.6716 13.5001 18.5Z",fill:"currentColor"}))}const Mv=Mt(PF,"alert_triangle");function EF(n){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.08045 7.59809C4.66624 7.01231 5.61599 7.01231 6.20177 7.59809L11.8586 13.2549L17.5155 7.59809C18.1013 7.01231 19.051 7.01231 19.6368 7.59809C20.2226 8.18388 20.2226 9.13363 19.6368 9.71941L12.9193 16.4369C12.3335 17.0227 11.3838 17.0227 10.798 16.4369L4.08045 9.71941C3.49467 9.13363 3.49467 8.18388 4.08045 7.59809Z",fill:"currentColor"}))}const Ul=Mt(EF,"chevron_down");function TF(n){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.2782 4.23933C16.864 4.82511 16.864 5.77486 16.2782 6.36065L10.6213 12.0175L16.2782 17.6744C16.864 18.2601 16.864 19.2099 16.2782 19.7957C15.6924 20.3815 14.7426 20.3815 14.1569 19.7957L7.43934 13.0782C6.85355 12.4924 6.85355 11.5426 7.43934 10.9568L14.1569 4.23933C14.7426 3.65354 15.6924 3.65354 16.2782 4.23933Z",fill:"currentColor"}))}const kF=Mt(TF,"chevron_left");function AF(n){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.43934 19.7957C6.85355 19.2099 6.85355 18.2601 7.43934 17.6744L13.0962 12.0175L7.43934 6.36065C6.85355 5.77486 6.85355 4.82511 7.43934 4.23933C8.02513 3.65354 8.97487 3.65354 9.56066 4.23933L16.2782 10.9568C16.864 11.5426 16.864 12.4924 16.2782 13.0782L9.56066 19.7957C8.97487 20.3815 8.02513 20.3815 7.43934 19.7957Z",fill:"currentColor"}))}const Gm=Mt(AF,"chevron_right");function IF(n){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.637 16.4369C19.0513 17.0227 18.1015 17.0227 17.5157 16.4369L11.8589 10.7801L6.20202 16.4369C5.61623 17.0227 4.66648 17.0227 4.0807 16.4369C3.49491 15.8511 3.49491 14.9014 4.0807 14.3156L10.7982 7.59809C11.384 7.01231 12.3337 7.01231 12.9195 7.59809L19.637 14.3156C20.2228 14.9014 20.2228 15.8511 19.637 16.4369Z",fill:"currentColor"}))}const MF=Mt(IF,"chevron_up");function NF(n){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM17.0352 16.8626C16.4597 17.4585 15.5101 17.4751 14.9142 16.8996L12.0368 14.121L9.25822 16.9984C8.68274 17.5943 7.73314 17.6109 7.13722 17.0354C6.5413 16.4599 6.52472 15.5103 7.1002 14.9144L9.87883 12.037L7.00147 9.2584C6.40555 8.68293 6.38897 7.73332 6.96445 7.1374C7.53992 6.54148 8.48953 6.52491 9.08545 7.10038L11.9628 9.87901L14.7414 7.00165C15.3169 6.40573 16.2665 6.38916 16.8624 6.96463C17.4584 7.54011 17.4749 8.48971 16.8995 9.08563L14.1208 11.963L16.9982 14.7416C17.5941 15.3171 17.6107 16.2667 17.0352 16.8626Z",fill:"currentColor"}))}const Ex=Mt(NF,"clear");function DF(n){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),G.createElement("path",{d:"M17.6568 19.7782C18.2426 20.3639 19.1924 20.3639 19.7782 19.7782C20.3639 19.1924 20.3639 18.2426 19.7782 17.6568L14.1213 12L19.7782 6.34313C20.3639 5.75734 20.3639 4.8076 19.7782 4.22181C19.1924 3.63602 18.2426 3.63602 17.6568 4.22181L12 9.87866L6.34313 4.22181C5.75734 3.63602 4.8076 3.63602 4.22181 4.22181C3.63602 4.8076 3.63602 5.75734 4.22181 6.34313L9.87866 12L4.22181 17.6568C3.63602 18.2426 3.63602 19.1924 4.22181 19.7782C4.8076 20.3639 5.75734 20.3639 6.34313 19.7782L12 14.1213L17.6568 19.7782Z",fill:"currentColor"}))}const uh=Mt(DF,"close");function $F(n){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),G.createElement("path",{d:"M7 4C7 2.89543 7.89543 2 9 2H20C21.1046 2 22 2.89543 22 4V15C22 16.1046 21.1046 17 20 17H19V8C19 6 18 5 16 5H7V4Z",fill:"currentColor"}),G.createElement("path",{d:"M5 7C3.89543 7 3 7.89543 3 9V19C3 20.1046 3.89543 21 5 21H15C16.1046 21 17 20.1046 17 19V9C17 7.89543 16.1046 7 15 7H5Z",fill:"currentColor"}))}const RF=Mt($F,"copy");function FF(n){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.7071 3.70711C22.0976 3.31658 22.0976 2.68342 21.7071 2.29289C21.3166 1.90237 20.6834 1.90237 20.2929 2.29289L17.3135 5.27233C15.8114 4.50566 14.0321 4 12 4C5 4 1 10 1 12C1 13.1757 2.38219 15.7335 4.94345 17.6423L2.29289 20.2929C1.90237 20.6834 1.90237 21.3166 2.29289 21.7071C2.68342 22.0976 3.31658 22.0976 3.70711 21.7071L21.7071 3.70711ZM7.8284 14.7574L9.29237 13.2934C9.10495 12.9018 9 12.4631 9 12C9 10.3431 10.3431 9 12 9C12.4631 9 12.9018 9.10495 13.2934 9.29237L14.7574 7.8284C13.967 7.30488 13.0191 7 12 7C9.23858 7 7 9.23858 7 12C7 13.0191 7.30488 13.967 7.8284 14.7574Z",fill:"currentColor"}),G.createElement("path",{d:"M12 20C10.7789 20 9.64914 19.8174 8.61594 19.5054L11.1871 16.9342C11.4516 16.9775 11.7232 17 12 17C14.7614 17 17 14.7614 17 12C17 11.7232 16.9775 11.4516 16.9342 11.1871L20.5032 7.61808C22.1342 9.27317 23 11.0695 23 12C23 14 19 20 12 20Z",fill:"currentColor"}))}const LF=Mt(FF,"eye_closed_solid");function jF(n){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.22396 20.7662C-0.415453 19.1136 -0.406853 16.4316 1.24313 14.7897L10.57 5.50874L9.62535 4.55653C9.08135 4.00817 9.08135 3.11909 9.62535 2.57074C10.1694 2.02238 11.0514 2.02238 11.5954 2.57074L12.5526 3.53579L14.8854 1.21459C16.5204 -0.412333 19.1516 -0.403739 20.776 1.2338C22.4154 2.88639 22.4069 5.56845 20.7569 7.21035L18.4626 9.49315L19.4751 10.5139C20.0192 11.0623 20.0192 11.9514 19.4751 12.4998C18.9311 13.0481 18.0491 13.0481 17.5053 12.4998L16.4799 11.4661L7.11458 20.7855C5.47962 22.4122 2.84845 22.4038 1.22396 20.7662ZM12.54 7.49455L14.5099 9.48042L5.1574 18.7869C4.61243 19.3291 3.7354 19.3263 3.19392 18.7805C2.64747 18.2295 2.65033 17.3355 3.20031 16.7883L12.54 7.49455Z",fill:"currentColor"}))}const BF=Mt(jF,"eyedropper");function GF(n){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4C5 4 1 10 1 12C1 14 5 20 12 20C19 20 23 14 23 12C23 10 19 4 12 4ZM17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12ZM12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",fill:"currentColor"}))}const zF=Mt(GF,"eye_opened");function UF(n){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM11.8281 14.6094C10.9688 14.6094 10.5391 14.0723 10.5391 13.3691C10.5391 12.3242 11.0566 11.6504 12.2676 10.7324C12.2894 10.7158 12.3111 10.6993 12.3326 10.6829C13.1573 10.0555 13.7324 9.61807 13.7324 8.82812C13.7324 7.93945 12.9023 7.42188 11.9746 7.42188C11.2129 7.42188 10.627 7.70508 10.168 8.30078C9.83594 8.64258 9.57227 8.82812 9.12305 8.82812C8.38086 8.82812 8 8.31055 8 7.71484C8 7.10938 8.3418 6.49414 8.87891 6.02539C9.60156 5.40039 10.7539 5 12.2773 5C14.9922 5 16.8965 6.33789 16.8965 8.64258C16.8965 10.3223 15.8906 11.1328 14.709 11.9531C13.9082 12.5391 13.5273 12.8809 13.2246 13.5742L13.2238 13.5756C12.8922 14.1609 12.638 14.6094 11.8281 14.6094ZM11.8086 18.7695C10.8711 18.7695 10.0996 18.1641 10.0996 17.2266C10.0996 16.2891 10.8711 15.6836 11.8086 15.6836C12.7461 15.6836 13.5078 16.2891 13.5078 17.2266C13.5078 18.1641 12.7461 18.7695 11.8086 18.7695Z",fill:"currentColor"}))}const VF=Mt(UF,"help_circle");function HF(n){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM14 7C14 8.10457 13.1046 9 12 9C10.8954 9 10 8.10457 10 7C10 5.89543 10.8954 5 12 5C13.1046 5 14 5.89543 14 7ZM9 10.75C9 10.3358 9.33579 10 9.75 10H12.5C13.0523 10 13.5 10.4477 13.5 11V16.5H14.25C14.6642 16.5 15 16.8358 15 17.25C15 17.6642 14.6642 18 14.25 18H9.75C9.33579 18 9 17.6642 9 17.25C9 16.8358 9.33579 16.5 9.75 16.5H10.5V11.5H9.75C9.33579 11.5 9 11.1642 9 10.75Z",fill:"currentColor"}))}const Tx=Mt(HF,"info_circle");function KF(n){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 2C5.80558 2 2 5.80558 2 10.5C2 15.1944 5.80558 19 10.5 19C12.3054 19 13.9794 18.4371 15.356 17.4773L19.4393 21.5606C20.0251 22.1464 20.9749 22.1464 21.5606 21.5606C22.1464 20.9749 22.1464 20.0251 21.5606 19.4393L17.4773 15.356C18.4371 13.9794 19 12.3054 19 10.5C19 5.80558 15.1944 2 10.5 2ZM5 10.5C5 7.46243 7.46243 5 10.5 5C13.5376 5 16 7.46243 16 10.5C16 13.5376 13.5376 16 10.5 16C7.46243 16 5 13.5376 5 10.5Z",fill:"currentColor"}))}const WF=Mt(KF,"search");function XF(n){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 2H19C20.6569 2 22 3.34315 22 5V19C22 20.6569 20.6569 22 19 22H5C3.34315 22 2 20.6569 2 19V5C2 3.34315 3.34315 2 5 2ZM6 4C5.44772 4 5 4.44772 5 5V19C5 19.5523 5.44772 20 6 20H9C9.55229 20 10 19.5523 10 19V5C10 4.44772 9.55229 4 9 4H6Z",fill:"currentColor"}))}const YF=Mt(XF,"sidebar");function qF(n){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.3516 4.2652C22.0336 4.73552 22.2052 5.66964 21.7348 6.35162L11.7348 20.8516C11.4765 21.2262 11.0622 21.4632 10.6084 21.4961C10.1546 21.529 9.71041 21.3541 9.40082 21.0207L2.90082 14.0207C2.33711 13.4136 2.37226 12.4645 2.97933 11.9008C3.5864 11.3371 4.53549 11.3723 5.0992 11.9793L10.3268 17.6091L19.2652 4.64842C19.7355 3.96644 20.6696 3.79487 21.3516 4.2652Z",fill:"currentColor"}))}const Pd=Mt(qF,"tick");function ZF(n){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},n),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM17.8831 9.82235L11.6854 17.4112C11.4029 17.7806 10.965 17.9981 10.5 18C10.035 18.0019 9.59533 17.788 9.30982 17.421L5.81604 13.4209C5.30744 12.767 5.42524 11.8246 6.07916 11.316C6.73308 10.8074 7.67549 10.9252 8.1841 11.5791L10.4838 14.0439L15.5 8C16.0032 7.34193 16.9446 7.21641 17.6027 7.71964C18.2608 8.22287 18.3863 9.16428 17.8831 9.82235Z",fill:"currentColor"}))}const kx=Mt(ZF,"tick_circle"),Jn={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229},Nv="Enter";function ph(n){return oe(n,"key")===Nv}const $f=xp.PREFIX;class Dv extends _.PureComponent{constructor(e){super(e),this.copy=t=>{const{content:r,duration:i,onCopy:s}=this.props,o=FR(r);s&&s(t,r,o),this.setCopied(r,i)},this.setCopied=(t,r)=>{this.setState({copied:!0,item:t}),this._timeId=setTimeout(()=>{this.resetCopied()},r*1e3)},this.resetCopied=()=>{this._timeId&&(clearTimeout(this._timeId),this._timeId=null,this.setState({copied:!1,item:""}))},this.renderSuccessTip=()=>{const{successTip:t}=this.props;return typeof t<"u"?t:_.createElement(jn,{componentName:"Typography"},r=>_.createElement("span",null,_.createElement(Pd,null),r.copied))},this.renderCopyIcon=()=>{const{icon:t}=this.props,r={role:"button",tabIndex:0,onClick:this.copy,onKeyPress:s=>ph(s)&&this.copy(s)},i=_.createElement("a",{className:`${$f}-action-copy-icon`},_.createElement(RF,Object.assign({onClick:this.copy},r)));return _.isValidElement(t)?_.cloneElement(t,r):i},this.state={copied:!1,item:""}}componentWillUnmount(){this._timeId&&(clearTimeout(this._timeId),this._timeId=null)}render(){const{style:e,className:t,forwardRef:r,copyTip:i,render:s}=this.props,{copied:o}=this.state,a=L(t,{[`${$f}-action-copy`]:!o,[`${$f}-action-copied`]:o});return s?s(o,this.copy,this.props):_.createElement(jn,{componentName:"Typography"},h=>_.createElement("span",{style:Object.assign({marginLeft:"4px"},e),className:a,ref:r},o?this.renderSuccessTip():_.createElement(gt,{content:typeof i<"u"?i:h.copy},this.renderCopyIcon())))}}Dv.propTypes={content:p.string,onCopy:p.func,successTip:p.node,copyTip:p.node,duration:p.number,style:p.object,className:p.string,icon:p.node};Dv.defaultProps={content:"",onCopy:_n,duration:3,style:{},className:""};const Ax={PREFIX:`${te}-popover`,ARROW:`${te}-popover-icon-arrow`},Sl={POSITION_SET:["top","topLeft","topRight","left","leftTop","leftBottom","right","rightTop","rightBottom","bottom","bottomLeft","bottomRight","leftTopOver","rightTopOver"],TRIGGER_SET:["hover","focus","click","custom","contextMenu"],DEFAULT_ARROW_STYLE:{borderOpacity:"1",backgroundColor:"var(--semi-color-bg-3)",borderColor:"var(--semi-color-border)"}},Fs={ARROW_BOUNDING:Object.assign(Object.assign({},Si.ARROW_BOUNDING),{offsetY:6,offsetX:0,height:8}),SPACING:4,SPACING_WITH_ARROW:10,DEFAULT_Z_INDEX:1030};var QF=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Ix=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{position:e="",className:t,arrowStyle:r,popStyle:i}=n,s=QF(n,["position","className","arrowStyle","popStyle"]),o=e.indexOf("top")===0||e.indexOf("bottom")===0,a=L(t,Ax.ARROW),h=oe(r,"borderOpacity",Sl.DEFAULT_ARROW_STYLE.borderOpacity),c=oe(r,"backgroundColor",oe(i,"backgroundColor",Sl.DEFAULT_ARROW_STYLE.backgroundColor)),l=oe(r,"borderColor",oe(i,"borderColor",Sl.DEFAULT_ARROW_STYLE.borderColor)),d=Object.assign(Object.assign({},s),{width:Fs.ARROW_BOUNDING.width,height:Fs.ARROW_BOUNDING.height,xmlns:"http://www.w3.org/2000/svg",className:a});return o?_.createElement("svg",Object.assign({},d),_.createElement("path",{d:"M0 0.5L0 1.5C4 1.5, 5.5 3, 7.5 5S10,8 12,8S14.5 7, 16.5 5S20,1.5 24,1.5L24 0.5L0 0.5z",fill:l,opacity:h}),_.createElement("path",{d:"M0 0L0 1C4 1, 5.5 2, 7.5 4S10,7 12,7S14.5  6, 16.5 4S20,1 24,1L24 0L0 0z",fill:c})):_.createElement("svg",Object.assign({},d),_.createElement("path",{d:"M0.5 0L1.5 0C1.5 4, 3 5.5, 5 7.5S8,10 8,12S7 14.5, 5 16.5S1.5,20 1.5,24L0.5 24L0.5 0z",fill:l,opacity:h}),_.createElement("path",{d:"M0 0L1 0C1 4, 2 5.5, 4 7.5S7,10 7,12S6 14.5, 4 16.5S1,20 1,24L0 24L0 0z",fill:c}))};Ix.propTypes={position:p.string,className:p.string,arrowStyle:p.object,popStyle:p.object};var JF=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const eL=Sl.POSITION_SET,tL=Sl.TRIGGER_SET;class un extends _.PureComponent{constructor(e){super(e),this.focusTrigger=()=>{var t;(t=this.tooltipRef.current)===null||t===void 0||t.focusTrigger()},this.renderPopCard=t=>{let{initialFocusRef:r}=t;const{content:i,contentClassName:s,prefixCls:o}=this.props,{direction:a}=this.context,h=L(o,s,{[`${o}-rtl`]:a==="rtl"}),c=this.renderContentNode({initialFocusRef:r,content:i});return _.createElement("div",{className:h},_.createElement("div",{className:`${o}-content`},c))},this.renderContentNode=t=>{const{initialFocusRef:r,content:i}=t,s={initialFocusRef:r};return Ht(i)?i(s):i},this.tooltipRef=_.createRef()}render(){const e=this.props,{children:t,prefixCls:r,showArrow:i,arrowStyle:s={},arrowBounding:o,position:a,style:h,trigger:c}=e,l=JF(e,["children","prefixCls","showArrow","arrowStyle","arrowBounding","position","style","trigger"]);let{spacing:d}=this.props;const u={position:a,className:"",popStyle:h,arrowStyle:s},f=i?_.createElement(Ix,Object.assign({},u)):!1;tn(d)&&(d=i?Fs.SPACING_WITH_ARROW:Fs.SPACING);const m=c==="click"||c==="custom"?"dialog":"tooltip";return _.createElement(gt,Object.assign({guardFocus:!0,ref:this.tooltipRef},l,{trigger:c,position:a,style:h,content:this.renderPopCard,prefixCls:r,spacing:d,showArrow:f,arrowBounding:o,role:m}),t)}}un.contextType=Wi;un.propTypes={children:p.node,content:p.oneOfType([p.node,p.func]),visible:p.bool,autoAdjustOverflow:p.bool,motion:p.bool,position:p.oneOf(eL),margin:p.oneOfType([p.number,p.object]),mouseEnterDelay:p.number,mouseLeaveDelay:p.number,trigger:p.oneOf(tL).isRequired,contentClassName:p.oneOfType([p.string,p.array]),onVisibleChange:p.func,onClickOutSide:p.func,style:p.object,spacing:p.oneOfType([p.number,p.object]),zIndex:p.number,showArrow:p.bool,arrowStyle:p.shape({borderColor:p.string,backgroundColor:p.string,borderOpacity:p.oneOfType([p.string,p.number])}),arrowPointAtCenter:p.bool,arrowBounding:p.object,prefixCls:p.string,guardFocus:p.bool,disableArrowKeyDown:p.bool};un.__SemiComponentName__="Popover";un.defaultProps=Tn(un.__SemiComponentName__,{arrowBounding:Fs.ARROW_BOUNDING,showArrow:!1,autoAdjustOverflow:!0,zIndex:Fs.DEFAULT_Z_INDEX,motion:!0,trigger:"hover",cancelText:"No",okText:"Yes",position:"bottom",prefixCls:Ax.PREFIX,onClickOutSide:Y,onEscKeyDown:Y,closeOnEsc:!0,returnFocusOnClose:!0,guardFocus:!0,disableFocusListener:!0});let it;function Rf(n){if(!n)return 0;const e=n.match(/^\d*(\.\d*)?/);return e?Number(e[0]):0}function nL(n){return Array.prototype.slice.apply(n).map(t=>`${t}: ${n.getPropertyValue(t)};`).join("")}const rL=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;if(t.length===0)return"";it||(it=document.createElement("div"),it.setAttribute("aria-hidden","true"),document.body.appendChild(it));const a=window.getComputedStyle(n),h=nL(a),c=Rf(a.lineHeight),l=Math.round(c*(e+1)+Rf(a.paddingTop)+Rf(a.paddingBottom));it.setAttribute("style",h),it.style.position="fixed",it.style.left="0",it.style.height="auto",it.style.top="-999999px",it.style.zIndex="-1000",it.style.textOverflow="clip",it.style.webkitLineClamp="none",nr.render(_.createElement(_.Fragment,null),it);function d(){const b=it.scrollWidth<=it.offsetWidth,w=it.scrollHeight<l;return e===1?b&&w:w}const u=document.createElement("span"),f=document.createTextNode(t);if(u.appendChild(f),s.length>0){const b=document.createTextNode(s);u.appendChild(b)}it.appendChild(u),Object.values(Gi(r,"expand")).map(b=>b&&it.appendChild(b.cloneNode(!0)));function m(){it.innerHTML="",it.appendChild(u),Object.values(r).map(b=>b&&it.appendChild(b.cloneNode(!0)))}function g(b,w){const C=b.length;return w?o==="end"?b.slice(0,w)+i:b.slice(0,w)+i+b.slice(C-w,C):i}function y(b,w){let C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:w.length,x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;const P=Math.floor((C+O)/2),T=g(w,P);if(b.textContent=T,C>=O-1&&O>0)for(let k=O;k>=C;k-=1){const E=g(w,k);if(b.textContent=E,d())return E}else if(O===0)return i;return d()?y(b,w,P,O,P):y(b,w,C,P,x)}let v=t;return d()||(m(),v=y(f,t,0,o==="middle"?Math.floor(t.length/2):t.length)),it.innerHTML="",v},Mx=_.createContext("normal");var Ed;(function(n){n.Width="width",n.Height="height",n.All="all"})(Ed||(Ed={}));class Vo extends Ee{constructor(e){var t;super(e),t=this,this.formerPropertyValue=new Map,this.getElement=()=>{try{return ih.findDOMNode(this.childNode||this)}catch{return null}},this.handleResizeEventTriggered=r=>{var i,s,o,a;if(this.props.observerProperty===Ed.All)(s=(i=this.props).onResize)===null||s===void 0||s.call(i,r);else{const h=[];for(const c of r)this.formerPropertyValue.has(c.target)?c.contentRect[this.props.observerProperty]!==this.formerPropertyValue.get(c.target)&&(this.formerPropertyValue.set(c.target,c.contentRect[this.props.observerProperty]),h.push(c)):(this.formerPropertyValue.set(c.target,c.contentRect[this.props.observerProperty]),h.push(c));h.length>0&&((a=(o=this.props).onResize)===null||a===void 0||a.call(o,h))}},this.observeElement=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const i=t.getElement();if(t.observer||(t.observer=new ResizeObserver(t.handleResizeEventTriggered)),!(i&&i instanceof Element)){t.observer.disconnect();return}i===t.element&&!r||(t.observer.disconnect(),t.element=i,t.observer.observe(i),t.props.observeParent&&i.parentNode&&i.parentNode.ownerDocument&&i.parentNode.ownerDocument.defaultView&&i.parentNode instanceof i.parentNode.ownerDocument.defaultView.HTMLElement&&(t._parentNode=i.parentNode,t.observer.observe(t._parentNode)))},this.mergeRef=(r,i)=>{this.childNode=i,typeof r=="function"?r(i):typeof r=="object"&&r&&"current"in r&&(r.current=i)},globalThis.ResizeObserver&&(this.observer=new ResizeObserver(this.handleResizeEventTriggered))}componentDidMount(){var e;(e=this.observeElement)===null||e===void 0||e.call(this)}componentDidUpdate(e){var t;(t=this.observeElement)===null||t===void 0||t.call(this,this.props.observeParent!==e.observeParent)}componentWillUnmount(){this.observer&&(this.observer.disconnect(),this.observer=null,this.element=null)}render(){const e=_.Children.only(this.props.children),{ref:t}=e;return _.cloneElement(e,{ref:r=>this.mergeRef(t,r)})}}Vo.propTypes={onResize:p.func,observeParent:p.bool,observerProperty:p.string,delayTick:p.number};Vo.defaultProps={onResize:()=>{},observeParent:!1,observerProperty:"all",delayTick:0};var Ff=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function h(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,h)}c((r=r.apply(n,e||[])).next())})},iL=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Tt=xp.PREFIX,sL="...",oL=(n,e)=>{const{mark:t,code:r,underline:i,strong:s,link:o,disabled:a}=n;let h=e;const c=(l,d)=>{let u={};l&&(typeof l=="object"&&(u=Object.assign({},l)),h=_.createElement(d,u,h))};return c(t,"mark"),c(r,"code"),c(i&&!o,"u"),c(s,"strong"),c(n.delete,"del"),c(o,a?"span":"a"),h};class Ws extends G.Component{constructor(e){super(e),this.observerTakingEffect=!1,this.onResize=t=>Ff(this,void 0,void 0,function*(){return this.rafId&&window.cancelAnimationFrame(this.rafId),new Promise(r=>{this.rafId=window.requestAnimationFrame(()=>Ff(this,void 0,void 0,function*(){yield this.getEllipsisState(),r()}))})}),this.canUseCSSEllipsis=()=>{const{copyable:t}=this.props,{expandable:r,expandText:i,pos:s,suffix:o}=this.getEllipsisOpt();return!r&&ll(i)&&!t&&s==="end"&&!o.length},this.shouldTruncated=t=>!t||t<1?!1:t<=1?this.compareSingleRow():this.wrapperRef.current.scrollHeight>this.wrapperRef.current.offsetHeight,this.compareSingleRow=()=>{if(!(document&&document.createRange))return!1;const t=this.wrapperRef.current,r=t.getBoundingClientRect().width,i=Array.from(t.childNodes),s=document.createRange(),o=i.reduce((a,h)=>{var c;return s.selectNodeContents(h),a+((c=s.getBoundingClientRect().width)!==null&&c!==void 0?c:0)},0);return s.detach(),o>r},this.showTooltip=()=>{var t,r;const{isOverflowed:i,isTruncated:s,expanded:o}=this.state,{showTooltip:a,expandable:h,expandText:c}=this.getEllipsisOpt(),l=this.canUseCSSEllipsis(),d=!o&&(l?i:s),f=!h&&ll(c)&&d&&a;if(!f)return f;const m={type:"tooltip"};return typeof a=="object"?a.type&&a.type.toLowerCase()==="popover"?XA({opts:{showArrow:!0}},a,{opts:{className:L({[`${Tt}-ellipsis-popover`]:!0,[(t=a==null?void 0:a.opts)===null||t===void 0?void 0:t.className]:!!(!((r=a==null?void 0:a.opts)===null||r===void 0)&&r.className)})}}):Object.assign(Object.assign({},m),a):m},this.onHover=()=>{if(this.canUseCSSEllipsis()){const{rows:r,suffix:i,pos:s}=this.getEllipsisOpt(),o=this.shouldTruncated(r);this.setState({isOverflowed:o,isTruncated:!1});return}},this.getEllipsisState=()=>Ff(this,void 0,void 0,function*(){const{rows:t,suffix:r,pos:i}=this.getEllipsisOpt(),{children:s}=this.props;if(!this.wrapperRef||!this.wrapperRef.current){yield this.onResize();return}const{expanded:o}=this.state;if(this.canUseCSSEllipsis())return;if(q6(s))return new Promise(d=>{this.setState({isTruncated:!1,isOverflowed:!1},d)});if(Jr("children"in this.props&&typeof s!="string","[Semi Typography] Only children with pure text could be used with ellipsis at this moment."),!t||t<0||o)return;const h={expand:this.expandRef.current,copy:this.copyRef&&this.copyRef.current},c=Array.isArray(s)?s.join(""):String(s),l=rL(this.wrapperRef.current,t,c,h,sL,r,i);return new Promise(d=>{this.setState({isOverflowed:!1,ellipsisContent:l,isTruncated:c!==l},d)})}),this.toggleOverflow=t=>{const{onExpand:r,expandable:i,collapsible:s}=this.getEllipsisOpt(),{expanded:o}=this.state;r&&r(!o,t),(i&&!o||s&&o)&&this.setState({expanded:!o})},this.getEllipsisOpt=()=>{const{ellipsis:t}=this.props;return t?Object.assign({rows:1,expandable:!1,pos:"end",suffix:"",showTooltip:!1,collapsible:!1,expandText:t.expandable?this.expandStr:void 0,collapseText:t.collapsible?this.collapseStr:void 0},typeof t=="object"?t:null):{}},this.renderExpandable=()=>{const{expanded:t,isTruncated:r}=this.state;if(!r)return null;const{expandText:i,expandable:s,collapseText:o,collapsible:a}=this.getEllipsisOpt(),h=!s&&ll(i),c=!a&&ll(o);let l;return!t&&!h?l=i:t&&!c&&(l=o),!h||!c?_.createElement("a",{role:"button",tabIndex:0,className:`${Tt}-ellipsis-expand`,key:"expand",ref:this.expandRef,"aria-label":l,onClick:this.toggleOverflow,onKeyPress:d=>ph(d)&&this.toggleOverflow(d)},l):null},this.getEllipsisStyle=()=>{const{ellipsis:t,component:r}=this.props;if(!t)return{ellipsisCls:"",ellipsisStyle:{}};const{rows:i}=this.getEllipsisOpt(),{expanded:s}=this.state,o=!s&&this.canUseCSSEllipsis(),a=L({[`${Tt}-ellipsis`]:!0,[`${Tt}-ellipsis-single-line`]:i===1,[`${Tt}-ellipsis-multiple-line`]:i>1,[`${Tt}-ellipsis-multiple-line-text`]:i>1&&r==="span",[`${Tt}-ellipsis-overflow-ellipsis`]:i===1&&o,[`${Tt}-ellipsis-overflow-ellipsis-text`]:i===1&&o&&r==="span"}),h=o&&i>1?{WebkitLineClamp:i}:{};return{ellipsisCls:a,ellipsisStyle:h}},this.renderEllipsisText=t=>{const{suffix:r}=t,{children:i}=this.props,{isTruncated:s,expanded:o,ellipsisContent:a}=this.state;return o||!s?_.createElement("span",{onMouseEnter:this.onHover},i,r&&r.length?r:null):_.createElement("span",{onMouseEnter:this.onHover},a,r)},this.state={editable:!1,copied:!1,isOverflowed:!1,ellipsisContent:e.children,expanded:!1,isTruncated:!1,prevChildren:null},this.wrapperRef=_.createRef(),this.expandRef=_.createRef(),this.copyRef=_.createRef()}componentDidMount(){this.props.ellipsis&&this.onResize().then(()=>kv(()=>this.observerTakingEffect=!0,1))}static getDerivedStateFromProps(e,t){const{prevChildren:r}=t,i={};return i.prevChildren=e.children,e.ellipsis&&r!==e.children&&(i.isOverflowed=!1,i.ellipsisContent=e.children,i.expanded=!1,i.isTruncated=!0),i}componentDidUpdate(e){this.props.children!==e.children&&(this.forceUpdate(),this.props.ellipsis&&this.onResize())}componentWillUnmount(){this.rafId&&window.cancelAnimationFrame(this.rafId)}renderOperations(){return _.createElement(_.Fragment,null,this.renderExpandable(),this.renderCopy())}renderCopy(){var e;const{copyable:t,children:r}=this.props;if(!t)return null;const i=(e=t==null?void 0:t.content)!==null&&e!==void 0?e:r;let s,o=!1;Array.isArray(i)?(s="",i.forEach(h=>{typeof h=="object"&&(o=!0),s+=String(h)})):(typeof i!="object"||(o=!0),s=String(i)),Jr(o,"Content to be copied in Typography is a object, it will case a [object Object] mistake when copy to clipboard.");const a=Object.assign({content:s,duration:3},typeof t=="object"?t:null);return _.createElement(Dv,Object.assign({},a,{forwardRef:this.copyRef}))}renderIcon(){const{icon:e,size:t}=this.props,r=t==="inherit"?this.context:t;if(!e)return null;const i=r==="small"?"small":"default";return _.createElement("span",{className:`${Tt}-icon`,"x-semi-prop":"icon"},tr(e)?_.cloneElement(e,{size:i}):e)}renderContent(){const e=this.props,{component:t,children:r,className:i,type:s,spacing:o,disabled:a,style:h,ellipsis:c,icon:l,size:d,link:u,heading:f,weight:m}=e,g=iL(e,["component","children","className","type","spacing","disabled","style","ellipsis","icon","size","link","heading","weight"]),y=Gi(g,["strong","editable","mark","copyable","underline","code","delete"]),v=d==="inherit"?this.context:d,b=this.renderIcon(),w=this.getEllipsisOpt(),{ellipsisCls:C,ellipsisStyle:O}=this.getEllipsisStyle();let x=c?this.renderEllipsisText(w):r;const P=L({[`${Tt}-link-text`]:u,[`${Tt}-link-underline`]:this.props.underline&&u});x=oL(this.props,_.createElement(_.Fragment,null,b,this.props.link?_.createElement("span",{className:P},x):x));const T=/^h[1-6]$/,k=vt(f)&&T.test(f),E=L(i,C,{[`${Tt}-${s}`]:s&&!u,[`${Tt}-${v}`]:v,[`${Tt}-link`]:u,[`${Tt}-disabled`]:a,[`${Tt}-${o}`]:o,[`${Tt}-${f}`]:k,[`${Tt}-${f}-weight-${m}`]:k&&m&&isNaN(Number(m))}),I=Object.assign(Object.assign({},isNaN(Number(m))?{}:{fontWeight:m}),h);return _.createElement(Op,Object.assign({className:E,style:Object.assign(Object.assign({},I),O),component:t,forwardRef:this.wrapperRef},y),x,this.renderOperations())}renderTipWrapper(){const{children:e}=this.props,t=this.showTooltip(),r=this.renderContent();if(t){const{type:i,opts:s,renderTooltip:o}=t;return Ht(o)?o(e,r):i.toLowerCase()==="popover"?_.createElement(un,Object.assign({content:e,position:"top"},s),r):_.createElement(gt,Object.assign({content:e,position:"top"},s),r)}else return r}render(){var e=this;const{size:t}=this.props,r=t==="inherit"?this.context:t,i=_.createElement(Mx.Provider,{value:r},_.createElement(jn,{componentName:"Typography"},s=>(this.expandStr=s.expand,this.collapseStr=s.collapse,this.renderTipWrapper())));return this.props.ellipsis?_.createElement(Vo,{onResize:function(){e.observerTakingEffect&&e.onResize(...arguments)},observeParent:!0,observerProperty:Ed.Width},i):i}}Ws.propTypes={children:p.node,copyable:p.oneOfType([p.shape({text:p.string,onCopy:p.func,successTip:p.node,copyTip:p.node}),p.bool]),delete:p.bool,disabled:p.bool,ellipsis:p.oneOfType([p.shape({rows:p.number,expandable:p.bool,expandText:p.string,onExpand:p.func,suffix:p.string,showTooltip:p.oneOfType([p.shape({type:p.string,opts:p.object}),p.bool]),collapsible:p.bool,collapseText:p.string,pos:p.oneOf(["end","middle"])}),p.bool]),mark:p.bool,underline:p.bool,link:p.oneOfType([p.object,p.bool]),spacing:p.oneOf(Kt.SPACING),strong:p.bool,size:p.oneOf(Kt.SIZE),type:p.oneOf(Kt.TYPE),style:p.object,className:p.string,icon:p.oneOfType([p.node,p.string]),heading:p.string,component:p.string};Ws.defaultProps={children:null,copyable:!1,delete:!1,disabled:!1,ellipsis:!1,icon:"",mark:!1,underline:!1,strong:!1,link:!1,type:"primary",spacing:"normal",size:"normal",style:{},className:""};Ws.contextType=Mx;class fh extends G.PureComponent{render(){return _.createElement(Ws,Object.assign({component:"span"},this.props))}}fh.propTypes={copyable:p.oneOfType([p.object,p.bool]),delete:p.bool,disabled:p.bool,icon:p.oneOfType([p.node,p.string]),ellipsis:p.oneOfType([p.object,p.bool]),mark:p.bool,underline:p.bool,link:p.oneOfType([p.object,p.bool]),strong:p.bool,type:p.oneOf(Kt.TYPE),size:p.oneOf(Kt.SIZE),style:p.object,className:p.string,code:p.bool,component:p.string,weight:p.number};fh.defaultProps={copyable:!1,delete:!1,disabled:!1,icon:"",ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",style:{},size:"normal",className:""};var aL=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};let Ip=class extends G.PureComponent{render(){const e=this.props,{heading:t}=e,r=aL(e,["heading"]),i=Kt.HEADING.indexOf(t)!==-1?`h${t}`:"h1";return _.createElement(Ws,Object.assign({component:i,heading:i},r))}};Ip.propTypes={copyable:p.oneOfType([p.object,p.bool]),delete:p.bool,disabled:p.bool,ellipsis:p.oneOfType([p.object,p.bool]),mark:p.bool,link:p.oneOfType([p.object,p.bool]),underline:p.bool,strong:p.bool,type:p.oneOf(Kt.TYPE),heading:p.oneOf(Kt.HEADING),style:p.object,className:p.string,component:p.string,weight:p.oneOfType([p.oneOf(Kt.WEIGHT),p.number])};Ip.defaultProps={copyable:!1,delete:!1,disabled:!1,ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",heading:1,style:{},className:""};const lL=xp.PREFIX;class $v extends G.PureComponent{render(){const{className:e}=this.props,t=L(e,`${lL}-paragraph`);return _.createElement(Ws,Object.assign({component:"p"},this.props,{className:t}))}}$v.propTypes={copyable:p.oneOfType([p.object,p.bool]),delete:p.bool,disabled:p.bool,ellipsis:p.oneOfType([p.object,p.bool]),mark:p.bool,link:p.oneOfType([p.object,p.bool]),underline:p.bool,strong:p.bool,type:p.oneOf(Kt.TYPE),size:p.oneOf(Kt.SIZE),spacing:p.oneOf(Kt.SPACING),style:p.object,className:p.string,component:p.string};$v.defaultProps={copyable:!1,delete:!1,disabled:!1,ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",size:"normal",spacing:"normal",style:{},className:""};class hL{constructor(e,t,r,i,s){this.ruleMethods={"bytes-decimal":o=>{const a=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];let h=0;for(;o>=1e3;)o/=1e3,h++;return`${this.truncatePrecision(o)} ${a[h]}`},"bytes-binary":o=>{const a=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let h=0;for(;o>=1024;)o/=1024,h++;return`${this.truncatePrecision(o)} ${a[h]}`},percentages:o=>`${this.truncatePrecision(o*100)}%`,exponential:o=>{const h=o.toExponential(this.precision+2).split("e");return`${this.truncatePrecision(Number(h[0]))}e${h[1]}`}},this.truncateMethods={ceil:Math.ceil,floor:Math.floor,round:Math.round},this.isDiyParser=typeof s<"u",this.content=e,this.rule=t,this.precision=r,this.truncate=i,this.parser=s}format(){return this.isDiyParser?this.parser(this.content):this.rule==="text"?Lf(this.content).map(e=>jf(e)?this.truncatePrecision(e):e).join(""):this.rule==="numbers"?Lf(this.content).filter(e=>jf(e)).map(e=>this.truncatePrecision(e)).join(","):Lf(this.content).map(e=>jf(e)?this.ruleMethods[this.rule](Number(e)):e).join("")}truncatePrecision(e){const t=this.truncateMethods[this.truncate](Number(e)*Math.pow(10,this.precision))/Math.pow(10,this.precision),r=t.toString().split(".");if(r.length===1)return t.toFixed(this.precision);const i=r[1].length;return i<this.precision?`${r[0]}.${r[1]}${"0".repeat(this.precision-i)}`:t.toString()}}function Lf(n){const e=/(-?[0-9]*\.?[0-9]+([eE]-?[0-9]+)?)|([^-\d\.]+)/g;return n.match(e)||[]}function jf(n){return!(isNaN(Number(n))||n.replace(/\s+/g,"")==="")}class Rv extends G.PureComponent{formatNodeDFS(e){return Array.isArray(e)||(e=[e]),e=e.map(t=>typeof t=="string"||typeof t=="number"?new hL(String(t),this.props.rule,this.props.precision,this.props.truncate,this.props.parser).format():typeof t=="function"?this.formatNodeDFS(t()):typeof t=="object"&&"children"in t.props?Object.assign(Object.assign({},t),{props:Object.assign(Object.assign({},t.props),{children:this.formatNodeDFS(t.props.children)})}):t),e.length===1?e[0]:e}render(){const e=Object.assign({},this.props);return delete e.rule,delete e.parser,e.children=this.formatNodeDFS(this.props.children),_.createElement(Ws,Object.assign({component:"span"},e))}}Rv.propTypes={rule:p.oneOf(Kt.RULE),precision:p.number,truncate:p.oneOf(Kt.TRUNCATE),parser:p.func,copyable:p.oneOfType([p.object,p.bool]),delete:p.bool,disabled:p.bool,icon:p.oneOfType([p.node,p.string]),mark:p.bool,underline:p.bool,link:p.oneOfType([p.object,p.bool]),strong:p.bool,type:p.oneOf(Kt.TYPE),size:p.oneOf(Kt.SIZE),style:p.object,className:p.string,code:p.bool,component:p.string};Rv.defaultProps={rule:"text",precision:0,truncate:"round",parser:void 0,copyable:!1,delete:!1,icon:"",mark:!1,underline:!1,strong:!1,link:!1,type:"primary",style:{},size:"normal",className:""};const Xs=Op;Xs.Text=fh;Xs.Title=Ip;Xs.Paragraph=$v;Xs.Numeral=Rv;var cL=Ki,dL=cr,uL="[object Number]";function pL(n){return typeof n=="number"||dL(n)&&cL(n)==uL}var Nx=pL;const Ri=Ge(Nx),fL=`${te}-spin`,gL={PREFIX:fL},mL={SIZE:["small","middle","large"]};class Fv extends ze{static get spinDefaultAdapter(){return{getProp:()=>{},setLoading:e=>{}}}constructor(e){super(Object.assign(Object.assign({},Fv.spinDefaultAdapter),e))}updateLoadingIfNeedDelay(){const{spinning:e,delay:t}=this._adapter.getProps(),{delay:r}=this._adapter.getStates();if(r){const i=this;this._timer=setTimeout(()=>{i._adapter.setState({loading:e,delay:0})},t)}}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}}var vL=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};let Nb=-1;function Dx(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:e,className:t}=n,r=vL(n,["id","className"]);let i=e;tn(i)&&(Nb++,i=Nb);const s=`linearGradient-${i}`;return _.createElement("svg",Object.assign({},r,{className:t,width:"48",height:"48",viewBox:"0 0 36 36",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,"data-icon":"spin"}),_.createElement("defs",null,_.createElement("linearGradient",{x1:"0%",y1:"100%",x2:"100%",y2:"100%",id:s},_.createElement("stop",{stopColor:"currentColor",stopOpacity:"0",offset:"0%"}),_.createElement("stop",{stopColor:"currentColor",stopOpacity:"0.50",offset:"39.9430698%"}),_.createElement("stop",{stopColor:"currentColor",offset:"100%"}))),_.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},_.createElement("rect",{fillOpacity:"0.01",fill:"none",x:"0",y:"0",width:"36",height:"36"}),_.createElement("path",{d:"M34,18 C34,9.163444 26.836556,2 18,2 C11.6597233,2 6.18078805,5.68784135 3.59122325,11.0354951",stroke:`url(#${s})`,strokeWidth:"4",strokeLinecap:"round"})))}var yL=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Yi=gL.PREFIX;class Lv extends Ee{constructor(e){super(e),this.foundation=new Fv(this.adapter),this.state={delay:e.delay,loading:!0}}static getDerivedStateFromProps(e){return e.delay?e.spinning===!1?{delay:0,loading:!1}:{delay:e.delay}:{loading:e.spinning}}get adapter(){return Object.assign(Object.assign({},super.adapter),{setLoading:e=>{this.setState({loading:e})}})}componentWillUnmount(){this.foundation.destroy()}renderSpin(){const{indicator:e,tip:t}=this.props,{loading:r}=this.state;return r?_.createElement("div",{className:`${Yi}-wrapper`},e?_.createElement("div",{className:`${Yi}-animate`,"x-semi-prop":"indicator"},e):_.createElement(Dx,null),t?_.createElement("div",{"x-semi-prop":"tip"},t):null):null}render(){this.foundation.updateLoadingIfNeedDelay();const e=this.props,{children:t,style:r,wrapperClassName:i,childStyle:s,size:o}=e,a=yL(e,["children","style","wrapperClassName","childStyle","size"]),{loading:h}=this.state,c=L(Yi,i,{[`${Yi}-${o}`]:o,[`${Yi}-block`]:t,[`${Yi}-hidden`]:!h});return _.createElement("div",Object.assign({className:c,style:r},this.getDataAttr(a)),this.renderSpin(),_.createElement("div",{className:`${Yi}-children`,style:s,"x-semi-prop":"children"},t))}}Lv.propTypes={size:p.oneOf(mL.SIZE),spinning:p.bool,children:p.node,indicator:p.node,delay:p.number,tip:p.node,wrapperClassName:p.string,childStyle:p.object,style:p.object};Lv.defaultProps={size:"middle",spinning:!0,children:null,indicator:null,delay:0};const jv={PREFIX:`${te}-input`},Ta={SIZE:["small","large","default"],DEFAULT_SIZE:"default",STATUS:["default","error","warning","success"],CLEARBTN_CLICKED_EVENT_FLAG:"__fromClearBtn",MODE:["password"]},bL={};function _L(n){const{value:e,maxLength:t,getValueLength:r}=n;if(Ht(r)){let i=0,s=e.length;for(;i<s;){const o=i+Math.floor((s-i)/2),a=e.slice(0,o+1);r(a)>t?s=o:i=o+1}return e.slice(0,i)}else return e.slice(0,t)}class Bv extends ze{static get inputDefaultAdapter(){return{notifyChange:Y,setValue:Y}}constructor(e){super(Object.assign(Object.assign({},Bv.inputDefaultAdapter),e))}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}setDisable(){}setValue(e){this._adapter.setValue(e)}handleChange(e,t){const{maxLength:r,minLength:i,getValueLength:s}=this._adapter.getProps();let o=e;r&&Ht(s)&&(o=this.handleVisibleMaxLength(e)),i&&Ht(s)&&this.handleVisibleMinLength(o),this._isControlledComponent()?this._adapter.notifyChange(o,t):(this._adapter.setValue(o),this._adapter.notifyChange(o,t))}handleVisibleMinLength(e){const{minLength:t,getValueLength:r}=this._adapter.getProps(),{minLength:i}=this._adapter.getStates();if(Ri(t)&&t>=0&&Ht(r)&&vt(e)){const s=r(e);if(s<t){const o=e.length+(t-s);o!==i&&this._adapter.setMinLength(o)}else i!==t&&this._adapter.setMinLength(t)}}handleVisibleMaxLength(e){const{maxLength:t,getValueLength:r}=this._adapter.getProps();return Ri(t)&&t>=0&&Ht(r)&&vt(e)&&r(e)>t?(console.warn("[Semi Input] The input character is truncated because the input length exceeds the maximum length limit"),this.handleTruncateValue(e,t)):e}handleTruncateValue(e,t){const{getValueLength:r}=this._adapter.getProps();return _L({value:e,maxLength:t,getValueLength:r})}handleClear(e){let t=e;const r="";this._isControlledComponent("value")?this._adapter.setState({isFocus:!1}):this._adapter.setState({value:"",isFocus:!1}),(!t||typeof t!="object")&&(t={}),_x(t,Ta.CLEARBTN_CLICKED_EVENT_FLAG,!0),this._adapter.notifyChange(r,t),this._adapter.notifyClear(t),t&&this.stopPropagation(t)}handleClick(e){const{disabled:t}=this._adapter.getProps(),{isFocus:r}=this._adapter.getStates();t||r||this._adapter.isEventTarget(e)&&(this._adapter.focusInput(),this._adapter.toggleFocusing(!0))}handleModeChange(e){e==="password"?this._adapter.setEyeClosed(!0):this._adapter.setEyeClosed(!1)}handleClickEye(e){const t=this._adapter.getState("eyeClosed");this._adapter.focusInput(),this._adapter.toggleFocusing(!0),this._adapter.setEyeClosed(!t)}handleInputType(e){const t=this._adapter.getProp("mode"),r=this._adapter.getState("eyeClosed");return t==="password"?r?"password":"text":e}handleMouseDown(e){e.preventDefault()}handleMouseUp(e){e.preventDefault()}handleBlur(e){const{value:t}=this.getStates();this._adapter.toggleFocusing(!1),this._adapter.notifyBlur(t,e)}handleFocus(e){const{value:t}=this.getStates();this._adapter.toggleFocusing(!0),this._adapter.notifyFocus(t,e)}handleInput(e){this._adapter.notifyInput(e)}handleKeyDown(e){this._adapter.notifyKeyDown(e)}handleKeyUp(e){this._adapter.notifyKeyUp(e)}handleKeyPress(e){this._adapter.notifyKeyPress(e),e.key===Nv&&this._adapter.notifyEnterPress(e)}isAllowClear(){const{value:e,isFocus:t,isHovering:r}=this._adapter.getStates(),{showClear:i,disabled:s,showClearIgnoreDisabled:o}=this._adapter.getProps();return e&&i&&(!s||o)&&(t||r)}handleClickPrefixOrSuffix(e){const{disabled:t}=this._adapter.getProps(),{isFocus:r}=this._adapter.getStates();!t&&!r&&(this._adapter.focusInput(),this._adapter.toggleFocusing(!0))}handlePreventMouseDown(e){e&&Ht(e.preventDefault)&&e.preventDefault()}handleModeEnterPress(e){["Enter"," "].includes(e==null?void 0:e.key)&&(this.handlePreventMouseDown(e),this.handleClickEye(e))}}var wL=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Se=jv.PREFIX,SL=Ta.SIZE,CL=Ta.STATUS,xL=Ta.MODE;class Gv extends Ee{constructor(e){super(e),this.handleClear=r=>{this.foundation.handleClear(r)},this.handleClick=r=>{this.foundation.handleClick(r)},this.handleMouseOver=r=>{this.setState({isHovering:!0})},this.handleMouseLeave=r=>{this.setState({isHovering:!1})},this.handleModeChange=r=>{this.foundation.handleModeChange(r)},this.handleClickEye=r=>{this.foundation.handleClickEye(r)},this.handleMouseDown=r=>{this.foundation.handleMouseDown(r)},this.handleMouseUp=r=>{this.foundation.handleMouseUp(r)},this.handleModeEnterPress=r=>{this.foundation.handleModeEnterPress(r)},this.handleClickPrefixOrSuffix=r=>{this.foundation.handleClickPrefixOrSuffix(r)},this.handlePreventMouseDown=r=>{this.foundation.handlePreventMouseDown(r)};const t="value"in e?e.value:e.defaultValue;this.state={value:t,cachedValue:e.value,disabled:!1,props:{},isFocus:!1,isHovering:!1,eyeClosed:e.mode==="password",minLength:e.minLength},this.inputRef=_.createRef(),this.prefixRef=_.createRef(),this.suffixRef=_.createRef(),this.foundation=new Bv(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setValue:e=>this.setState({value:e}),setEyeClosed:e=>this.setState({eyeClosed:e}),toggleFocusing:e=>{this.setState({isFocus:e})},focusInput:()=>{const{preventScroll:e}=this.props,t=this.inputRef&&this.inputRef.current;t&&t.focus({preventScroll:e})},toggleHovering:e=>this.setState({isHovering:e}),getIfFocusing:()=>this.state.isFocus,notifyChange:(e,t)=>this.props.onChange(e,t),notifyBlur:(e,t)=>this.props.onBlur(t),notifyFocus:(e,t)=>this.props.onFocus(t),notifyInput:e=>this.props.onInput(e),notifyKeyPress:e=>this.props.onKeyPress(e),notifyKeyDown:e=>this.props.onKeyDown(e),notifyKeyUp:e=>this.props.onKeyUp(e),notifyEnterPress:e=>this.props.onEnterPress(e),notifyClear:e=>this.props.onClear(e),setMinLength:e=>this.setState({minLength:e}),isEventTarget:e=>e&&e.target===e.currentTarget})}static getDerivedStateFromProps(e,t){const r={};return e.value!==t.cachedValue&&(r.value=e.value,r.cachedValue=e.value),r}componentDidUpdate(e){const{mode:t}=this.props;e.mode!==t&&this.handleModeChange(t)}componentDidMount(){const{disabled:e,autoFocus:t,preventScroll:r}=this.props;!e&&(t||this.props.autofocus)&&this.inputRef.current.focus({preventScroll:r})}renderPrepend(){const{addonBefore:e}=this.props;if(e){const t=L({[`${Se}-prepend`]:!0,[`${Se}-prepend-text`]:e&&vt(e),[`${Se}-prepend-icon`]:tr(e)});return _.createElement("div",{className:t,"x-semi-prop":"addonBefore"},e)}return null}renderAppend(){const{addonAfter:e}=this.props;if(e){const t=L({[`${Se}-append`]:!0,[`${Se}-append-text`]:e&&vt(e),[`${Se}-append-icon`]:tr(e)});return _.createElement("div",{className:t,"x-semi-prop":"addonAfter"},e)}return null}renderClearBtn(){const e=L(`${Se}-clearbtn`),{clearIcon:t}=this.props;return this.foundation.isAllowClear()?_.createElement("div",{className:e,onMouseDown:this.handleClear},t||_.createElement(Ex,null)):null}renderModeBtn(){const{eyeClosed:e}=this.state,{mode:t,disabled:r}=this.props,i=L(`${Se}-modebtn`),s=e?_.createElement(LF,null):_.createElement(zF,null),o=t==="password"&&!r,a=e?"Show password":"Hidden password";return o?_.createElement("div",{role:"button",tabIndex:0,"aria-label":a,className:i,onClick:this.handleClickEye,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onKeyPress:this.handleModeEnterPress},s):null}renderPrefix(){const{prefix:e,insetLabel:t,insetLabelId:r}=this.props,i=e||t;if(!i)return null;const s=L({[`${Se}-prefix`]:!0,[`${Se}-inset-label`]:t,[`${Se}-prefix-text`]:i&&vt(i),[`${Se}-prefix-icon`]:tr(i)});return _.createElement("div",{className:s,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,id:r,"x-semi-prop":"prefix,insetLabel"},i)}renderSuffix(e){const{suffix:t,hideSuffix:r}=this.props;if(!t)return null;const i=L({[`${Se}-suffix`]:!0,[`${Se}-suffix-text`]:t&&vt(t),[`${Se}-suffix-icon`]:tr(t),[`${Se}-suffix-hidden`]:e&&!!r});return _.createElement("div",{className:i,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,"x-semi-prop":"suffix"},t)}getInputRef(){const{forwardRef:e}=this.props;if(!ll(e)){if(typeof e=="function")return t=>{e(t),this.inputRef={current:t}};if(Object.prototype.toString.call(e)==="[object Object]")return this.inputRef=e,e}return this.inputRef}render(){const e=this.props,{addonAfter:t,addonBefore:r,autoFocus:i,clearIcon:s,className:o,disabled:a,defaultValue:h,placeholder:c,prefix:l,mode:d,insetLabel:u,insetLabelId:f,validateStatus:m,type:g,readonly:y,size:v,suffix:b,style:w,showClear:C,onEnterPress:O,onClear:x,hideSuffix:P,inputStyle:T,forwardRef:k,maxLength:E,getValueLength:I,preventScroll:M,borderless:R,showClearIgnoreDisabled:U,onlyBorder:V}=e,H=wL(e,["addonAfter","addonBefore","autoFocus","clearIcon","className","disabled","defaultValue","placeholder","prefix","mode","insetLabel","insetLabelId","validateStatus","type","readonly","size","suffix","style","showClear","onEnterPress","onClear","hideSuffix","inputStyle","forwardRef","maxLength","getValueLength","preventScroll","borderless","showClearIgnoreDisabled","onlyBorder"]),{value:K,isFocus:$,minLength:j}=this.state,S=this.foundation.isAllowClear(),A=tr(b),D=this.getInputRef(),F=`${Se}-wrapper`,B=L(F,o,{[`${Se}-wrapper__with-prefix`]:l||u,[`${Se}-wrapper__with-suffix`]:b,[`${Se}-wrapper__with-suffix-hidden`]:S&&!!P,[`${Se}-wrapper__with-suffix-icon`]:A,[`${Se}-wrapper__with-append`]:r,[`${Se}-wrapper__with-prepend`]:t,[`${Se}-wrapper__with-append-only`]:r&&!t,[`${Se}-wrapper__with-prepend-only`]:!r&&t,[`${F}-readonly`]:y,[`${F}-disabled`]:a,[`${F}-warning`]:m==="warning",[`${F}-error`]:m==="error",[`${F}-focus`]:$,[`${F}-clearable`]:C,[`${F}-modebtn`]:d==="password",[`${F}-hidden`]:g==="hidden",[`${F}-${v}`]:v,[`${Se}-borderless`]:R,[`${Se}-only_border`]:V!=null}),z=L(Se,{[`${Se}-${v}`]:v,[`${Se}-disabled`]:a,[`${Se}-sibling-clearbtn`]:this.foundation.isAllowClear(),[`${Se}-sibling-modebtn`]:d==="password"}),Z=K??"",q=Object.assign(Object.assign({},H),{style:T,className:z,disabled:a,readOnly:y,type:this.foundation.handleInputType(g),placeholder:c,onInput:J=>this.foundation.handleInput(J),onChange:J=>this.foundation.handleChange(J.target.value,J),onFocus:J=>this.foundation.handleFocus(J),onBlur:J=>this.foundation.handleBlur(J),onKeyUp:J=>this.foundation.handleKeyUp(J),onKeyDown:J=>this.foundation.handleKeyDown(J),onKeyPress:J=>this.foundation.handleKeyPress(J),value:Z});Ht(I)||(q.maxLength=E),j&&(q.minLength=j),m==="error"&&(q["aria-invalid"]="true");let se=Object.assign({},w);return V!==void 0&&(se=Object.assign({borderWidth:V},w)),_.createElement("div",{className:B,style:se,onMouseEnter:J=>this.handleMouseOver(J),onMouseLeave:J=>this.handleMouseLeave(J),onClick:J=>this.handleClick(J)},this.renderPrepend(),this.renderPrefix(),_.createElement("input",Object.assign({},q,{ref:D})),this.renderClearBtn(),this.renderSuffix(S),this.renderModeBtn(),this.renderAppend())}}Gv.propTypes={"aria-label":p.string,"aria-labelledby":p.string,"aria-invalid":p.bool,"aria-errormessage":p.string,"aria-describedby":p.string,"aria-required":p.bool,addonBefore:p.node,addonAfter:p.node,clearIcon:p.node,prefix:p.node,suffix:p.node,mode:p.oneOf(xL),value:p.any,defaultValue:p.any,disabled:p.bool,readonly:p.bool,autoFocus:p.bool,type:p.string,showClear:p.bool,hideSuffix:p.bool,placeholder:p.any,size:p.oneOf(SL),className:p.string,style:p.object,validateStatus:p.oneOf(CL),onClear:p.func,onChange:p.func,onBlur:p.func,onFocus:p.func,onInput:p.func,onKeyDown:p.func,onKeyUp:p.func,onKeyPress:p.func,onEnterPress:p.func,insetLabel:p.node,insetLabelId:p.string,inputStyle:p.object,getValueLength:p.func,preventScroll:p.bool,borderless:p.bool};Gv.defaultProps={addonBefore:"",addonAfter:"",prefix:"",suffix:"",readonly:!1,type:"text",showClear:!1,hideSuffix:!1,placeholder:"",size:"default",className:"",onClear:Y,onChange:Y,onBlur:Y,onFocus:Y,onInput:Y,onKeyDown:Y,onKeyUp:Y,onKeyPress:Y,onEnterPress:Y,validateStatus:"default",borderless:!1};const Td=_.forwardRef((n,e)=>_.createElement(Gv,Object.assign({},n,{forwardRef:e})));var OL=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class $x extends _.PureComponent{render(){const e=this.props,{triggerRender:t,componentName:r}=e,i=OL(e,["triggerRender","componentName"]);return t(Object.assign({},i))}}$x.propTypes={triggerRender:p.func.isRequired,componentName:p.string,componentProps:p.object,value:p.any,inputValue:p.string,placeholder:p.oneOfType([p.string,p.array]),className:p.string,style:p.object};const PL={PREFIX:`${te}-avatar`},Mp={SHAPE:["circle","square"],SIZE:["extra-extra-small","extra-small","small","default","medium","large","extra-large"],COLOR:["grey","red","pink","purple","violet","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","white"],OVERLAP_FROM:["start","end"]};class EL extends ze{constructor(e){super(Object.assign({},e)),this.handleFocusVisible=t=>{const{target:r}=t;try{r.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch{Jr(!0,"Warning: [Semi Avatar] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this._adapter.setFocusVisible(!1)},this.changeScale=()=>{const{gap:t}=this.getProps(),r=this._adapter.getAvatarNode(),i=r==null?void 0:r.firstChild,[s,o]=[(r==null?void 0:r.offsetWidth)||0,(i==null?void 0:i.offsetWidth)||0];if(s!==0&&o!==0&&t*2<s){const a=s-t*2>o?1:(s-t*2)/o;this._adapter.setScale(a)}}}init(){const{children:e}=this.getProps();typeof e=="string"&&this.changeScale()}destroy(){}handleImgLoadError(){const{onError:e}=this.getProps();(e?e():void 0)!==!1&&this._adapter.notifyImgState(!1)}handleEnter(e){this._adapter.notifyEnter(e)}handleLeave(e){this._adapter.notifyLeave(e)}}const TL=n=>{let{gradientStart:e,gradientEnd:t}=n;const r=Od();return _.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"51",height:"52",viewBox:"0 0 51 52",fill:"none"},_.createElement("g",{filter:"url(#filter0_d_6_2)"},_.createElement("path",{d:"M40.4918 46.5592C44.6795 43.176 46.261 34.1333 47.5301 25.6141C49.5854 11.8168 39.6662 1 25.8097 1C11.2857 1 3 11.4279 3 25.3518C3 33.7866 6.29361 43.8947 10.4602 46.5592C12.5868 47.9192 12.5868 47.9051 25.8097 47.9192C38.3651 47.9282 38.5352 48.14 40.4918 46.5592Z",fill:`url(#${r})`})),_.createElement("defs",null,_.createElement("filter",{id:"filter0_d_6_2",x:"0.789215",y:"0.447304",width:"49.2216",height:"51.3549",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},_.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),_.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),_.createElement("feOffset",{dy:"1.65809"}),_.createElement("feGaussianBlur",{stdDeviation:"1.10539"}),_.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"}),_.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_6_2"}),_.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_6_2",result:"shape"})),_.createElement("linearGradient",{id:r,x1:"17.671",y1:"31.7392",x2:"17.671",y2:"47.9333",gradientUnits:"userSpaceOnUse"},_.createElement("stop",{stopColor:e}),_.createElement("stop",{offset:"1",stopColor:t}))))};var kL=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const AL=Mp.SIZE,IL=Mp.SHAPE,ML=Mp.COLOR,Ce=PL.PREFIX;class _r extends Ee{constructor(e){super(e),this.handleFocusVisible=t=>{this.foundation.handleFocusVisible(t)},this.handleBlur=t=>{this.foundation.handleBlur()},this.getContent=()=>{const{children:t,onClick:r,imgAttr:i,src:s,srcSet:o,alt:a}=this.props,{isImgExist:h}=this.state;let c=t;const l=r!==_n,d=s&&h,u={tabIndex:0,onKeyDown:this.handleKeyDown,onFocus:this.handleFocusVisible,onBlur:this.handleBlur};if(d){const f=l?`clickable Avatar: ${a}`:a,m=Object.assign(Object.assign({src:s,srcSet:o,onError:this.handleError},i),{className:L({[`${Ce}-no-focus-visible`]:l})}),g=l?Object.assign(Object.assign({},m),u):m;c=_.createElement("img",Object.assign({alt:f},g))}else if(typeof t=="string"){const f=a??t,g={role:"img","aria-label":l?`clickable Avatar: ${f}`:f,className:L(`${Ce}-label`,{[`${Ce}-no-focus-visible`]:l})},y=l?Object.assign(Object.assign({},g),u):g,v={transform:`scale(${this.state.scale})`};c=_.createElement("span",{className:`${Ce}-content`,style:v},_.createElement("span",Object.assign({},y,{"x-semi-prop":"children"}),t))}return c},this.renderBottomSlot=()=>{var t,r;if(!this.props.bottomSlot)return null;if(this.props.bottomSlot.render)return this.props.bottomSlot.render();const i=(t=this.props.bottomSlot.render)!==null&&t!==void 0?t:()=>{var s;const o={};return this.props.bottomSlot.bgColor&&(o.backgroundColor=this.props.bottomSlot.bgColor),this.props.bottomSlot.textColor&&(o.color=this.props.bottomSlot.textColor),_.createElement("span",{style:o,className:L(`${Ce}-bottom_slot-shape_${this.props.bottomSlot.shape}`,`${Ce}-bottom_slot-shape_${this.props.bottomSlot.shape}-${this.props.size}`,(s=this.props.bottomSlot.className)!==null&&s!==void 0?s:"")},this.props.bottomSlot.text)};return _.createElement("div",{className:L([`${Ce}-bottom_slot`]),style:(r=this.props.bottomSlot.style)!==null&&r!==void 0?r:{}},i())},this.renderTopSlot=()=>{var t,r,i,s;if(!this.props.topSlot)return null;if(this.props.topSlot.render)return this.props.topSlot.render();const o={};return this.props.topSlot.textColor&&(o.color=this.props.topSlot.textColor),_.createElement("div",{style:(t=this.props.topSlot.style)!==null&&t!==void 0?t:{},className:L([`${Ce}-top_slot-wrapper`,(r=this.props.topSlot.className)!==null&&r!==void 0?r:"",{[`${Ce}-animated`]:this.props.contentMotion}])},_.createElement("div",{className:L([`${Ce}-top_slot-bg`,`${Ce}-top_slot-bg-${this.props.size}`])},_.createElement("div",{className:L([`${Ce}-top_slot-bg-svg`,`${Ce}-top_slot-bg-svg-${this.props.size}`])},_.createElement(TL,{gradientStart:(i=this.props.topSlot.gradientStart)!==null&&i!==void 0?i:"var(--semi-color-primary)",gradientEnd:(s=this.props.topSlot.gradientEnd)!==null&&s!==void 0?s:"var(--semi-color-primary)"}))),_.createElement("div",{className:L([`${Ce}-top_slot`])},_.createElement("div",{style:o,className:L([`${Ce}-top_slot-content`,`${Ce}-top_slot-content-${this.props.size}`])},this.props.topSlot.text)))},this.state={isImgExist:!0,hoverContent:"",focusVisible:!1,scale:1},this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.handleError=this.handleError.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.getContent=this.getContent.bind(this),this.avatarRef=_.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyImgState:e=>{this.setState({isImgExist:e})},notifyEnter:e=>{const{hoverMask:t}=this.props,r=t;this.setState({hoverContent:r},()=>{const{onMouseEnter:i}=this.props;i&&i(e)})},notifyLeave:e=>{this.setState({hoverContent:""},()=>{const{onMouseLeave:t}=this.props;t&&t(e)})},setFocusVisible:e=>{this.setState({focusVisible:e})},setScale:e=>{this.setState({scale:e})},getAvatarNode:()=>{var e;return(e=this.avatarRef)===null||e===void 0?void 0:e.current}})}componentDidMount(){this.foundation=new EL(this.adapter),this.foundation.init()}componentDidUpdate(e){if(this.props.src&&this.props.src!==e.src){const t=new Image(0,0);t.src=this.props.src,t.onload=()=>{this.setState({isImgExist:!0})},t.onerror=()=>{this.setState({isImgExist:!1})},t.onabort=()=>{this.setState({isImgExist:!1})}}typeof this.props.children=="string"&&this.props.children!==e.children&&this.foundation.changeScale()}componentWillUnmount(){this.foundation.destroy()}onEnter(e){this.foundation.handleEnter(e)}onLeave(e){this.foundation.handleLeave(e)}handleError(){this.foundation.handleImgLoadError()}handleKeyDown(e){const{onClick:t}=this.props;switch(e.key){case"Enter":t(e),Jt(e);break;case"Escape":e.target.blur();break}}render(){var e;const t=this.props,{shape:r,children:i,size:s,color:o,className:a,hoverMask:h,onClick:c,imgAttr:l,src:d,srcSet:u,style:f,alt:m,gap:g,bottomSlot:y,topSlot:v,border:b,contentMotion:w}=t,C=kL(t,["shape","children","size","color","className","hoverMask","onClick","imgAttr","src","srcSet","style","alt","gap","bottomSlot","topSlot","border","contentMotion"]),{isImgExist:O,hoverContent:x,focusVisible:P}=this.state;let T={};Mp.SIZE.includes(s)||(T={width:s,height:s}),T=Object.assign(Object.assign({},T),f);const k=y||v||b,E={onClick:c,onMouseEnter:this.onEnter,onMouseLeave:this.onLeave},I=d&&O,M=L(Ce,{[`${Ce}-${r}`]:r,[`${Ce}-${s}`]:s,[`${Ce}-${o}`]:o&&!I,[`${Ce}-img`]:I,[`${Ce}-focus`]:P,[`${Ce}-animated`]:w},a),R=x?_.createElement("div",{className:`${Ce}-hover`,"x-semi-prop":"hoverContent"},x):null;let U=_.createElement("span",Object.assign({},C,{style:k?{}:T,className:M},k?{}:E,{role:"listitem",ref:this.avatarRef}),this.getContent(),R);if(b){const V={};typeof b=="object"&&(b!=null&&b.color)&&(V.borderColor=b==null?void 0:b.color),U=_.createElement("div",{style:Object.assign({position:"relative"},T)},U,_.createElement("span",{style:V,className:L([`${Ce}-additionalBorder`,`${Ce}-additionalBorder-${s}`,{[`${Ce}-${r}`]:r}])}),typeof this.props.border=="object"&&this.props.border.motion&&_.createElement("span",{style:V,className:L([`${Ce}-additionalBorder`,`${Ce}-additionalBorder-${s}`,{[`${Ce}-${r}`]:r,[`${Ce}-additionalBorder-animated`]:typeof this.props.border=="object"&&((e=this.props.border)===null||e===void 0?void 0:e.motion)}])}))}return k?_.createElement("span",Object.assign({className:L([`${Ce}-wrapper`]),style:T},E),U,v&&["extra-small","small","default","medium","large","extra-large"].includes(s)&&r==="circle"&&this.renderTopSlot(),y&&["extra-small","small","default","medium","large","extra-large"].includes(s)&&this.renderBottomSlot()):U}}_r.__SemiComponentName__="Avatar";_r.defaultProps=Tn(_r.__SemiComponentName__,{size:"medium",color:"grey",shape:"circle",gap:3,onClick:_n,onMouseEnter:_n,onMouseLeave:_n});_r.propTypes={children:p.node,color:p.oneOf(ML),shape:p.oneOf(IL),size:p.oneOf(AL),hoverMask:p.node,className:p.string,style:p.object,gap:p.number,imgAttr:p.object,src:p.string,srcSet:p.string,alt:p.string,onError:p.func,onClick:p.func,onMouseEnter:p.func,onMouseLeave:p.func,bottomSlot:p.shape({render:p.func,shape:p.oneOf(["circle","square"]),text:p.node,bgColor:p.string,textColor:p.string,className:p.string,style:p.object}),topSlot:p.shape({render:p.func,gradientStart:p.string,gradientEnd:p.string,text:p.node,textColor:p.string,className:p.string,style:p.object}),border:p.oneOfType([p.shape({color:p.string,motion:p.bool}),p.bool]),contentMotion:p.bool};_r.elementType="Avatar";const Rx={PREFIX:`${te}-button`},gh={sizes:["default","small","large"],iconPositions:["left","right"],htmlTypes:["button","reset","submit"],btnTypes:["primary","secondary","tertiary","warning","danger"],themes:["solid","borderless","light","outline"],DEFAULT_ICON_SIZE:"default",DEFAULT_ICON_POSITION:"left"},NL={SIZE:["extra-small","small","default","large","extra-large","custom"],ICON_PREFIX:"semi-icon-"};var DL=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const $L=gh.sizes,{htmlTypes:RL,btnTypes:FL}=gh;let mh=class extends G.PureComponent{render(){const e=this.props,{children:t,block:r,htmlType:i,loading:s,circle:o,className:a,style:h,disabled:c,size:l,theme:d,type:u,prefixCls:f,iconPosition:m}=e,g=DL(e,["children","block","htmlType","loading","circle","className","style","disabled","size","theme","type","prefixCls","iconPosition"]),y=Object.assign(Object.assign({disabled:c},Gi(g,["x-semi-children-alias"])),{className:L(f,{[`${f}-${u}`]:!c&&u,[`${f}-disabled`]:c,[`${f}-size-large`]:l==="large",[`${f}-size-small`]:l==="small",[`${f}-light`]:d==="light",[`${f}-block`]:r,[`${f}-circle`]:o,[`${f}-borderless`]:d==="borderless",[`${f}-outline`]:d==="outline",[`${f}-${u}-disabled`]:c&&u},a),type:i,"aria-disabled":c}),v={};return a&&a.includes("-with-icon")||(v["x-semi-prop"]=this.props["x-semi-children-alias"]||"children"),_.createElement("button",Object.assign({},y,{onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,style:h}),_.createElement("span",Object.assign({className:L(`${f}-content`,this.props.contentClassName),onClick:b=>c&&b.stopPropagation()},v),t))}};mh.defaultProps={disabled:!1,size:"default",type:"primary",theme:"light",block:!1,htmlType:"button",onMouseDown:_n,onClick:_n,onMouseEnter:_n,onMouseLeave:_n,prefixCls:Rx.PREFIX};mh.propTypes={children:p.node,disabled:p.bool,prefixCls:p.string,style:p.object,size:p.oneOf($L),type:p.oneOf(FL),block:p.bool,onClick:p.func,onMouseDown:p.func,circle:p.bool,loading:p.bool,htmlType:p.oneOf(RL),theme:p.oneOf(gh.themes),className:p.string,onMouseEnter:p.func,onMouseLeave:p.func,"aria-label":p.string,contentClassName:p.string};var LL=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const jL=NL.SIZE;class Ys extends G.PureComponent{render(){const e=this.props,{children:t,iconPosition:r,iconSize:i,iconStyle:s,style:o,icon:a,noHorizontalPadding:h,theme:c,className:l,prefixCls:d,loading:u}=e,f=LL(e,["children","iconPosition","iconSize","iconStyle","style","icon","noHorizontalPadding","theme","className","prefixCls","loading"]),m=Object.assign({},o);Array.isArray(h)?(h.includes("left")&&(m.paddingLeft=0),h.includes("right")&&(m.paddingRight=0)):h===!0?(m.paddingLeft=0,m.paddingRight=0):typeof h=="string"&&(h==="left"&&(m.paddingLeft=0),h==="right"&&(m.paddingRight=0));let g=null,y=null;u&&!f.disabled?y=_.createElement(Dx,null):_.isValidElement(a)&&(y=a);const v=L({[`${d}-content-left`]:r==="right",[`${d}-content-right`]:r==="left"}),b=this.props["x-semi-children-alias"]||"children",w=t!=null?_.createElement("span",{className:v,"x-semi-prop":b},t):null;r==="left"?g=_.createElement(_.Fragment,null,y,w):g=_.createElement(_.Fragment,null,w,y);const C=L(l,`${d}-with-icon`,{[`${d}-with-icon-only`]:w==null||w==="",[`${d}-loading`]:u});return _.createElement(mh,Object.assign({},f,{className:C,theme:c,style:m}),g)}}Ys.defaultProps={iconPosition:gh.DEFAULT_ICON_POSITION,prefixCls:Rx.PREFIX,loading:!1,noHorizontalPadding:!1,onMouseEnter:Y,onMouseLeave:Y};Ys.elementType="IconButton";Ys.propTypes={iconStyle:p.object,style:p.object,loading:p.bool,prefixCls:p.string,icon:p.oneOfType([p.object,p.string,p.node]),iconSize:p.oneOf(jL),noHorizontalPadding:p.oneOfType([p.bool,p.string,p.array]),children:p.node,theme:p.string,iconPosition:p.oneOf(gh.iconPositions),className:p.string,onMouseEnter:p.func,onMouseLeave:p.func};class He extends _.PureComponent{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e)}render(){const e=Object.assign({},this.props),t=!!e.icon,r=!!e.loading,i=!!e.disabled;return t||r&&!i?_.createElement(Ys,Object.assign({},e)):_.createElement(mh,Object.assign({},e))}}He.__SemiComponentName__="Button";He.propTypes=Object.assign(Object.assign({},mh.propTypes),Ys.propTypes);He.defaultProps=Tn(He.__SemiComponentName__);He.elementType="Button";const BL={PREFIX:`${te}-space`},vs={ALIGN_SET:["start","end","center","baseline"],SPACING_LOOSE:"loose",SPACING_MEDIUM:"medium",SPACING_TIGHT:"tight"},GL="Symbol(react.fragment)",zm=n=>{let e=[];return _.Children.forEach(n,t=>{t!=null&&(Array.isArray(t)?e=e.concat(zm(t)):G.isValidElement(t)&&t.type&&t.type.toString()===GL&&t.props?e=e.concat(zm(t.props.children)):e.push(t))}),e},Vn=BL.PREFIX;class zv extends G.PureComponent{render(){const{children:e=null,style:t,className:r,spacing:i,wrap:s,align:o,vertical:a}=this.props,h=s&&a?!1:s,c=Object.assign({},t);let l="",d="";vt(i)?(l=i,d=i):Ri(i)?(c.rowGap=i,c.columnGap=i):YO(i)&&(vt(i[0])?l=i[0]:Ri(i[0])&&(c.columnGap=`${i[0]}px`),vt(i[1])?d=i[1]:Ri(i[1])&&(c.rowGap=`${i[1]}px`));const u=L(Vn,r,{[`${Vn}-align-${o}`]:o,[`${Vn}-vertical`]:a,[`${Vn}-horizontal`]:!a,[`${Vn}-wrap`]:h,[`${Vn}-tight-horizontal`]:l===vs.SPACING_TIGHT,[`${Vn}-tight-vertical`]:d===vs.SPACING_TIGHT,[`${Vn}-medium-horizontal`]:l===vs.SPACING_MEDIUM,[`${Vn}-medium-vertical`]:d===vs.SPACING_MEDIUM,[`${Vn}-loose-horizontal`]:l===vs.SPACING_LOOSE,[`${Vn}-loose-vertical`]:d===vs.SPACING_LOOSE}),f=zm(e),m=Ca(this.props);return _.createElement("div",Object.assign({},m,{className:u,style:c,"x-semi-prop":"children"}),f)}}zv.propTypes={wrap:p.bool,align:p.oneOf(vs.ALIGN_SET),vertical:p.bool,spacing:p.oneOfType([p.string,p.number,p.array]),children:p.node,style:p.object,className:p.string};zv.defaultProps={vertical:!1,wrap:!1,spacing:"tight",align:"center"};function zL(n,e,t,r){for(var i=n.length,s=t+(r?1:-1);r?s--:++s<i;)if(e(n[s],s,n))return s;return-1}var UL=zL;function VL(n){return n!==n}var HL=VL;function KL(n,e,t){for(var r=t-1,i=n.length;++r<i;)if(n[r]===e)return r;return-1}var WL=KL,XL=UL,YL=HL,qL=WL;function ZL(n,e,t){return e===e?qL(n,e,t):XL(n,YL,t)}var QL=ZL,JL=yv,Db=1/0,ej=17976931348623157e292;function tj(n){if(!n)return n===0?n:0;if(n=JL(n),n===Db||n===-Db){var e=n<0?-1:1;return e*ej}return n===n?n:0}var nj=tj,rj=nj;function ij(n){var e=rj(n),t=e%1;return e===e?t?e-t:e:0}var sj=ij,oj=QL;function aj(n,e){var t=n==null?0:n.length;return!!t&&oj(n,e,0)>-1}var lj=aj;function hj(n,e,t){for(var r=-1,i=n==null?0:n.length;++r<i;)if(t(e,n[r]))return!0;return!1}var cj=hj,dj=px,uj=lj,pj=cj,fj=mv,gj=Ep,mj=fx,vj=200;function yj(n,e,t,r){var i=-1,s=uj,o=!0,a=n.length,h=[],c=e.length;if(!a)return h;t&&(e=fj(e,gj(t))),r?(s=pj,o=!1):e.length>=vj&&(s=mj,o=!1,e=new dj(e));e:for(;++i<a;){var l=n[i],d=t==null?l:t(l);if(l=r||l!==0?l:0,o&&d===d){for(var u=c;u--;)if(e[u]===d)continue e;h.push(l)}else s(e,d,r)||h.push(l)}return h}var bj=yj,_j=vv,wj=bx,Sj=Sa;function Cj(n,e,t){for(var r=-1,i=e.length,s={};++r<i;){var o=e[r],a=_j(n,o);t(a,o)&&wj(s,Sj(o,n),a)}return s}var xj=Cj;function Oj(n,e){return n!=null&&e in Object(n)}var Pj=Oj,Ej=Sa,Tj=oh,kj=fn,Aj=kp,Ij=Cv,Mj=Cp;function Nj(n,e,t){e=Ej(e,n);for(var r=-1,i=e.length,s=!1;++r<i;){var o=Mj(e[r]);if(!(s=n!=null&&t(n,o)))break;n=n[o]}return s||++r!=i?s:(i=n==null?0:n.length,!!i&&Ij(i)&&Aj(o,i)&&(kj(n)||Tj(n)))}var Dj=Nj,$j=Pj,Rj=Dj;function Fj(n,e){return n!=null&&Rj(n,e,$j)}var Lj=Fj,jj=xj,Bj=Lj;function Gj(n,e){return jj(n,e,function(t,r){return Bj(n,r)})}var zj=Gj,Uj=zj,Vj=ux,Hj=Vj(function(n,e){return n==null?{}:Uj(n,e)}),Kj=Hj;const Um=Ge(Kj);function Vm(){return Vm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Vm.apply(null,arguments)}function Wj(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Bm(n,e)}var $b=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Xj(n,e){return!!(n===e||$b(n)&&$b(e))}function Yj(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!Xj(n[t],e[t]))return!1;return!0}function Bf(n,e){e===void 0&&(e=Yj);var t,r=[],i,s=!1;function o(){for(var a=[],h=0;h<arguments.length;h++)a[h]=arguments[h];return s&&t===this&&e(a,r)||(i=n.apply(this,a),s=!0,t=this,r=a),i}return o}var qj=typeof performance=="object"&&typeof performance.now=="function",Rb=qj?function(){return performance.now()}:function(){return Date.now()};function Fb(n){cancelAnimationFrame(n.id)}function Zj(n,e){var t=Rb();function r(){Rb()-t>=e?n.call(null):i.id=requestAnimationFrame(r)}var i={id:requestAnimationFrame(r)};return i}var Gf=-1;function Lb(n){if(n===void 0&&(n=!1),Gf===-1||n){var e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",document.body.appendChild(e),Gf=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Gf}var no=null;function jb(n){if(n===void 0&&(n=!1),no===null||n){var e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";var r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?no="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?no="negative":no="positive-ascending"),document.body.removeChild(e),no}return no}var Qj=150,Jj=function(e,t){return e};function eB(n){var e,t=n.getItemOffset,r=n.getEstimatedTotalSize,i=n.getItemSize,s=n.getOffsetForIndexAndAlignment,o=n.getStartIndexForOffset,a=n.getStopIndexForStartIndex,h=n.initInstanceProps,c=n.shouldResetStyleCacheOnItemSizeChange,l=n.validateProps;return e=function(d){Wj(u,d);function u(m){var g;return g=d.call(this,m)||this,g._instanceProps=h(g.props,Ab(g)),g._outerRef=void 0,g._resetIsScrollingTimeoutId=null,g.state={instance:Ab(g),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof g.props.initialScrollOffset=="number"?g.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},g._callOnItemsRendered=void 0,g._callOnItemsRendered=Bf(function(y,v,b,w){return g.props.onItemsRendered({overscanStartIndex:y,overscanStopIndex:v,visibleStartIndex:b,visibleStopIndex:w})}),g._callOnScroll=void 0,g._callOnScroll=Bf(function(y,v,b){return g.props.onScroll({scrollDirection:y,scrollOffset:v,scrollUpdateWasRequested:b})}),g._getItemStyle=void 0,g._getItemStyle=function(y){var v=g.props,b=v.direction,w=v.itemSize,C=v.layout,O=g._getItemStyleCache(c&&w,c&&C,c&&b),x;if(O.hasOwnProperty(y))x=O[y];else{var P=t(g.props,y,g._instanceProps),T=i(g.props,y,g._instanceProps),k=b==="horizontal"||C==="horizontal",E=b==="rtl",I=k?P:0;O[y]=x={position:"absolute",left:E?void 0:I,right:E?I:void 0,top:k?0:P,height:k?"100%":T,width:k?T:"100%"}}return x},g._getItemStyleCache=void 0,g._getItemStyleCache=Bf(function(y,v,b){return{}}),g._onScrollHorizontal=function(y){var v=y.currentTarget,b=v.clientWidth,w=v.scrollLeft,C=v.scrollWidth;g.setState(function(O){if(O.scrollOffset===w)return null;var x=g.props.direction,P=w;if(x==="rtl")switch(jb()){case"negative":P=-w;break;case"positive-descending":P=C-b-w;break}return P=Math.max(0,Math.min(P,C-b)),{isScrolling:!0,scrollDirection:O.scrollOffset<P?"forward":"backward",scrollOffset:P,scrollUpdateWasRequested:!1}},g._resetIsScrollingDebounced)},g._onScrollVertical=function(y){var v=y.currentTarget,b=v.clientHeight,w=v.scrollHeight,C=v.scrollTop;g.setState(function(O){if(O.scrollOffset===C)return null;var x=Math.max(0,Math.min(C,w-b));return{isScrolling:!0,scrollDirection:O.scrollOffset<x?"forward":"backward",scrollOffset:x,scrollUpdateWasRequested:!1}},g._resetIsScrollingDebounced)},g._outerRefSetter=function(y){var v=g.props.outerRef;g._outerRef=y,typeof v=="function"?v(y):v!=null&&typeof v=="object"&&v.hasOwnProperty("current")&&(v.current=y)},g._resetIsScrollingDebounced=function(){g._resetIsScrollingTimeoutId!==null&&Fb(g._resetIsScrollingTimeoutId),g._resetIsScrollingTimeoutId=Zj(g._resetIsScrolling,Qj)},g._resetIsScrolling=function(){g._resetIsScrollingTimeoutId=null,g.setState({isScrolling:!1},function(){g._getItemStyleCache(-1,null)})},g}u.getDerivedStateFromProps=function(g,y){return tB(g,y),l(g),null};var f=u.prototype;return f.scrollTo=function(g){g=Math.max(0,g),this.setState(function(y){return y.scrollOffset===g?null:{scrollDirection:y.scrollOffset<g?"forward":"backward",scrollOffset:g,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},f.scrollToItem=function(g,y){y===void 0&&(y="auto");var v=this.props,b=v.itemCount,w=v.layout,C=this.state.scrollOffset;g=Math.max(0,Math.min(g,b-1));var O=0;if(this._outerRef){var x=this._outerRef;w==="vertical"?O=x.scrollWidth>x.clientWidth?Lb():0:O=x.scrollHeight>x.clientHeight?Lb():0}this.scrollTo(s(this.props,g,y,C,this._instanceProps,O))},f.componentDidMount=function(){var g=this.props,y=g.direction,v=g.initialScrollOffset,b=g.layout;if(typeof v=="number"&&this._outerRef!=null){var w=this._outerRef;y==="horizontal"||b==="horizontal"?w.scrollLeft=v:w.scrollTop=v}this._callPropsCallbacks()},f.componentDidUpdate=function(){var g=this.props,y=g.direction,v=g.layout,b=this.state,w=b.scrollOffset,C=b.scrollUpdateWasRequested;if(C&&this._outerRef!=null){var O=this._outerRef;if(y==="horizontal"||v==="horizontal")if(y==="rtl")switch(jb()){case"negative":O.scrollLeft=-w;break;case"positive-ascending":O.scrollLeft=w;break;default:var x=O.clientWidth,P=O.scrollWidth;O.scrollLeft=P-x-w;break}else O.scrollLeft=w;else O.scrollTop=w}this._callPropsCallbacks()},f.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&Fb(this._resetIsScrollingTimeoutId)},f.render=function(){var g=this.props,y=g.children,v=g.className,b=g.direction,w=g.height,C=g.innerRef,O=g.innerElementType,x=g.innerTagName,P=g.itemCount,T=g.itemData,k=g.itemKey,E=k===void 0?Jj:k,I=g.layout,M=g.outerElementType,R=g.outerTagName,U=g.style,V=g.useIsScrolling,H=g.width,K=this.state.isScrolling,$=b==="horizontal"||I==="horizontal",j=$?this._onScrollHorizontal:this._onScrollVertical,S=this._getRangeToRender(),A=S[0],D=S[1],F=[];if(P>0)for(var B=A;B<=D;B++)F.push(G.createElement(y,{data:T,key:E(B,T),index:B,isScrolling:V?K:void 0,style:this._getItemStyle(B)}));var z=r(this.props,this._instanceProps);return G.createElement(M||R||"div",{className:v,onScroll:j,ref:this._outerRefSetter,style:Vm({position:"relative",height:w,width:H,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:b},U)},G.createElement(O||x||"div",{children:F,ref:C,style:{height:$?"100%":z,pointerEvents:K?"none":void 0,width:$?z:"100%"}}))},f._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var g=this.props.itemCount;if(g>0){var y=this._getRangeToRender(),v=y[0],b=y[1],w=y[2],C=y[3];this._callOnItemsRendered(v,b,w,C)}}if(typeof this.props.onScroll=="function"){var O=this.state,x=O.scrollDirection,P=O.scrollOffset,T=O.scrollUpdateWasRequested;this._callOnScroll(x,P,T)}},f._getRangeToRender=function(){var g=this.props,y=g.itemCount,v=g.overscanCount,b=this.state,w=b.isScrolling,C=b.scrollDirection,O=b.scrollOffset;if(y===0)return[0,0,0,0];var x=o(this.props,O,this._instanceProps),P=a(this.props,x,O,this._instanceProps),T=!w||C==="backward"?Math.max(1,v):1,k=!w||C==="forward"?Math.max(1,v):1;return[Math.max(0,x-T),Math.max(0,Math.min(y-1,P+k)),x,P]},u}(G.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var tB=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},nB=eB({getItemOffset:function(e,t){var r=e.itemSize;return t*r},getItemSize:function(e,t){var r=e.itemSize;return r},getEstimatedTotalSize:function(e){var t=e.itemCount,r=e.itemSize;return r*t},getOffsetForIndexAndAlignment:function(e,t,r,i,s,o){var a=e.direction,h=e.height,c=e.itemCount,l=e.itemSize,d=e.layout,u=e.width,f=a==="horizontal"||d==="horizontal",m=f?u:h,g=Math.max(0,c*l-m),y=Math.min(g,t*l),v=Math.max(0,t*l-m+l+o);switch(r==="smart"&&(i>=v-m&&i<=y+m?r="auto":r="center"),r){case"start":return y;case"end":return v;case"center":{var b=Math.round(v+(y-v)/2);return b<Math.ceil(m/2)?0:b>g+Math.floor(m/2)?g:b}case"auto":default:return i>=v&&i<=y?i:i<v?v:y}},getStartIndexForOffset:function(e,t){var r=e.itemCount,i=e.itemSize;return Math.max(0,Math.min(r-1,Math.floor(t/i)))},getStopIndexForStartIndex:function(e,t,r){var i=e.direction,s=e.height,o=e.itemCount,a=e.itemSize,h=e.layout,c=e.width,l=i==="horizontal"||h==="horizontal",d=t*a,u=l?c:s,f=Math.ceil((u+r-d)/a);return Math.max(0,Math.min(o-1,t+f-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});const Fx={PREFIX:`${te}-tag`},ka={TAG_SIZE:["default","small","large"],TAG_COLOR:["grey","red","pink","purple","violet","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","white"],TAG_TYPE:["light","solid","ghost"],AVATAR_SHAPE:["square","circle"]};var rB=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const jt=Fx.PREFIX,Lx=ka.TAG_COLOR,jx=ka.TAG_SIZE,Bx=ka.TAG_TYPE,iB=ka.AVATAR_SHAPE;class xr extends G.Component{constructor(e){super(e),this.state={visible:!0},this.close=this.close.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}static getDerivedStateFromProps(e){return"visible"in e?{visible:e.visible}:null}setVisible(e){"visible"in this.props||this.setState({visible:e})}close(e,t,r){const{onClose:i}=this.props;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),i&&i(t,e,r),!e.defaultPrevented&&this.setVisible(!1)}handleKeyDown(e){const{closable:t,onClick:r,onKeyDown:i}=this.props;switch(e.key){case"Backspace":case"Delete":t&&this.close(e,this.props.children,this.props.tagKey),Jt(e);break;case"Enter":r(e),Jt(e);break;case"Escape":e.target.blur();break}i&&i(e)}renderAvatar(){const{avatarShape:e,avatarSrc:t}=this.props;return _.createElement(_r,{src:t,shape:e})}render(){const e=this.props,{tagKey:t,children:r,size:i,color:s,closable:o,visible:a,onClose:h,onClick:c,className:l,type:d,shape:u,avatarSrc:f,avatarShape:m,tabIndex:g,prefixIcon:y,suffixIcon:v}=e,b=rB(e,["tagKey","children","size","color","closable","visible","onClose","onClick","className","type","shape","avatarSrc","avatarShape","tabIndex","prefixIcon","suffixIcon"]),{visible:w}=this.state,C=c!==xr.defaultProps.onClick||o,O={role:"button",tabIndex:g||0,onKeyDown:this.handleKeyDown},x=Object.assign(Object.assign({},b),{onClick:c,tabIndex:g,className:L(jt,{[`${jt}-default`]:i==="default",[`${jt}-small`]:i==="small",[`${jt}-large`]:i==="large",[`${jt}-square`]:u==="square",[`${jt}-circle`]:u==="circle",[`${jt}-${d}`]:d,[`${jt}-${s}-${d}`]:s&&d,[`${jt}-closable`]:o,[`${jt}-invisible`]:!w,[`${jt}-avatar-${m}`]:f},l)}),P=C?Object.assign(Object.assign({},x),O):x,T=o?_.createElement("div",{className:`${jt}-close`,onClick:I=>this.close(I,r,t)},_.createElement(uh,{size:"small"})):null,k=vt(r),E=L(`${jt}-content`,`${jt}-content-${k?"ellipsis":"center"}`);return _.createElement("div",Object.assign({"aria-label":this.props["aria-label"]||k?`${o?"Closable ":""}Tag: ${r}`:""},P),y?_.createElement("div",{className:`${jt}-prefix-icon`},y):null,f?this.renderAvatar():null,_.createElement("div",{className:E},r),v?_.createElement("div",{className:`${jt}-suffix-icon`},v):null,T)}}xr.defaultProps={size:jx[0],color:Lx[0],closable:!1,type:Bx[0],onClose:()=>{},onClick:()=>{},onMouseEnter:()=>{},style:{},className:"",shape:"square",avatarShape:"square",prefixIcon:null,suffixIcon:null};xr.propTypes={children:p.node,tagKey:p.oneOfType([p.string,p.number]),size:p.oneOf(jx),color:p.oneOf(Lx),type:p.oneOf(Bx),closable:p.bool,visible:p.bool,onClose:p.func,onClick:p.func,prefixIcon:p.node,suffixIcon:p.node,style:p.object,className:p.string,avatarSrc:p.string,avatarShape:p.oneOf(iB),"aria-label":p.string};class sB extends ze{constructor(e){super(Object.assign({},e)),this.updateDOMInRenderTree=t=>{this._adapter.setDOMInRenderTree(t)},this.updateDOMHeight=t=>{this._adapter.setDOMHeight(t)},this.updateVisible=t=>{this._adapter.setVisible(t)},this.updateIsTransitioning=t=>{this._adapter.setIsTransitioning(t)}}}const Bb={PREFIX:`${te}-collapsible`};class zi extends Ee{constructor(e){super(e),this.domRef=_.createRef(),this.hasBeenRendered=!1,this.handleResize=t=>{const r=t[0];if(r){const i=zi.getEntryInfo(r);this.foundation.updateDOMHeight(i.height),this.foundation.updateDOMInRenderTree(i.isShown)}},this.isChildrenInRenderTree=()=>this.domRef.current?this.domRef.current.offsetHeight>0:!1,this.state={domInRenderTree:!1,domHeight:0,visible:this.props.isOpen,isTransitioning:!1},this.foundation=new sB(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setDOMInRenderTree:e=>{this.state.domInRenderTree!==e&&this.setState({domInRenderTree:e})},setDOMHeight:e=>{this.state.domHeight!==e&&this.setState({domHeight:e})},setVisible:e=>{this.state.visible!==e&&this.setState({visible:e})},setIsTransitioning:e=>{this.state.isTransitioning!==e&&this.setState({isTransitioning:e})}})}componentDidMount(){super.componentDidMount(),this.resizeObserver=new ResizeObserver(this.handleResize),this.resizeObserver.observe(this.domRef.current);const e=this.isChildrenInRenderTree();this.foundation.updateDOMInRenderTree(e),e&&this.foundation.updateDOMHeight(this.domRef.current.scrollHeight)}componentDidUpdate(e,t,r){const i=Object.keys(this.props).filter(o=>!yt(this.props[o],e[o])),s=Object.keys(this.state).filter(o=>!yt(this.state[o],t[o]));i.includes("reCalcKey")&&this.foundation.updateDOMHeight(this.domRef.current.scrollHeight),s.includes("domInRenderTree")&&this.state.domInRenderTree&&this.foundation.updateDOMHeight(this.domRef.current.scrollHeight),i.includes("isOpen")&&(this.props.isOpen||!this.props.motion)&&this.foundation.updateVisible(this.props.isOpen),this.props.motion&&e.isOpen!==this.props.isOpen&&this.foundation.updateIsTransitioning(!0)}componentWillUnmount(){super.componentWillUnmount(),this.resizeObserver.disconnect()}render(){const e=Object.assign({overflow:"hidden",height:this.props.isOpen?this.state.domHeight:this.props.collapseHeight,opacity:this.props.isOpen||!this.props.fade||this.props.collapseHeight!==0?1:0,transitionDuration:`${this.props.motion&&this.state.isTransitioning?this.props.duration:0}ms`},this.props.style),t=L(`${Bb.PREFIX}-wrapper`,{[`${Bb.PREFIX}-transition`]:this.props.motion&&this.state.isTransitioning},this.props.className),r=this.props.keepDOM&&(this.props.lazyRender?this.hasBeenRendered:!0)||this.props.collapseHeight!==0||this.state.visible||this.props.isOpen;return r&&!this.hasBeenRendered&&(this.hasBeenRendered=!0),_.createElement("div",Object.assign({className:t,style:e,onTransitionEnd:()=>{var i,s;this.props.isOpen||this.foundation.updateVisible(!1),this.foundation.updateIsTransitioning(!1),(s=(i=this.props).onMotionEnd)===null||s===void 0||s.call(i)}},this.getDataAttr(this.props)),_.createElement("div",{"x-semi-prop":"children",ref:this.domRef,style:{overflow:"hidden"},id:this.props.id},r&&this.props.children))}}zi.__SemiComponentName__="Collapsible";zi.defaultProps=Tn(zi.__SemiComponentName__,{isOpen:!1,duration:250,motion:!0,keepDOM:!1,lazyRender:!1,collapseHeight:0,fade:!1});zi.getEntryInfo=n=>{let e;n.borderBoxSize?e=!(n.borderBoxSize[0].blockSize===0&&n.borderBoxSize[0].inlineSize===0):e=!(n.contentRect.height===0&&n.contentRect.width===0);let t=0;return n.borderBoxSize?t=Math.ceil(n.borderBoxSize[0].blockSize):t=n.target.clientHeight,{isShown:e,height:t}};zi.propTypes={motion:p.bool,children:p.node,isOpen:p.bool,duration:p.number,keepDOM:p.bool,collapseHeight:p.number,style:p.object,className:p.string,reCalcKey:p.oneOfType([p.string,p.number])};function oB(n,e){return n&&(typeof n=="function"||typeof n=="object")&&e&&(typeof e=="function"||typeof e=="object")&&Object.entries(e).forEach(t=>{let[r,i]=t;n[r]=i}),n}var aB=Function.prototype.toString,zf=Object.create,lB=Object.prototype.toString,hB=function(){function n(){this._keys=[],this._values=[]}return n.prototype.has=function(e){return!!~this._keys.indexOf(e)},n.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},n.prototype.set=function(e,t){this._keys.push(e),this._values.push(t)},n}();function cB(){return new hB}function dB(){return new WeakMap}var uB=typeof WeakMap<"u"?dB:cB;function Uv(n){if(!n)return zf(null);var e=n.constructor;if(e===Object)return n===Object.prototype?{}:zf(n);if(e&&~aB.call(e).indexOf("[native code]"))try{return new e}catch{}return zf(n)}function pB(n){var e="";return n.global&&(e+="g"),n.ignoreCase&&(e+="i"),n.multiline&&(e+="m"),n.unicode&&(e+="u"),n.sticky&&(e+="y"),e}function fB(n){return n.flags}var gB=/test/g.flags==="g"?fB:pB;function Gx(n){var e=lB.call(n);return e.substring(8,e.length-1)}function mB(n){return n[Symbol.toStringTag]||Gx(n)}var vB=typeof Symbol<"u"?mB:Gx,yB=Object.defineProperty,bB=Object.getOwnPropertyDescriptor,zx=Object.getOwnPropertyNames,Vv=Object.getOwnPropertySymbols,Ux=Object.prototype,Vx=Ux.hasOwnProperty,_B=Ux.propertyIsEnumerable,Hx=typeof Vv=="function";function wB(n){return zx(n).concat(Vv(n))}var SB=Hx?wB:zx;function Np(n,e,t){for(var r=SB(n),i=0,s=r.length,o=void 0,a=void 0;i<s;++i)if(o=r[i],!(o==="callee"||o==="caller")){if(a=bB(n,o),!a){e[o]=t.copier(n[o],t);continue}!a.get&&!a.set&&(a.value=t.copier(a.value,t));try{yB(e,o,a)}catch{e[o]=a.value}}return e}function CB(n,e){var t=new e.Constructor;e.cache.set(n,t);for(var r=0,i=n.length;r<i;++r)t[r]=e.copier(n[r],e);return t}function xB(n,e){var t=new e.Constructor;return e.cache.set(n,t),Np(n,t,e)}function Kx(n,e){return n.slice(0)}function OB(n,e){return n.slice(0,n.size,n.type)}function PB(n,e){return new e.Constructor(Kx(n.buffer))}function EB(n,e){return new e.Constructor(n.getTime())}function Wx(n,e){var t=new e.Constructor;return e.cache.set(n,t),n.forEach(function(r,i){t.set(i,e.copier(r,e))}),t}function TB(n,e){return Np(n,Wx(n,e),e)}function kB(n,e){var t=Uv(e.prototype);e.cache.set(n,t);for(var r in n)Vx.call(n,r)&&(t[r]=e.copier(n[r],e));return t}function AB(n,e){var t=Uv(e.prototype);e.cache.set(n,t);for(var r in n)Vx.call(n,r)&&(t[r]=e.copier(n[r],e));for(var i=Vv(n),s=0,o=i.length,a=void 0;s<o;++s)a=i[s],_B.call(n,a)&&(t[a]=e.copier(n[a],e));return t}var IB=Hx?AB:kB;function MB(n,e){var t=Uv(e.prototype);return e.cache.set(n,t),Np(n,t,e)}function Uf(n,e){return new e.Constructor(n.valueOf())}function NB(n,e){var t=new e.Constructor(n.source,gB(n));return t.lastIndex=n.lastIndex,t}function Uc(n,e){return n}function Xx(n,e){var t=new e.Constructor;return e.cache.set(n,t),n.forEach(function(r){t.add(e.copier(r,e))}),t}function DB(n,e){return Np(n,Xx(n,e),e)}var $B=Array.isArray,Hv=Object.assign,RB=Object.getPrototypeOf||function(n){return n.__proto__},Yx={array:CB,arrayBuffer:Kx,blob:OB,dataView:PB,date:EB,error:Uc,map:Wx,object:IB,regExp:NB,set:Xx},FB=Hv({},Yx,{array:xB,map:TB,object:MB,set:DB});function LB(n){return{Arguments:n.object,Array:n.array,ArrayBuffer:n.arrayBuffer,Blob:n.blob,Boolean:Uf,DataView:n.dataView,Date:n.date,Error:n.error,Float32Array:n.arrayBuffer,Float64Array:n.arrayBuffer,Int8Array:n.arrayBuffer,Int16Array:n.arrayBuffer,Int32Array:n.arrayBuffer,Map:n.map,Number:Uf,Object:n.object,Promise:Uc,RegExp:n.regExp,Set:n.set,String:Uf,WeakMap:Uc,WeakSet:Uc,Uint8Array:n.arrayBuffer,Uint8ClampedArray:n.arrayBuffer,Uint16Array:n.arrayBuffer,Uint32Array:n.arrayBuffer,Uint64Array:n.arrayBuffer}}function qx(n){var e=Hv({},Yx,n),t=LB(e),r=t.Array,i=t.Object;function s(o,a){if(a.prototype=a.Constructor=void 0,!o||typeof o!="object")return o;if(a.cache.has(o))return a.cache.get(o);if(a.prototype=RB(o),a.Constructor=a.prototype&&a.prototype.constructor,!a.Constructor||a.Constructor===Object)return i(o,a);if($B(o))return r(o,a);var h=t[vB(o)];return h?h(o,a):typeof o.then=="function"?o:i(o,a)}return function(a){return s(a,{Constructor:void 0,cache:uB(),copier:s,prototype:void 0})}}function jB(n){return qx(Hv({},FB,n))}jB({});var kd=qx({}),BB=WC,GB=vx,zB=sj,UB=9007199254740991,Vf=4294967295,VB=Math.min;function HB(n,e){if(n=zB(n),n<1||n>UB)return[];var t=Vf,r=VB(n,Vf);e=GB(e),n-=Vf;for(var i=BB(r,e);++t<n;)e(t);return i}var KB=HB;const Zx=Ge(KB),WB={PREFIX:`${te}`};var XB=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const qi=WB.PREFIX,na=n=>{const{layout:e="horizontal",dashed:t,align:r="center",className:i,margin:s,style:o,children:a}=n,h=XB(n,["layout","dashed","align","className","margin","style","children"]),c=L(`${qi}-divider`,i,{[`${qi}-divider-horizontal`]:e==="horizontal",[`${qi}-divider-vertical`]:e==="vertical",[`${qi}-divider-dashed`]:!!t,[`${qi}-divider-with-text`]:a&&e==="horizontal",[`${qi}-divider-with-text-${r}`]:a&&e==="horizontal"});let l={};return s!==void 0&&(e==="vertical"?l={marginLeft:s,marginRight:s}:e==="horizontal"&&(l={marginTop:s,marginBottom:s})),_.createElement("div",Object.assign({},h,{className:c,style:Object.assign(Object.assign({},l),o)}),a&&e==="horizontal"?typeof a=="string"?_.createElement("span",{className:`${qi}-divider_inner-text`,"x-semi-prop":"children"},a):a:null)},Pe={DIALOG:`${te}-modal`},Gb={cancelKey:"cancel",confirmKey:"confirm",SIZE:["small","medium","large","full-width"],directions:["ltr","rtl"]};function YB(n){return n!==null&&typeof n=="object"}function Ad(n){return YB(n)&&typeof n.then=="function"}class qB extends ze{constructor(e){super(Object.assign({},e)),this.toggleDisplayNone=(t,r)=>{this._adapter.toggleDisplayNone(t,r)}}destroy(){this.afterHide()}handleCancel(e){var t;const r=this._adapter.notifyCancel(e);Ad(r)&&(this._adapter.setState({onCancelReturnPromiseStatus:"pending"}),(t=r==null?void 0:r.then(()=>{this._adapter.setState({onCancelReturnPromiseStatus:"fulfilled"})}))===null||t===void 0||t.catch(i=>{throw this._adapter.setState({onCancelReturnPromiseStatus:"rejected"}),i}))}handleOk(e){var t;const r=this._adapter.notifyOk(e);Ad(r)&&(this._adapter.setState({onOKReturnPromiseStatus:"pending"}),(t=r==null?void 0:r.then(()=>{this._adapter.setState({onOKReturnPromiseStatus:"fulfilled"})}))===null||t===void 0||t.catch(i=>{throw this._adapter.setState({onOKReturnPromiseStatus:"rejected"}),i}))}beforeShow(){this._adapter.disabledBodyScroll()}afterHide(){this._adapter.enabledBodyScroll(),this._adapter.notifyClose()}enabledBodyScroll(){this._adapter.enabledBodyScroll()}}class Kv extends ze{constructor(e){super(Object.assign(Object.assign({},Kv.defaultAdapter),e)),this.handleKeyDown=t=>{const{closeOnEsc:r}=this.getProps();if(r&&t.keyCode===Jn.ESC){t.stopPropagation(),this.close(t);return}}}destroy(){this.handleKeyDownEventListenerUnmount(),this.modalDialogBlur(),this.prevFocusElementReFocus()}handleDialogMouseDown(){this._adapter.notifyDialogMouseDown()}handleMaskMouseUp(){this._adapter.notifyDialogMouseUp()}handleKeyDownEventListenerMount(){this._adapter.addKeyDownEventListener()}handleKeyDownEventListenerUnmount(){this._adapter.removeKeyDownEventListener()}getMouseState(){this._adapter.getMouseState()}handleMaskClick(e){const{dialogMouseDown:t}=this.getStates();e.target===e.currentTarget&&!t&&this.close(e)}close(e){this._adapter.notifyClose(e)}modalDialogFocus(){this._adapter.modalDialogFocus()}modalDialogBlur(){this._adapter.modalDialogBlur()}prevFocusElementReFocus(){this._adapter.prevFocusElementReFocus()}}var ZB=bj,QB=QC,JB=UC,eG=QB(function(n,e){return JB(n)?ZB(n,e):[]}),tG=eG;const nG=Ge(tG);class Ei{constructor(e,t){var r;this.addFocusRedirectListener=i=>(this.focusRedirectListenerList.push(i),()=>this.removeFocusRedirectListener(i)),this.removeFocusRedirectListener=i=>{this.focusRedirectListenerList=nG(this.focusRedirectListenerList,i)},this.destroy=()=>{var i;(i=this.container)===null||i===void 0||i.removeEventListener("keydown",this.onKeyPress)},this.shouldFocusRedirect=i=>{if(!this.enable)return!1;for(const s of this.focusRedirectListenerList)if(!s(i))return!1;return!0},this.focusElement=(i,s)=>{const{preventScroll:o}=this.options;i==null||i.focus({preventScroll:o}),s.preventDefault()},this.onKeyPress=i=>{if(i&&i.key==="Tab"){const s=Ei.getFocusableElements(this.container);s.length&&(i.shiftKey?this.handleContainerShiftTabKeyDown(s,i):this.handleContainerTabKeyDown(s,i))}},this.handleContainerTabKeyDown=(i,s)=>{const o=Ei.getActiveElement(),a=i[i.length-1]===o,h=i[0];a&&this.shouldFocusRedirect(h)&&this.focusElement(h,s)},this.handleContainerShiftTabKeyDown=(i,s)=>{const o=Ei.getActiveElement(),a=i[0]===o,h=i[i.length-1];a&&this.shouldFocusRedirect(h)&&this.focusElement(h,s)},Object.freeze(t),this.container=e,this.options=t,this.enable=(r=t==null?void 0:t.enable)!==null&&r!==void 0?r:!0,this.focusRedirectListenerList=t!=null&&t.onFocusRedirectListener?Array.isArray(t.onFocusRedirectListener)?[...t.onFocusRedirectListener]:[t.onFocusRedirectListener]:[],this.container.addEventListener("keydown",this.onKeyPress)}get enable(){return this._enable}set enable(e){this._enable=e}static getFocusableElements(e){if(!ws(e))return[];const r=["input:not([disabled]):not([tabindex='-1'])","textarea:not([disabled]):not([tabindex='-1'])","button:not([disabled]):not([tabindex='-1'])","a[href]:not([tabindex='-1'])","select:not([disabled]):not([tabindex='-1'])","area[href]:not([tabindex='-1'])","iframe:not([tabindex='-1'])","object:not([tabindex='-1'])","*[tabindex]:not([tabindex='-1'])","*[contenteditable]:not([tabindex='-1'])"].join(",");return Array.from(e.querySelectorAll(r))}static getActiveElement(){return document?document.activeElement:null}}var Hf=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};let rG=0;class Dp extends Ee{constructor(e){super(e),this.onKeyDown=t=>{this.foundation.handleKeyDown(t)},this.onDialogMouseDown=()=>{this.foundation.handleDialogMouseDown()},this.onMaskMouseUp=()=>{this.foundation.handleMaskMouseUp()},this.onMaskClick=t=>{this.foundation.handleMaskClick(t)},this.close=t=>{this.foundation.close(t)},this.getMaskElement=()=>{const t=Hf(this.props,[]),{mask:r,maskClassName:i}=t;if(r){const s=L(`${Pe.DIALOG}-mask`,{});return _.createElement("div",Object.assign({key:"mask"},this.props.maskExtraProps,{className:L(s,i),style:t.maskStyle}))}return null},this.renderCloseBtn=()=>{const{closable:t,closeIcon:r}=this.props;let i;if(t){const s=r||_.createElement(uh,{"x-semi-prop":"closeIcon"});i=_.createElement(Ys,{"aria-label":"close",className:`${Pe.DIALOG}-close`,key:"close-btn",onClick:this.close,type:"tertiary",icon:s,theme:"borderless",size:"small"})}return i},this.renderIcon=()=>{const{icon:t}=this.props;return t?_.createElement("span",{className:`${Pe.DIALOG}-icon-wrapper`,"x-semi-prop":"icon"},t):null},this.renderHeader=()=>{if("header"in this.props)return this.props.header;const{title:t}=this.props,r=this.renderCloseBtn(),i=this.renderIcon();return t==null?null:_.createElement("div",{className:`${Pe.DIALOG}-header`},i,_.createElement(Xs.Title,{heading:5,className:`${Pe.DIALOG}-title`,id:`${Pe.DIALOG}-title`,"x-semi-prop":"title"},t),r)},this.renderBody=()=>{const{bodyStyle:t,children:r,title:i}=this.props,s=L(`${Pe.DIALOG}-body`,{[`${Pe.DIALOG}-withIcon`]:this.props.icon}),o=this.renderCloseBtn(),a=this.renderIcon();return i!=null||"header"in this.props?_.createElement("div",{className:s,id:`${Pe.DIALOG}-body`,style:t,"x-semi-prop":"children"},r):_.createElement("div",{className:`${Pe.DIALOG}-body-wrapper`},a,_.createElement("div",{className:s,style:t,"x-semi-prop":"children"},r),o)},this.getDialogElement=()=>{const t=Hf(this.props,[]),r={},i=L(`${Pe.DIALOG}`,{[`${Pe.DIALOG}-centered`]:t.centered,[`${Pe.DIALOG}-${t.size}`]:t.size});t.width&&(r.width=t.width),t.height&&(r.height=t.height),t.isFullScreen&&(r.width="100%",r.height="100%",r.margin="unset");const s=this.renderBody(),o=this.renderHeader(),a=t.footer?_.createElement("div",{className:`${Pe.DIALOG}-footer`,"x-semi-prop":"footer"},t.footer):null;return _.createElement("div",{key:"dialog-element",className:i,onMouseDown:this.onDialogMouseDown,style:Object.assign(Object.assign({},t.style),r),id:this.dialogId},_.createElement("div",{role:"dialog",ref:this.modalDialogRef,"aria-modal":"true","aria-labelledby":`${Pe.DIALOG}-title`,"aria-describedby":`${Pe.DIALOG}-body`,onAnimationEnd:t.onAnimationEnd,className:L([`${Pe.DIALOG}-content`,t.contentClassName,{[`${Pe.DIALOG}-content-fullScreen`]:t.isFullScreen}])},o,s,a))},this.state={dialogMouseDown:!1,prevFocusElement:Ei.getActiveElement()},this.foundation=new Kv(this.adapter),this.dialogId=`dialog-${rG++}`,this.modalDialogRef=_.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyClose:e=>{this.props.onClose(e)},notifyDialogMouseDown:()=>{this.setState({dialogMouseDown:!0})},notifyDialogMouseUp:()=>{this.state.dialogMouseDown&&(this.timeoutId=setTimeout(()=>{this.setState({dialogMouseDown:!1})},0))},addKeyDownEventListener:()=>{this.props.closeOnEsc&&document.addEventListener("keydown",this.foundation.handleKeyDown)},removeKeyDownEventListener:()=>{this.props.closeOnEsc&&document.removeEventListener("keydown",this.foundation.handleKeyDown)},getMouseState:()=>this.state.dialogMouseDown,modalDialogFocus:()=>{var e,t,r;const{preventScroll:i}=this.props;let s;if(this.modalDialogRef){const o=Ei.getActiveElement();s=this.modalDialogRef.current.contains(o),(e=this.focusTrapHandle)===null||e===void 0||e.destroy(),this.focusTrapHandle=new Ei(this.modalDialogRef.current,{preventScroll:i})}s||(r=(t=this.modalDialogRef)===null||t===void 0?void 0:t.current)===null||r===void 0||r.focus({preventScroll:i})},modalDialogBlur:()=>{var e,t;(e=this.modalDialogRef)===null||e===void 0||e.current.blur(),(t=this.focusTrapHandle)===null||t===void 0||t.destroy()},prevFocusElementReFocus:()=>{const{prevFocusElement:e}=this.state,{preventScroll:t}=this.props,r=oe(e,"focus");Ht(r)&&e.focus({preventScroll:t})}})}componentDidMount(){var e;this.foundation.handleKeyDownEventListenerMount(),this.foundation.modalDialogFocus();const t=Ei.getFocusableElements(this.modalDialogRef.current);this.modalDialogRef.current.contains(document.activeElement)||(e=t[0])===null||e===void 0||e.focus()}componentWillUnmount(){clearTimeout(this.timeoutId),this.foundation.destroy()}render(){var e;const t=this.props,{maskClosable:r,className:i,getPopupContainer:s,maskFixed:o,getContainerContext:a}=t,h=Hf(t,["maskClosable","className","getPopupContainer","maskFixed","getContainerContext"]),{direction:c}=this.context,l=L(i,{[`${Pe.DIALOG}-popup`]:s&&s()!==((e=globalThis==null?void 0:globalThis.document)===null||e===void 0?void 0:e.body)&&!o,[`${Pe.DIALOG}-fixed`]:o,[`${Pe.DIALOG}-rtl`]:c==="rtl"}),d=a(),u=this.getDataAttr(h),f=_.createElement("div",Object.assign({className:l},u),this.getMaskElement(),_.createElement("div",Object.assign({role:"none",className:L({[`${Pe.DIALOG}-wrap`]:!0,[`${Pe.DIALOG}-wrap-center`]:this.props.centered}),onClick:r?this.onMaskClick:null,onMouseUp:r?this.onMaskMouseUp:null},this.props.contentExtraProps),this.getDialogElement()));return d&&d.Provider?_.createElement(d.Provider,{value:d.value},f):f}}Dp.contextType=Wi;Dp.propTypes={close:p.func,getContainerContext:p.func,contentClassName:p.string,maskClassName:p.string,onAnimationEnd:p.func,preventScroll:p.bool};Dp.defaultProps={close:Y,getContainerContext:Y,contentClassName:"",maskClassName:""};var iG=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Qx=n=>{const[e,t]=G.useState(!0),[r,i]=G.useState(),[s,o]=G.useState(),{direction:a}=n,{title:h,content:c,icon:l,type:d,onCancel:u,onOk:f,className:m}=n,g=iG(n,["title","content","icon","type","onCancel","onOk","className"]),y=G.useCallback(T=>{const k=f&&f(T);k&&k.then?(i(!0),k.then(function(){t(!1),i(!1)},E=>{i(!1)})):t(!1)},[f]),v=G.useCallback(T=>{const k=u&&u(T);k&&k.then?(o(!0),k.then(function(){t(!1),o(!1)},E=>{o(!1)})):t(!1)},[u]),b=`${Pe.DIALOG}-confirm`,w=L(m,b,{[`${b}-rtl`]:a==="rtl"}),C=L(`${Pe.DIALOG}-${d}`),O=tr(l)?_.cloneElement(l,{className:`${b}-icon ${C}-icon`,size:"extra-large"}):l,x=h==null?null:_.createElement("span",{className:`${b}-title-text`},h),P=L(`${b}-content`,{[`${b}-content-withIcon`]:n.icon});return _.createElement(pn,Object.assign({className:w,title:x,confirmLoading:r,cancelLoading:s,onOk:y,onCancel:v,icon:O,visible:e},g),_.createElement("div",{className:P,"x-semi-prop":"content"},c))};function vh(n){const e=document.createElement("div");document.body.appendChild(e);let t=Object.assign({},n);const r=()=>{nr.unmountComponentAtNode(e)&&e.parentNode&&e.parentNode.removeChild(e);for(let h=0;h<Ss.length;h++)if(Ss[h]===s){Ss.splice(h,1);break}};function i(a){const{afterClose:h}=a;nr.render(_.createElement(Qx,Object.assign({},a,{afterClose:function(){h==null||h(...arguments),r()},motion:n.motion})),e)}function s(){t=Object.assign(Object.assign({},t),{visible:!1}),i(t)}function o(a){t=Object.assign(Object.assign({},t),a),i(t)}return i(t),Ss.push(s),{destroy:s,update:o}}function Jx(n){return Object.assign({type:"info",icon:_.createElement(Tx,null)},n)}function e3(n){return Object.assign({type:"success",icon:_.createElement(kx,null)},n)}function t3(n){return Object.assign({type:"warning",icon:_.createElement(Mv,null)},n)}function n3(n){return Object.assign({type:"error",icon:_.createElement(Px,null),okButtonProps:Object.assign({type:"danger"},n.okButtonProps)},Gi(n,["okButtonProps"]))}function r3(n){return Object.assign({type:"confirm",icon:_.createElement(VF,null)},n)}var sG=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const oG=(n,e)=>{var{afterClose:t,config:r}=n;sG(n,["afterClose","config"]);const[i,s]=_.useState(r);_.useImperativeHandle(e,()=>({destroy:()=>{s(a=>Object.assign(Object.assign({},a),{visible:!1}))},update:a=>{s(h=>Object.assign(Object.assign({},h),a))}}));const o=()=>{var a;(a=r==null?void 0:r.afterClose)===null||a===void 0||a.call(r),t()};return _.createElement(Qx,Object.assign({},i,{afterClose:o}))},aG=_.forwardRef(oG);let zb=0;function lG(){const[n,e]=_.useState([]);function t(r){return e(i=>[...i,r]),()=>{e(i=>i.filter(s=>s!==r))}}return[n,t]}function hG(){const[n,e]=lG();function t(r){return function(s){zb+=1;const o=_.createRef();let a;const h=_.createElement(aG,{key:`semi-modal-${zb}`,config:r(s),ref:o,afterClose:()=>{a()}});return a=e(h),{destroy:()=>{o.current&&o.current.destroy()},update:c=>{o.current&&o.current.update(c)}}}}return[{info:t(Jx),success:t(e3),error:t(n3),warning:t(t3),confirm:t(r3)},_.createElement(_.Fragment,null,n)]}var cG=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};let Ss=[];class pn extends Ee{constructor(e){super(e),this.bodyOverflow=null,this.handleCancel=t=>{this.foundation.handleCancel(t)},this.handleOk=t=>{this.foundation.handleOk(t)},this.updateState=()=>{const{visible:t}=this.props;this.foundation.toggleDisplayNone(!t)},this.renderFooter=()=>{const{okText:t,okType:r,cancelText:i,confirmLoading:s,cancelLoading:o,hasCancel:a,footerFill:h}=this.props,c=l=>{var d;return a?_.createElement(He,Object.assign({"aria-label":"cancel",onClick:this.handleCancel,loading:o===void 0?this.state.onCancelReturnPromiseStatus==="pending":o,type:"tertiary",block:h,autoFocus:!0},this.props.cancelButtonProps,{style:Object.assign(Object.assign({},h?{marginLeft:"unset"}:{}),(d=this.props.cancelButtonProps)===null||d===void 0?void 0:d.style),"x-semi-children-alias":"cancelText"}),i||l.cancel):null};return _.createElement(jn,{componentName:"Modal"},(l,d)=>_.createElement("div",{className:L({[`${Pe.DIALOG}-footerfill`]:h})},c(l),_.createElement(He,Object.assign({"aria-label":"confirm",type:r,theme:"solid",block:h,loading:s===void 0?this.state.onOKReturnPromiseStatus==="pending":s,onClick:this.handleOk},this.props.okButtonProps,{"x-semi-children-alias":"okText"}),t||l.confirm)))},this.renderDialog=()=>{var t;let r=this.props,{footer:i,className:s,motion:o,maskStyle:a,keepDOM:h,style:c,zIndex:l,getPopupContainer:d,visible:u,modalContentClass:f}=r,m=cG(r,["footer","className","motion","maskStyle","keepDOM","style","zIndex","getPopupContainer","visible","modalContentClass"]),g=c;const y=a,v="footer"in this.props?i:this.renderFooter();let b={zIndex:l};d&&d()!==((t=globalThis==null?void 0:globalThis.document)===null||t===void 0?void 0:t.body)&&(b={zIndex:l,position:"static"});const w=L(s,{[`${Pe.DIALOG}-displayNone`]:h&&this.state.displayNone}),C=this.props.visible||this.props.keepDOM&&(!this.props.lazyRender||this._haveRendered)||this.props.motion&&!this.state.displayNone;return C&&(this._haveRendered=!0),_.createElement(Rs,{motion:this.props.motion,animationState:u?"enter":"leave",startClassName:u?`${Pe.DIALOG}-content-animate-show`:`${Pe.DIALOG}-content-animate-hide`,onAnimationEnd:()=>{this.updateState()}},O=>{let{animationClassName:x,animationEventsNeedBind:P}=O;return _.createElement(Rs,{motion:this.props.motion,animationState:u?"enter":"leave",startClassName:u?`${Pe.DIALOG}-mask-animate-show`:`${Pe.DIALOG}-mask-animate-hide`,onAnimationEnd:()=>{this.updateState()}},T=>{let{animationClassName:k,animationEventsNeedBind:E}=T;return C?_.createElement(dh,{style:b,getPopupContainer:d}," ",_.createElement(Dp,Object.assign({},m,{contentExtraProps:P,maskExtraProps:E,isFullScreen:this.state.isFullScreen,contentClassName:`${x} ${f}`,maskClassName:k,className:w,getPopupContainer:d,maskStyle:y,style:g,ref:this.modalRef,footer:v,onClose:this.handleCancel}))):_.createElement(_.Fragment,null)})})},this.state={displayNone:!e.visible,isFullScreen:e.fullScreen},this.foundation=new qB(this.adapter),this.modalRef=_.createRef(),this.scrollBarWidth=0,this.originBodyWidth="100%"}get adapter(){return Object.assign(Object.assign({},super.adapter),{getProps:()=>this.props,disabledBodyScroll:()=>{var e;const{getPopupContainer:t}=this.props;this.bodyOverflow=document.body.style.overflow||"",(!t||t()===((e=globalThis==null?void 0:globalThis.document)===null||e===void 0?void 0:e.body))&&this.bodyOverflow!=="hidden"&&(document.body.style.overflow="hidden",document.body.style.width=`calc(${this.originBodyWidth||"100%"} - ${this.scrollBarWidth}px)`)},enabledBodyScroll:()=>{var e;const{getPopupContainer:t}=this.props;(!t||t()===((e=globalThis==null?void 0:globalThis.document)===null||e===void 0?void 0:e.body))&&this.bodyOverflow!==null&&this.bodyOverflow!=="hidden"&&(document.body.style.overflow=this.bodyOverflow,document.body.style.width=this.originBodyWidth)},notifyCancel:e=>this.props.onCancel(e),notifyOk:e=>this.props.onOk(e),notifyClose:()=>{this.props.afterClose()},toggleDisplayNone:(e,t)=>{e!==this.state.displayNone&&this.setState({displayNone:e},t||Y)},notifyFullScreen:e=>{e!==this.state.isFullScreen&&this.setState({isFullScreen:e})}})}static getDerivedStateFromProps(e,t){const r={};return e.fullScreen!==t.isFullScreen&&(r.isFullScreen=e.fullScreen),e.visible&&t.displayNone&&(r.displayNone=!1),r}componentDidMount(){this.scrollBarWidth=OR(),this.originBodyWidth=document.body.style.width,this.props.visible&&this.foundation.beforeShow()}componentDidUpdate(e,t,r){!e.visible&&this.props.visible&&this.foundation.beforeShow(),!t.displayNone&&this.state.displayNone&&this.foundation.afterHide()}componentWillUnmount(){this.props.visible?this.foundation.destroy():this.foundation.enabledBodyScroll()}render(){return this.props,this.renderDialog()}}pn.propTypes={mask:p.bool,closable:p.bool,centered:p.bool,visible:p.bool,width:p.oneOfType([p.string,p.number]),height:p.oneOfType([p.string,p.number]),confirmLoading:p.bool,cancelLoading:p.bool,okText:p.string,okType:p.string,cancelText:p.string,maskClosable:p.bool,onCancel:p.func,onOk:p.func,afterClose:p.func,okButtonProps:p.object,cancelButtonProps:p.object,style:p.object,className:p.string,maskStyle:p.object,bodyStyle:p.object,zIndex:p.number,title:p.node,icon:p.node,header:p.node,footer:p.node,hasCancel:p.bool,motion:p.bool,children:p.node,getPopupContainer:p.func,getContainerContext:p.func,maskFixed:p.bool,closeIcon:p.node,closeOnEsc:p.bool,size:p.oneOf(Gb.SIZE),keepDOM:p.bool,lazyRender:p.bool,direction:p.oneOf(Gb.directions),fullScreen:p.bool,footerFill:p.bool};pn.__SemiComponentName__="Modal";pn.defaultProps=Tn(pn.__SemiComponentName__,{zIndex:1e3,motion:!0,mask:!0,centered:!1,closable:!0,visible:!1,okType:"primary",maskClosable:!0,hasCancel:!0,onCancel:Y,onOk:Y,afterClose:Y,maskFixed:!1,closeOnEsc:!0,size:"small",keepDOM:!1,lazyRender:!0,fullScreen:!1});pn.useModal=hG;pn.info=function(n){return vh(Jx(n))};pn.success=function(n){return vh(e3(n))};pn.error=function(n){return vh(n3(n))};pn.warning=function(n){return vh(t3(n))};pn.confirm=function(n){return vh(r3(n))};pn.destroyAll=function(){for(let e=0,t=Ss.length;e<t;e++){const r=Ss[e];r&&r()}Ss=[]};const yh={PREFIX:`${te}-dropdown`,SELECTED:`${te}-dropdown-item-selected`,DISABLED:`${te}-dropdown-item-disabled`},$p={POSITION_SET:Ps.POSITION_SET,TRIGGER_SET:["hover","focus","click","custom","contextMenu"],DEFAULT_LEAVE_DELAY:100,ITEM_TYPE:["primary","secondary","tertiary","warning","danger"]},Ub={SPACING:4,NESTED_SPACING:2};class dG extends ze{handleVisibleChange(e){this._adapter.setPopVisible(e),this._adapter.notifyVisibleChange(e);const{trigger:t}=this.getProps();if(e&&t==="click"){const r=this._adapter.getPopupId();this.setFocusToFirstMenuItem(r)}}getMenuItemNodes(e){const t=document.getElementById(e);return t?Array.from(t.getElementsByTagName("li")).filter(r=>r.ariaDisabled==="false"):null}setFocusToFirstMenuItem(e){const t=this.getMenuItemNodes(e);t&&W$(t)}setFocusToLastMenuItem(e){const t=this.getMenuItemNodes(e);t&&X$(t)}handleKeyDown(e){var t,r;const i=(r=(t=e.target)===null||t===void 0?void 0:t.attributes["data-popupid"])===null||r===void 0?void 0:r.value,{visible:s}=this._adapter.getStates();switch(e.key){case" ":case"Enter":e.target.click();break;case"ArrowDown":this.setFocusToFirstMenuItem(i),s&&Jt(e);break;case"ArrowUp":this.setFocusToLastMenuItem(i),s&&Jt(e);break}}}class uG extends ze{constructor(){super(...arguments),this.menuItemNodes=null,this.firstChars=[]}handleEscape(e){this._adapter.getContext("trigger")==="custom"&&(e&&J$(document.querySelectorAll("[data-popupid]"),e.id)).focus()}setFocusByFirstCharacter(e,t){const r=Z$(this.menuItemNodes,e,this.firstChars,t);r>=0&&ch(this.menuItemNodes,this.menuItemNodes[r])}onMenuKeydown(e){const t=Q$(e.target,"tooltip");this.menuItemNodes||(this.menuItemNodes=[...e.target.parentNode.getElementsByTagName("li")].filter(i=>i.ariaDisabled!=="true")),this.firstChars.length===0&&this.menuItemNodes.forEach(i=>{var s;this.firstChars.push((s=i.textContent.trim()[0])===null||s===void 0?void 0:s.toLowerCase())});const r=this.menuItemNodes.find(i=>i.tabIndex===0);switch(e.key){case" ":case"Enter":e.target.click();break;case"Escape":this.handleEscape(t);break;case"ArrowUp":Y$(this.menuItemNodes,r),Jt(e);break;case"ArrowDown":q$(this.menuItemNodes,r),Jt(e);break;default:K$(e.key)&&this.setFocusByFirstCharacter(r,e.key);break}}}const ra=_.createContext({level:0});var pG=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const fG=yh.PREFIX;class Wv extends Ee{constructor(e){super(e),this.foundation=new uG(this.adapter)}get adapter(){return Object.assign({},super.adapter)}render(){const e=this.props,{children:t,className:r,style:i}=e,s=pG(e,["children","className","style"]);return _.createElement("ul",Object.assign({role:"menu","aria-orientation":"vertical"},s,{className:L(`${fG}-menu`,r),style:i,onKeyDown:o=>this.foundation.onMenuKeydown(o)}),t)}}Wv.propTypes={children:p.node,className:p.string,style:p.object};Wv.contextType=ra;const Zi=yh.PREFIX;class bh extends Ee{render(){const{children:e,disabled:t,className:r,forwardRef:i,style:s,type:o,active:a,icon:h,onKeyDown:c,showTick:l,hover:d}=this.props,{showTick:u}=this.context,f=u??l,m=L(r,{[`${Zi}-item`]:!0,[`${Zi}-item-disabled`]:t,[`${Zi}-item-hover`]:d,[`${Zi}-item-withTick`]:f,[`${Zi}-item-${o}`]:o,[`${Zi}-item-active`]:a}),g={};t||["onClick","onMouseEnter","onMouseLeave","onContextMenu"].forEach(b=>{this.context.level!==1&&b==="onClick"?g.onMouseDown=C=>{var O,x;C.button===0&&((x=(O=this.props)[b])===null||x===void 0||x.call(O,C))}:g[b]=this.props[b]});let y=null;switch(!0){case(f&&a):y=_.createElement(Pd,null);break;case(f&&!a):y=_.createElement(Pd,{style:{color:"transparent"}});break;default:y=null;break}let v=null;return h&&(v=_.createElement("div",{className:`${Zi}-item-icon`},h)),_.createElement("li",Object.assign({role:"menuitem",tabIndex:-1,"aria-disabled":t},g,{onKeyDown:c,ref:b=>i(b),className:m,style:s},this.getDataAttr(this.props)),y,v,e)}}bh.propTypes={children:p.oneOfType([p.string,p.node]),name:p.string,disabled:p.bool,selected:p.bool,onClick:p.func,onMouseEnter:p.func,onMouseLeave:p.func,onContextMenu:p.func,className:p.string,style:p.object,forwardRef:p.func,type:p.oneOf($p.ITEM_TYPE),active:p.bool,icon:p.node};bh.contextType=ra;bh.defaultProps={disabled:!1,divided:!1,selected:!1,onMouseEnter:Y,onMouseLeave:Y,forwardRef:Y};bh.elementType="Dropdown.Item";const gG=yh.PREFIX,i3=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{style:e,className:t}=n;return _.createElement("div",{className:L(`${gG}-divider`,t),style:e})};i3.propTypes={style:p.object,className:p.string};const Vb=yh.PREFIX;class Xv extends G.PureComponent{render(){const{className:e,style:t,children:r}=this.props,{showTick:i}=this.context,s=L({[`${Vb}-title`]:!0,[`${Vb}-title-withTick`]:i},e);return _.createElement("div",{className:s,style:t},r)}}Xv.propTypes={children:p.node,className:p.string,style:p.object};Xv.contextType=ra;var Kf=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const mG=$p.POSITION_SET,vG=$p.TRIGGER_SET;class Ze extends Ee{constructor(e){super(e),this.handleVisibleChange=t=>this.foundation.handleVisibleChange(t),this.state={popVisible:e.visible},this.foundation=new dG(this.adapter),this.tooltipRef=_.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{setPopVisible:e=>this.setState({popVisible:e}),notifyVisibleChange:e=>{var t,r;return(r=(t=this.props).onVisibleChange)===null||r===void 0?void 0:r.call(t,e)},getPopupId:()=>this.tooltipRef.current.getPopupId()})}renderContent(){const{render:e,menu:t,contentClassName:r,style:i,showTick:s,prefixCls:o,trigger:a}=this.props,h=L(o,r),{level:c=0}=this.context,l={showTick:s,level:c+1,trigger:a};let d=null;return _.isValidElement(e)?d=e:Array.isArray(t)&&(d=this.renderMenu()),_.createElement(ra.Provider,{value:l},_.createElement("div",{className:h,style:i},_.createElement("div",{className:`${o}-content`,"x-semi-prop":"render"},d)))}renderMenu(){const{menu:e}=this.props,t=e.map((r,i)=>{switch(r.node){case"title":{const{name:s,node:o}=r,a=Kf(r,["name","node"]);return _.createElement(Ze.Title,Object.assign({},a,{key:o+s+i}),s)}case"item":{const{node:s,name:o}=r,a=Kf(r,["node","name"]);return _.createElement(Ze.Item,Object.assign({},a,{key:s+o+i}),o)}case"divider":return _.createElement(Ze.Divider,{key:r.node+i});default:return null}});return _.createElement(Ze.Menu,null,t)}renderPopCard(){const{render:e,contentClassName:t,style:r,showTick:i,prefixCls:s}=this.props,o=L(s,t),{level:a=0}=this.context,h={showTick:i,level:a+1};return _.createElement(ra.Provider,{value:h},_.createElement("div",{className:o,style:r},_.createElement("div",{className:`${s}-content`},e)))}render(){const e=this.props,{children:t,position:r,trigger:i,onVisibleChange:s,zIndex:o,className:a,motion:h,margin:c,style:l,prefixCls:d}=e,u=Kf(e,["children","position","trigger","onVisibleChange","zIndex","className","motion","margin","style","prefixCls"]);let{spacing:f}=this.props;const{level:m}=this.context,{popVisible:g}=this.state,y=this.renderContent();return m>0?f=typeof f=="number"?f:Ub.NESTED_SPACING:(f===null||typeof f>"u")&&(f=Ub.SPACING),_.createElement(gt,Object.assign({zIndex:o,motion:h,margin:c,content:y,className:a,prefixCls:d,spacing:f,position:r,trigger:i,onVisibleChange:this.handleVisibleChange,showArrow:!1,returnFocusOnClose:!0,ref:this.tooltipRef},u),_.isValidElement(t)?_.cloneElement(t,{className:L(oe(t,"props.className"),{[`${d}-showing`]:g}),"aria-haspopup":!0,"aria-expanded":g,onKeyDown:v=>{this.foundation.handleKeyDown(v);const b=oe(t,"props.onKeyDown");b&&b(v)}}):t)}}Ze.Menu=Wv;Ze.Item=bh;Ze.Divider=i3;Ze.Title=Xv;Ze.contextType=ra;Ze.propTypes={children:p.node,contentClassName:p.oneOfType([p.string,p.array]),className:p.string,getPopupContainer:p.func,margin:p.oneOfType([p.number,p.object]),mouseEnterDelay:p.number,mouseLeaveDelay:p.number,menu:p.array,motion:p.oneOfType([p.bool,p.func,p.object]),onVisibleChange:p.func,prefixCls:p.string,position:p.oneOf(mG),rePosKey:p.oneOfType([p.string,p.number]),render:p.node,spacing:p.oneOfType([p.number,p.object]),showTick:p.bool,style:p.object,trigger:p.oneOf(vG),visible:p.bool,zIndex:p.number};Ze.__SemiComponentName__="Dropdown";Ze.defaultProps=Tn(Ze.__SemiComponentName__,{onVisibleChange:Y,prefixCls:yh.PREFIX,zIndex:Si.DEFAULT_Z_INDEX,motion:!0,trigger:"hover",position:"bottom",mouseLeaveDelay:$p.DEFAULT_LEAVE_DELAY,showTick:!1,closeOnEsc:!0,onEscKeyDown:Y});const s3={PREFIX:`${te}`};var yG=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Hb=["xxl","xl","lg","md","sm","xs"],o3=_.createContext(null),Kb={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"};class wr extends _.Component{constructor(){super(...arguments),this.state={screens:{xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}},this.unRegisters=[]}componentDidMount(){this.unRegisters=Object.keys(Kb).map(e=>wx(Kb[e],{match:()=>{typeof this.props.gutter=="object"&&this.setState(t=>({screens:Object.assign(Object.assign({},t.screens),{[e]:!0})}))},unmatch:()=>{typeof this.props.gutter=="object"&&this.setState(t=>({screens:Object.assign(Object.assign({},t.screens),{[e]:!1})}))}}))}componentWillUnmount(){this.unRegisters.forEach(e=>e())}getGutter(){const{gutter:e=0}=this.props,t=[0,0];return(Array.isArray(e)?e.slice(0,2):[e,0]).forEach((i,s)=>{if(typeof i=="object")for(let o=0;o<Hb.length;o++){const a=Hb[o];if(this.state.screens[a]&&i[a]!==void 0){t[s]=i[a];break}}else t[s]=i||0}),t}render(){const e=this.props,{prefixCls:t,type:r,justify:i,align:s,className:o,style:a,children:h}=e,c=yG(e,["prefixCls","type","justify","align","className","style","children"]),l=this.getGutter(),d=`${t}-row`,u=L({[d]:r!=="flex",[`${d}-${r}`]:r,[`${d}-${r}-${i}`]:r&&i,[`${d}-${r}-${s}`]:r&&s},o),f=Object.assign(Object.assign(Object.assign({},l[0]>0?{marginLeft:l[0]/-2,marginRight:l[0]/-2}:{}),l[1]>0?{marginTop:l[1]/-2,marginBottom:l[1]/-2}:{}),a),m=Object.assign({},c);return delete m.gutter,_.createElement(o3.Provider,{value:{gutters:l}},_.createElement("div",Object.assign({},m,{className:u,style:f,"x-semi-prop":"children"}),h))}}wr.propTypes={type:p.oneOf(["flex"]),align:p.oneOf(["top","middle","bottom"]),justify:p.oneOf(["start","end","center","space-around","space-between"]),className:p.string,style:p.object,children:p.node,gutter:p.oneOfType([p.object,p.number,p.array]),prefixCls:p.string};wr.defaultProps={prefixCls:s3.PREFIX};wr.RowContext={gutters:p.any};var bG=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const ro=p.oneOfType([p.object,p.number]);class an extends _.Component{render(){const{props:e}=this,{prefixCls:t,span:r,order:i,offset:s,push:o,pull:a,className:h,children:c}=e,l=bG(e,["prefixCls","span","order","offset","push","pull","className","children"]);let d={};const u=`${t}-col`;["xs","sm","md","lg","xl","xxl"].forEach(y=>{let v={};typeof e[y]=="number"?v.span=e[y]:typeof e[y]=="object"&&(v=e[y]||{}),delete l[y],d=Object.assign(Object.assign({},d),{[`${u}-${y}-${v.span}`]:v.span!==void 0,[`${u}-${y}-order-${v.order}`]:v.order||v.order===0,[`${u}-${y}-offset-${v.offset}`]:v.offset||v.offset===0,[`${u}-${y}-push-${v.push}`]:v.push||v.push===0,[`${u}-${y}-pull-${v.pull}`]:v.pull||v.pull===0})});const f=L(u,{[`${u}-${r}`]:r!==void 0,[`${u}-order-${i}`]:i,[`${u}-offset-${s}`]:s,[`${u}-push-${o}`]:o,[`${u}-pull-${a}`]:a},h,d);let{style:m}=l,g;try{g=this.context.gutters}catch{throw new Error("please make sure <Col> inside <Row>")}return m=Object.assign(Object.assign(Object.assign({},g[0]>0?{paddingLeft:g[0]/2,paddingRight:g[0]/2}:{}),g[1]>0?{paddingTop:g[1]/2,paddingBottom:g[1]/2}:{}),m),_.createElement("div",Object.assign({},l,{style:m,className:f,"x-semi-prop":"children"}),c)}}an.contextType=o3;an.propTypes={span:p.number,order:p.number,offset:p.number,push:p.number,pull:p.number,className:p.string,children:p.node,xs:ro,sm:ro,md:ro,lg:ro,xl:ro,xxl:ro,prefixCls:p.string};an.defaultProps={prefixCls:s3.PREFIX};const Rp={PREFIX:`${te}-layout`},_G={BREAKPOINT:["xs","sm","md","lg","xl","xxl"]},a3=_.createContext({siderHook:{addSider:_n,removeSider:_n}});var wG=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Wb={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},SG=(()=>{let n=0;return()=>(n+=1,`${Rp.PREFIX}-sider-${n}`)})(),CG=_G.BREAKPOINT;class _h extends _.PureComponent{constructor(e){super(e),this.unRegisters=[],this.uniqueId="",this.uniqueId=SG()}componentDidMount(){const{breakpoint:e}=this.props,r=Object.keys(Wb).filter(i=>e&&e.indexOf(i)!==-1).map(i=>wx(Wb[i],{match:()=>{this.responsiveHandler(i,!0)},unmatch:()=>{this.responsiveHandler(i,!1)}}));this.unRegisters=r,this.context.siderHook&&this.context.siderHook.addSider(this.uniqueId)}componentWillUnmount(){this.unRegisters.forEach(e=>e()),this.context.siderHook&&this.context.siderHook.removeSider(this.uniqueId)}responsiveHandler(e,t){const{onBreakpoint:r}=this.props;r&&r(e,t)}render(){const e=this.props,{prefixCls:t,className:r,children:i,style:s}=e,o=wG(e,["prefixCls","className","children","style"]),a=L(r,{[`${t}-sider`]:!0});return _.createElement("aside",Object.assign({className:a,"aria-label":this.props["aria-label"],style:s},Ca(o)),_.createElement("div",{className:`${t}-sider-children`},i))}}_h.propTypes={prefixCls:p.string,style:p.object,className:p.string,breakpoint:p.arrayOf(p.oneOf(CG)),onBreakpoint:p.func,"aria-label":p.string,role:p.string};_h.defaultProps={prefixCls:Rp.PREFIX};_h.contextType=a3;_h.elementType="Layout.Sider";var l3=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const xG={Header:"header",Footer:"footer",Content:"main",Layout:"section"};function Yv(n){const e=xG[n],t=n.toLowerCase();return r=>class extends _.PureComponent{render(){return _.createElement(r,Object.assign({role:this.props.role,"aria-label":this.props["aria-label"],type:t,tagName:e},this.props))}}}class wh extends _.PureComponent{render(){const e=this.props,{prefixCls:t,type:r,className:i,children:s,tagName:o}=e,a=l3(e,["prefixCls","type","className","children","tagName"]),h=L(i,`${t}-${r}`);return _.createElement(o,Object.assign({className:h},a),s)}}wh.propTypes={prefixCls:p.string,style:p.object,className:p.string};wh.defaultProps={prefixCls:Rp.PREFIX};const OG=Yv("Header")(wh),PG=Yv("Footer")(wh),EG=Yv("Content")(wh);class Wr extends _.Component{constructor(e){super(e),this.state={siders:[]}}getSiderHook(){return{addSider:e=>{this.setState(t=>({siders:[...t.siders,e]}))},removeSider:e=>{this.setState(t=>({siders:t.siders.filter(r=>r!==e)}))}}}render(){const e=this.props,{prefixCls:t,className:r,children:i,hasSider:s,tagName:o}=e,a=l3(e,["prefixCls","className","children","hasSider","tagName"]),{siders:h}=this.state,c=L(r,t,{[`${t}-has-sider`]:typeof s=="boolean"&&s||h.length>0||_.Children.toArray(i).some(d=>_.isValidElement(d)&&d.type&&d.type.elementType==="Layout.Sider")}),l=o;return _.createElement(a3.Provider,{value:{siderHook:this.getSiderHook()}},_.createElement(l,Object.assign({className:c},a),i))}}Wr.propTypes={prefixCls:p.string,style:p.object,className:p.string};Wr.defaultProps={prefixCls:Rp.PREFIX,tagName:"section"};Wr.Header=OG;Wr.Footer=PG;Wr.Content=EG;Wr.Sider=_h;const TG={PREFIX:`${te}-form`},kr=TG.PREFIX;class qv extends G.PureComponent{render(){const{children:e,required:t,text:r,disabled:i,name:s,width:o,align:a,style:h,className:c,extra:l,id:d,optional:u}=this.props,f=L(c,{[`${kr}-field-label`]:!0,[`${kr}-field-label-left`]:a==="left",[`${kr}-field-label-right`]:a==="right",[`${kr}-field-label-required`]:t,[`${kr}-field-label-disabled`]:i,[`${kr}-field-label-with-extra`]:l}),m=h||{};o&&(m.width=o);const g=_.createElement(jn,{componentName:"Form"},b=>_.createElement("span",{className:`${kr}-field-label-optional-text`},b.optional)),y=_.createElement("div",{className:`${kr}-field-label-text`,"x-semi-prop":"label"},typeof r<"u"?r:e,u?g:null),v=_.createElement(_.Fragment,null,y,_.createElement("div",{className:`${kr}-field-label-extra`},l));return _.createElement("label",{className:f,htmlFor:s,style:m,id:d},l?v:y)}}qv.defaultProps={required:!1,name:"",align:"left",className:"",optional:!1};qv.propTypes={id:p.string,children:p.node,required:p.bool,text:p.node,disabled:p.bool,name:p.string,align:p.string,width:p.oneOfType([p.number,p.string]),style:p.object,className:p.string,extra:p.node,optional:p.bool};var Xb=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Qi=jv.PREFIX,kG=Ta.SIZE;class Zv extends Ee{renderGroupWithLabel(e){const t=this.props,{size:r,className:i,label:s,labelPosition:o}=t;Xb(t,["size","className","label","labelPosition"]);const a=L({[`${Qi}-group-wrapper`]:!0,[`${Qi}-group-wrapper-with-top-label`]:o==="top",[`${Qi}-group-wrapper-with-left-label`]:o==="left"}),h=L(`${Qi}-group`,i,{[`${Qi}-${r}`]:r!=="default"}),c="input-group";return _.createElement("div",{className:a},s&&s.text?_.createElement(qv,Object.assign({name:c},s)):null,_.createElement("span",{role:"group","aria-disabled":this.props.disabled,id:s&&s.name||c,className:h,style:this.props.style,onFocus:this.props.onFocus,onBlur:this.props.onBlur},e))}render(){const e=this.props,{size:t,style:r,className:i,children:s,label:o,onBlur:a,onFocus:h,disabled:c}=e,l=Xb(e,["size","style","className","children","label","onBlur","onFocus","disabled"]),d=L(`${Qi}-group`,{[`${Qi}-${t}`]:t!=="default"},i);let u;return s&&(u=(Array.isArray(s)?s:[s]).map((f,m)=>{if(f){const{onBlur:g,onFocus:y,disabled:v}=f.props,b=Ht(g)&&oe(g,"name")!=="noop"?g:a,w=Ht(y)&&oe(y,"name")!=="noop"?y:h,C=typeof v=="boolean"?v:c;return _.cloneElement(f,Object.assign(Object.assign({key:m},l),{size:t,onBlur:b,onFocus:w,disabled:C}))}return null})),o&&o.text?this.renderGroupWithLabel(u):_.createElement("span",{role:"group","aria-label":"Input group","aria-disabled":this.props.disabled,className:d,style:r,onFocus:this.props.onFocus,onBlur:this.props.onBlur},u)}}Zv.propTypes={className:p.string,children:p.node,size:p.oneOf(kG),style:p.object,onBlur:p.func,onFocus:p.func,label:p.object,labelPosition:p.string};Zv.defaultProps={size:"default",className:"",onBlur:_n,onFocus:_n};var AG=Nx;function IG(n){return AG(n)&&n!=+n}var MG=IG;const NG=Ge(MG),DG=(n,e)=>{const{isNaN:t}=Number;return t(n)&&t(e)},$G=Object.assign({},jv),Cs=Object.assign(Object.assign({},bL),{DEFAULT_STEP:1,DEFAULT_SHIFT_STEP:10,DEFAULT_PRESS_TIMEOUT:250,DEFAULT_PRESS_INTERVAL:0,MOUSE_BUTTON_LEFT:0}),RG=Object.assign({},Ta);function FG(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=Math.pow(10,Math.max(t,r));return(n*i+e*i)/i}function Yb(n,e){return FG(n,-e)}class LG extends ze{init(){this._setInitValue()}destroy(){this._unregisterInterval(),this._unregisterTimer(),this._adapter.unregisterGlobalEvent("mouseup")}isControlled(){return this._isControlledComponent("value")}_doInput(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=e,s=e,o=!0;const a=this.isControlled();typeof e!="number"&&(s=this.doParse(e,!1),o=!isNaN(s)),o&&(i=s,a||this._adapter.setNumber(s)),a||this._adapter.setValue(e,r),this.getProp("keepFocus")&&this._adapter.setFocusing(!0,()=>{this._adapter.setClickUpOrDown(!0)}),this.notifyChange(i,t)}_registerInterval(e){const t=this.getProp("pressInterval")||Cs.DEFAULT_PRESS_INTERVAL;this._intervalHasRegistered=!0,this._interval=setInterval(()=>{typeof e=="function"&&this._intervalHasRegistered&&e()},t)}_unregisterInterval(){this._interval&&(this._intervalHasRegistered=!1,clearInterval(this._interval),this._interval=null)}_registerTimer(e){const t=this.getProp("pressTimeout")||Cs.DEFAULT_PRESS_TIMEOUT;this._timerHasRegistered=!0,this._timer=setTimeout(()=>{this._timerHasRegistered&&typeof e=="function"&&e()},t)}_unregisterTimer(){this._timer&&(this._timerHasRegistered=!1,clearTimeout(this._timer),this._timer=null)}handleInputFocus(e){this.getState("value"),this._adapter.recordCursorPosition(),this._adapter.setFocusing(!0,null),this._adapter.setClickUpOrDown(!1),this._adapter.notifyFocus(e)}handleInputChange(e,t){const r=this.doParse(e,!0,!0,!0),i=this.doParse(e,!1,!1,!1),s=this.afterParser(e);this._adapter.recordCursorPosition();let o,a=i,h=e;if(e==="")this.isControlled()||(a=null);else if(this.isValidNumber(i)&&this.isValidNumber(r))o=i,h=this.doFormat(i,!1);else{if(typeof i=="number"&&!isNaN(i)){h=this.doFormat(i,!1);const c=s.lastIndexOf("."),l=s.length-1-c,d=this._getPrecLen(i);if(d){if(d<l)for(let u=0;u<l-d;u++)h+="0"}else{const u=c>-1?s.slice(c):"";h+=u}a=i}else h=this.doFormat(s,!1);o=s}!this.isControlled()&&(a===null||typeof a=="number"&&!isNaN(a))&&this._adapter.setNumber(a),this._adapter.setValue(this.isControlled()?h:this.doFormat(s,!1),()=>{this._adapter.restoreCursor()}),this.notifyChange(o,t)}handleInputKeyDown(e){const t=e.keyCode;if(t===Jn.UP||t===Jn.DOWN){this._adapter.setClickUpOrDown(!0),this._adapter.recordCursorPosition();const r=t===Jn.UP?this.add(null,e):this.minus(null,e);this._doInput(r,e,()=>{this._adapter.restoreCursor()}),e.preventDefault()}this._adapter.notifyKeyDown(e)}handleInputBlur(e){const t=eo(this.getState("value"));let r=this.getState("number");if(r!=null||t!=null&&t!==""){const i=this.doParse(t,!1,!0,!0);let s=!1,o=!1,a,h;this.isValidNumber(i)&&r!==i&&(a=i,this.isControlled()||(r=a),s=!0);const c=this.doFormat(r,!0);if(c!==t&&(h=c,o=!0),o||s){const l=h??a;h!=null&&this._adapter.setValue(h),a!=null&&(this._isControlledComponent("value")||this._adapter.setNumber(a)),this.notifyChange(l,e)}}this._adapter.setFocusing(!1),this._adapter.notifyBlur(e)}handleInputMouseEnter(e){this._adapter.setHovering(!0)}handleInputMouseLeave(e){this._adapter.setHovering(!1)}handleInputMouseMove(e){this._adapter.setHovering(!0)}handleMouseUp(e){this._unregisterInterval(),this._unregisterTimer(),this._adapter.unregisterGlobalEvent("mouseup")}handleUpClick(e){const{readonly:t}=this.getProps();!this._isMouseButtonLeft(e)||t||(this._adapter.setClickUpOrDown(!0),e&&(this._persistEvent(e),e.stopPropagation(),this._preventDefault(e)),this.upClick(e),this._registerTimer(()=>{this._registerInterval(()=>{this.upClick(e)})}))}handleDownClick(e){const{readonly:t}=this.getProps();!this._isMouseButtonLeft(e)||t||(this._adapter.setClickUpOrDown(!0),e&&(this._persistEvent(e),e.stopPropagation(),this._preventDefault(e)),this.downClick(e),this._registerTimer(()=>{this._registerInterval(()=>{this.downClick(e)})}))}_isMouseButtonLeft(e){return oe(e,"button")===Cs.MOUSE_BUTTON_LEFT}_preventDefault(e){const t=this._adapter.getProp("keepFocus"),r=this._adapter.getProp("innerButtons");(t||r)&&e.preventDefault()}handleMouseLeave(e){this._adapter.registerGlobalEvent("mouseup",()=>{this.handleMouseUp(e)})}upClick(e){const t=this.add(null,e);this._doInput(t,e),this._adapter.notifyUpClick(t,e)}downClick(e){const t=this.minus(null,e);this._doInput(t,e),this._adapter.notifyDownClick(t,e)}_setInitValue(){const{defaultValue:e,value:t}=this.getProps(),r=this._isControlledComponent("value")?t:e,i=this.doParse(eo(r),!1,!0,!0);let s=null;typeof i=="number"&&!isNaN(i)&&(s=i);const o=typeof s=="number"?this.doFormat(s,!0):"";this._adapter.setNumber(s),this._adapter.setValue(o),vt(o)&&o!==String(r??"")&&this.notifyChange(o,null)}add(e,t){const i=t&&t.shiftKey?this.getProp("shiftStep"):this.getProp("step");e=e==null?i:Number(e);const s=Math.abs(za(e)),o=this.getState("number");let a=this.toNumber(o)||0;const h=this.getProp("min"),c=this.getProp("max"),l=this._getPrecLen(h),d=this._getPrecLen(c),u=this._getPrecLen(a),f=this._getPrecLen(e),m=Math.pow(10,Math.max(l,d,u,f));return e<0?Math.abs(Yb(h,a))>=s&&(a=(a*m+e*m)/m):e>0&&Math.abs(Yb(c,a))>=s&&(a=(a*m+e*m)/m),typeof h=="number"&&h>a&&(a=h),typeof c=="number"&&c<a&&(a=c),this.doFormat(a,!0)}minus(e,t){const i=t&&t.shiftKey?this.getProp("shiftStep"):this.getProp("step");return e=e==null?i:Number(e),this.add(-e,t)}_getPrecLen(e){typeof e!="string"&&(e=String(Math.abs(Number(e||""))));const t=e.indexOf(".")+1;return t?e.length-t:0}_adjustPrec(e){const t=this.getProp("precision");return typeof t=="number"&&e!==""&&e!==null&&!Number.isNaN(Number(e))&&(e=Number(e).toFixed(t)),eo(e)}doFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r;const i=this.getProp("formatter");return t?r=this._adjustPrec(e):r=eo(e),typeof i=="function"&&(r=i(r)),r}fetchMinOrMax(e){const{min:t,max:r}=this.getProps();return e<t?t:e>r?r:e}doParse(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(typeof e=="number")return i&&(e=this.fetchMinOrMax(e)),r&&(e=this._adjustPrec(e)),za(e);const s=this.getProp("parser");if(typeof s=="function"&&(e=s(e)),t&&typeof e=="string"){const o=e.indexOf(".")===-1||e.indexOf(".")>-1&&(e==="0"||e.lastIndexOf("0")<e.length-1),a=e.lastIndexOf(".")<e.length-1&&e.split("").filter(h=>h===".").length<2;if(!o||!a)return NaN}return r&&(e=this._adjustPrec(e)),typeof e=="string"&&e.length?i?this.fetchMinOrMax(za(e)):za(e):NaN}afterParser(e){const t=this.getProp("parser");return eo(typeof e=="string"&&typeof t=="function"?t(e):e)}toNumber(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof e=="number")return e;if(typeof e=="string"){const r=this.getProp("parser");typeof r=="function"&&(e=r(e)),t&&(e=this._adjustPrec(e))}return za(e)}isValidNumber(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof e=="number"&&!isNaN(e)){const{min:r,max:i,precision:s}=this.getProps(),o=this._getPrecLen(e),a=t?typeof s=="number"&&o<=s||typeof s!="number":!0;if(e>=r&&e<=i&&a)return!0}return!1}isValidString(e){if(typeof e=="string"&&e.length){const t=this.doParse(e);return this.isValidNumber(t)}return!1}notifyChange(e,t){if(e==null||e==="")this._adapter.notifyChange("",t);else{const r=this.toNumber(e,!0);typeof r=="number"&&!isNaN(r)?(this._adapter.notifyChange(r,t),this.notifyNumberChange(r,t)):this._adapter.notifyChange(this.afterParser(e),t)}}notifyNumberChange(e,t){const{number:r}=this.getStates();this.isValidNumber(e)&&e!==r&&this._adapter.notifyNumberChange(e,t)}updateStates(e,t){this._adapter.updateStates(e,t)}}var jG=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class Id extends Ee{get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{setValue:(t,r)=>this.setState({value:t},r),setNumber:(t,r)=>this.setState({number:t},r),setFocusing:(t,r)=>this.setState({focusing:t},r),setHovering:t=>this.setState({hovering:t}),notifyChange:function(){return e.props.onChange(...arguments)},notifyNumberChange:function(){return e.props.onNumberChange(...arguments)},notifyBlur:t=>this.props.onBlur(t),notifyFocus:t=>this.props.onFocus(t),notifyUpClick:(t,r)=>this.props.onUpClick(t,r),notifyDownClick:(t,r)=>this.props.onDownClick(t,r),notifyKeyDown:t=>this.props.onKeyDown(t),registerGlobalEvent:(t,r)=>{t&&typeof r=="function"&&(this.adapter.unregisterGlobalEvent(t),this.adapter.setCache(t,r),document.addEventListener(t,r))},unregisterGlobalEvent:t=>{if(t){const r=this.adapter.getCache(t);document.removeEventListener(t,r),this.adapter.setCache(t,null)}},recordCursorPosition:()=>{try{this.inputNode&&(this.cursorStart=this.inputNode.selectionStart,this.cursorEnd=this.inputNode.selectionEnd,this.currentValue=this.inputNode.value,this.cursorBefore=this.inputNode.value.substring(0,this.cursorStart),this.cursorAfter=this.inputNode.value.substring(this.cursorEnd))}catch(t){console.warn(t)}},restoreByAfter:t=>{if(tn(t))return!1;const r=this.inputNode.value,i=r.lastIndexOf(t);return i===-1?!1:i+t.length===r.length?(this.adapter.fixCaret(i,i),!0):!1},restoreCursor:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.cursorAfter;return tn(t)?!1:Array.prototype.some.call(t,(r,i)=>{const s=t.substring(i);return e.adapter.restoreByAfter(s)})},fixCaret:(t,r)=>{if(!(t===void 0||r===void 0||!this.inputNode||!this.inputNode.value))try{const i=this.inputNode.selectionStart,s=this.inputNode.selectionEnd;(t!==i||r!==s)&&this.inputNode.setSelectionRange(t,r)}catch{}},setClickUpOrDown:t=>{this.clickUpOrDown=t},updateStates:(t,r)=>{this.setState(t,r)}})}constructor(e){super(e),this.setInputRef=t=>{const{forwardedRef:r}=this.props;this.inputNode=t,r&&typeof r=="object"?r.current=t:typeof r=="function"&&r(t)},this.handleInputFocus=t=>this.foundation.handleInputFocus(t),this.handleInputChange=(t,r)=>this.foundation.handleInputChange(t,r),this.handleInputBlur=t=>this.foundation.handleInputBlur(t),this.handleInputKeyDown=t=>this.foundation.handleInputKeyDown(t),this.handleInputMouseEnter=t=>this.foundation.handleInputMouseEnter(t),this.handleInputMouseLeave=t=>this.foundation.handleInputMouseLeave(t),this.handleInputMouseMove=t=>this.foundation.handleInputMouseMove(t),this.handleUpClick=t=>this.foundation.handleUpClick(t),this.handleDownClick=t=>this.foundation.handleDownClick(t),this.handleMouseUp=t=>this.foundation.handleMouseUp(t),this.handleMouseLeave=t=>this.foundation.handleMouseLeave(t),this.renderButtons=()=>{const{prefixCls:t,disabled:r,innerButtons:i,max:s,min:o}=this.props,{hovering:a,focusing:h,number:c}=this.state,l=r||c===s,d=r||c===o,u=L(`${t}-number-suffix-btns`,{[`${t}-number-suffix-btns-inner`]:i,[`${t}-number-suffix-btns-inner-hover`]:i&&a&&!h}),f=L(`${t}-number-button`,`${t}-number-button-up`,{[`${t}-number-button-up-disabled`]:r,[`${t}-number-button-up-not-allowed`]:l}),m=L(`${t}-number-button`,`${t}-number-button-down`,{[`${t}-number-button-down-disabled`]:r,[`${t}-number-button-down-not-allowed`]:d});return _.createElement("div",{className:u},_.createElement("span",{className:f,onMouseDown:l?Y:this.handleUpClick,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave},_.createElement(MF,{size:"extra-small"})),_.createElement("span",{className:m,onMouseDown:d?Y:this.handleDownClick,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave},_.createElement(Ul,{size:"extra-small"})))},this.renderSuffix=()=>{const{innerButtons:t,suffix:r}=this.props,{hovering:i,focusing:s}=this.state;return t&&(i||s)?this.renderButtons():r},this.state={value:"",number:null,focusing:!!e.autofocus||!1,hovering:!1},this.inputNode=null,this.foundation=new LG(this.adapter),this.clickUpOrDown=!1}componentDidUpdate(e){const{value:t,preventScroll:r}=this.props,{focusing:i}=this.state;let s;if(t!==e.value&&!DG(t,e.value)){if(tn(t)||t==="")s="",this.foundation.updateStates({value:s,number:null});else{let o=t;typeof t=="number"&&(o=this.foundation.doFormat(t));const a=this.foundation.doParse(o,!1,!0,!0),h=typeof t=="number"?t:this.foundation.doParse(o,!1,!1,!1);if(i)if(this.foundation.isValidNumber(a)&&a!==this.state.number){const c={number:a};this.clickUpOrDown&&(c.value=this.foundation.doFormat(c.number,!0),s=c.value),this.foundation.updateStates(c,()=>this.adapter.restoreCursor())}else NG(h)?this.foundation.updateStates({value:o}):(s=this.foundation.doFormat(h,!1),this.foundation.updateStates({value:s}));else this.foundation.isValidNumber(a)?(s=this.foundation.doFormat(a),this.foundation.updateStates({number:a,value:s})):(s="",this.foundation.updateStates({number:null,value:s}))}s&&vt(s)&&s!==String(this.props.value)&&this.foundation.notifyChange(s,null)}this.clickUpOrDown&&this.props.keepFocus&&this.state.focusing&&document.activeElement!==this.inputNode&&this.inputNode.focus({preventScroll:r})}render(){const e=this.props,{disabled:t,className:r,prefixCls:i,min:s,max:o,step:a,shiftStep:h,precision:c,formatter:l,parser:d,forwardedRef:u,onUpClick:f,onDownClick:m,pressInterval:g,pressTimeout:y,suffix:v,size:b,hideButtons:w,innerButtons:C,style:O,onNumberChange:x,keepFocus:P,defaultValue:T}=e,k=jG(e,["disabled","className","prefixCls","min","max","step","shiftStep","precision","formatter","parser","forwardedRef","onUpClick","onDownClick","pressInterval","pressTimeout","suffix","size","hideButtons","innerButtons","style","onNumberChange","keepFocus","defaultValue"]),{value:E,number:I}=this.state,M=L(r,`${i}-number`,{[`${i}-number-size-${b}`]:b}),R=this.renderButtons(),U={"aria-disabled":t,step:a};return I&&(U["aria-valuenow"]=I),o!==1/0&&(U["aria-valuemax"]=o),s!==-1/0&&(U["aria-valuemin"]=s),_.createElement("div",{className:M,style:O,onMouseMove:H=>this.handleInputMouseMove(H),onMouseEnter:H=>this.handleInputMouseEnter(H),onMouseLeave:H=>this.handleInputMouseLeave(H)},_.createElement(Td,Object.assign({role:"spinbutton"},U,k,{size:b,disabled:t,ref:this.setInputRef,value:E,onFocus:this.handleInputFocus,onChange:this.handleInputChange,onBlur:this.handleInputBlur,onKeyDown:this.handleInputKeyDown,suffix:this.renderSuffix()})),w||C?null:R)}}Id.propTypes={"aria-label":p.string,"aria-labelledby":p.string,"aria-invalid":p.bool,"aria-errormessage":p.string,"aria-describedby":p.string,"aria-required":p.bool,autofocus:p.bool,clearIcon:p.node,className:p.string,defaultValue:p.oneOfType([p.number,p.string]),disabled:p.bool,formatter:p.func,forwardedRef:p.any,hideButtons:p.bool,innerButtons:p.bool,insetLabel:p.node,insetLabelId:p.string,keepFocus:p.bool,max:p.number,min:p.number,parser:p.func,precision:p.number,prefixCls:p.string,pressInterval:p.number,pressTimeout:p.number,preventScroll:p.bool,shiftStep:p.number,step:p.number,style:p.object,suffix:p.any,value:p.oneOfType([p.number,p.string]),onBlur:p.func,onChange:p.func,onDownClick:p.func,onKeyDown:p.func,onNumberChange:p.func,onUpClick:p.func};Id.defaultProps={forwardedRef:Y,innerButtons:!1,keepFocus:!1,max:1/0,min:-1/0,prefixCls:$G.PREFIX,pressInterval:Cs.DEFAULT_PRESS_TIMEOUT,pressTimeout:Cs.DEFAULT_PRESS_TIMEOUT,shiftStep:Cs.DEFAULT_SHIFT_STEP,size:RG.DEFAULT_SIZE,step:Cs.DEFAULT_STEP,onBlur:Y,onChange:Y,onDownClick:Y,onFocus:Y,onKeyDown:Y,onNumberChange:Y,onUpClick:Y};const BG=oB(_.forwardRef(function(e,t){return _.createElement(Id,Object.assign({},e,{forwardedRef:t}))}),Id),qb="horizontal",Zb="vertical",rr={PREFIX:`${te}-navigation`},Ae={MODE:[Zb,qb],MODE_VERTICAL:Zb,MODE_HORIZONTAL:qb,ICON_POS_LEFT:"left",ICON_POS_RIGHT:"right",DEFAULT_LOGO_ICON_SIZE:"extra-large",TOGGLE_ICON_LEFT:"left",TOGGLE_ICON_RIGHT:"right"},Ro={DEFAULT_SUBNAV_MAX_HEIGHT:999,DEFAULT_TOOLTIP_SHOW_DELAY:0,DEFAULT_TOOLTIP_HIDE_DELAY:100,DEFAULT_SUBNAV_OPEN_DELAY:0,DEFAULT_SUBNAV_CLOSE_DELAY:100},Qb={open:"chevron_up",closed:"chevron_down"};let GG=class Hm{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(e==null||typeof e!="object")&&(e={text:e,itemKey:e,maxHeight:Ro.DEFAULT_SUBNAV_MAX_HEIGHT,link:null,items:null,icon:"",indent:!1});for(const t of Object.keys(e))this[t]=e[t];e.items&&Array.isArray(e.items)&&e.items.length?(this.items=e.items.map(t=>new Hm(t)),"toggleIcon"in e?this.toggleIcon=Hm.isValidToggleIcon(e.toggleIcon)?Object.assign({},e.toggleIcon):Object.assign({},Qb):this.toggleIcon=Object.assign({},Qb)):this.items=null}static isValidToggleIcon(e){return!!(e&&typeof e=="object"&&typeof e.open=="string"&&e.open.length&&typeof e.closed=="string"&&e.closed.length)}};class Fo extends ze{constructor(e){super(Object.assign({},e))}static getZeroParentKeys(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=[];for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];if(i.length){for(const o of i)if(Array.isArray(e[o])&&e[o].length){const a=e[o][0];tn(a)||t.push(a)}}return t}static buildItemKeysMap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"itemKey";if(Array.isArray(e)&&e.length)for(const s of e)if(Array.isArray(s))Fo.buildItemKeysMap(s,t,[...r],i);else{let o;if(s&&typeof s=="object"&&(o=s[i]||s.props&&s.props[i]),o){if(t[o]=[...r],Array.isArray(s.items)&&s.items.length)Fo.buildItemKeysMap(s.items,t,[...r,o],i);else if(s.props&&s.props.children){const a=Array.isArray(s.props.children)?s.props.children:[s.props.children];Fo.buildItemKeysMap(a,t,[...r,o],i)}}}return t}init(e){const{defaultSelectedKeys:t,selectedKeys:r}=this.getProps();let i=r||t||[];const{itemKeysMap:s,willOpenKeys:o,formattedItems:a}=this.getCalcState(),h=this.selectLevelZeroParentKeys(s,i);if(i=i.concat(h),e==="constructor")return{selectedKeys:i,itemKeysMap:s,openKeys:o,items:a};this._adapter.updateSelectedKeys(i,!1),this._adapter.setItemKeysMap(s),this._adapter.updateOpenKeys(o),this._adapter.updateItems(a),this._adapter.setItemsChanged(!0)}getCalcState(){const{itemKeysMap:e,formattedItems:t}=this.getFormattedItems(),r=this.getWillOpenKeys(e);return{itemKeysMap:e,willOpenKeys:r,formattedItems:t}}getFormattedItems(){const{items:e,children:t}=this.getProps(),r=this.formatItems(e),i=Array.isArray(e)&&e.length?r:t;return{itemKeysMap:Fo.buildItemKeysMap(i),formattedItems:r}}getWillOpenKeys(e){const{defaultOpenKeys:t,openKeys:r,defaultSelectedKeys:i,selectedKeys:s,mode:o}=this.getProps(),{openKeys:a=[]}=this.getStates();let h=r||t||[];if(!(Array.isArray(t)||Array.isArray(r))&&o===Ae.MODE_VERTICAL&&(Array.isArray(i)||Array.isArray(s))){const c=Array.isArray(s)?s:i;h=a.concat(this.getShouldOpenKeys(e,c)),h=Array.from(new Set(h))}return[...h]}getShouldOpenKeys(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const r=new Set;return Array.isArray(t)&&t.length&&t.forEach(i=>{if(i){const s=oe(e,i);Array.isArray(s)&&s.forEach(o=>r.add(o))}}),[...r]}destroy(){}selectLevelZeroParentKeys(e,t){const r=tn(e)?this.getState("itemKeysMap"):e,i=[];if(t.length){for(const s of t)if(Array.isArray(r[s])&&r[s].length){const o=r[s][0];tn(o)||i.push(o)}}return i.length?i:[]}formatItems(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];for(const r of e)t.push(new GG(r));return t}handleSelect(e){this._adapter.notifySelect(e)}judgeIfOpen(e,t){let r=!1;const i=Array.isArray(e)?e:e&&[e];if(i&&Array.isArray(t)&&t.length){for(const s of t)if(r=i.includes(s.itemKey)||this.judgeIfOpen(i,s.items),r)break}return r}handleCollapseChange(){const e=!this.getState("isCollapsed");this._isControlledComponent("isCollapsed")||this._adapter.setIsCollapsed(e),this._adapter.notifyCollapseChange(e)}handleItemsChange(e){this._adapter.setItemsChanged(e)}}const Jb=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=new Set(e);for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.forEach(o=>o&&t.add(o)),Array.from(t)},e2=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=new Set(e);for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.forEach(o=>o&&t.delete(o)),Array.from(t)};class zG extends ze{constructor(e){super(Object.assign({},e))}init(){this._timer=null}destroy(){this.clearDelayTimer()}clearDelayTimer(){this._timer&&(clearTimeout(this._timer),this._timer=null)}isValidKey(e){return e!=null&&(typeof e=="number"||typeof e=="string")}handleDropdownVisibleChange(e){const t=this.getProp("itemKey"),r=this._adapter.getOpenKeysIsControlled(),i=this._adapter.getCanUpdateOpenKeys(),s=this._adapter.getOpenKeys(),o=e?Jb(s,t):e2(s,t);this.clearDelayTimer(),r||i&&this._adapter.updateOpen(e),this._adapter.notifyGlobalOpenChange({itemKey:t,openKeys:o,isOpen:e})}handleClick(e,t){const{itemKey:r,disabled:i}=this.getProps();if(i)return;const s=t&&t.contains(e.target);let o=!!this._adapter.getIsOpen();s?o=!o:o=!1;const a=o?Jb(this._adapter.getOpenKeys(),r):e2(this._adapter.getOpenKeys(),r),h={itemKey:r,openKeys:a,isOpen:o,domEvent:e},c=this._adapter.getOpenKeysIsControlled(),l=this._adapter.getCanUpdateOpenKeys();!c&&l&&this._adapter.updateOpen(o),this._adapter.notifyGlobalOpenChange(h),this._adapter.notifyGlobalOnClick(h)}handleKeyPress(e,t){ph(e)&&this.handleClick(e,t)}}class UG extends ze{constructor(e){super(Object.assign({},e))}init(){this._timer=null,this._mounted=!0}destroy(){this._mounted=!1}isValidKey(e){return e!=null&&(typeof e=="string"||typeof e=="number")}handleClick(e){const{isSubNav:t,itemKey:r,text:i,disabled:s}=this.getProps();if(s)return;!t&&this.isValidKey(r)&&!this._adapter.getSelectedKeysIsControlled()&&!this._adapter.getSelected()&&this._adapter.updateSelected(!0);const o=[r];if(!t){if(!this._adapter.getSelected()){const a=[this._adapter.cloneDeep(this.getProps())];this._adapter.notifyGlobalOnSelect({itemKey:r,selectedKeys:o,selectedItems:a,domEvent:e})}this._adapter.notifyGlobalOnClick({itemKey:r,text:i,domEvent:e})}this._adapter.notifyClick({itemKey:r,text:i,domEvent:e})}handleKeyPress(e){if(ph(e)){const{link:t,linkOptions:r}=this.getProps(),i=oe(r,"target","_self");this.handleClick(e),typeof t=="string"&&(i==="_blank"?window.open(t):window.location.href=t)}}}const Aa=_.createContext({isCollapsed:!1,selectedKeys:[],openKeys:[]}),Yt=`${rr.PREFIX}-item`;class Ia extends Ee{constructor(e){super(e),this.setItemRef=t=>{this.props.forwardRef&&this.props.forwardRef(t)},this.wrapTooltip=t=>{const{text:r,tooltipHideDelay:i,tooltipShowDelay:s}=this.props,o=i??this.context.tooltipHideDelay,a=s??this.context.tooltipShowDelay;return _.createElement(gt,{content:r,position:"right",trigger:"hover",mouseEnterDelay:a,mouseLeaveDelay:o},t)},this.handleClick=t=>this.foundation.handleClick(t),this.handleKeyPress=t=>this.foundation.handleKeyPress(t),this.state={tooltipShow:!1},this.foundation=new UG(this.adapter)}_invokeContextFunc(e){if(e&&this.context&&typeof this.context[e]=="function"){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return this.context[e](...r)}return null}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{cloneDeep:CR,updateTooltipShow:t=>this.setState({tooltipShow:t}),updateSelected:t=>this._invokeContextFunc("updateSelectedKeys",[this.props.itemKey]),updateGlobalSelectedKeys:t=>this._invokeContextFunc("updateSelectedKeys",[...t]),getSelectedKeys:()=>this.context&&this.context.selectedKeys,getSelectedKeysIsControlled:()=>this.context&&this.context.selectedKeysIsControlled,notifyGlobalOnSelect:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e._invokeContextFunc("onSelect",...r)},notifyGlobalOnClick:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e._invokeContextFunc("onClick",...r)},notifyClick:function(){return e.props.onClick(...arguments)},notifyMouseEnter:function(){return e.props.onMouseEnter(...arguments)},notifyMouseLeave:function(){return e.props.onMouseLeave(...arguments)},getIsCollapsed:()=>this.props.isCollapsed||!!(this.context&&this.context.isCollapsed)||!1,getSelected:()=>!!(this.context&&this.context.selectedKeys&&this.context.selectedKeys.includes(this.props.itemKey)),getIsOpen:()=>!!(this.context&&this.context.openKeys&&this.context.openKeys.includes(this.props.itemKey))})}renderIcon(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(this.props.isSubNav||!e&&this.context.mode===Ae.MODE_HORIZONTAL)return null;let s="large";t===Ae.ICON_POS_RIGHT&&(s="default");const o=L(`${Yt}-icon`,{[`${Yt}-icon-toggle-${this.context.toggleIconPosition}`]:r,[`${Yt}-icon-info`]:!r});return _.createElement("i",{className:o,key:i},tr(e)?_.cloneElement(e,{size:e.props.size||s}):e)}render(){const{text:e,children:t,icon:r,toggleIcon:i,className:s,isSubNav:o,style:a,indent:h,onMouseEnter:c,onMouseLeave:l,link:d,linkOptions:u,disabled:f,level:m=0,tabIndex:g}=this.props,{mode:y,isInSubNav:v,prefixCls:b,limitIndent:w}=this.context,C=this.adapter.getIsCollapsed(),O=this.adapter.getSelected();let x=null;if(!tn(t))x=t;else{let T=null;if(y===Ae.MODE_VERTICAL&&!w&&!C){const k=r&&!h?m:m-1;T=Zx(k,E=>this.renderIcon(null,Ae.ICON_POS_RIGHT,!1,E))}x=_.createElement(_.Fragment,null,T,this.context.toggleIconPosition===Ae.TOGGLE_ICON_LEFT&&this.renderIcon(i,Ae.ICON_POS_RIGHT,!0,"key-toggle-pos-right"),r||h||v?this.renderIcon(r,Ae.ICON_POS_LEFT,!1,"key-position-left"):null,tn(e)?"":_.createElement("span",{className:`${rr.PREFIX}-item-text`},e),this.context.toggleIconPosition===Ae.TOGGLE_ICON_RIGHT&&this.renderIcon(i,Ae.ICON_POS_RIGHT,!0,"key-toggle-pos-right"))}typeof d=="string"&&(x=_.createElement("a",Object.assign({className:`${b}-item-link`,href:d,tabIndex:-1},u),x));let P="";if(v&&(C||y===Ae.MODE_HORIZONTAL)){const T=L({[Yt]:!0,[`${Yt}-sub`]:o,[`${Yt}-selected`]:O,[`${Yt}-collapsed`]:C,[`${Yt}-disabled`]:f});P=_.createElement(Ze.Item,{selected:O,active:O,forwardRef:this.setItemRef,className:T,onClick:this.handleClick,onMouseEnter:c,onMouseLeave:l,disabled:f,onKeyDown:this.handleKeyPress},x)}else{const T=L(`${s||`${Yt}-normal`}`,{[Yt]:!0,[`${Yt}-sub`]:o,[`${Yt}-selected`]:O&&!o,[`${Yt}-collapsed`]:C,[`${Yt}-disabled`]:f,[`${Yt}-has-link`]:typeof d=="string"}),k={"aria-disabled":f};if(o){const E=this.adapter.getIsOpen();k["aria-expanded"]=E}P=_.createElement("li",Object.assign({role:o?null:"menuitem",tabIndex:o?-1:g},k,{style:a,ref:this.setItemRef,className:T,onClick:this.handleClick,onMouseEnter:c,onMouseLeave:l,onKeyPress:this.handleKeyPress},this.getDataAttr(this.props)),x)}return(C&&!v&&!o||C&&o&&f)&&(P=this.wrapTooltip(P)),typeof this.context.renderWrapper=="function"?this.context.renderWrapper({itemElement:P,isSubNav:o,isInSubNav:v,props:this.props}):P}}Ia.contextType=Aa;Ia.propTypes={text:p.oneOfType([p.string,p.node]),itemKey:p.oneOfType([p.string,p.number]),onClick:p.func,onMouseEnter:p.func,onMouseLeave:p.func,children:p.node,icon:p.oneOfType([p.node]),className:p.string,toggleIcon:p.string,style:p.object,forwardRef:p.func,indent:p.oneOfType([p.bool,p.number]),isCollapsed:p.bool,isSubNav:p.bool,link:p.string,linkOptions:p.object,disabled:p.bool,tabIndex:p.number};Ia.defaultProps={isSubNav:!1,indent:!1,forwardRef:Y,isCollapsed:!1,onClick:Y,onMouseEnter:Y,onMouseLeave:Y,disabled:!1,tabIndex:0};class Sh extends Ee{constructor(e){super(e),this.setItemRef=t=>{t&&t.current?this.itemRef=t:this.itemRef={current:t}},this.setTitleRef=t=>{t&&t.current?this.titleRef=t:this.titleRef={current:t}},this.handleClick=t=>{this.foundation.handleClick(t&&t.nativeEvent,this.titleRef&&this.titleRef.current)},this.handleKeyPress=t=>{this.foundation.handleKeyPress(t&&t.nativeEvent,this.titleRef&&this.titleRef.current)},this.handleDropdownVisible=t=>this.foundation.handleDropdownVisibleChange(t),this.state={isHovered:!1},this.adapter.setCache("firstMounted",!0),this.titleRef=_.createRef(),this.itemRef=_.createRef(),this.foundation=new zG(this.adapter)}_invokeContextFunc(e){if(e&&this.context&&typeof this.context[e]=="function"){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return this.context[e](...r)}return null}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{updateIsHovered:t=>this.setState({isHovered:t}),getOpenKeys:()=>this.context&&this.context.openKeys,getOpenKeysIsControlled:()=>this.context&&this.context.openKeysIsControlled,getCanUpdateOpenKeys:()=>this.context&&this.context.canUpdateOpenKeys,updateOpen:t=>this._invokeContextFunc(t?"addOpenKeys":"removeOpenKeys",this.props.itemKey),notifyGlobalOpenChange:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e._invokeContextFunc("onOpenChange",...r)},notifyGlobalOnSelect:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e._invokeContextFunc("onSelect",...r)},notifyGlobalOnClick:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e._invokeContextFunc("onClick",...r)},getIsSelected:t=>!!(!tn(t)&&oe(this.context,"selectedKeys",[]).includes(String(t))),getIsOpen:()=>(this.props,!!(this.context&&this.context.openKeys&&this.context.openKeys.includes(this.props.itemKey)))})}renderIcon(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;const{prefixCls:o}=this.context;let a="large";t===Ae.ICON_POS_RIGHT&&(a="default");const h=L(`${o}-item-icon`,{[`${o}-item-icon-toggle-${this.context.toggleIconPosition}`]:i,[`${o}-item-icon-info`]:!i}),c=this.adapter.getIsOpen(),l=_.isValidElement(e)?r?_.createElement(Rs,{animationState:c?"enter":"leave",startClassName:`${rr.PREFIX}-icon-rotate-${c?"180":"0"}`},d=>{let{animationClassName:u}=d;return _.cloneElement(e,{size:a,className:u})}):_.cloneElement(e,{size:a}):null;return _.createElement("i",{key:s,className:h},l)}renderTitleDiv(){const{text:e,icon:t,itemKey:r,indent:i,disabled:s,level:o,expandIcon:a}=this.props,{mode:h,isInSubNav:c,isCollapsed:l,prefixCls:d,subNavMotion:u,limitIndent:f}=this.context,m=this.adapter.getIsOpen(),g=L(`${d}-sub-title`,{[`${d}-sub-title-selected`]:this.adapter.getIsSelected(r),[`${d}-sub-title-disabled`]:s});let y=!1,v="";l?c?v=_.createElement(Gm,null):v=null:h===Ae.MODE_HORIZONTAL?c?v=_.createElement(Gm,{"aria-hidden":!0}):v=a||_.createElement(Ul,{"aria-hidden":!0}):(u&&(y=!0),v=a||_.createElement(Ul,{"aria-hidden":!0}));let b=null;if(h===Ae.MODE_VERTICAL&&!f&&!l){const O=t&&!i?o:o-1;b=Zx(O,x=>this.renderIcon(null,Ae.ICON_POS_RIGHT,!1,!1,x))}const w=!l&&c&&h===Ae.MODE_HORIZONTAL||l&&c;return _.createElement("div",{role:"menuitem",tabIndex:w?-1:0,ref:this.setTitleRef,className:g,onClick:this.handleClick,onKeyPress:this.handleKeyPress,"aria-expanded":m?"true":"false"},_.createElement("div",{className:`${d}-item-inner`},b,this.context.toggleIconPosition===Ae.TOGGLE_ICON_LEFT&&this.renderIcon(v,Ae.ICON_POS_RIGHT,y,!0,"key-toggle-position-left"),t||i||c&&h!==Ae.MODE_HORIZONTAL?this.renderIcon(t,Ae.ICON_POS_LEFT,!1,!1,"key-inSubNav-position-left"):null,_.createElement("span",{className:`${d}-item-text`},e),this.context.toggleIconPosition===Ae.TOGGLE_ICON_RIGHT&&this.renderIcon(v,Ae.ICON_POS_RIGHT,y,!0,"key-toggle-position-right")))}renderSubUl(){const{children:e,maxHeight:t}=this.props,{isCollapsed:r,mode:i,subNavMotion:s,prefixCls:o}=this.context,a=this.adapter.getIsOpen(),h=i===Ae.MODE_HORIZONTAL,c=L(`${o}-sub`,{[`${o}-sub-open`]:a,[`${o}-sub-popover`]:r||h});return h?null:s?_.createElement(zi,{motion:s,isOpen:a,keepDOM:!1,fade:!0},r?null:_.createElement("ul",{className:c},e)):a&&!r?_.createElement("ul",{className:c},e):null}wrapDropdown(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const{children:r,dropdownStyle:i,disabled:s}=this.props,{mode:o,isInSubNav:a,isCollapsed:h,subNavCloseDelay:c,subNavOpenDelay:l,prefixCls:d,getPopupContainer:u}=this.context,f=this.adapter.getIsOpen(),m=this.adapter.getOpenKeysIsControlled(),g=L({[`${d}-popover`]:h}),y={trigger:"hover",style:i};return m&&(y.trigger="custom",y.visible=f),u&&(y.getPopupContainer=u),(h||o===Ae.MODE_HORIZONTAL)&&(t=s?t:_.createElement(Ze,Object.assign({className:g,render:_.createElement(Ze.Menu,null,r),position:o===Ae.MODE_HORIZONTAL&&!a?"bottomLeft":"rightTop",mouseEnterDelay:l,mouseLeaveDelay:c,onVisibleChange:this.handleDropdownVisible},y),t)),t}render(){const{itemKey:e,style:t,onMouseEnter:r,onMouseLeave:i,disabled:s,text:o}=this.props,{mode:a,isCollapsed:h,prefixCls:c}=this.context;let l=this.renderTitleDiv();const d=this.renderSubUl();return(h||a===Ae.MODE_HORIZONTAL)&&(l=this.wrapDropdown(l)),_.createElement(Ia,{style:t,isSubNav:!0,itemKey:e,forwardRef:this.setItemRef,isCollapsed:h,className:`${c}-sub-wrap`,onMouseEnter:r,onMouseLeave:i,disabled:s,text:o},_.createElement(Aa.Provider,{value:Object.assign(Object.assign({},this.context),{isInSubNav:!0})},l,d))}}Sh.contextType=Aa;Sh.propTypes={itemKey:p.oneOfType([p.string,p.number]),text:p.oneOfType([p.string,p.node]),isOpen:p.bool,isCollapsed:p.bool,indent:p.oneOfType([p.bool,p.number]),children:p.node,style:p.object,icon:p.node,maxHeight:p.number,onMouseEnter:p.func,onMouseLeave:p.func,disabled:p.bool,level:p.number};Sh.defaultProps={level:0,indent:!1,isCollapsed:!1,isOpen:!1,maxHeight:Ro.DEFAULT_SUBNAV_MAX_HEIGHT,disabled:!1};function VG(n){let{prefixCls:e,locale:t,collapseText:r,isCollapsed:i,onClick:s=Y}=n;const o=()=>{typeof s=="function"&&s(!i)},a={icon:_.createElement(YF,null),type:"tertiary",theme:"borderless",onClick:o};let h=i?t==null?void 0:t.expandText:t==null?void 0:t.collapseText;return typeof r=="function"&&(h=r(i)),_.createElement("div",{className:`${e}-collapse-btn`},i?_.createElement(gt,{content:h,position:"right"},_.createElement(He,Object.assign({},a))):_.createElement(He,Object.assign({},a),h))}class Fi extends G.PureComponent{constructor(){super(...arguments),this.renderCollapseButton=()=>{const{collapseButton:e,collapseText:t}=this.props;if(_.isValidElement(e))return e;const{onCollapseChange:r,prefixCls:i,locale:s,isCollapsed:o}=this.context;return _.createElement(VG,{prefixCls:i,isCollapsed:o,locale:s,onClick:r,collapseText:t})}}render(){const{style:e,className:t,collapseButton:r,onClick:i}=this.props;let{children:s}=this.props;const{isCollapsed:o,mode:a}=this.context;!_.isValidElement(s)&&r&&a!==Ae.MODE_HORIZONTAL&&(s=this.renderCollapseButton());const h=L(t,`${rr.PREFIX}-footer`,{[`${rr.PREFIX}-footer-collapsed`]:o});return _.createElement("div",{className:h,style:e,onClick:i},s)}}Fi.contextType=Aa;Fi.propTypes={children:p.node,style:p.object,className:p.string,collapseButton:p.oneOfType([p.node,p.bool]),collapseText:p.func,onClick:p.func};Fi.defaultProps={collapseButton:!1,onClick:Y};Fi.elementType="NavFooter";class Li extends G.PureComponent{renderLogo(e){return _.isValidElement(e)?e:null}render(){const{children:e,style:t,className:r,logo:i,text:s,link:o,linkOptions:a,prefixCls:h}=this.props,{isCollapsed:c}=this.context,l=L(r,`${rr.PREFIX}-header`,{[`${rr.PREFIX}-header-collapsed`]:c});let d=_.createElement(_.Fragment,null,i?_.createElement("i",{className:`${rr.PREFIX}-header-logo`},this.renderLogo(i)):null,!tn(s)&&!c?_.createElement("span",{className:`${rr.PREFIX}-header-text`},s):null,e);return typeof o=="string"&&(d=_.createElement("a",Object.assign({className:`${h}-header-link`,href:o},a),d)),_.createElement("div",{className:l,style:t},d)}}Li.contextType=Aa;Li.propTypes={prefixCls:p.string,logo:p.oneOfType([p.string,p.object,p.node]),text:p.oneOfType([p.string,p.node]),children:p.node,style:p.object,className:p.string,link:p.string,linkOptions:p.object};Li.defaultProps={prefixCls:rr.PREFIX};Li.elementType="NavHeader";var HG=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};function t2(n,e){return function(){const r=new Set(n.state[e]);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];s.forEach(a=>a&&r.add(a)),n.setState({[e]:Array.from(r)})}}function n2(n,e){return function(){const r=new Set(n.state[e]);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];s.forEach(a=>a&&r.delete(a)),n.setState({[e]:Array.from(r)})}}const{hasOwnProperty:KG}=Object.prototype;class yn extends Ee{constructor(e){super(e),this.onCollapseChange=()=>{this.foundation.handleCollapseChange()},this.foundation=new Fo(this.adapter),this.itemsChanged=!0;const{isCollapsed:t,defaultIsCollapsed:r,items:i,children:s}=e,o={isCollapsed:!!(this.isControlled("isCollapsed")?t:r),openKeys:[],items:[],itemKeysMap:{},selectedKeys:[]};if(this.state=Object.assign({},o),i&&i.length||s){const a=this.foundation.init("constructor");this.state=Object.assign(Object.assign({},o),a)}}static getDerivedStateFromProps(e,t){const r={};return KG.call(e,"isCollapsed")&&e.isCollapsed!==t.isCollapsed&&(r.isCollapsed=e.isCollapsed),r}componentDidMount(){}componentDidUpdate(e){if(e.items!==this.props.items||e.children!==this.props.children)this.foundation.init();else{if(this.foundation.handleItemsChange(!1),this.props.selectedKeys&&!yt(e.selectedKeys,this.props.selectedKeys)){this.adapter.updateSelectedKeys(this.props.selectedKeys);const t=this.foundation.getWillOpenKeys(this.state.itemKeysMap);this.adapter.updateOpenKeys(t)}this.props.openKeys&&!yt(e.openKeys,this.props.openKeys)&&this.adapter.updateOpenKeys(this.props.openKeys)}}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{notifySelect:function(){return e.props.onSelect(...arguments)},notifyOpenChange:function(){return e.props.onOpenChange(...arguments)},setIsCollapsed:t=>this.setState({isCollapsed:t}),notifyCollapseChange:function(){return e.props.onCollapseChange(...arguments)},updateItems:t=>this.setState({items:[...t]}),setItemKeysMap:t=>this.setState({itemKeysMap:Object.assign({},t)}),addSelectedKeys:t2(this,"selectedKeys"),removeSelectedKeys:n2(this,"selectedKeys"),updateSelectedKeys:function(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=t;if(r){const s=e.foundation.selectLevelZeroParentKeys(null,t);i=Array.from(new Set(t.concat(s)))}e.setState({selectedKeys:i})},updateOpenKeys:t=>this.setState({openKeys:[...t]}),addOpenKeys:t2(this,"openKeys"),removeOpenKeys:n2(this,"openKeys"),setItemsChanged:t=>{this.itemsChanged=t}})}renderItems(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const{expandIcon:r}=this.props;return _.createElement(_.Fragment,null,e.map((s,o)=>Array.isArray(s.items)&&s.items.length?_.createElement(Sh,Object.assign({key:s.itemKey||String(t)+o},s,{level:t,expandIcon:r}),this.renderItems(s.items,t+1)):_.createElement(Ia,Object.assign({key:s.itemKey||String(t)+o},s,{level:t}))))}render(){const e=this.props,{children:t,mode:r,onOpenChange:i,onSelect:s,onClick:o,style:a,className:h,subNavCloseDelay:c,subNavOpenDelay:l,subNavMotion:d,tooltipShowDelay:u,tooltipHideDelay:f,prefixCls:m,bodyStyle:g,footer:y,header:v,toggleIconPosition:b,limitIndent:w,renderWrapper:C,getPopupContainer:O}=e,x=HG(e,["children","mode","onOpenChange","onSelect","onClick","style","className","subNavCloseDelay","subNavOpenDelay","subNavMotion","tooltipShowDelay","tooltipHideDelay","prefixCls","bodyStyle","footer","header","toggleIconPosition","limitIndent","renderWrapper","getPopupContainer"]),{selectedKeys:P,openKeys:T,items:k,isCollapsed:E}=this.state,{updateOpenKeys:I,addOpenKeys:M,removeOpenKeys:R,updateSelectedKeys:U,addSelectedKeys:V,removeSelectedKeys:H}=this.adapter,K=Object.assign({},a);let $=G.Children.toArray(t);const j=[],S=[];if(_.isValidElement(y)?j.push(_.createElement(Fi,{key:0},y)):y&&typeof y=="object"&&j.push(_.createElement(Fi,Object.assign({key:0},y))),_.isValidElement(v)?S.push(_.createElement(Li,{key:0},v)):v&&typeof v=="object"&&S.push(_.createElement(Li,Object.assign({key:0},v))),Array.isArray($)&&$.length){$=[...$];let F=$.length;for(let B=0;B<F;B++){const z=$[B];z.type===Fi||oe(z,"type.elementType")==="NavFooter"?(j.push(z),$.splice(B,1),B--,F--):(z.type===Li||oe(z,"type.elementType")==="NavHeader")&&(S.push(z),$.splice(B,1),B--,F--)}}const A=L(m,h,{[`${m}-collapsed`]:E,[`${m}-horizontal`]:r==="horizontal",[`${m}-vertical`]:r==="vertical"}),D=L(`${m}-header-list-outer`,{[`${m}-header-list-outer-collapsed`]:E});return this.itemsChanged&&this.adapter.setCache("itemElems",this.renderItems(k)),_.createElement(jn,{componentName:"Navigation"},F=>_.createElement(Aa.Provider,{value:{subNavCloseDelay:c,subNavOpenDelay:l,subNavMotion:d,tooltipShowDelay:u,tooltipHideDelay:f,openKeys:T,openKeysIsControlled:this.isControlled("openKeys")&&r==="vertical"&&!E,canUpdateOpenKeys:!0,selectedKeys:P,selectedKeysIsControlled:this.isControlled("selectedKeys"),isCollapsed:E,onCollapseChange:this.onCollapseChange,mode:r,onSelect:s,onOpenChange:i,updateOpenKeys:I,addOpenKeys:M,removeOpenKeys:R,updateSelectedKeys:U,addSelectedKeys:V,removeSelectedKeys:H,onClick:o,locale:F,prefixCls:m,toggleIconPosition:b,limitIndent:w,renderWrapper:C,getPopupContainer:O}},_.createElement("div",Object.assign({className:A,style:K},this.getDataAttr(x)),_.createElement("div",{className:`${m}-inner`},_.createElement("div",{className:D},S,_.createElement("div",{style:g,className:`${m}-list-wrapper`},_.createElement("ul",{role:"menu","aria-orientation":r,className:`${m}-list`},this.adapter.getCache("itemElems"),$))),j))))}}yn.Sub=Sh;yn.Item=Ia;yn.Header=Li;yn.Footer=Fi;yn.propTypes={collapseIcon:p.node,defaultOpenKeys:p.arrayOf(p.oneOfType([p.string,p.number])),openKeys:p.arrayOf(p.oneOfType([p.string,p.number])),defaultSelectedKeys:p.arrayOf(p.oneOfType([p.string,p.number])),expandIcon:p.node,selectedKeys:p.arrayOf(p.oneOfType([p.string,p.number])),mode:p.oneOf([...Ae.MODE]),onSelect:p.func,onClick:p.func,onOpenChange:p.func,items:p.array,isCollapsed:p.bool,defaultIsCollapsed:p.bool,onCollapseChange:p.func,multiple:p.bool,onDeselect:p.func,subNavMotion:p.oneOfType([p.bool,p.object,p.func]),subNavCloseDelay:p.number,subNavOpenDelay:p.number,tooltipShowDelay:p.number,tooltipHideDelay:p.number,children:p.node,style:p.object,bodyStyle:p.object,className:p.string,toggleIconPosition:p.string,prefixCls:p.string,header:p.oneOfType([p.node,p.object]),footer:p.oneOfType([p.node,p.object]),limitIndent:p.bool,getPopupContainer:p.func};yn.__SemiComponentName__="Navigation";yn.defaultProps=Tn(yn.__SemiComponentName__,{subNavCloseDelay:Ro.DEFAULT_SUBNAV_CLOSE_DELAY,subNavOpenDelay:Ro.DEFAULT_SUBNAV_OPEN_DELAY,tooltipHideDelay:Ro.DEFAULT_TOOLTIP_HIDE_DELAY,tooltipShowDelay:Ro.DEFAULT_TOOLTIP_SHOW_DELAY,onCollapseChange:Y,onSelect:Y,onClick:Y,onOpenChange:Y,toggleIconPosition:"right",limitIndent:!0,prefixCls:rr.PREFIX,subNavMotion:!0,mode:Ae.MODE_VERTICAL});const WG={PREFIX:te+"-overflow-list"},r2={COLLAPSE:"collapse",SCROLL:"scroll"},i2={START:"start",END:"end"},XG={NONE:0,GROW:1,SHRINK:2},Es={BOUNDARY_SET:Object.values(i2),POSITION_SET:["vertical","horizontal"],MODE_SET:Object.values(r2),MODE_MAP:r2,BOUNDARY_MAP:i2,OVERFLOW_DIR:XG},s2={MINIMUM_HTML_ELEMENT_WIDTH:4};class Qv extends _.PureComponent{componentDidMount(){const{items:e}=this.props;this.cachedKeys=Object.keys(e);const{root:t,threshold:r,rootMargin:i,option:s,onIntersect:o}=this.props;this.observer=new IntersectionObserver(o,Object.assign({root:t,threshold:r,rootMargin:i},s)),this.observeElement()}componentDidUpdate(){const{items:e}=this.props,t=Object.keys(e);yt(this.cachedKeys,t)||(this.observeElement(!0),this.cachedKeys=t)}componentWillUnmount(){this.observer&&(this.observer.disconnect(),this.observer=null)}observeElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const{items:t}=this.props;if(vr(t)){this.observer.disconnect();return}e&&this.observer.disconnect(),Object.keys(t).forEach(r=>{const i=t[r];i&&ws(i)&&this.observer.observe(i)})}render(){const{children:e}=this.props;return e}}Qv.propTypes={onIntersect:p.func,option:p.object,root:p.any,threshold:p.number,rootMargin:p.string,items:p.object};Qv.defaultProps={onIntersect:()=>{},threshold:.75,rootMargin:"0px",option:{},items:{}};const YG=Es.BOUNDARY_MAP;class qG extends ze{constructor(e){super(Object.assign({},e)),this.previousY=void 0,this.isScrollMode=()=>{const{renderMode:t}=this.getProps();return t==="scroll"},this.getReversedItems=()=>{const{items:t}=this.getProps();return kd(t).reverse()}}getOverflowItem(){const{items:e}=this.getProps(),{visibleState:t,overflow:r}=this.getStates();if(!this.isScrollMode())return r;const i=e.map(h=>{let{key:c}=h;return!!t.get(c)}),s=i.indexOf(!0),o=i.lastIndexOf(!0),a=[];return a[0]=s>=0?e.slice(0,s):[],a[1]=o>=0?e.slice(o+1,e.length):e.slice(),a}handleIntersect(e){const t=kd(this.getState("visibleState")),r={};e.forEach(h=>{const c=oe(h,"target.dataset.scrollkey"),l=h.isIntersecting;r[c]=h,t.set(c,l)});let i=!1;for(const h of t.values())if(h){i=!0;break}const s=i,[o]=e,a=o.boundingClientRect.y;if(!s&&this.previousY!==void 0&&a!==this.previousY){this.previousY=a;return}this.previousY=a,this._adapter.updateVisibleState(t),this._adapter.notifyIntersect(r)}handleCollapseOverflow(){const{minVisibleItems:e,collapseFrom:t}=this.getProps(),{overflowWidth:r,containerWidth:i,pivot:s,overflowStatus:o}=this.getStates(),{items:a,onOverflow:h}=this.getProps();let c=r,l=0,d=!1;for(const u of this._adapter.getItemSizeMap().values()){if(c+=u,c>i){d=!0;break}if(l===a.length-1){this._adapter.updateStates({overflowStatus:"normal",pivot:a.length-1,visible:a,overflow:[]});break}l++}if(d){const u=Math.max(e,l),f=t===YG.START,m=f?this.getReversedItems().slice(0,u).reverse():a.slice(0,u),g=f?this.getReversedItems().slice(u).reverse():a.slice(u);this._adapter.updateStates({overflowStatus:"overflowed",pivot:u,visible:m,overflow:g}),s!==u&&h(g);return}}}const Ha=WG.PREFIX,Wf=Es.BOUNDARY_MAP,o2=Es.OVERFLOW_DIR,Ka=Es.MODE_MAP;class ia extends Ee{constructor(e){var t;super(e),t=this,this.scroller=null,this.spacer=null,this.isScrollMode=()=>{const{renderMode:r}=this.props;return r===Ka.SCROLL},this.resize=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];var i;const s=(i=r[0])===null||i===void 0?void 0:i.target.clientWidth;t.setState({containerWidth:s,overflowStatus:"calculating"})},this.reintersect=r=>{this.foundation.handleIntersect(r)},this.mergeRef=(r,i,s)=>{this.itemRefs[s]=i,typeof r=="function"?r(i):typeof r=="object"&&r&&"current"in r&&(r.current=i)},this.renderOverflow=()=>{const r=this.foundation.getOverflowItem();return this.props.overflowRenderer(r)},this.getItemKey=(r,i)=>{const{itemKey:s}=this.props;return Ht(s)?s(r):oe(r,s||"key",i)},this.renderItemList=()=>{const{className:r,wrapperClassName:i,wrapperStyle:s,style:o,visibleItemRenderer:a,renderMode:h,collapseFrom:c}=this.props,{visible:l,overflowStatus:d}=this.state;let u=this.renderOverflow();if(!this.isScrollMode()&&(Array.isArray(u)&&(u=_.createElement(_.Fragment,null,u)),_.isValidElement(u))){const g=_.cloneElement(u);u=_.createElement(Vo,{onResize:y=>{let[v]=y;this.setState({overflowWidth:v.target.clientWidth,overflowStatus:"calculating"})}},_.createElement("div",{className:`${Ha}-overflow`},g))}const f=h===Ka.SCROLL?(()=>{const g=[_.createElement("div",{className:L(i,`${Ha}-scroll-wrapper`),ref:y=>{this.scroller=y},style:Object.assign({},s),key:`${Ha}-scroll-wrapper`},l.map(a).map(y=>{const{forwardRef:v,key:b}=y;return _.cloneElement(y,{ref:w=>this.mergeRef(v,w,b),"data-scrollkey":`${b}`,key:b})}))];return this.props.overflowRenderDirection==="both"?(g.unshift(u[0]),g.push(u[1])):this.props.overflowRenderDirection==="start"?(g.unshift(u[1]),g.unshift(u[0])):(g.push(u[0]),g.push(u[1])),g})():[c===Wf.START?u:null,l.map((g,y)=>{const{key:v}=g,b=a(g,y),w=_.cloneElement(b);return _.createElement(Vo,{key:v??y,onResize:C=>{let[O]=C;return this.onItemResize(O,g,y)}},_.createElement("div",{key:v??y,className:`${Ha}-item`},w))}),c===Wf.END?u:null];return _.createElement("div",{className:L(`${Ha}`,r),style:Object.assign(Object.assign({},o),h===Ka.COLLAPSE?{maxWidth:"100%",visibility:d==="calculating"?"hidden":"visible"}:null)},...f)},this.onItemResize=(r,i,s)=>{const o=this.getItemKey(i,s),a=this.itemSizeMap.get(o);a?a!==r.target.clientWidth&&(this.itemSizeMap.set(o,r.target.clientWidth),this.setState({overflowStatus:"calculating"})):this.itemSizeMap.set(o,r.target.clientWidth);const{maxCount:h}=this.state;this.itemSizeMap.size===h&&this.setState({overflowStatus:"calculating"})},this.state={direction:o2.GROW,lastOverflowCount:0,overflow:[],visible:[],containerWidth:0,visibleState:new Map,itemSizeMap:new Map,overflowStatus:"calculating",pivot:-1,overflowWidth:0,maxCount:0},this.foundation=new qG(this.adapter),this.previousWidths=new Map,this.itemRefs={},this.itemSizeMap=new Map}static getDerivedStateFromProps(e,t){const{prevProps:r}=t,i={};i.prevProps=e;const s=o=>!r&&o in e||r&&!yt(r[o],e[o]);if(s("items")||s("style")){if(i.direction=o2.GROW,i.lastOverflowCount=0,i.maxCount=0,e.renderMode===Ka.SCROLL)i.visible=e.items,i.overflow=[];else{let o=e.items.length;Math.floor(t.containerWidth/s2.MINIMUM_HTML_ELEMENT_WIDTH)!==0&&(o=Math.min(o,Math.floor(t.containerWidth/s2.MINIMUM_HTML_ELEMENT_WIDTH)));const a=e.collapseFrom===Wf.START,h=a?kd(e.items).reverse().slice(0,o):e.items.slice(0,o),c=a?kd(e.items).reverse().slice(o):e.items.slice(o);i.visible=h,i.overflow=c,i.maxCount=o}i.pivot=-1,i.overflowStatus="calculating"}return i}get adapter(){return Object.assign(Object.assign({},super.adapter),{updateVisibleState:e=>{this.setState({visibleState:e},()=>{var t,r;(r=(t=this.props).onVisibleStateChange)===null||r===void 0||r.call(t,e)})},updateStates:e=>{this.setState(Object.assign({},e))},notifyIntersect:e=>{this.props.onIntersect&&this.props.onIntersect(e)},getItemSizeMap:()=>this.itemSizeMap})}componentDidUpdate(e,t){const r=e.items.map(c=>c.key),i=this.props.items.map(c=>c.key);yt(r,i)||(this.itemRefs={},this.setState({visibleState:new Map}));const{overflow:s,containerWidth:o,visible:a,overflowStatus:h}=this.state;this.isScrollMode()||h!=="calculating"||this.foundation.handleCollapseOverflow()}render(){const e=this.renderItemList(),{renderMode:t}=this.props;return t===Ka.SCROLL?_.createElement(Qv,{onIntersect:this.reintersect,root:this.scroller,threshold:this.props.threshold,items:this.itemRefs},e):_.createElement(Vo,{onResize:this.resize},e)}}ia.__SemiComponentName__="OverflowList";ia.defaultProps=Tn(ia.__SemiComponentName__,{collapseFrom:"end",minVisibleItems:0,overflowRenderer:()=>null,renderMode:"collapse",threshold:.75,visibleItemRenderer:()=>null,onOverflow:()=>null,overflowRenderDirection:"both"});ia.propTypes={className:p.string,collapseFrom:p.oneOf(Es.BOUNDARY_SET),direction:p.oneOf(Es.POSITION_SET),items:p.array,minVisibleItems:p.number,onIntersect:p.func,onOverflow:p.func,overflowRenderer:p.func,renderMode:p.oneOf(Es.MODE_SET),style:p.object,threshold:p.number,visibleItemRenderer:p.func,wrapperClassName:p.string,wrapperStyle:p.object,collapseMask:p.object,overflowRenderDirection:p.string};const Jv={PREFIX:`${te}-select`,PREFIX_OPTION:`${te}-select-option`,PREFIX_GROUP:`${te}-select-group`},Xr={SIZE_SET:["small","large","default"],POSITION_SET:Ps.POSITION_SET,MODE_SELECT:"select",MODE_AUTOCOMPLETE:"autoComplete",STATUS:H6,SEARCH_POSITION_TRIGGER:"trigger",SEARCH_POSITION_DROPDOWN:"dropdown"},h3={LIST_HEIGHT:270};var a2=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class ZG extends ze{constructor(e){super(Object.assign({},e)),this._keydownHandler=null}init(){this._setDropdownWidth();const e=this.getProp("defaultOpen"),t=this.getProp("open"),r=this._collectOptions();this._setDefaultSelection(r),(e||t)&&this.open(void 0,r),this.getProp("autoFocus")&&this.focus()}focus(){const e=this._isFilterable(),t=this._isMultiple();this._adapter.updateFocusState(!0),this._adapter.setIsFocusInContainer(!1),e&&t?this.focusInput():e&&!t?this.toggle2SearchInput(!0):this._focusTrigger()}_focusTrigger(){this._adapter.focusTrigger()}destroy(){this._adapter.unregisterClickOutsideHandler()}_setDropdownWidth(){const{style:e,dropdownMatchSelectWidth:t}=this.getProps();let r;t&&(e&&Ri(e.width)||e&&vt(e.width)&&!e.width.includes("%")?r=e.width:r=this._adapter.getTriggerWidth(),this._adapter.setOptionWrapperWidth(r))}_collectOptions(){const e=this._adapter.getOptionsFromChildren();return this._adapter.updateOptions(e),this._adapter.rePositionDropdown(),e}_setDefaultSelection(e){let{value:t}=this.getProps();const{defaultValue:r}=this.getProps();this._isControlledComponent()||(t=r),this._update(t,e)}handleOptionListChange(){const e=this._collectOptions(),{selections:t}=this.getStates();this.updateOptionsActiveStatus(t,e);const{defaultActiveFirstOption:r}=this.getProps();r&&this._adapter.updateFocusIndex(0)}handleOptionListChangeHadDefaultValue(){const e=this.getState("selections");let t;const{onChangeWithObject:r}=this.getProps(),i=this._isMultiple();switch(!0){case(i&&!!e.size):try{t=[...e].map(o=>r?o[1]:o[1].value)}catch{t=[]}break;case(i&&!e.size):t=[];break;case(!i&&!!e.size):try{t=r?[...e][0][1]:[...e][0][1].value}catch{}break;case(!i&&!e.size):break}const s=this._adapter.getOptionsFromChildren();this._update(t,s)}handleValueChange(e){const{allowCreate:t,autoClearSearchValue:r,remote:i}=this.getProps(),{inputValue:s}=this.getStates();let o;t&&this._isControlledComponent()?(o=this.getState("options"),o.forEach(a=>a._show=!0)):o=this._adapter.getOptionsFromChildren(),this._adapter.rePositionDropdown(),this._isFilterable()&&!r&&s&&!i&&(o=this._filterOption(o,s)),this._update(e,o)}_update(e,t){let r;this._isMultiple()?(r=this._updateMultiple(e,t),this.updateOverflowItemCount(r.size)):r=this._updateSingle(e,t),this._adapter.updateSelection(r),this.updateOptionsActiveStatus(r,t)}_updateSingle(e,t){const r=new Map,{onChangeWithObject:i}=this.getProps(),s=i&&typeof e<"u"?e.value:e,o=t.filter(h=>h.value===s),a=!o.length&&typeof s<"u"&&s!==null;if(o.length){const h=o[0],c=Object.assign({},h);r.set(c.label,c)}else if(a){let h={value:e,label:e,_notExist:!0,_scrollIndex:-1};i&&(h=Object.assign(Object.assign({},e),{_notExist:!0,_scrollIndex:-1})),r.set(h.label,h)}return r}_updateMultiple(e,t){const r=this.getState("selections");let i=[];const s=Array.isArray(e);this.checkMultipleProps(),r.size&&(i=[...r].map(c=>c[1]));const o=new Map;let a=e;const{onChangeWithObject:h}=this.getProps();return h&&s&&(a=e.map(c=>c.value)),s&&a.length&&a.forEach((c,l)=>{const d=t.findIndex(u=>u.value===c);if(d!==-1)o.set(t[d].label,t[d]);else{const u=i.findIndex(f=>f.value===c);if(u!==-1){const f=i[u];if(h){const m=Object.assign({},e[l]);yt(m,f)?o.set(f.label,f):o.set(m.label,m)}else o.set(f.label,f)}else{let f={value:c,label:c,_notExist:!0};h&&(f=Object.assign(Object.assign({},e[l]),{_notExist:!0})),o.set(f.label,Object.assign(Object.assign({},f),{_scrollIndex:-1}))}}}),o}_isMultiple(){return this.getProp("multiple")}_isDisabled(){return this.getProp("disabled")}_isFilterable(){return!!this.getProp("filter")}handleClick(e){const{clickToHide:t}=this.getProps(),{isOpen:r}=this.getStates();this._isDisabled()||(r?r&&t?this.close({event:e}):r&&!t&&this.focusInput():(this.open(),this._notifyFocus(e)))}open(e,t){const r=this._isFilterable(),i=t||this.getState("options");if(r){const o=this._filterOption(i,"").filter(a=>!a._inputCreateOnly);this._adapter.updateOptions(o),this.toggle2SearchInput(!0)}else this._adapter.updateFocusState(!0);this._adapter.openMenu(()=>{const{searchPosition:s,autoFocus:o}=this.getProps();o&&s===Xr.SEARCH_POSITION_DROPDOWN&&this._adapter.focusDropdownInput()}),this._setDropdownWidth(),this._adapter.notifyDropdownVisibleChange(!0),this.bindKeyBoardEvent(),this._adapter.registerClickOutsideHandler(s=>{this.close({event:s}),this._notifyBlur(s),this._adapter.updateFocusState(!1)})}toggle2SearchInput(e){e?this._adapter.toggleInputShow(e,()=>this.focusInput()):this._adapter.toggleInputShow(e,()=>{})}close(e){const{event:t,closeCb:r,notToggleInput:i}=e||{};this._adapter.closeMenu(),this._adapter.notifyDropdownVisibleChange(!1),this._adapter.setIsFocusInContainer(!1),this._adapter.unregisterClickOutsideHandler();const s=this._isFilterable();s&&!i&&this.toggle2SearchInput(!1),this._adapter.once("popoverClose",()=>{s&&this.clearInput(t),r&&r()})}onSelect(e,t,r){if(this._isDisabled())return;e._inputCreateOnly&&this._adapter.notifyCreate(e),this._isMultiple()?this._handleMultipleSelect(e,r):(this._handleSingleSelect(e,r),this._focusTrigger()),this._adapter.updateFocusIndex(t)}_handleSingleSelect(e,t){var{value:r,label:i}=e,s=a2(e,["value","label"]);const o=new Map().set(i,Object.assign({value:r,label:i},s));this._notifySelect(r,Object.assign({value:r,label:i},s));const a=this._isFilterable();this._isControlledComponent()?this.close({event:t,notToggleInput:!0,closeCb:()=>{this._notifyChange(o),a&&this.toggle2SearchInput(!1)}}):(this._adapter.updateSelection(o),this._notifyChange(o),this.close({event:t,closeCb:()=>{this.updateOptionsActiveStatus(o)}}))}_handleMultipleSelect(e,t){var{value:r,label:i}=e,s=a2(e,["value","label"]);const o=this._adapter.getMaxLimit(),a=this._adapter.getSelections(),{autoClearSearchValue:h}=this.getProps();if(a.has(i))this._notifyDeselect(r,Object.assign({value:r,label:i},s)),a.delete(i);else if(o&&a.size===o){this._adapter.notifyMaxLimit(Object.assign({value:r,label:i},Gi(s,"_scrollIndex")));return}else this._notifySelect(r,Object.assign({value:r,label:i},s)),a.set(i,Object.assign({value:r,label:i},s));if(this._isControlledComponent())this._notifyChange(a),this._isFilterable()&&(h&&this.clearInput(t),this.focusInput());else{this._adapter.updateSelection(a),this.updateOverflowItemCount(a.size),this._adapter.rePositionDropdown();let{options:c}=this.getStates();this._isFilterable()&&(h&&(this.clearInput(t),c=this._filterOption(c,"")),this.focusInput()),this.updateOptionsActiveStatus(a,c),this._notifyChange(a)}}clearSelected(){const e=new Map;this._isControlledComponent()?(this._notifyChange(e),this._adapter.notifyClear()):(this._adapter.updateSelection(e),this.updateOptionsActiveStatus(e),this._notifyChange(e),this._adapter.notifyClear());const{isOpen:t}=this.getStates();t&&this._adapter.rePositionDropdown()}updateOptionsActiveStatus(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getState("options");const{allowCreate:r}=this.getProps(),i=t.map(s=>(e.has(s.label)?(s._selected=!0,r&&delete s._inputCreateOnly):(s._inputCreateOnly&&(s._show=!1),s._selected=!1),s));this._adapter.updateOptions(i)}removeTag(e){const t=this._adapter.getSelections();t.delete(e.label),this._isControlledComponent()?(this._notifyDeselect(e.value,e),this._notifyChange(t)):(this._notifyDeselect(e.value,e),this._adapter.updateSelection(t),this.updateOverflowItemCount(t.size),this.updateOptionsActiveStatus(t),this._adapter.rePositionDropdown(),this._notifyChange(t))}clearInput(e){const{inputValue:t}=this.getStates();if(t!==""){this._adapter.updateInputValue(""),this._adapter.notifySearch("",e);const{options:r}=this.getStates(),{remote:i}=this.getProps();let s=r;i||(s=this._filterOption(r,"")),this._adapter.updateOptions(s)}}focusInput(){this._adapter.focusInput(),this._adapter.updateFocusState(!0),this._adapter.setIsFocusInContainer(!1)}handleInputChange(e,t){this._adapter.updateInputValue(e);const{options:r,isOpen:i}=this.getStates(),{allowCreate:s,remote:o}=this.getProps();let a=r;o||(a=this._filterOption(r,e)),a=this._createOptionByInput(s,a,e),this._adapter.updateOptions(a),this._adapter.notifySearch(e,t),this._isMultiple()&&this._adapter.rePositionDropdown()}_filterOption(e,t){const r=this.getProp("filter");if(r){if(typeof r=="boolean"&&r){const i=t.toLowerCase();return e.map(s=>{const o=s.label.toString().toLowerCase(),a=s._parentGroup&&s._parentGroup.label,h=o.includes(i),c=vt(a)&&a.toLowerCase().includes(i);return h||c?s._show=!0:s._show=!1,s})}else if(typeof r=="function")return e.map(i=>(r(t,i)?i._show=!0:i._show=!1,i))}else return e}_createOptionByInput(e,t,r){if(e)if(r){const i={_show:!0,_selected:!1,value:r,label:r,_inputCreateOnly:!0};let s=-1,o=-1;t.forEach((a,h)=>{!a._show&&!a._inputCreateOnly||(a.label===r&&(o=h),a._inputCreateOnly&&(s=h,a.value=r,a.label=r,a._show=!0))}),s===-1&&o===-1&&t.push(i),o!==-1&&(t=t.filter(a=>!a._inputCreateOnly))}else t=t.filter(i=>!i._inputCreateOnly);return t}bindKeyBoardEvent(){this._keydownHandler=e=>{this._handleKeyDown(e)},this._adapter.registerKeyDown(this._keydownHandler)}unBindKeyBoardEvent(){this._keydownHandler&&this._adapter.unregisterKeyDown()}_handleKeyDown(e){const t=e.keyCode,{loading:r,filter:i,multiple:s,disabled:o}=this.getProps(),{isOpen:a}=this.getStates();if(!(r||o))switch(t){case Jn.UP:e.preventDefault(),this._handleArrowKeyDown(-1);break;case Jn.DOWN:e.preventDefault(),this._handleArrowKeyDown(1);break;case Jn.BACKSPACE:this._handleBackspaceKeyDown();break;case Jn.ENTER:Jt(e),this._handleEnterKeyDown(e);break;case Jn.ESC:a&&this.close({event:e}),i&&!s&&this._focusTrigger();break;case Jn.TAB:this._handleTabKeyDown(e);break}}handleContainerKeyDown(e){const t=e.keyCode,{isOpen:r}=this.getStates();switch(t){case Jn.TAB:r&&this._handleTabKeyDown(e);break}}_getEnableFocusIndex(e){const{focusIndex:t,options:r}=this.getStates(),i=r.filter(a=>a._show),s=i.length;let o=t+e;if(o<0&&(o=s-1),o>=s&&(o=0),e>0){let a=-1;for(let h=0;h<i.length&&(!i[h].disabled&&(a=h),!(a>=o));h++);o=a}else{let a=i.length;for(let h=s-1;h>=0&&(!i[h].disabled&&(a=h),!(a<=o));h--);o=a}this._adapter.updateFocusIndex(o),this._adapter.updateScrollTop(o)}_handleArrowKeyDown(e){const{isOpen:t}=this.getStates();t?this._getEnableFocusIndex(e):this.open()}_handleTabKeyDown(e){const{isOpen:t}=this.getStates();if(this._adapter.updateFocusState(!1),t){const r=this._adapter.getContainer(),i=this._adapter.getFocusableElements(r);i.length>0?e.shiftKey?this._handlePanelOpenShiftTabKeyDown(i,e):this._handlePanelOpenTabKeyDown(i,e):(this.close({event:e}),this._notifyBlur(e))}else this._notifyBlur(e)}_handlePanelOpenTabKeyDown(e,t){const r=this._adapter.getActiveElement();this._adapter.getIsFocusInContainer()?r===e[e.length-1]&&(this._focusTrigger(),this.close({event:t}),Jt(t)):(e[0].focus(),this._adapter.setIsFocusInContainer(!0),Jt(t))}_handlePanelOpenShiftTabKeyDown(e,t){const r=this._adapter.getActiveElement();this._adapter.getIsFocusInContainer()?r===e[0]&&(this._focusTrigger(),this._adapter.setIsFocusInContainer(!1),Jt(t)):(this.close({event:t}),this._notifyBlur(t))}_handleEnterKeyDown(e){const{isOpen:t,options:r,focusIndex:i}=this.getStates();if(!t)this.open();else if(i!==-1){const s=r.filter(a=>a._show),{length:o}=s;if(o<=i)return;if(s&&o){const a=s[i];if(a.disabled)return;this.onSelect(a,i,e)}}else this.close({event:e})}_handleBackspaceKeyDown(){if(this._isMultiple()){const e=this._adapter.getSelections(),{inputValue:t}=this.getStates(),r=e.size;if(r&&!t){const i=[...e.keys()];let s=r-1,o=i[s],a=e.get(o),h=!1;if(a.disabled&&s===0)return;for(;a.disabled&&s!==0;)s=s-1,o=i[s],a=e.get(o),s==0&&a.disabled&&(h=!0);h||this.removeTag(a)}}}_notifyChange(e){const{onChangeWithObject:t}=this.getProps(),r=this.getState("selections");let i;const s=[...e.values()],o=this._isMultiple();if(this._diffSelections(e,r,o))switch(!0){case t:this._notifyChangeWithObject(e);break;case(!t&&!o):i=s.length?s[0].value:void 0,this._adapter.notifyChange(i);break;case(!t&&o):i=s.length?s.map(h=>h.value):[],this._adapter.notifyChange(i);break}}_removeInternalKey(e){let t=Object.assign({},e);return delete t._parentGroup,delete t._show,delete t._selected,delete t._scrollIndex,delete t._keyInJsx,"_keyInOptionList"in t&&(t.key=t._keyInOptionList,delete t._keyInOptionList),t}_notifySelect(e,t){const r=this._removeInternalKey(t);this._adapter.notifySelect(e,r)}_notifyDeselect(e,t){const r=this._removeInternalKey(t);this._adapter.notifyDeselect(e,r)}_diffSelections(e,t,r){let i=!0,s=!0;if(!r){const o=[...e.values()],a=[...t.values()],h=o[0]?o[0].value:o[0],c=a[0]?a[0].value:a[0];s=!yt(h,c);const l=o[0]?o[0].label:o[0],d=a[0]?a[0].label:a[0];i=!yt(l,d)}return s||i}_notifyChangeWithObject(e){this.getState("selections");const t=[];for(const r of e.entries()){let i=Object.assign({label:r[0]},r[1]);i=this._removeInternalKey(i),t.push(i)}this._isMultiple()?this._adapter.notifyChange(t):this._adapter.notifyChange(t[0])}_notifyBlur(e){this._adapter.notifyBlur(e)}_notifyFocus(e){this._adapter.notifyFocus(e)}handleMouseEnter(e){this._adapter.updateHovering(!0),this._adapter.notifyMouseEnter(e)}handleMouseLeave(e){this._adapter.updateHovering(!1),this._adapter.notifyMouseLeave(e)}handleClearClick(e){const{filter:t,searchPosition:r}=this.getProps();t&&r===Xr.SEARCH_POSITION_TRIGGER&&this.clearInput(e),this.focus(),this.clearSelected(),e.stopPropagation()}handleKeyPress(e){e&&e.key===Nv&&this.handleClick(e)}handleClearBtnEnterPress(e){ph(e)&&this.handleClearClick(e)}handleOptionMouseEnter(e){this._adapter.updateFocusIndex(e)}handleListScroll(e){this._adapter.notifyListScroll(e)}handleTriggerFocus(e){this.bindKeyBoardEvent(),this._adapter.setIsFocusInContainer(!1)}handleTriggerBlur(e){this.getProps();const{isOpen:t,isFocus:r}=this.getStates();r&&!t&&(this._notifyBlur(e),this._adapter.updateFocusState(!1))}handleInputBlur(e){const{filter:t,autoFocus:r}=this.getProps(),i=this._isMultiple();r&&t&&!i&&this.toggle2SearchInput(!1)}selectAll(){const{options:e}=this.getStates(),{onChangeWithObject:t}=this.getProps();let r=[];if(!this._isMultiple()){console.warn(`[Semi Select]: It seems that you have called the selectAll method in the single-selection Select.
                Please note that this is not a legal way to use it`);return}t?r=e:r=e.map(s=>s.value),this.handleValueChange(r),this._adapter.notifyChange(r)}checkMultipleProps(e){if(this._isMultiple()){const t=e||this.getProps(),{defaultValue:r,value:i}=t,s=i||r;!tn(s)&&!Array.isArray(s)&&Jr(!0,"[Semi Select] defaultValue/value should be array type in multiple mode")}}updateScrollTop(){this._adapter.updateScrollTop()}updateOverflowItemCount(e,t){const{maxTagCount:r,ellipsisTrigger:i}=this.getProps();i&&(t?this._adapter.updateOverflowItemCount(t):typeof r=="number"&&(e-r>0?this._adapter.updateOverflowItemCount(e-r):this._adapter.updateOverflowItemCount(0)))}updateIsFullTags(){const{isFullTags:e}=this.getStates();e||this._adapter.setState({isFullTags:!0})}handlePopoverClose(){this._adapter.emit("popoverClose")}handleSlotMouseEnter(){this._adapter.updateFocusIndex(-1)}}const Wa=Fx.PREFIX,c3=ka.TAG_SIZE,QG=ka.AVATAR_SHAPE;class Md extends G.PureComponent{renderNTag(e,t){const{size:r,showPopover:i,popoverProps:s,onPlusNMouseEnter:o}=this.props;let a=_.createElement(xr,{closable:!1,size:r,color:"grey",style:{backgroundColor:"transparent"},key:"_+n",onMouseEnter:o},"+",e);return i&&(a=_.createElement(un,Object.assign({showArrow:!0,content:t,trigger:"hover",position:"top",autoAdjustOverflow:!0,className:`${Wa}-rest-group-popover`},s,{key:"_+n_Popover"}),a)),a}renderMergeTags(e){const{maxTagCount:t,tagList:r,restCount:i}=this.props,s=i||r.length-t;let o=e;const a=e.slice(0,t),h=e.slice(t);let c=null;return s>0&&(c=this.renderNTag(s,h),a.push(c),o=a),o}renderAllTags(){const{tagList:e,size:t,mode:r,avatarShape:i,onTagClose:s}=this.props;return e.map(a=>{if(r==="custom")return a;const h=Object.assign({},a);return h.size||(h.size=t),h.avatarShape||(h.avatarShape=i),h.tagKey||(typeof h.children=="string"||typeof h.children=="number"?h.tagKey=h.children:h.tagKey=Math.random()),_.createElement(xr,Object.assign({},h,{key:h.tagKey,onClose:(c,l,d)=>{h.onClose&&h.onClose(c,l,d),s&&s(c,l,d)}}))})}render(){const{style:e,className:t,maxTagCount:r,size:i}=this.props,s=L({[`${Wa}-group`]:!0,[`${Wa}-group-max`]:r,[`${Wa}-group-small`]:i==="small",[`${Wa}-group-large`]:i==="large"},t),o=this.renderAllTags(),a=typeof r>"u"?o:this.renderMergeTags(o);return _.createElement("div",{style:e,className:s},a)}}Md.defaultProps={style:{},className:"",size:c3[0],avatarShape:"square",onTagClose:()=>{},onPlusNMouseEnter:()=>{}};Md.propTypes={children:p.node,style:p.object,className:p.string,maxTagCount:p.number,restCount:p.number,tagList:p.array,size:p.oneOf(c3),mode:p.string,onTagClose:p.func,showPopover:p.bool,popoverProps:p.object,avatarShape:p.oneOf(QG)};var JG=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const l2=(n,e,t,r)=>{const i=n.props;if(!n||!i)return null;const s=Object.assign(Object.assign({value:i.value,label:i.label||i.children||i.value,_show:!0,_selected:!1,_scrollIndex:t},i),{_parentGroup:e});return s._keyInJsx=r||n.key,s},ez=n=>{let e=[],t=[];const r={label:"",children:[],_show:!1};let i=_.Children.toArray(n);i=i.filter(a=>a&&a.props);let s="",o=-1;return i.forEach(a=>{if(a.type.isSelectOption){s="option",o++;const h=l2(a,void 0,o);r.children.push(h),t.push(h)}else if(a.type.isSelectOptionGroup){s="group";let h=a.props,{children:c}=h,l=JG(h,["children"]),d=[];Array.isArray(c)?d=c.map(m=>m.key):d.push(c.key),c=_.Children.toArray(c);const u=c.map((m,g)=>{let y=m.key;return d[g]===null&&(y=a.key+""+m.key),o++,l2(m,l,o,y)}),f=Object.assign(Object.assign({},a.props),{children:u,key:a.key});e.push(f),t=t.concat(u)}else Jr(!0,"[Semi Select] The children of `Select` should be `Select.Option` or `Select.OptionGroup`")}),s==="option"&&(e=[r]),{optionGroups:e,options:t}},tz=n=>{let{index:e,data:t,style:r}=n;const{visibleOptions:i,renderOption:s}=t,o=i[e];return s(o,e,r)};var h2=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class Ts extends G.PureComponent{onClick(e,t){var{value:r,label:i,children:s}=e,o=h2(e,["value","label","children"]);const{props:a}=this;a.disabled||a.onSelect(Object.assign(Object.assign({},o),{value:r,label:i||s}),t)}renderOptionContent(e){let{config:t,children:r,inputValue:i,prefixCls:s}=e;return vt(r)&&i?xR(t):r}render(){const e=this.props,{children:t,disabled:r,value:i,selected:s,label:o,empty:a,emptyContent:h,onSelect:c,focused:l,showTick:d,className:u,style:f,onMouseEnter:m,prefixCls:g,renderOptionItem:y,inputValue:v,semiOptionId:b}=e,w=h2(e,["children","disabled","value","selected","label","empty","emptyContent","onSelect","focused","showTick","className","style","onMouseEnter","prefixCls","renderOptionItem","inputValue","semiOptionId"]),C=L(g,{[`${g}-disabled`]:r,[`${g}-selected`]:s,[`${g}-focused`]:l,[`${g}-empty`]:a,[u]:u}),O=L([`${g}-icon`]);if(a)return h===null?null:_.createElement(jn,{componentName:"Select"},P=>_.createElement("div",{className:C,"x-semi-prop":"emptyContent"},h||P.emptyText));if(typeof y=="function")return y(Object.assign({disabled:r,focused:l,selected:s,style:f,label:o,value:i,inputValue:v,onMouseEnter:P=>m(P),onClick:P=>this.onClick(Object.assign({value:i,label:o,children:t},w),P),className:u},w));const x={searchWords:v,sourceString:t,option:{highlightClassName:`${g}-keyword`}};return _.createElement("div",Object.assign({className:C,onClick:P=>{this.onClick(Object.assign({value:i,label:o,children:t},w),P)},onMouseEnter:P=>m&&m(P),role:"option",id:b,"aria-selected":s?"true":"false","aria-disabled":r?"true":"false",style:f},Ca(w)),d?_.createElement("div",{className:O},_.createElement(Pd,null)):null,vt(t)?_.createElement("div",{className:`${g}-text`},this.renderOptionContent({children:t,config:x,inputValue:v,prefixCls:g})):t)}}Ts.isSelectOption=!0;Ts.propTypes={children:p.node,disabled:p.bool,value:p.oneOfType([p.string,p.number]),selected:p.bool,label:p.node,empty:p.bool,emptyContent:p.node,onSelect:p.func,focused:p.bool,showTick:p.bool,className:p.string,style:p.object,onMouseEnter:p.func,prefixCls:p.string,renderOptionItem:p.func,inputValue:p.string};Ts.defaultProps={prefixCls:Jv.PREFIX_OPTION};var nz=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const rz=Jv.PREFIX_GROUP;class Fp extends Ee{render(){const e=this.props,{label:t,className:r,style:i}=e,s=nz(e,["label","className","style"]),o=L(r,{[rz]:!0});return!t&&typeof t!="number"?null:_.createElement("div",Object.assign({className:o,style:i},this.getDataAttr(s)),t)}}Fp.isSelectOptionGroup=!0;Fp.propTypes={children:p.oneOfType([p.array,p.node]),label:p.node,className:p.string,style:p.object};var iz=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const ee=Jv.PREFIX,sz=0;class Or extends Ee{constructor(e){super(e),this.setOptionContainerEl=t=>this.optionContainerEl={current:t},this.handleInputChange=(t,r)=>this.foundation.handleInputChange(t,r),this.getTagItem=(t,r,i)=>{const{size:s,disabled:o}=this.props,a=t[0],{value:h}=t[1],c=t[1].disabled||o,l=(m,g)=>{g&&typeof g.preventDefault=="function"&&g.preventDefault(),this.foundation.removeTag({label:a,value:h})},{content:d,isRenderInTag:u}=i(t[1],{index:r,disabled:c,onClose:l}),f={disabled:c,closable:!c,onClose:l};return u?_.createElement(xr,Object.assign({},f,{color:"white",size:s||"large",key:h,tabIndex:-1}),d):_.createElement(G.Fragment,{key:h},d)},this.state={isOpen:!1,isFocus:!1,options:[],selections:new Map,dropdownMinWidth:null,optionKey:sz,inputValue:"",showInput:!1,focusIndex:e.defaultActiveFirstOption?0:-1,keyboardEventSet:{},optionGroups:[],isHovering:!1,isFocusInContainer:!1,isFullTags:!1,overflowItemCount:0},this.selectOptionListID="",this.selectID="",this.virtualizeListRef=_.createRef(),this.inputRef=_.createRef(),this.dropdownInputRef=_.createRef(),this.triggerRef=_.createRef(),this.optionsRef=_.createRef(),this.optionContainerEl=_.createRef(),this.clickOutsideHandler=null,this.onSelect=this.onSelect.bind(this),this.onClear=this.onClear.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.renderOption=this.renderOption.bind(this),this.onKeyPress=this.onKeyPress.bind(this),this.eventManager=new yx,this.foundation=new ZG(this.adapter)}get adapter(){var e=this;const t={registerKeyDown:s=>{const o={onKeyDown:s};this.setState({keyboardEventSet:o})},unregisterKeyDown:()=>{this.setState({keyboardEventSet:{}})},updateFocusIndex:s=>{this.setState({focusIndex:s})},scrollToFocusOption:()=>{}},r={updateInputValue:s=>{this.setState({inputValue:s})},toggleInputShow:(s,o)=>{this.setState({showInput:s},()=>{o()})},focusInput:()=>{const{preventScroll:s}=this.props;this.inputRef&&this.inputRef.current&&this.inputRef.current.focus({preventScroll:s})},focusDropdownInput:()=>{const{preventScroll:s}=this.props;this.dropdownInputRef&&this.dropdownInputRef.current&&this.dropdownInputRef.current.focus({preventScroll:s})}},i={notifyMaxLimit:s=>this.props.onExceed(s),getMaxLimit:()=>this.props.max,registerClickOutsideHandler:s=>{const o=a=>{const h=this.optionsRef&&this.optionsRef.current,c=this.triggerRef&&this.triggerRef.current,l=nr.findDOMNode(h),d=a.target,u=a.composedPath&&a.composedPath()||[d];!(l&&l.contains(d))&&!(c&&c.contains(d))&&!(u.includes(c)||u.includes(l))&&s(a)};this.clickOutsideHandler=o,document.addEventListener("mousedown",o,!1)},unregisterClickOutsideHandler:()=>{this.clickOutsideHandler&&(document.removeEventListener("mousedown",this.clickOutsideHandler,!1),this.clickOutsideHandler=null)},rePositionDropdown:()=>{let{optionKey:s}=this.state;s=s+1,this.setState({optionKey:s})},notifyDeselect:(s,o)=>{delete o._parentGroup,this.props.onDeselect(s,o)}};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},super.adapter),t),r),i),{on:(s,o)=>this.eventManager.on(s,o),off:s=>this.eventManager.off(s),once:(s,o)=>this.eventManager.once(s,o),emit:s=>this.eventManager.emit(s),getOptionsFromChildren:function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.props.children,o=[],a=[];const{optionList:h}=e.props;if(h&&h.length)a=h.map((c,l)=>Object.assign({_show:!0,_selected:!1,_scrollIndex:l},c)),o[0]={children:a,label:""};else{const c=ez(s);o=c.optionGroups,a=c.options}return e.setState({optionGroups:o}),a},updateOptions:s=>{this.setState({options:s})},openMenu:s=>{this.setState({isOpen:!0},()=>{s==null||s()})},closeMenu:()=>{this.setState({isOpen:!1})},getTriggerWidth:()=>{const s=this.triggerRef.current;return s&&s.getBoundingClientRect().width},setOptionWrapperWidth:s=>{this.setState({dropdownMinWidth:s})},updateSelection:s=>{this.setState({selections:s})},getSelections:()=>new Map(this.state.selections),notifyChange:s=>{this.props.onChange(s)},notifySelect:(s,o)=>{delete o._parentGroup,this.props.onSelect(s,o)},notifyDropdownVisibleChange:s=>{this.props.onDropdownVisibleChange(s)},notifySearch:(s,o)=>{this.props.onSearch(s,o)},notifyCreate:s=>{this.props.onCreate(s)},notifyMouseEnter:s=>{this.props.onMouseEnter(s)},notifyMouseLeave:s=>{this.props.onMouseLeave(s)},notifyFocus:s=>{this.props.onFocus(s)},notifyBlur:s=>{this.props.onBlur(s)},notifyClear:()=>{this.props.onClear()},notifyListScroll:s=>{this.props.onListScroll(s)},updateHovering:s=>{this.setState({isHovering:s})},updateFocusState:s=>{this.setState({isFocus:s})},updateOverflowItemCount:s=>{this.setState({overflowItemCount:s})},focusTrigger:()=>{try{const{preventScroll:s}=this.props;this.triggerRef.current.focus({preventScroll:s})}catch{}},getContainer:()=>this.optionContainerEl&&this.optionContainerEl.current,getFocusableElements:s=>Cx(s),getActiveElement:()=>Sx(),setIsFocusInContainer:s=>{this.setState({isFocusInContainer:s})},getIsFocusInContainer:()=>this.state.isFocusInContainer,updateScrollTop:s=>{let o=`.${ee}-option-selected`;s!==void 0&&(o=`.${ee}-option:nth-child(${s})`);let a=document.querySelector(`#${ee}-${this.selectOptionListID} ${o}`);if(Array.isArray(a)&&(a=a[0]),a){const h=a.parentNode;h.scrollTop=a.offsetTop-h.offsetTop-h.clientHeight/2+a.clientHeight/2}}})}componentDidMount(){this.foundation.init(),this.selectOptionListID=Od(),this.selectID=this.props.id||Od()}componentWillUnmount(){this.foundation.destroy()}componentDidUpdate(e,t){const r=_.Children.toArray(e.children).map(o=>o.key),i=_.Children.toArray(this.props.children).map(o=>o.key);let s=!1;(!yt(r,i)||!yt(e.optionList,this.props.optionList))&&(s=!0,this.foundation.handleOptionListChange()),(!yt(this.props.value,e.value)||s)&&("value"in this.props?this.foundation.handleValueChange(this.props.value):this.foundation.handleOptionListChangeHadDefaultValue())}renderTriggerInput(){const{size:e,multiple:t,disabled:r,inputProps:i,filter:s}=this.props,o=oe(i,"className"),a=L(`${ee}-input`,{[`${ee}-input-single`]:!t,[`${ee}-input-multiple`]:t},o),{inputValue:h,focusIndex:c}=this.state,l=Object.assign({value:h,disabled:r,className:a,onChange:this.handleInputChange},i);let d={};return t&&(d={width:h?`${h.length*16}px`:"2px"},l.style=d),_.createElement(Td,Object.assign({ref:this.inputRef,size:e,"aria-activedescendant":c!==-1?`${this.selectID}-option-${c}`:"",onFocus:u=>{t&&s&&this.setState({isFocus:!0}),u.stopPropagation()},onBlur:u=>this.foundation.handleInputBlur(u)},l))}renderDropdownInput(){const{size:e,multiple:t,disabled:r,inputProps:i,filter:s,searchPosition:o,searchPlaceholder:a}=this.props,{inputValue:h,focusIndex:c}=this.state,l=L(`${ee}-dropdown-search-wrapper`,{}),d=oe(i,"className"),u=L(`${ee}-dropdown-input`,{[`${ee}-dropdown-input-single`]:!t,[`${ee}-dropdown-input-multiple`]:t},d),f=Object.assign(Object.assign({value:h,disabled:r,className:u,onChange:this.handleInputChange,placeholder:a,showClear:!0},i),{onKeyDown:m=>this.foundation._handleKeyDown(m)});return _.createElement("div",{className:l},_.createElement(Td,Object.assign({ref:this.dropdownInputRef,prefix:_.createElement(WF,null),"aria-activedescendant":c!==-1?`${this.selectID}-option-${c}`:""},f)))}close(){this.foundation.close()}open(){this.foundation.open()}clearInput(){this.foundation.clearInput()}selectAll(){this.foundation.selectAll()}deselectAll(){this.foundation.clearSelected()}focus(){this.foundation.focus()}onSelect(e,t,r){this.foundation.onSelect(e,t,r)}onClear(e){e.nativeEvent.stopImmediatePropagation(),this.foundation.handleClearClick(e)}search(e,t){this.handleInputChange(e,t)}renderEmpty(){return _.createElement(Ts,{empty:!0,emptyContent:this.props.emptyContent})}renderLoading(){const e=`${ee}-loading-wrapper`;return _.createElement("div",{className:e},_.createElement(Lv,null))}renderOption(e,t,r){const{focusIndex:i,inputValue:s}=this.state,{renderOptionItem:o}=this.props;let a;const h=t===i;let c=r||{};return e.style&&(c=Object.assign(Object.assign({},c),e.style)),e._inputCreateOnly?a=this.renderCreateOption(e,h,t,r):("key"in e&&(e._keyInOptionList=e.key),a=_.createElement(Ts,Object.assign({showTick:!0},e,{selected:e._selected,onSelect:(l,d)=>this.onSelect(l,t,d),focused:h,onMouseEnter:()=>this.onOptionHover(t),style:c,key:e._keyInOptionList||e._keyInJsx||e.label+e.value+t,renderOptionItem:o,inputValue:s,semiOptionId:`${this.selectID}-option-${t}`}),e.label)),a}renderCreateOption(e,t,r,i){const{renderCreateItem:s}=this.props;if(typeof s>"u")return _.createElement(Ts,Object.assign({key:e.key||e.label+e.value,onSelect:(h,c)=>this.onSelect(h,r,c),onMouseEnter:()=>this.onOptionHover(r),showTick:!0},e,{focused:t,style:i}),_.createElement(jn,{componentName:"Select"},h=>_.createElement(_.Fragment,null,_.createElement("span",{className:`${ee}-create-tips`},h.createText),e.value)));const o=s(e.value,t,i);return _.createElement("div",{role:"button","aria-label":"Use the input box to create an optional item",onClick:a=>this.onSelect(e,r,a),key:e.key||e.label},o)}onOptionHover(e){this.foundation.handleOptionMouseEnter(e)}renderWithGroup(e){const t=[],r=new Map;return e.forEach((i,s)=>{const o=i._parentGroup,a=this.renderOption(i,s);if(o&&!r.has(o.label)){const h=_.createElement(Fp,Object.assign({},o,{key:o.label}));r.set(o.label,!0),t.push(h)}t.push(a)}),t}renderVirtualizeList(e){const{virtualize:t}=this.props,{direction:r}=this.context,{height:i,width:s,itemSize:o}=t;return _.createElement(nB,{ref:this.virtualizeListRef,height:i||h3.LIST_HEIGHT,itemCount:e.length,itemSize:o,itemData:{visibleOptions:e,renderOption:this.renderOption},width:s||"100%",style:{direction:r}},tz)}renderOptions(e){const{dropdownMinWidth:t,options:r,selections:i}=this.state,{maxHeight:s,dropdownClassName:o,dropdownStyle:a,outerTopSlot:h,innerTopSlot:c,outerBottomSlot:l,innerBottomSlot:d,loading:u,virtualize:f,multiple:m,emptyContent:g,searchPosition:y,filter:v}=this.props,b=r.filter(P=>P._show);let w=this.renderWithGroup(b);f&&(w=this.renderVirtualizeList(b));const C=Object.assign({minWidth:t},a),O=L({[`${ee}-option-list`]:!0,[`${ee}-option-list-chosen`]:i.size}),x=!r.length||!r.some(P=>P._show);return _.createElement("div",{id:`${ee}-${this.selectOptionListID}`,className:L({[`${ee}-option-list-wrapper`]:!(x&&g===null)},o),style:C,ref:this.setOptionContainerEl,onKeyDown:P=>this.foundation.handleContainerKeyDown(P)},h?_.createElement("div",{className:`${ee}-option-list-outer-top-slot`,onMouseEnter:()=>this.foundation.handleSlotMouseEnter()},h):null,y===Xr.SEARCH_POSITION_DROPDOWN&&v?this.renderDropdownInput():null,_.createElement("div",{style:{maxHeight:`${s}px`},className:O,role:"listbox","aria-multiselectable":m,onScroll:P=>this.foundation.handleListScroll(P)},c?_.createElement("div",{className:`${ee}-option-list-inner-top-slot`,onMouseEnter:()=>this.foundation.handleSlotMouseEnter()},c):null,u?this.renderLoading():x?this.renderEmpty():w,d?_.createElement("div",{className:`${ee}-option-list-inner-bottom-slot`,onMouseEnter:()=>this.foundation.handleSlotMouseEnter()},d):null),l?_.createElement("div",{className:`${ee}-option-list-outer-bottom-slot`,onMouseEnter:()=>this.foundation.handleSlotMouseEnter()},l):null)}renderSingleSelection(e,t){let{renderSelectedItem:r,searchPosition:i}=this.props;const{placeholder:s}=this.props,{showInput:o,inputValue:a}=this.state;let h="";const c=[...e];if(typeof r>"u"&&(r=f=>f.label),c.length){const f=c[0][1];h=r(f)}const l=i===Xr.SEARCH_POSITION_TRIGGER,d=L({[`${ee}-selection-text`]:!0,[`${ee}-selection-placeholder`]:!h&&h!==0,[`${ee}-selection-text-hide`]:a&&o&&l,[`${ee}-selection-text-inactive`]:!a&&o&&l}),u=`${ee}-content-wrapper`;return _.createElement(_.Fragment,null,_.createElement("div",{className:u},_.createElement("span",{className:d,"x-semi-prop":"placeholder"},h||h===0?h:s),t&&o&&l?this.renderTriggerInput():null))}renderTag(e,t,r){const{size:i,disabled:s}=this.props;let{renderSelectedItem:o}=this.props;const a=e[0],{value:h}=e[1],c=e[1].disabled||s,l=(g,y)=>{y&&typeof y.preventDefault=="function"&&y.preventDefault(),this.foundation.removeTag({label:a,value:h})};typeof o>"u"&&(o=g=>({isRenderInTag:!0,content:g.label}));const{content:d,isRenderInTag:u}=o(e[1],{index:t,disabled:c,onClose:l}),f={disabled:c,closable:!c,onClose:l},m=r&&!Ht(this.props.renderSelectedItem)?_.createElement(fh,{size:"small",ellipsis:{rows:1,showTooltip:{type:"popover",opts:{style:{width:"auto",fontSize:12}}}}},d):d;return u?_.createElement(xr,Object.assign({},f,{color:"white",size:i||"large",key:h,style:{maxWidth:"100%"}}),m):_.createElement(G.Fragment,{key:h},m)}renderNTag(e,t){const{size:r,showRestTagsPopover:i,restTagsPopoverProps:s}=this.props;let o=_.createElement(xr,{closable:!1,size:r||"large",color:"grey",className:`${ee}-content-wrapper-collapse-tag`,key:`_+${e}`,style:{marginRight:0,flexShrink:0}},"+",e);return i&&(o=_.createElement(un,Object.assign({showArrow:!0,content:_.createElement(zv,{spacing:2,wrap:!0,style:{maxWidth:"400px"}},t.map((a,h)=>this.renderTag(a,h))),trigger:"hover",position:"top",autoAdjustOverflow:!0},s,{key:`_+${e}_Popover`}),o)),o}renderOverflow(e,t){return e.length&&e[0]?this.renderTag(e[0],t,!0):null}handleOverflow(e){const{overflowItemCount:t,selections:r}=this.state,{maxTagCount:i}=this.props,s=r.size-i>0?r.size-i+e.length-1:e.length-1;t!==s&&this.foundation.updateOverflowItemCount(r.size,s)}renderCollapsedTags(e,t){const{overflowItemCount:r}=this.state,i=typeof t=="number"?e.slice(0,t):e;return _.createElement("div",{className:`${ee}-content-wrapper-collapse`},_.createElement(ia,{items:i,key:String(e.length),overflowRenderer:s=>this.renderOverflow(s,t-1),onOverflow:s=>this.handleOverflow(s),visibleItemRenderer:(s,o)=>this.renderTag(s,o)}),r>0&&this.renderNTag(r,e.slice(e.length-r)))}renderOneLineTags(e,t){let{renderSelectedItem:r}=this.props;const{showRestTagsPopover:i,restTagsPopoverProps:s,maxTagCount:o}=this.props,{isFullTags:a}=this.state;let h;if(typeof r>"u"&&(r=c=>({isRenderInTag:!0,content:c.label})),i){const l=(a?e:e.slice(0,o)).map((d,u)=>this.getTagItem(d,u,r));h=_.createElement(Md,{tagList:l,maxTagCount:t,restCount:a?void 0:e.length-o,size:"large",mode:"custom",showPopover:i,popoverProps:s,onPlusNMouseEnter:()=>{this.foundation.updateIsFullTags()}})}else{const l=e.slice(0,o).map((d,u)=>this.getTagItem(d,u,r));h=_.createElement(Md,{tagList:l,maxTagCount:t,restCount:e.length-o,size:"large",mode:"custom"})}return h}renderMultipleSelection(e,t){let{renderSelectedItem:r,searchPosition:i}=this.props;const{placeholder:s,maxTagCount:o,expandRestTagsOnClick:a,ellipsisTrigger:h}=this.props,{inputValue:c,isOpen:l}=this.state,d=[...e];typeof r>"u"&&(r=C=>({isRenderInTag:!0,content:C.label}));const u=L({[`${ee}-content-wrapper`]:!0,[`${ee}-content-wrapper-one-line`]:o&&!l,[`${ee}-content-wrapper-empty`]:!d.length}),f=L({[`${ee}-selection-text`]:!0,[`${ee}-selection-placeholder`]:!d.length,[`${ee}-selection-text-hide`]:d&&d.length}),m=s&&!c?_.createElement("span",{className:f},s):null,g=d.length>o?o:void 0,y=!o,v=h?this.renderCollapsedTags(d,g):this.renderOneLineTags(d,g),b=y||a&&l?d.map((C,O)=>this.renderTag(C,O)):v,w=t&&i===Xr.SEARCH_POSITION_TRIGGER;return _.createElement(_.Fragment,null,_.createElement("div",{className:u},d&&d.length?b:m,w?this.renderTriggerInput():null))}onMouseEnter(e){this.foundation.handleMouseEnter(e)}onMouseLeave(e){this.foundation.handleMouseLeave(e)}onKeyPress(e){this.foundation.handleKeyPress(e)}handlePopoverVisibleChange(e){const{virtualize:t}=this.props,{selections:r}=this.state;if(e)if(t){let i=-1;if(r.forEach(s=>{const o=oe(s,"_scrollIndex");Ri(o)&&o>=0&&(i=i!==-1&&i<o?i:o)}),i!==-1)try{this.virtualizeListRef.current.scrollToItem(i,"center")}catch{}}else this.foundation.updateScrollTop()}renderSuffix(){const{suffix:e}=this.props,t=L({[`${ee}-suffix`]:!0,[`${ee}-suffix-text`]:e&&vt(e),[`${ee}-suffix-icon`]:tr(e)});return _.createElement("div",{className:t,"x-semi-prop":"suffix"},e)}renderPrefix(){const{prefix:e,insetLabel:t,insetLabelId:r}=this.props,i=e||t,s=L({[`${ee}-prefix`]:!0,[`${ee}-inset-label`]:t,[`${ee}-prefix-text`]:i&&vt(i),[`${ee}-prefix-icon`]:tr(i)});return _.createElement("div",{className:s,id:r,"x-semi-prop":"prefix,insetLabel"},i)}renderSelection(){const e=this.props,{disabled:t,multiple:r,filter:i,style:s,id:o,size:a,className:h,validateStatus:c,showArrow:l,suffix:d,prefix:u,insetLabel:f,placeholder:m,triggerRender:g,arrowIcon:y,clearIcon:v,borderless:b}=e,w=iz(e,["disabled","multiple","filter","style","id","size","className","validateStatus","showArrow","suffix","prefix","insetLabel","placeholder","triggerRender","arrowIcon","clearIcon","borderless"]),{selections:C,isOpen:O,keyboardEventSet:x,inputValue:P,isHovering:T,isFocus:k,showInput:E,focusIndex:I}=this.state,M=typeof g=="function",R=!!i,U=M?L(h):L(ee,h,{[`${ee}-borderless`]:b,[`${ee}-open`]:O,[`${ee}-focus`]:k,[`${ee}-disabled`]:t,[`${ee}-single`]:!r,[`${ee}-multiple`]:r,[`${ee}-filterable`]:R,[`${ee}-small`]:a==="small",[`${ee}-large`]:a==="large",[`${ee}-error`]:c==="error",[`${ee}-warning`]:c==="warning",[`${ee}-no-arrow`]:!l,[`${ee}-with-prefix`]:u||f,[`${ee}-with-suffix`]:d}),V=this.props.showClear&&(C.size||P)&&!t&&(T||O),H=l?_.createElement("div",{className:`${ee}-arrow`,"x-semi-prop":"arrowIcon"},y):_.createElement("div",{className:`${ee}-arrow-empty`}),K=v||_.createElement(Ex,null),$=M?_.createElement($x,{value:Array.from(C.values()),inputValue:P,onChange:this.handleInputChange,onSearch:this.handleInputChange,onRemove:S=>this.foundation.removeTag(S),onClear:this.onClear,disabled:t,triggerRender:g,placeholder:m,componentName:"Select",componentProps:Object.assign({},this.props)}):[_.createElement(G.Fragment,{key:"prefix"},u||f?this.renderPrefix():null),_.createElement(G.Fragment,{key:"selection"},_.createElement("div",{className:L(`${ee}-selection`)},r?this.renderMultipleSelection(C,R):this.renderSingleSelection(C,R))),_.createElement(G.Fragment,{key:"clearicon"},V?_.createElement("div",{className:L(`${ee}-clear`),onClick:this.onClear},K):H),_.createElement(G.Fragment,{key:"suffix"},d?this.renderSuffix():null)],j=t||R&&E||R&&r?-1:0;return _.createElement("div",Object.assign({role:"combobox","aria-disabled":t,"aria-expanded":O,"aria-controls":`${ee}-${this.selectOptionListID}`,"aria-haspopup":"listbox","aria-label":C.size?"selected":"","aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-required":this.props["aria-required"],className:U,ref:S=>this.triggerRef.current=S,onClick:S=>this.foundation.handleClick(S),style:s,id:this.selectID,tabIndex:j,"aria-activedescendant":I!==-1?`${this.selectID}-option-${I}`:"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onFocus:S=>this.foundation.handleTriggerFocus(S),onBlur:S=>this.foundation.handleTriggerBlur(S),onKeyPress:this.onKeyPress},x,this.getDataAttr(w)),$)}render(){const{direction:e}=this.context,t=e==="rtl"?"bottomRight":"bottomLeft",{children:r,position:i=t,zIndex:s,getPopupContainer:o,motion:a,autoAdjustOverflow:h,mouseLeaveDelay:c,mouseEnterDelay:l,spacing:d,stopPropagation:u,dropdownMargin:f}=this.props,{isOpen:m,optionKey:g}=this.state,y=this.renderOptions(r),v=this.renderSelection();return _.createElement(un,{getPopupContainer:o,motion:a,margin:f,autoAdjustOverflow:h,mouseLeaveDelay:c,mouseEnterDelay:l,zIndex:s,ref:this.optionsRef,content:y,visible:m,trigger:"custom",rePosKey:g,position:i,spacing:d,stopPropagation:u,disableArrowKeyDown:!0,onVisibleChange:b=>this.handlePopoverVisibleChange(b),afterClose:()=>this.foundation.handlePopoverClose()},v)}}Or.contextType=Wi;Or.Option=Ts;Or.OptGroup=Fp;Or.propTypes={"aria-describedby":p.string,"aria-errormessage":p.string,"aria-invalid":p.bool,"aria-labelledby":p.string,"aria-required":p.bool,autoFocus:p.bool,autoClearSearchValue:p.bool,borderless:p.bool,children:p.node,clearIcon:p.node,defaultValue:p.oneOfType([p.string,p.number,p.array,p.object]),ellipsisTrigger:p.bool,value:p.oneOfType([p.string,p.number,p.array,p.object]),placeholder:p.node,onChange:p.func,multiple:p.bool,filter:p.oneOfType([p.func,p.bool]),max:p.number,maxTagCount:p.number,maxHeight:p.oneOfType([p.string,p.number]),style:p.object,className:p.string,size:p.oneOf(Xr.SIZE_SET),disabled:p.bool,emptyContent:p.node,expandRestTagsOnClick:p.bool,onDropdownVisibleChange:p.func,zIndex:p.number,position:p.oneOf(Xr.POSITION_SET),onSearch:p.func,getPopupContainer:p.func,dropdownClassName:p.string,dropdownStyle:p.object,dropdownMargin:p.oneOfType([p.number,p.object]),outerTopSlot:p.node,innerTopSlot:p.node,inputProps:p.object,outerBottomSlot:p.node,innerBottomSlot:p.node,optionList:p.array,dropdownMatchSelectWidth:p.bool,loading:p.bool,defaultOpen:p.bool,validateStatus:p.oneOf(Xr.STATUS),defaultActiveFirstOption:p.bool,triggerRender:p.func,stopPropagation:p.bool,searchPosition:p.string,motion:p.bool,onChangeWithObject:p.bool,suffix:p.node,prefix:p.node,insetLabel:p.node,insetLabelId:p.string,showClear:p.bool,showArrow:p.bool,renderSelectedItem:p.func,allowCreate:p.bool,renderCreateItem:p.func,onMouseEnter:p.func,onMouseLeave:p.func,clickToHide:p.bool,onExceed:p.func,onCreate:p.func,remote:p.bool,onDeselect:p.func,onSelect:p.func,autoAdjustOverflow:p.bool,mouseEnterDelay:p.number,mouseLeaveDelay:p.number,spacing:p.oneOfType([p.number,p.object]),onBlur:p.func,onFocus:p.func,onClear:p.func,virtualize:p.object,renderOptionItem:p.func,onListScroll:p.func,arrowIcon:p.node,preventScroll:p.bool};Or.__SemiComponentName__="Select";Or.defaultProps=Tn(Or.__SemiComponentName__,{stopPropagation:!0,motion:!0,borderless:!1,zIndex:Fs.DEFAULT_Z_INDEX,filter:!1,multiple:!1,disabled:!1,defaultOpen:!1,allowCreate:!1,placeholder:"",onDropdownVisibleChange:Y,onChangeWithObject:!1,onChange:Y,onSearch:Y,onMouseEnter:Y,onMouseLeave:Y,onDeselect:Y,onSelect:Y,onCreate:Y,onExceed:Y,onFocus:Y,onBlur:Y,onClear:Y,onListScroll:Y,maxHeight:h3.LIST_HEIGHT,dropdownMatchSelectWidth:!0,defaultActiveFirstOption:!0,showArrow:!0,showClear:!1,searchPosition:Xr.SEARCH_POSITION_TRIGGER,remote:!1,autoAdjustOverflow:!0,autoClearSearchValue:!0,arrowIcon:_.createElement(Ul,{"aria-label":""}),showRestTagsPopover:!1,restTagsPopoverProps:{},expandRestTagsOnClick:!1,ellipsisTrigger:!1});const d3={PREFIX:`${te}-popconfirm`,POPOVER:`${te}-popconfirm-popover`},oz={SPACING:4,DEFAULT_Z_INDEX:1030};class az extends ze{init(){}destroy(){}handleCancel(e){const t=this._adapter.notifyCancel(e);Ad(t)?(this._adapter.updateCancelLoading(!0),t.then(r=>{this.handleVisibleChange(!1),this._adapter.updateCancelLoading(!1)},r=>{this._adapter.updateCancelLoading(!1)})):this.handleVisibleChange(!1)}handleConfirm(e){const t=this._adapter.notifyConfirm(e);Ad(t)?(this._adapter.updateConfirmLoading(!0),t.then(r=>{this._adapter.updateConfirmLoading(!1),this.handleVisibleChange(!1)},r=>{this._adapter.updateConfirmLoading(!1)})):this.handleVisibleChange(!1)}handleClickOutSide(e){this._adapter.notifyClickOutSide(e)}handleVisibleChange(e){this._isControlledComponent("visible")||this._adapter.setVisible(e),e?this.handleFocusOperateButton():this._adapter.focusPrevFocusElement(),this._adapter.notifyVisibleChange(e)}handleFocusOperateButton(){const{cancelButtonProps:e,okButtonProps:t}=this._adapter.getProps();oe(e,"autoFocus")&&!oe(e,"disabled")?this._adapter.focusCancelButton():oe(t,"autoFocus")&&!oe(t,"disabled")&&this._adapter.focusOkButton()}}var lz=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class sa extends Ee{constructor(e){super(e),this.handleCancel=t=>this.foundation.handleCancel(t&&t.nativeEvent),this.handleConfirm=t=>this.foundation.handleConfirm(t&&t.nativeEvent),this.handleVisibleChange=t=>this.foundation.handleVisibleChange(t),this.handleClickOutSide=t=>this.foundation.handleClickOutSide(t),this.stopImmediatePropagation=t=>t&&t.nativeEvent&&t.nativeEvent.stopImmediatePropagation(),this.renderConfirmPopCard=t=>{let{initialFocusRef:r}=t;const{content:i,title:s,className:o,style:a,cancelType:h,icon:c,prefixCls:l,showCloseIcon:d}=this.props,{direction:u}=this.context,f=L(l,o,{[`${l}-rtl`]:u==="rtl"}),m=s!==null&&typeof s<"u",g=!(i===null||typeof i>"u"),y=_.isValidElement(c),v=L({[`${l}-body`]:!0,[`${l}-body-withIcon`]:y});return _.createElement("div",{className:f,onClick:this.stopImmediatePropagation,style:a},_.createElement("div",{className:`${l}-inner`},_.createElement("div",{className:`${l}-header`},y?_.createElement("i",{className:`${l}-header-icon`,"x-semi-prop":"icon"},c):null,_.createElement("div",{className:`${l}-header-body`},m?_.createElement("div",{className:`${l}-header-title`,"x-semi-prop":"title"},s):null),d?_.createElement(He,{className:`${l}-btn-close`,icon:_.createElement(uh,null),size:"small",theme:"borderless",type:h,onClick:this.handleCancel}):null),g?_.createElement("div",{className:v,"x-semi-prop":"content"},Ht(i)?i({initialFocusRef:r}):i):null,_.createElement("div",{className:`${l}-footer`,ref:this.footerRef},this.renderControls())))},this.state={cancelLoading:!1,confirmLoading:!1,visible:e.defaultVisible||!1},this.foundation=new az(this.adapter),this.footerRef=_.createRef(),this.popoverRef=_.createRef()}static getDerivedStateFromProps(e,t){const r={},{hasOwnProperty:i}=Object.prototype;return i.call(e,"visible")&&(r.visible=e.visible),r}get adapter(){return Object.assign(Object.assign({},super.adapter),{setVisible:e=>this.setState({visible:e}),updateConfirmLoading:e=>this.setState({confirmLoading:e}),updateCancelLoading:e=>this.setState({cancelLoading:e}),notifyConfirm:e=>this.props.onConfirm(e),notifyCancel:e=>this.props.onCancel(e),notifyVisibleChange:e=>this.props.onVisibleChange(e),notifyClickOutSide:e=>this.props.onClickOutSide(e),focusCancelButton:()=>{var e,t;const r=(t=(e=this.footerRef)===null||e===void 0?void 0:e.current)===null||t===void 0?void 0:t.querySelector("[data-type=cancel]");r==null||r.focus({preventScroll:!0})},focusOkButton:()=>{var e,t;const r=(t=(e=this.footerRef)===null||e===void 0?void 0:e.current)===null||t===void 0?void 0:t.querySelector("[data-type=ok]");r==null||r.focus({preventScroll:!0})},focusPrevFocusElement:()=>{var e;(e=this.popoverRef.current)===null||e===void 0||e.focusTrigger()}})}renderControls(){const{okText:e,cancelText:t,okType:r,cancelType:i,cancelButtonProps:s,okButtonProps:o}=this.props,{cancelLoading:a,confirmLoading:h}=this.state;return _.createElement(jn,{componentName:"Popconfirm"},(c,l)=>_.createElement(_.Fragment,null,_.createElement(He,Object.assign({"data-type":"cancel",type:i,onClick:this.handleCancel,loading:a},Gi(s,"autoFocus")),t||oe(c,"cancel")),_.createElement(He,Object.assign({"data-type":"ok",type:r,theme:"solid",onClick:this.handleConfirm,loading:h},Gi(o,"autoFocus")),e||oe(c,"confirm"))))}render(){const{direction:e}=this.context,t=e==="rtl"?"bottomRight":"bottomLeft",r=this.props,{className:i,prefixCls:s,disabled:o,children:a,style:h,position:c=t}=r,l=lz(r,["className","prefixCls","disabled","children","style","position"]);if(o)return a;const{visible:d}=this.state,u={onVisibleChange:this.handleVisibleChange,className:d3.POPOVER,onClickOutSide:this.handleClickOutSide};return this.isControlled("visible")&&(u.trigger="custom"),_.createElement(un,Object.assign({ref:this.popoverRef},l,{content:f=>{let{initialFocusRef:m}=f;return this.renderConfirmPopCard({initialFocusRef:m})},visible:d,position:c},u),a)}}sa.contextType=Wi;sa.propTypes={motion:p.oneOfType([p.bool,p.func,p.object]),disabled:p.bool,content:p.oneOfType([p.node,p.func]),title:p.any,prefixCls:p.string,className:p.string,style:p.object,icon:p.node,okText:p.string,okType:p.string,cancelText:p.string,cancelType:p.string,onCancel:p.func,onConfirm:p.func,onClickOutSide:p.func,onVisibleChange:p.func,visible:p.bool,defaultVisible:p.bool,okButtonProps:p.object,cancelButtonProps:p.object,stopPropagation:p.oneOfType([p.bool,p.string]),showCloseIcon:p.bool,zIndex:p.number,trigger:p.string,position:p.string};sa.__SemiComponentName__="Popconfirm";sa.defaultProps=Tn(sa.__SemiComponentName__,{stopPropagation:!0,trigger:"click",onVisibleChange:Y,disabled:!1,icon:_.createElement(Mv,{size:"extra-large"}),okType:"primary",cancelType:"tertiary",prefixCls:d3.PREFIX,zIndex:oz.DEFAULT_Z_INDEX,showCloseIcon:!0,onCancel:Y,onConfirm:Y,onClickOutSide:Y});const Gt={PREFIX:`${te}-slider`,DISABLED:`${te}-slider-disabled`,VERTICAL:`${te}-slider-vertical`,TRACK:`${te}-slider-track`,DOTS:`${te}-slider-dots`,MARKS:`${te}-slider-marks`,HANDLE:`${te}-slider-handle`,HANDLE_DOT:`${te}-slider-handle-dot`},c2=(n,e)=>(!globalThis.Touch||!(n instanceof Touch)||["stopPropagation","preventDefault"].forEach(r=>{let i=e[r];i&&(typeof i=="function"&&(i=function(){return e[r](...arguments)}),n[r]?Jr(!0,`"The key ${r}" exist in Touch.`):n[r]=i)}),n);class ey extends ze{constructor(e){var t;super(Object.assign(Object.assign({},ey.defaultAdapter),e)),t=this,this.getMinAndMaxPercent=r=>{const{range:i,min:s,max:o}=this._adapter.getProps(),a=i?(r[0]-s)/(o-s):(r-s)/(o-s),h=i?(r[1]-s)/(o-s):1;return{min:this._checkValidity(a),max:this._checkValidity(h)}},this._checkValidity=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return r>s?s:r<i?i:r},this.computeHandleVisibleVal=(r,i,s)=>{const{focusPos:o,currentValue:a}=this._adapter.getStates(),h={min:!1,max:!1};let c;return i?c={min:i(s?this.outPutValue(a[0]):this.outPutValue(a)),max:s?i(this.outPutValue(a[1])):null}:c={min:s?this.outPutValue(a[0]):this.outPutValue(a),max:s?this.outPutValue(a[1]):null},r?(h.min=!0,h.max=!0):typeof r>"u"&&i&&(o==="min"?h.min=!0:o==="max"&&(h.max=!0)),{tipVisible:h,tipChildren:c}},this.valueFormatIsCorrect=r=>Array.isArray(r)?typeof r[0]=="number"&&typeof r[0]=="number":typeof r=="number",this.handleMousePos=(r,i)=>{const s=this._adapter.getParentRect(),o=this._adapter.getScrollParentVal(),a=s?s.left:0,h=s?s.top:0;return{x:r-a+o.scrollLeft,y:i-h+o.scrollTop}},this.getScrollParent=r=>{const i=r,s=/(auto|scroll)/,o=(c,l)=>window.getComputedStyle(c,null).getPropertyValue(l),a=c=>s.test(o(c,"overflow")+o(c,"overflow-y")+o(c,"overflow-x")),h=c=>!c||c===document.body||!(c instanceof Element)?document.body:a(c)?c:h(c.parentNode);return h(i)},this.checkMeetMinMax=r=>{const{vertical:i,verticalReverse:s,range:o}=this._adapter.getProps(),a=this._adapter.getState("currentValue");this.transValueToPos(a);const{sliderX:h,sliderY:c,sliderWidth:l,sliderHeight:d}=this._adapter.getSliderLengths();this._adapter.getStates();const u=i?d:l;let f;i&&s?f=c+u:f=i?c:h;let m;return i&&s?m=c:m=i?c+d:h+l,i&&s?r>=f?r=f:r<=m&&(r=m):r<=f?r=f:r>=m&&(r=m),r},this.transPosToValue=(r,i)=>{const s=this.checkMeetMinMax(r),{min:o,max:a,currentValue:h}=this._adapter.getStates(),{range:c,vertical:l,step:d,verticalReverse:u}=this._adapter.getProps(),{sliderX:f,sliderY:m,sliderWidth:g,sliderHeight:y}=this._adapter.getSliderLengths(),v=l?m:f,b=l?y:g;let w;l&&u?w=(v+b-s)/b*(a-o)+o:w=(s-v)/b*(a-o)+o;let C;return c?C=i?h[0]:h[1]:C=h,d!==1&&(w=Math.round(w/d)*d),c&&w!==C?i?[w,h[1]]:[h[0],w]:!c&&w!==C?w:!1},this.transValueToPos=r=>{const{min:i,max:s}=this._adapter.getStates(),{vertical:o,range:a,verticalReverse:h}=this._adapter.getProps(),{sliderX:c,sliderY:l,sliderWidth:d,sliderHeight:u}=this._adapter.getSliderLengths(),f=o?l:c,m=o?u:d;return a?[(r[0]-i)*m/(s-i)+f,(r[1]-i)*m/(s-i)+f]:(r-i)*m/(s-i)+f},this.isMarkActive=r=>{const{min:i,max:s,range:o,included:a}=this._adapter.getProps(),h=this._adapter.getState("currentValue");return typeof(r/1)=="number"&&r>=i&&r<=s?o?(r>h[1]||r<h[0])&&a?"unActive":"active":r<=h&&a?"active":"unActive":!1},this.outPutValue=r=>{const i=a=>{var h,c;return/^\d+(\.\d+)?$/.test(String(a))&&(c=(h=a.toString().split(".")[1])===null||h===void 0?void 0:h.length)!==null&&c!==void 0?c:0},s=this._adapter.getProp("step"),o=(()=>{const a=i(s),h=Math.pow(10,a);return c=>Math.round(c*h)/h})();if(Array.isArray(r)){const a=o(r[0]),h=o(r[1]);return a>h?this.getState("focusPos")==="min"?[h,h]:[a,a]:[a,h]}else return o(r)},this.handleDisabledChange=r=>{this._adapter.updateDisabled(r)},this.checkAndUpdateIsInRenderTreeState=()=>this._adapter.checkAndUpdateIsInRenderTreeState(),this.calculateOutputValue=(r,i)=>{const s=this.transPosToValue(r,i);if(s!==!1)return this.outPutValue(s)},this.handleValueChange=(r,i)=>{const{min:s,max:o}=this._adapter.getStates();let a=null;const h={};this.valueFormatIsCorrect(i)?(Array.isArray(r)&&Array.isArray(i)&&(i=[i[0]<s?s:i[0],i[1]>o?o:i[1]],a=Object.assign(h,{currentValue:i})),typeof r=="number"&&typeof i=="number"&&(i>o?i=o:i=i<s?s:i,a=Object.assign(h,{currentValue:i}))):a=h,a&&this._adapter.transNewPropsToState(a)},this.onHandleDown=(r,i)=>{this._adapter.onHandleDown(r);const s=this._adapter.getState("disabled"),{vertical:o}=this._adapter.getProps(),{dragging:a}=this._adapter.getOverallVars();if(s)return!1;this._adapter.setStateVal("isDrag",!0),this._adapter.setStateVal("chooseMovePos",i),i==="min"?this._adapter.setDragging([!0,a[1]]):this._adapter.setDragging([a[0],!0]);const h=this.handleMousePos(r.clientX,r.clientY);let c=o?h.y:h.x;if(!this._adapter.isEventFromHandle(r))this._dragOffset=0;else{const l=this._getHandleCenterPosition(o,r.target);this._dragOffset=c-l,c=l}return!0},this.onHandleMove=r=>{this._adapter.setEventDefault(r);const{disabled:i,chooseMovePos:s}=this._adapter.getStates(),{vertical:o}=this._adapter.getProps(),{dragging:a}=this._adapter.getOverallVars();if(i)return!1;this.onHandleEnter(s);const h=this.handleMousePos(r.clientX,r.clientY);let c=o?h.y:h.x;if(c=c-this._dragOffset,s==="min"&&a[0]||s==="max"&&a[1]){const l=this.calculateOutputValue(c,s==="min");if(l===void 0)return!1;this._adapter.notifyChange(l),this._adapter.onHandleMove(c,s==="min",void 0,!1,l)}return!0},this.onHandleTouchStart=(r,i)=>{const s=this._adapter.getMinHandleEl(),o=this._adapter.getMaxHandleEl();if(r.target===s||r.target===o){Jt(r);const a=c2(r.touches[0],r);this.onHandleDown(a,i)}},this.onHandleTouchMove=r=>{const i=this._adapter.getMinHandleEl(),s=this._adapter.getMaxHandleEl();if(r.target===i||r.target===s){const o=c2(r.touches[0],r);this.onHandleMove(o)}},this.onHandleEnter=r=>{const{disabled:i,focusPos:s}=this._adapter.getStates();i||!s&&r!==s&&this._adapter.onHandleEnter(r)},this.onHandleLeave=()=>{const r=this._adapter.getState("disabled"),i=this._adapter.getState("isDrag");!r&&!i&&this._adapter.onHandleLeave()},this.onHandleUp=r=>{this._adapter.onHandleUpBefore(r);const{disabled:i,chooseMovePos:s}=this._adapter.getStates(),{dragging:o}=this._adapter.getOverallVars();return i?!1:(s==="min"?this._adapter.setDragging([!1,o[1]]):this._adapter.setDragging([o[0],!1]),this._adapter.setStateVal("isDrag",!1),this._adapter.onHandleLeave(),this._adapter.onHandleUpAfter(),!0)},this._handleValueDecreaseWithKeyBoard=(r,i)=>{const{min:s,currentValue:o}=this.getStates(),{range:a}=this.getProps();if(i==="min")if(a){let h=o[0]-r;return h=h<s?s:h,[h,o[1]]}else{let h=o-r;return h=h<s?s:h,h}else{let h=o[1]-r;return h=h<o[0]?o[0]:h,[o[0],h]}},this._handleValueIncreaseWithKeyBoard=(r,i)=>{const{max:s,currentValue:o}=this.getStates(),{range:a}=this.getProps();if(i==="min")if(a){let h=o[0]+r;return h=h>o[1]?o[1]:h,[h,o[1]]}else{let h=o+r;return h=h>s?s:h,h}else{let h=o[1]+r;return h=h>s?s:h,[o[0],h]}},this._handleHomeKey=r=>{const{min:i,currentValue:s}=this.getStates(),{range:o}=this.getProps();return r==="min"?o?[i,s[1]]:i:[s[0],s[0]]},this._handleEndKey=r=>{const{max:i,currentValue:s}=this.getStates(),{range:o}=this.getProps();return r==="min"?o?[s[1],s[1]]:i:[s[0],i]},this.handleKeyDown=(r,i)=>{const{min:s,max:o,currentValue:a}=this.getStates(),{step:h,range:c}=this.getProps();let l;switch(r.key){case"ArrowLeft":case"ArrowDown":l=this._handleValueDecreaseWithKeyBoard(h,i);break;case"ArrowRight":case"ArrowUp":l=this._handleValueIncreaseWithKeyBoard(h,i);break;case"PageUp":l=this._handleValueIncreaseWithKeyBoard(10*h,i);break;case"PageDown":l=this._handleValueDecreaseWithKeyBoard(10*h,i);break;case"Home":l=this._handleHomeKey(i);break;case"End":l=this._handleEndKey(i);break}if(["ArrowLeft","ArrowDown","ArrowRight","ArrowUp","PageUp","PageDown","Home","End"].includes(r.key)){let d=!0;Array.isArray(a)?d=!(a[0]===l[0]&&a[1]===l[1]):d=a!==l,d&&(this._adapter.updateCurrentValue(l),this._adapter.notifyChange(l)),Jt(r)}},this._noTooltip=()=>{const{tipFormatter:r,tooltipVisible:i}=this.getProps();return r===null||i===!1},this.onFocus=(r,i)=>{if(this._noTooltip())return;Jt(r);const{target:o}=r;try{o.matches(":focus-visible")&&(i==="min"?this._adapter.setStateVal("firstDotFocusVisible",!0):this._adapter.setStateVal("secondDotFocusVisible",!0))}catch{Jr(!0,"Warning: [Semi Slider] The current browser does not support the focus-visible")}},this.onBlur=(r,i)=>{if(this._noTooltip())return;const{firstDotFocusVisible:o,secondDotFocusVisible:a}=this.getStates();i==="min"?o&&this._adapter.setStateVal("firstDotFocusVisible",!1):a&&this._adapter.setStateVal("secondDotFocusVisible",!1)},this.handleWrapClick=r=>{const{disabled:i,isDrag:s}=this._adapter.getStates();if(s||i||this._adapter.isEventFromHandle(r))return;const{vertical:o}=this.getProps(),a=this.handleMousePos(r.clientX,r.clientY),h=o?a.y:a.x,c=this.checkWhichHandle(h),l=this.calculateOutputValue(h,c);l!==void 0&&(this._adapter.notifyChange(l),!this._isControlledComponent()&&this.setHandlePos(h,c,!0,l))},this.setHandlePos=function(r,i){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=arguments.length>3?arguments[3]:void 0;t._adapter.onHandleMove(r,i,()=>t._adapter.onHandleUpAfter(),s,o)},this.checkWhichHandle=r=>{const{vertical:i,verticalReverse:s}=this.getProps(),{currentValue:o}=this._adapter.getStates(),a=this.transValueToPos(o);let h=!0;return Array.isArray(a)&&(r>a[1]||Math.abs(r-a[0])>Math.abs(r-a[1]))&&(h=!1),i&&s&&(h=!h),h},this.handleWrapperEnter=()=>{this._adapter.setStateVal("showBoundary",!0)},this.handleWrapperLeave=()=>{this._adapter.setStateVal("showBoundary",!1)}}init(){this._checkCurrentValue(),this._dragOffset=0}_checkCurrentValue(){const{currentValue:e,min:t,max:r}=this.getStates();let i;Array.isArray(e)?(i=[],i[0]=this._checkValidity(e[0],t,r),i[1]=this._checkValidity(e[1],t,r)):i=this._checkValidity(e,t,r),this._adapter.updateCurrentValue(i)}destroy(){this._adapter.unSubscribeEventListener()}_getHandleCenterPosition(e,t){const r=t.getBoundingClientRect(),{x:i,y:s}=this.handleMousePos(r.left+r.width*.5,r.top+r.height*.5);return e?s:i}}var hz=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const kn=Gt.PREFIX;function cz(n){return n?!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length):!1}class ty extends Ee{constructor(e){super(e),this.renderHandle=()=>{var r,i,s,o,a;const{vertical:h,range:c,tooltipVisible:l,tipFormatter:d,"aria-label":u,"aria-labelledby":f,"aria-valuetext":m,getAriaValueText:g,disabled:y}=this.props,{chooseMovePos:v,isDrag:b,isInRenderTree:w,firstDotFocusVisible:C,secondDotFocusVisible:O}=this.state,x=h?"top":"left",P=this.foundation.getMinAndMaxPercent(this.state.currentValue),T=P.min,k=P.max,{tipVisible:E,tipChildren:I}=this.foundation.computeHandleVisibleVal(l&&w,d,c),M=L(Gt.HANDLE,{[`${Gt.HANDLE}-clicked`]:v==="min"&&b}),R=L(Gt.HANDLE,{[`${Gt.HANDLE}-clicked`]:v==="max"&&b}),{min:U,max:V,currentValue:H}=this.state,K={"aria-label":u??(y?"Disabled Slider":void 0),"aria-labelledby":f,"aria-disabled":y};h&&Object.assign(K,{"aria-orientation":"vertical"});const $=this.props.handleDot;return c?_.createElement(_.Fragment,null,_.createElement(gt,{content:I.min,position:"top",trigger:"custom",rePosKey:T,visible:w&&(E.min||C),className:`${Gt.HANDLE}-tooltip`},_.createElement("span",Object.assign({ref:this.minHanleEl,className:M,style:{[x]:`${T*100}%`,zIndex:v==="min"?2:1},onMouseDown:S=>{this.foundation.onHandleDown(S,"min")},onMouseEnter:()=>{this.foundation.onHandleEnter("min")},onTouchStart:S=>{this.foundation.onHandleTouchStart(S,"min")},onMouseLeave:()=>{this.foundation.onHandleLeave()},onKeyUp:S=>{this.foundation.onHandleUp(S)},onTouchEnd:S=>{this.foundation.onHandleUp(S)},onKeyDown:S=>{this.foundation.handleKeyDown(S,"min")},onFocus:S=>{this.foundation.onFocus(S,"min")},onBlur:S=>{this.foundation.onBlur(S,"min")},role:"slider",tabIndex:y?-1:0},K,{"aria-valuetext":g?g(H[0],0):m,"aria-valuenow":H[0],"aria-valuemax":H[1],"aria-valuemin":U}),($==null?void 0:$[0])&&_.createElement("div",{className:Gt.HANDLE_DOT,style:Object.assign(Object.assign({},!((r=$[0])===null||r===void 0)&&r.size?{width:$[0].size,height:$[0].size}:{}),!((i=$[0])===null||i===void 0)&&i.color?{backgroundColor:$[0].color}:{})}))),_.createElement(gt,{content:I.max,position:"top",trigger:"custom",rePosKey:k,visible:w&&(E.max||O),className:`${Gt.HANDLE}-tooltip`},_.createElement("span",Object.assign({ref:this.maxHanleEl,className:R,style:{[x]:`${k*100}%`,zIndex:v==="max"?2:1},onMouseDown:S=>{this.foundation.onHandleDown(S,"max")},onMouseEnter:()=>{this.foundation.onHandleEnter("max")},onMouseLeave:()=>{this.foundation.onHandleLeave()},onKeyUp:S=>{this.foundation.onHandleUp(S)},onTouchStart:S=>{this.foundation.onHandleTouchStart(S,"max")},onTouchEnd:S=>{this.foundation.onHandleUp(S)},onKeyDown:S=>{this.foundation.handleKeyDown(S,"max")},onFocus:S=>{this.foundation.onFocus(S,"max")},onBlur:S=>{this.foundation.onBlur(S,"max")},role:"slider",tabIndex:y?-1:0},K,{"aria-valuetext":g?g(H[1],1):m,"aria-valuenow":H[1],"aria-valuemax":V,"aria-valuemin":H[0]}),((s=this.props.handleDot)===null||s===void 0?void 0:s[1])&&_.createElement("div",{className:Gt.HANDLE_DOT,style:Object.assign(Object.assign({},!((o=this.props.handleDot[1])===null||o===void 0)&&o.size?{width:this.props.handleDot[1].size,height:this.props.handleDot[1].size}:{}),!((a=this.props.handleDot[1])===null||a===void 0)&&a.color?{backgroundColor:this.props.handleDot[1].color}:{})})))):_.createElement(gt,{content:I.min,showArrow:this.props.showArrow,position:"top",trigger:"custom",rePosKey:T,visible:w&&(E.min||C),className:`${Gt.HANDLE}-tooltip`},_.createElement("span",Object.assign({onMouseOver:this.foundation.checkAndUpdateIsInRenderTreeState,ref:this.minHanleEl,className:M,style:{[x]:`${T*100}%`,zIndex:v==="min"&&b?2:1},onMouseDown:S=>{this.foundation.onHandleDown(S,"min")},onMouseEnter:()=>{this.foundation.onHandleEnter("min")},onTouchStart:S=>{this.foundation.onHandleTouchStart(S,"min")},onMouseLeave:()=>{this.foundation.onHandleLeave()},onKeyUp:S=>{this.foundation.onHandleUp(S)},onTouchEnd:S=>{this.foundation.onHandleUp(S)},onKeyDown:S=>{this.foundation.handleKeyDown(S,"min")},onFocus:S=>{this.foundation.onFocus(S,"min")},onBlur:S=>{this.foundation.onBlur(S,"min")},role:"slider","aria-valuetext":g?g(H,0):m,tabIndex:y?-1:0},K,{"aria-valuenow":H,"aria-valuemax":V,"aria-valuemin":U}),$&&_.createElement("div",{className:Gt.HANDLE_DOT,style:Object.assign(Object.assign({},$!=null&&$.size?{width:$.size,height:$.size}:{}),$!=null&&$.color?{backgroundColor:$.color}:{})})))},this.renderTrack=()=>{const{range:r,included:i,vertical:s}=this.props,o=this.foundation.getMinAndMaxPercent(this.state.currentValue),a=o.min,h=o.max;let c=s?{height:r?`${Math.abs(h-a)*100}%`:`${a*100}%`,top:r?`${Math.min(a,h)*100}%`:0}:{width:r?`${Math.abs(h-a)*100}%`:`${a*100}%`,left:r?`${Math.min(a,h)*100}%`:0};return c=i?c:{},_.createElement("div",{className:Gt.TRACK,style:c,onClick:this.foundation.handleWrapClick})},this.renderStepDot=()=>{const{min:r,max:i,vertical:s,marks:o}=this.props,a=s?"top":"left";return o&&Object.keys(o).length>0?_.createElement("div",{className:Gt.DOTS},Object.keys(o).map(c=>{const l=this.foundation.isMarkActive(Number(c)),d=L(`${kn}-dot`,{[`${kn}-dot-active`]:this.foundation.isMarkActive(Number(c))==="active"}),u=(Number(c)-r)/(i-r),f=_.createElement("span",{key:c,onClick:this.foundation.handleWrapClick,className:d,style:{[a]:`calc(${u*100}% - 2px)`}});return l?this.props.tooltipOnMark?_.createElement(gt,{content:o[c]},f):f:null})):null},this.renderLabel=()=>{if(!this.props.showMarkLabel)return null;const{min:r,max:i,vertical:s,marks:o,verticalReverse:a}=this.props,h=s?"top":"left";return o&&Object.keys(o).length>0?_.createElement("div",{className:Gt.MARKS+(s&&a?"-reverse":"")},Object.keys(o).map(l=>{const d=this.foundation.isMarkActive(Number(l)),u=(Number(l)-r)/(i-r);return d?_.createElement("span",{key:l,className:L(`${kn}-mark${s&&a?"-reverse":""}`),style:{[h]:`${u*100}%`},onClick:this.foundation.handleWrapClick},o[l]):null})):null},this._getAriaValueText=(r,i)=>{const{getAriaValueText:s}=this.props;return s?s(r,i):r};let{value:t}=this.props;t||(t=this.props.defaultValue),this.state={currentValue:t||(this.props.range?[0,0]:0),min:this.props.min||0,max:this.props.max||0,focusPos:"",onChange:this.props.onChange,disabled:this.props.disabled||!1,chooseMovePos:"",isDrag:!1,clickValue:0,showBoundary:!1,isInRenderTree:!0,firstDotFocusVisible:!1,secondDotFocusVisible:!1},this.sliderEl=_.createRef(),this.minHanleEl=_.createRef(),this.maxHanleEl=_.createRef(),this.dragging=[!1,!1],this.foundation=new ey(this.adapter),this.eventListenerSet=new Set,this.handleDownEventListenerSet=new Set}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{getSliderLengths:()=>{var t;if(this.sliderEl&&this.sliderEl.current){const r=this.sliderEl.current.getBoundingClientRect(),i=(t=this.sliderEl.current.offsetParent)===null||t===void 0?void 0:t.getBoundingClientRect(),s={x:i?r.left-i.left:this.sliderEl.current.offsetLeft,y:i?r.top-i.top:this.sliderEl.current.offsetTop};return{sliderX:s.x,sliderY:s.y,sliderWidth:r.width,sliderHeight:r.height}}return{sliderX:0,sliderY:0,sliderWidth:0,sliderHeight:0}},getParentRect:()=>{const t=this.sliderEl&&this.sliderEl.current&&this.sliderEl.current.offsetParent;if(t)return t.getBoundingClientRect()},getScrollParentVal:()=>{const t=this.foundation.getScrollParent(this.sliderEl.current);return{scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}},isEventFromHandle:t=>{const r=[this.minHanleEl,this.maxHanleEl];let i=!1;return r.forEach(s=>{if(!s)return;const o=s&&s.current,a=nr.findDOMNode(o);a&&a.contains(t.target)&&(i=!0)}),i},getOverallVars:()=>({dragging:this.dragging}),updateDisabled:t=>{this.setState({disabled:t})},transNewPropsToState(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Y;this.setState(t,r)},notifyChange:t=>{this.props.onChange(Array.isArray(t)?[...t].sort((r,i)=>r-i):t)},setDragging:t=>{this.dragging=t},updateCurrentValue:t=>{const{currentValue:r}=this.state;t!==r&&this.setState({currentValue:t})},setOverallVars:(t,r)=>{this[t]=r},getMinHandleEl:()=>this.minHanleEl.current,getMaxHandleEl:()=>this.maxHanleEl.current,onHandleDown:t=>{this.handleDownEventListenerSet.add(this._addEventListener(document.body,"mousemove",this.foundation.onHandleMove,!1)),this.handleDownEventListenerSet.add(this._addEventListener(window,"mouseup",this.foundation.onHandleUp,!1)),this.handleDownEventListenerSet.add(this._addEventListener(document.body,"touchmove",this.foundation.onHandleTouchMove,!1))},onHandleMove:function(t,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Y,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=arguments.length>4?arguments[4]:void 0;if(!e.foundation.checkAndUpdateIsInRenderTreeState())return;const{value:h}=e.props;let c=o;if(c===void 0){const d=e.foundation.transPosToValue(t,r);if(d===!1)return;c=e.foundation.outPutValue(d)}const{currentValue:l}=e.state;if(!yt(e.foundation.outPutValue(l),c)){if(!s&&e.foundation.valueFormatIsCorrect(h))return!1;e.setState({currentValue:c},i)}},setEventDefault:t=>{t.stopPropagation(),t.preventDefault()},setStateVal:(t,r)=>{this.setState({[t]:r})},checkAndUpdateIsInRenderTreeState:()=>{const t=cz(this.sliderEl.current);return t!==this.state.isInRenderTree&&this.setState({isInRenderTree:t}),t},onHandleEnter:t=>{this.setState({focusPos:t})},onHandleLeave:()=>{this.setState({focusPos:""})},onHandleUpBefore:t=>{var r,i;(i=(r=this.props).onMouseUp)===null||i===void 0||i.call(r,t),t.stopPropagation(),t.preventDefault(),Array.from(this.handleDownEventListenerSet).forEach(s=>s()),this.handleDownEventListenerSet.clear()},onHandleUpAfter:()=>{const{currentValue:t}=this.state,r=this.foundation.outPutValue(t);this.props.onAfterChange(r)},unSubscribeEventListener:()=>{Array.from(this.eventListenerSet).forEach(t=>t())}})}componentDidMount(){this.foundation.init()}componentDidUpdate(e,t){const r=!yt(this.props.value,e.value);if(this.props.disabled!==e.disabled&&this.foundation.handleDisabledChange(this.props.disabled),r){const s=this.props.value,o=this.state.currentValue;this.foundation.handleValueChange(o,s),this.props.onAfterChange(this.props.value)}}componentWillUnmount(){this.foundation.destroy()}render(){const{disabled:e,currentValue:t,min:r,max:i}=this.state,s=this.props,{vertical:o,verticalReverse:a,style:h,railStyle:c,range:l,className:d}=s,u=hz(s,["vertical","verticalReverse","style","railStyle","range","className"]),f=L(`${kn}-wrapper`,{[`${kn}-disabled`]:e,[`${Gt.VERTICAL}-wrapper`]:o,[`${kn}-reverse`]:o&&a},d),m=L(`${kn}-boundary`,{[`${kn}-boundary-show`]:this.props.showBoundary&&this.state.showBoundary}),g=L({[`${kn}`]:!o,[Gt.VERTICAL]:o}),y=Array.isArray(t)?[...t].sort():t,v=l?`Range: ${this._getAriaValueText(y[0],0)} to ${this._getAriaValueText(y[1],1)}`:void 0,b=_.createElement("div",Object.assign({className:f,style:h,ref:this.sliderEl,"aria-label":v,onMouseEnter:()=>this.foundation.handleWrapperEnter(),onMouseLeave:()=>this.foundation.handleWrapperLeave()},this.getDataAttr(u)),_.createElement("div",{className:`${kn}-rail`,onClick:this.foundation.handleWrapClick,style:c}),this.renderTrack(),this.renderStepDot(),_.createElement("div",null,this.renderHandle()),this.renderLabel(),_.createElement("div",{className:m},_.createElement("span",{className:`${kn}-boundary-min`},r),_.createElement("span",{className:`${kn}-boundary-max`},i)));return o?b:_.createElement("div",{className:g},b)}_addEventListener(e,t,r){if(e.addEventListener){for(var i=arguments.length,s=new Array(i>3?i-3:0),o=3;o<i;o++)s[o-3]=arguments[o];e.addEventListener(t,r,...s);const a=()=>{e==null||e.removeEventListener(t,r),Promise.resolve().then(()=>{this.eventListenerSet.delete(a)})};return this.eventListenerSet.add(a),a}else return Y}}ty.propTypes={defaultValue:p.oneOfType([p.number,p.array]),disabled:p.bool,showMarkLabel:p.bool,included:p.bool,marks:p.object,max:p.number,min:p.number,range:p.bool,step:p.number,tipFormatter:p.func,value:p.oneOfType([p.number,p.array]),vertical:p.bool,onAfterChange:p.func,onChange:p.func,onMouseUp:p.func,tooltipOnMark:p.bool,tooltipVisible:p.bool,showArrow:p.bool,style:p.object,className:p.string,showBoundary:p.bool,railStyle:p.object,verticalReverse:p.bool,getAriaValueText:p.func,handleDot:p.oneOfType([p.shape({size:p.string,color:p.string}),p.arrayOf(p.shape({size:p.string,color:p.string}))])};ty.defaultProps={disabled:!1,showMarkLabel:!0,tooltipOnMark:!1,included:!0,max:100,min:0,range:!1,showArrow:!0,step:1,tipFormatter:n=>n,vertical:!1,showBoundary:!1,onAfterChange:n=>{},onChange:n=>{},verticalReverse:!1};const ce={TABS:`${te}-tabs`,TABS_BAR:`${te}-tabs-bar`,TABS_BAR_LINE:`${te}-tabs-bar-line`,TABS_BAR_CARD:`${te}-tabs-bar-card`,TABS_BAR_BUTTON:`${te}-tabs-bar-button`,TABS_BAR_SLASH:`${te}-tabs-bar-slash`,TABS_BAR_EXTRA:`${te}-tabs-bar-extra`,TABS_TAB:`${te}-tabs-tab`,TABS_TAB_ACTIVE:`${te}-tabs-tab-active`,TABS_TAB_DISABLED:`${te}-tabs-tab-disabled`,TABS_CONTENT:`${te}-tabs-content`,TABS_CONTENT_ANIMATED:`${te}-tabs-content-animated`,TABS_CONTENT_NO_ANIMATED:`${te}-tabs-content-no-animated`,TABS_PANE:`${te}-tabs-pane`,TABS_PANE_INACTIVE:`${te}-tabs-pane-inactive`,TABS_PANE_ACTIVE:`${te}-tabs-pane-active`,TABS_PANE_MOTION_OVERLAY:`${te}-tabs-pane-motion-overlay`,TABS_PANE_ANIMATING:`${te}-tabs-pane-animating`,TABS_PANE_ANIMATE_LEFT_SHOW:`${te}-tabs-pane-animate-leftShow`,TABS_PANE_ANIMATE_RIGHT_SHOW:`${te}-tabs-pane-animate-rightShow`,TABS_PANE_ANIMATE_TOP_SHOW:`${te}-tabs-pane-animate-topShow`,TABS_PANE_ANIMATE_BOTTOM_SHOW:`${te}-tabs-pane-animate-bottomShow`},Ho={TYPE_MAP:["line","card","button","slash"],SIZE:["small","medium","large"],POSITION_MAP:["top","left"]};class dz extends ze{constructor(e){super(Object.assign({},e)),this.destroy=Y,this.handlePrevent=t=>{t.stopPropagation(),t.preventDefault()},this.handleKeyDown=(t,r,i)=>{const{preventScroll:s}=this.getProps(),o=[...t.target.parentNode.childNodes].filter(a=>oe(a,"attributes.data-tabkey.value","").includes("semiTab")&&oe(a,"attributes.aria-disabled.value","")!=="true");switch(t.key){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":this.determineOrientation(t,o);break;case"Backspace":case"Delete":this.handleDeleteKeyDown(t,o,r,i);break;case"Enter":case" ":this.handleTabClick(r,t),this.handlePrevent(t);break;case"Home":o[0].focus({preventScroll:s}),this.handlePrevent(t);break;case"End":o[o.length-1].focus({preventScroll:s}),this.handlePrevent(t);break}}}init(){this._adapter.collectPane()}_notifyChange(e){const{activeKey:t}=this.getStates();t!==e&&this._adapter.notifyChange(e)}handleTabClick(e,t){this._isInProps("activeKey")?this._notifyChange(e):(this._notifyChange(e),this.handleNewActiveKey(e)),this._adapter.notifyTabClick(e,t)}handleNewActiveKey(e){const{activeKey:t}=this.getStates();t!==e&&this._adapter.setNewActiveKey(e)}getDefaultActiveKey(){let e;const t=this.getProps();return"activeKey"in t?e=t.activeKey:"defaultActiveKey"in t?e=t.defaultActiveKey:e=this._adapter.getDefaultActiveKeyFromChildren(),e}handleTabListChange(){this._adapter.collectPane()}handleTabPanesChange(){this._adapter.collectPane(),this._adapter.collectActiveKey()}handleTabDelete(e){this._adapter.notifyTabDelete(e)}determineOrientation(e,t){const{tabPosition:r}=this.getProps();r==="left"?(e.key==="ArrowUp"||e.key==="ArrowDown")&&(this.switchTabOnArrowPress(e,t),this.handlePrevent(e)):(e.key==="ArrowLeft"||e.key==="ArrowRight")&&(this.switchTabOnArrowPress(e,t),this.handlePrevent(e))}handleDeleteKeyDown(e,t,r,i){const{preventScroll:s}=this.getProps();if(i){this.handleTabDelete(r);const o=t.indexOf(e.target);t.length!==1&&t[o+1>=t.length?o-1:o+1].focus({preventScroll:s})}}switchTabOnArrowPress(e,t){const{preventScroll:r}=this.getProps(),i=t.indexOf(e.target),s={ArrowLeft:-1,ArrowUp:-1,ArrowRight:1,ArrowDown:1};s[e.key]&&i!==void 0&&(t[i+s[e.key]]?t[i+s[e.key]].focus({preventScroll:r}):e.key==="ArrowLeft"||e.key==="ArrowUp"?t[t.length-1].focus({preventScroll:r}):(e.key==="ArrowRight"||e.key=="ArrowDown")&&t[0].focus({preventScroll:r}))}}var uz=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const pz=(n,e)=>{const{tab:t,size:r,type:i,icon:s,selected:o,closable:a,disabled:h,itemKey:c,deleteTabItem:l,tabPosition:d,handleKeyDown:u,onClick:f}=n,m=uz(n,["tab","size","type","icon","selected","closable","disabled","itemKey","deleteTabItem","tabPosition","handleKeyDown","onClick"]),g=G.useMemo(()=>a?_.createElement(uh,{"aria-label":"Close",role:"button",className:`${ce.TABS_TAB}-icon-close`,onClick:O=>l(c,O)}):null,[i,a,l,c]),y=G.useCallback(O=>_.createElement("span",{className:`${ce.TABS_BAR}-icon`},O),[]),v=G.useCallback(O=>{u&&u(O,c,a)},[u,c,a]),b=G.useCallback(O=>{!h&&f&&f(c,O)},[c,h,f]),w=s?y(s):null,C=L(ce.TABS_TAB,`${ce.TABS_TAB}-${i}`,`${ce.TABS_TAB}-${d}`,`${ce.TABS_TAB}-single`,{[ce.TABS_TAB_ACTIVE]:o,[ce.TABS_TAB_DISABLED]:h,[`${ce.TABS_TAB}-small`]:r==="small",[`${ce.TABS_TAB}-medium`]:r==="medium"});return _.createElement("div",Object.assign({role:"tab",id:`semiTab${c}`,"data-tabkey":`semiTab${c}`,"aria-controls":`semiTabPanel${c}`,"aria-disabled":h?"true":"false","aria-selected":o?"true":"false",tabIndex:o?0:-1,onKeyDown:v,onClick:b,className:C},m,{ref:e}),w,t,g)},ny=G.forwardRef(pz);ny.elementType="Tabs.TabItem";var fz=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class Km extends _.Component{constructor(e){var t;super(e),t=this,this.handleItemClick=(r,i)=>{this.props.onTabClick(r,i)},this.handleKeyDown=(r,i,s)=>{this.props.handleKeyDown(r,i,s)},this.renderTabItem=r=>{const{size:i,type:s,deleteTabItem:o,handleKeyDown:a,tabPosition:h}=this.props,c=this._isActive(r.itemKey);return _.createElement(ny,Object.assign({},Um(r,["disabled","icon","itemKey","tab","closable"]),{key:this._getBarItemKeyByItemKey(r.itemKey),selected:c,size:i,type:s,tabPosition:h,handleKeyDown:a,deleteTabItem:o,onClick:this.handleItemClick}))},this.scrollTabItemIntoViewByKey=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"nearest";const s=document.querySelector(`[data-uuid="${t.state.uuid}"] .${ce.TABS_TAB}[data-scrollkey="${r}"]`);s==null||s.scrollIntoView({behavior:"smooth",block:i,inline:i})},this.scrollActiveTabItemIntoView=r=>{const i=this._getBarItemKeyByItemKey(this.props.activeKey);this.scrollTabItemIntoViewByKey(i,r)},this.renderTabComponents=r=>r.map(i=>this.renderTabItem(i)),this.handleArrowClick=(r,i)=>{const s=i==="start"?r.pop():r.shift();if(!s)return;const o=this._getBarItemKeyByItemKey(s.itemKey);this.scrollTabItemIntoViewByKey(o)},this.renderCollapse=(r,i,s)=>{var o;const a=L({[`${ce.TABS_BAR}-arrow-${s}`]:s,[`${ce.TABS_BAR}-arrow`]:!0});if(vr(r))return _.createElement("div",{role:"presentation",className:a},_.createElement(He,{disabled:!0,icon:i,theme:"borderless"}));const{dropdownClassName:h,dropdownStyle:c,showRestInDropdown:l,dropdownProps:d}=this.props,{rePosKey:u}=this.state,f=!r.length,m=_.createElement(Ze.Menu,null,r.map(b=>{const{icon:w,tab:C,itemKey:O}=b,x=w?this.renderIcon(b.icon):null;return _.createElement(Ze.Item,{key:O,onClick:P=>this.handleItemClick(O,P),active:this._isActive(O)},x,C)})),g=_.createElement("div",{role:"presentation",className:a,onClick:b=>this.handleArrowClick(r,s)},_.createElement(He,{disabled:f,icon:i,theme:"borderless"})),y=L(h,{[`${ce.TABS_BAR}-dropdown`]:!0}),v=(o=d==null?void 0:d[s])!==null&&o!==void 0?o:{};return _.createElement(_.Fragment,null,l?_.createElement(Ze,Object.assign({className:y,clickToHide:!0,clickTriggerToHide:!0,key:`${u}-${s}`,position:s==="start"?"bottomLeft":"bottomRight",render:f?null:m,showTick:!0,style:c,trigger:"hover",disableFocusListener:!0},v),g):g)},this.renderOverflow=r=>r.map((i,s)=>{const o=s===0?"start":"end",a=s===0?_.createElement(kF,null):_.createElement(Gm,null),h=this.renderCollapse(i,a,o);return this.props.renderArrow?this.props.renderArrow(i,o,()=>this.handleArrowClick(i,o),h):h}),this.renderCollapsedTab=()=>{const{list:r}=this.props,i=r.map(s=>{const{itemKey:o}=s;return Object.assign({key:this._getBarItemKeyByItemKey(o),active:this._isActive(o)},s)});return _.createElement(ia,{items:i,overflowRenderDirection:this.props.arrowPosition,wrapperStyle:this.props.visibleTabsStyle,overflowRenderer:this.renderOverflow,renderMode:"scroll",className:`${ce.TABS_BAR}-overflow-list`,visibleItemRenderer:this.renderTabItem,onVisibleStateChange:s=>{var o,a;const h=new Map;s.forEach((c,l)=>{h.set(this._getItemKeyByBarItemKey(l),c)}),(a=(o=this.props).onVisibleTabsChange)===null||a===void 0||a.call(o,h)}})},this.renderWithMoreTrigger=()=>{const{list:r,more:i}=this.props;let s=[],o=_.createElement("div",{className:L({[`${ce.TABS_BAR}-more-trigger`]:!0,[`${ce.TABS_BAR}-more-trigger-${this.props.type}`]:!0})},_.createElement(jn,{componentName:"Tabs"},(h,c)=>_.createElement("div",{className:`${ce.TABS_BAR}-more-trigger-content`},_.createElement("div",null,h.more),_.createElement(Ul,{className:`${ce.TABS_BAR}-more-trigger-content-icon`})))),a;if(typeof i=="number")a=r.length-Math.min(i,r.length),s=r.slice(0,a).map(h=>this.renderTabItem(h));else if(typeof i=="object")a=r.length-Math.min(i.count,r.length),s=r.slice(0,a).map(h=>this.renderTabItem(h)),i.render&&(o=i.render());else if(i!==void 0)throw new Error("[Semi Tabs]: invalid tab props format: more");return _.createElement(_.Fragment,null,s,this.renderMoreDropdown(r.slice(a),i==null?void 0:i.dropdownProps,o))},this.renderMoreDropdown=(r,i,s)=>_.createElement(Ze,Object.assign({trigger:"hover",showTick:!0,position:"bottomLeft",className:`${ce.TABS_BAR}-more-dropdown-${this.props.type}`,clickToHide:!0,menu:r.map(o=>({node:"item",name:o.tab,icon:o.icon,onClick:a=>this.props.onTabClick(o.itemKey,a),active:this.props.activeKey===o.itemKey}))},i),s),this._isActive=r=>r===this.props.activeKey,this._getBarItemKeyByItemKey=r=>`${r}-bar`,this._getItemKeyByBarItemKey=r=>r.replace(/-bar$/,""),this.state={endInd:e.list.length,rePosKey:0,startInd:0,uuid:"",currentVisibleItems:[]}}componentDidMount(){this.setState({uuid:nR()})}componentDidUpdate(e){e.activeKey!==this.props.activeKey&&this.props.collapsible&&this.scrollActiveTabItemIntoView()}renderIcon(e){return _.createElement("span",null,e)}renderExtra(){const{tabBarExtraContent:e,type:t,size:r}=this.props,i={float:"right"},s=e&&e.props?e.props.style:{},o=L(ce.TABS_BAR_EXTRA,{[`${ce.TABS_BAR}-${t}-extra`]:t,[`${ce.TABS_BAR}-${t}-extra-${r}`]:r});if(e){const a=Object.assign(Object.assign({},i),s);return _.createElement("div",{className:o,style:a,"x-semi-prop":"tabBarExtraContent"},e)}return null}render(){const e=this.props,{type:t,style:r,className:i,list:s,tabPosition:o,more:a,collapsible:h}=e,c=fz(e,["type","style","className","list","tabPosition","more","collapsible"]),l=L(i,{[ce.TABS_BAR]:!0,[ce.TABS_BAR_LINE]:t==="line",[ce.TABS_BAR_CARD]:t==="card",[ce.TABS_BAR_BUTTON]:t==="button",[ce.TABS_BAR_SLASH]:t==="slash",[`${ce.TABS_BAR}-${o}`]:o,[`${ce.TABS_BAR}-collapse`]:h}),d=this.renderExtra(),u=h?this.renderCollapsedTab():a?this.renderWithMoreTrigger():this.renderTabComponents(s);return _.createElement("div",Object.assign({role:"tablist","aria-orientation":o==="left"?"vertical":"horizontal",className:l,style:r},Ca(c),{"data-uuid":this.state.uuid}),u,d)}}Km.propTypes={activeKey:p.string,className:p.string,collapsible:p.bool,list:p.array,onTabClick:p.func,size:p.oneOf(Ho.SIZE),style:p.object,tabBarExtraContent:p.node,tabPosition:p.oneOf(Ho.POSITION_MAP),type:p.oneOf(Ho.TYPE_MAP),closable:p.bool,deleteTabItem:p.func,more:p.oneOfType([p.number,p.object])};const u3=_.createContext({});var gz=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class oa extends G.PureComponent{constructor(){super(...arguments),this.ref=G.createRef(),this.getDirection=(e,t,r,i)=>{if(t!==null&&e!==null&&Array.isArray(r)&&r.length){const s=r.findIndex(h=>h.itemKey===e),o=r.findIndex(h=>h.itemKey===t),a=r.findIndex(h=>h.itemKey===i);return s===o?a>s:o<s}return!1},this.shouldRender=()=>{const{itemKey:e}=this.props,{activeKey:t,lazyRender:r}=this.context,i=t===e;return this._active=this._active||i,r?this._active:!0}}render(){const{tabPaneMotion:e,tabPosition:t,prevActiveKey:r}=this.context,i=this.props,{className:s,style:o,children:a,itemKey:h,tabIndex:c}=i,l=gz(i,["className","style","children","itemKey","tabIndex"]),d=this.context.activeKey===h,u=L(s,{[ce.TABS_PANE_INACTIVE]:!d,[ce.TABS_PANE_ACTIVE]:d,[ce.TABS_PANE]:!0}),f=this.shouldRender(),m=(()=>{const v=this.getDirection(this.context.activeKey,h,this.context.panes,r);return t==="top"?v?ce.TABS_PANE_ANIMATE_RIGHT_SHOW:ce.TABS_PANE_ANIMATE_LEFT_SHOW:v?ce.TABS_PANE_ANIMATE_BOTTOM_SHOW:ce.TABS_PANE_ANIMATE_TOP_SHOW})(),g=!this.context.panes.find(v=>v.itemKey===r),y=e&&d&&!g&&!this.context.forceDisableMotion;return _.createElement("div",Object.assign({ref:this.ref,role:"tabpanel",id:`semiTabPanel${h}`,"aria-labelledby":`semiTab${h}`,className:u,style:o,"aria-hidden":d?"false":"true",tabIndex:c||0},Ca(l),{"x-semi-prop":"children"}),_.createElement(Rs,{motion:y,animationState:d?"enter":"leave",startClassName:m},v=>{let{animationClassName:b,animationEventsNeedBind:w}=v;return _.createElement("div",Object.assign({className:L(ce.TABS_PANE_MOTION_OVERLAY,b),"x-semi-prop":"children"},w),f?a:null)}))}}oa.isTabPane=!0;oa.contextType=u3;oa.propTypes={className:p.string,style:p.object,children:p.node,disabled:p.bool,itemKey:p.string,tab:p.node,icon:p.node,closable:p.bool};var mz=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const d2=["className","style","disabled","itemKey","tab","icon"];class Ls extends Ee{constructor(e){super(e),this.setContentRef=t=>{this.contentRef={current:t}},this.getPanes=()=>{const{tabList:t,children:r}=this.props;return Array.isArray(t)&&t.length?t:_.Children.map(r,i=>{if(i){const{tab:s,icon:o,disabled:a,itemKey:h,closable:c}=i.props;return{tab:s,icon:o,disabled:a,itemKey:h,closable:c}}})},this.onTabClick=(t,r)=>{this.foundation.handleTabClick(t,r)},this.rePosChildren=(t,r)=>{const i=[],s=_.Children.toArray(t);return t.length&&(i.push(...s.filter(o=>o.props&&o.props.itemKey===r)),i.push(...s.filter(o=>o.props&&o.props.itemKey!==r))),i},this.getActiveItem=()=>{const{activeKey:t}=this.state,{children:r,tabList:i}=this.props;return i||!Array.isArray(r)?r:_.Children.toArray(r).filter(s=>G.isValidElement(s)&&s.type&&s.type.isTabPane?s.props.itemKey===t:!0)},this.deleteTabItem=(t,r)=>{r.stopPropagation(),this.foundation.handleTabDelete(t)},this.foundation=new dz(this.adapter),this.state={activeKey:this.foundation.getDefaultActiveKey(),panes:this.getPanes(),prevActiveKey:null,forceDisableMotion:!1},this.contentRef=G.createRef(),this.contentHeight="auto"}get adapter(){return Object.assign(Object.assign({},super.adapter),{collectPane:()=>{const e=this.getPanes();this.setState({panes:e})},collectActiveKey:()=>{const{tabList:e,children:t,activeKey:r}=this.props;if(typeof r<"u")return;const{activeKey:i}=this.state,s=this.getPanes();s.findIndex(o=>o.itemKey===i)===-1&&(s.length>0?this.setState({activeKey:s[0].itemKey}):this.setState({activeKey:""}))},notifyTabClick:(e,t)=>{this.props.onTabClick(e,t)},notifyChange:e=>{this.props.onChange(e)},setNewActiveKey:e=>{this.setState({activeKey:e})},getDefaultActiveKeyFromChildren:()=>{const{tabList:e,children:t}=this.props;let r="";return(e||_.Children.toArray(t).map(s=>G.isValidElement(s)?s.props:null)).forEach(s=>{s&&!r&&!s.disabled&&(r=s.itemKey)}),r},notifyTabDelete:e=>{this.props.onTabClose&&this.props.onTabClose(e)}})}static getDerivedStateFromProps(e,t){const r={};return!tn(e.activeKey)&&e.activeKey!==t.activeKey&&(t.prevActiveKey=t.activeKey,r.activeKey=e.activeKey),r}componentDidUpdate(e,t){const r=_.Children.toArray(e.children).map(o=>Um(G.isValidElement(o)?o.props:null,d2)),i=_.Children.toArray(this.props.children).map(o=>Um(G.isValidElement(o)?o.props:null,d2)),s=this.props.tabList||e.tabList;if(yt(this.props.tabList,e.tabList)||this.foundation.handleTabListChange(),t.activeKey!==this.state.activeKey&&t.activeKey!==this.state.prevActiveKey&&this.setState({prevActiveKey:t.activeKey}),e.activeKey!==this.props.activeKey){const o=(()=>{const a=new Set(r.map(h=>h.itemKey));return i.map(h=>h.itemKey).filter(h=>!a.has(h))})();this.setState({forceDisableMotion:o.includes(this.props.activeKey)})}!yt(r,i)&&!s&&this.foundation.handleTabPanesChange()}render(){const e=this.props,{children:t,className:r,collapsible:i,contentStyle:s,keepDOM:o,lazyRender:a,renderTabBar:h,showRestInDropdown:c,size:l,style:d,tabBarClassName:u,tabBarExtraContent:f,tabBarStyle:m,tabPaneMotion:g,tabPosition:y,type:v,more:b,onVisibleTabsChange:w,visibleTabsStyle:C,arrowPosition:O,renderArrow:x,dropdownProps:P}=e,T=mz(e,["children","className","collapsible","contentStyle","keepDOM","lazyRender","renderTabBar","showRestInDropdown","size","style","tabBarClassName","tabBarExtraContent","tabBarStyle","tabPaneMotion","tabPosition","type","more","onVisibleTabsChange","visibleTabsStyle","arrowPosition","renderArrow","dropdownProps"]),{panes:k,activeKey:E}=this.state,I=L(r,{[ce.TABS]:!0,[`${ce.TABS}-${y}`]:y}),M=L({[ce.TABS_CONTENT]:!0,[`${ce.TABS_CONTENT}-${y}`]:y}),R={activeKey:E,className:u,collapsible:i,list:k,onTabClick:this.onTabClick,showRestInDropdown:c,size:l,style:m,tabBarExtraContent:f,tabPosition:y,type:v,deleteTabItem:this.deleteTabItem,handleKeyDown:this.foundation.handleKeyDown,more:b,onVisibleTabsChange:w,visibleTabsStyle:C,arrowPosition:O,renderArrow:x,dropdownProps:P},U=h?h(R,Km):_.createElement(Km,Object.assign({},R)),V=o?t:this.getActiveItem();return _.createElement("div",Object.assign({className:I,style:d},this.getDataAttr(T)),U,_.createElement(u3.Provider,{value:{activeKey:E,lazyRender:a,panes:k,tabPaneMotion:g,tabPosition:y,prevActiveKey:this.state.prevActiveKey,forceDisableMotion:this.state.forceDisableMotion}},_.createElement("div",{ref:this.setContentRef,className:M,style:Object.assign({},s)},V)))}}Ls.TabPane=oa;Ls.TabItem=ny;Ls.propTypes={activeKey:p.string,className:p.string,collapsible:p.bool,contentStyle:p.oneOfType([p.object]),defaultActiveKey:p.string,keepDOM:p.bool,lazyRender:p.bool,onChange:p.func,onTabClick:p.func,renderTabBar:p.func,showRestInDropdown:p.bool,size:p.oneOf(Ho.SIZE),style:p.object,tabBarClassName:p.string,tabBarExtraContent:p.node,tabBarStyle:p.object,tabList:p.array,tabPaneMotion:p.bool,tabPosition:p.oneOf(Ho.POSITION_MAP),type:p.oneOf(Ho.TYPE_MAP),onTabClose:p.func,preventScroll:p.bool,more:p.oneOfType([p.number,p.object]),arrowPosition:p.string,renderArrow:p.func,dropdownProps:p.object};Ls.__SemiComponentName__="Tabs";Ls.defaultProps=Tn(Ls.__SemiComponentName__,{children:[],collapsible:!1,keepDOM:!0,lazyRender:!1,onChange:()=>{},onTabClick:()=>{},size:"large",tabPaneMotion:!0,tabPosition:"top",type:"line",onTabClose:()=>{},showRestInDropdown:!0,arrowPosition:"both"});class ry extends ze{constructor(e){super(Object.assign(Object.assign({},ry.defaultAdapter),e)),this.handleMouseInSideChange=t=>{this._adapter.handleMouseInSideChange(t)},this.getInputWrapperRect=()=>this._adapter.getInputWrapperRect()}hasToast(e){return this._adapter.getState("list").map(r=>{let{id:i}=r;return i}).includes(e)}addToast(e){const t=this._adapter.getState("list");t.push(e),this._adapter.updateToast(t,[],[])}updateToast(e,t){let r=this._adapter.getState("list");r=r.map(s=>s.id===e?Object.assign(Object.assign({},s),t):s);const i=r.filter(s=>s.id===e);this._adapter.updateToast(r,[],i)}removeToast(e){let t=this._adapter.getState("list");const r=[];t=t.filter(i=>i.id===e?(r.push(i),!1):!0),this._adapter.updateToast(t,r,[])}destroyAll(){const e=this._adapter.getState("list");e.length>0&&this._adapter.updateToast([],e,[])}}const Xf=`${te}-toast`,wo={PREFIX:Xf,WRAPPER:`${Xf}-wrapper`,LIST:`${Xf}-list`},Cl={types:["warning","success","info","error","default"],themes:["normal","light"],directions:["ltr","rtl"]},vz={duration:3};class iy extends ze{constructor(e){super(Object.assign(Object.assign({},iy.defaultAdapter),e)),this._timer=null,this._id=null}init(){this.startCloseTimer_(),this._id=this._adapter.getProp("id")}destroy(){this.clearCloseTimer_()}startCloseTimer_(){const e=this._adapter.getProp("duration");e&&Ri(e)&&(this._timer=setTimeout(()=>{this.close()},e*1e3))}close(e){e&&e.stopPropagation(),this._adapter.notifyWrapperToRemove(this._id),this._adapter.notifyClose()}clearCloseTimer_(){this._timer&&(clearTimeout(this._timer),this._timer=null)}restartCloseTimer(){this.clearCloseTimer_(),this.startCloseTimer_()}}const Hn=wo.PREFIX;let js=class extends Ee{constructor(e){super(e),this.toastEle=_.createRef(),this.clearCloseTimer=()=>{this.foundation.clearCloseTimer_()},this.startCloseTimer=()=>{this.foundation.startCloseTimer_()},this.restartCloseTimer=()=>{this.foundation.restartCloseTimer()},this.state={},this.foundation=new iy(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyWrapperToRemove:e=>{this.props.close(e)},notifyClose:()=>{this.props.onClose()}})}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}close(e){this.foundation.close(e)}renderIcon(){const{type:e,icon:t}=this.props,i={warning:_.createElement(Mv,null),success:_.createElement(kx,null),info:_.createElement(Tx,null),error:_.createElement(Px,null)}[e],s="large",o=L(`${Hn}-icon`,`${Hn}-icon-${e}`);return t?tr(t)?_.cloneElement(t,{size:s,className:`${Hn}-icon`}):t:e&&i?_.cloneElement(i,{size:s,className:o}):null}render(){const{content:e,type:t,theme:r,showClose:i,textMaxWidth:s,className:o,style:a}=this.props,h=this.props.direction||this.context.direction,c=L(Hn,o,{[`${Hn}-${t}`]:!0,[`${Hn}-${r}`]:r==="light",[`${Hn}-rtl`]:h==="rtl"}),l={};l.maxWidth=s;const d="borderless",u="small",f=this.props.positionInList?this.props.positionInList.length-this.props.positionInList.index-1:0,m=_.createElement("div",{ref:this.toastEle,role:"alert","aria-label":`${t||"default"} type`,className:c,style:Object.assign(Object.assign({},a),{transform:`translate3d(0,0,${f*-10}px)`}),onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onAnimationStart:this.props.onAnimationStart,onAnimationEnd:this.props.onAnimationEnd},_.createElement("div",{className:`${Hn}-content`},this.renderIcon(),_.createElement("span",{className:`${Hn}-content-text`,style:l,"x-semi-prop":"content"},e),i&&_.createElement("div",{className:`${Hn}-close-button`},_.createElement(Ys,{onClick:g=>this.close(g),type:"tertiary",icon:_.createElement(uh,{"x-semi-prop":"icon"}),theme:d,size:u}))));if(this.props.stack){const g=this.props.stackExpanded&&this.toastEle.current&&getComputedStyle(this.toastEle.current).height||0;return _.createElement("div",{className:`${Hn}-zero-height-wrapper`,style:{height:g}},m)}else return m}};js.contextType=Wi;js.propTypes={onClose:p.func,content:p.node,close:p.func,duration:p.number,theme:p.oneOf(Cl.themes),type:p.oneOf(Cl.types),textMaxWidth:p.oneOfType([p.string,p.number]),style:p.object,className:p.string,showClose:p.bool,stack:p.bool,stackExpanded:p.bool,icon:p.node,direction:p.oneOf(Cl.directions)};js.__SemiComponentName__="Toast";js.defaultProps=Tn(js.__SemiComponentName__,{onClose:Y,content:"",close:Y,duration:vz.duration,textMaxWidth:450,showClose:!0,stack:!1,stackExpanded:!1,theme:"normal"});var yz=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const bz=(n,e)=>{var{afterClose:t}=n,r=yz(n,["afterClose"]);const[i,s]=G.useState(!0),o=()=>{s(!1)};return _.useImperativeHandle(e,()=>({close:()=>{s(!1)}})),G.useEffect(()=>{i||t(r.id)},[i]),i?_.createElement(js,Object.assign({},r,{close:o})):null},_z=_.forwardRef(bz),Xa={motion:!0,zIndex:1010,duration:3};function wz(){const[n,e]=_.useState([]);function t(r,i){return e(s=>[{element:r,config:i},...s]),s=>{e(o=>o.filter(a=>{let{config:h}=a;return h.id!==s}))}}return[n,t]}function Sz(){const[n,e]=wz(),t=G.useRef(new Map),r=s=>{const o=xd("semi_toast_"),a=Object.assign(Object.assign({},s),{id:o});let h;const c=_.createElement(_z,Object.assign({},a,{key:o,afterClose:l=>h(l),ref:l=>{var d;t.current.set(o,{close:(d=l==null?void 0:l.close)!==null&&d!==void 0?d:Y})}}));return h=e(c,Object.assign({},a)),o},i=s=>{var o;const{close:a}=(o=t.current.get(s))!==null&&o!==void 0?o:{};a==null||a()};return[{success:s=>r(Object.assign(Object.assign(Object.assign({},Xa),s),{type:"success"})),info:s=>r(Object.assign(Object.assign(Object.assign({},Xa),s),{type:"info"})),error:s=>r(Object.assign(Object.assign(Object.assign({},Xa),s),{type:"error"})),warning:s=>r(Object.assign(Object.assign(Object.assign({},Xa),s),{type:"warning"})),open:s=>r(Object.assign(Object.assign(Object.assign({},Xa),s),{type:"default"})),close:s=>i(s)},_.createElement(_.Fragment,null,Array.isArray(n)&&n.length?_.createElement(_.Fragment,null,n.map(s=>s.element)):null)]}const Cz=()=>{var n;return n=class ke extends Ee{constructor(t){super(t),this.stack=!1,this.innerWrapperRef=_.createRef(),this.handleMouseEnter=r=>{this.stack&&this.foundation.handleMouseInSideChange(!0)},this.handleMouseLeave=r=>{var i;this.stack&&(!((i=this.foundation.getInputWrapperRect())===null||i===void 0)&&i.height)&&this.foundation.handleMouseInSideChange(!1)},this.state={list:[],removedItems:[],updatedItems:[],mouseInSide:!1},this.foundation=new ry(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{updateToast:(t,r,i)=>{this.setState({list:t,removedItems:r,updatedItems:i})},handleMouseInSideChange:t=>{this.setState({mouseInSide:t})},getInputWrapperRect:()=>{var t;return(t=this.innerWrapperRef.current)===null||t===void 0?void 0:t.getBoundingClientRect()}})}static create(t){var r;const i=(r=t.id)!==null&&r!==void 0?r:xd("toast");if(ke.ref){const s=document.querySelector(`#${this.wrapperId}`);["top","left","bottom","right"].map(o=>{o in t&&(s.style[o]=typeof t[o]=="number"?`${t[o]}px`:t[o])}),!!t.stack!==ke.ref.stack&&(ke.ref.stack=!!t.stack),ke.ref.has(i)?ke.ref.update(i,Object.assign(Object.assign({},t),{id:i})):ke.ref.add(Object.assign(Object.assign({},t),{id:i}))}else{const s=document.createElement("div");this.wrapperId||(this.wrapperId=xd("toast-wrapper").slice(0,26)),s.className=wo.WRAPPER,s.id=this.wrapperId,s.style.zIndex=String(typeof t.zIndex=="number"?t.zIndex:ke.defaultOpts.zIndex),["top","left","bottom","right"].map(o=>{if(o in ke.defaultOpts||o in t){const a=t[o]?t[o]:ke.defaultOpts[o];s.style[o]=typeof a=="number"?`${a}px`:a}}),ke.defaultOpts.getPopupContainer?ke.defaultOpts.getPopupContainer().appendChild(s):document.body.appendChild(s),nr.render(_.createElement(ke,{ref:o=>ke.ref=o}),s,()=>{ke.ref.add(Object.assign(Object.assign({},t),{id:i})),ke.ref.stack=!!t.stack})}return i}static close(t){ke.ref&&ke.ref.remove(t)}static destroyAll(){if(ke.ref){ke.ref.destroyAll();const t=document.querySelector(`#${this.wrapperId}`);nr.unmountComponentAtNode(t),t&&t.parentNode.removeChild(t),ke.ref=null,this.wrapperId=null}}static getWrapperId(){return this.wrapperId}static info(t){return typeof t=="string"&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},ke.defaultOpts),t),{type:"info"}))}static warning(t){return typeof t=="string"&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},ke.defaultOpts),t),{type:"warning"}))}static error(t){return typeof t=="string"&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},ke.defaultOpts),t),{type:"error"}))}static success(t){return typeof t=="string"&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},ke.defaultOpts),t),{type:"success"}))}static config(t){["top","left","bottom","right"].forEach(r=>{r in t&&(ke.defaultOpts[r]=t[r])}),typeof t.theme=="string"&&Cl.themes.includes(t.theme)&&(ke.defaultOpts.theme=t.theme),typeof t.zIndex=="number"&&(ke.defaultOpts.zIndex=t.zIndex),typeof t.duration=="number"&&(ke.defaultOpts.duration=t.duration),typeof t.getPopupContainer=="function"&&(ke.defaultOpts.getPopupContainer=t.getPopupContainer)}has(t){return this.foundation.hasToast(t)}add(t){return this.foundation.addToast(t)}update(t,r){return this.foundation.updateToast(t,r)}remove(t){return this.foundation.removeToast(t)}destroyAll(){return this.foundation.destroyAll()}render(){let{list:t}=this.state;const{removedItems:r,updatedItems:i}=this.state;t=Array.from(new Set([...t,...r]));const s=i.map(a=>{let{id:h}=a;return h}),o=a=>{var h;!((h=a==null?void 0:a.foundation)===null||h===void 0)&&h._id&&s.includes(a.foundation._id)&&a.foundation.restartCloseTimer()};return _.createElement(_.Fragment,null,_.createElement("div",{className:L({[`${wo.PREFIX}-innerWrapper`]:!0,[`${wo.PREFIX}-innerWrapper-hover`]:this.state.mouseInSide}),ref:this.innerWrapperRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},t.map((a,h)=>{const c=r.find(l=>l.id===a.id)!==void 0;return _.createElement(Rs,{key:a.id,motion:a.motion,animationState:c?"leave":"enter",startClassName:c?`${wo.PREFIX}-animation-hide`:`${wo.PREFIX}-animation-show`},l=>{let{animationClassName:d,animationEventsNeedBind:u,isAnimating:f}=l;return c&&!f?null:_.createElement(js,Object.assign({},a,{stack:this.stack,stackExpanded:this.state.mouseInSide,positionInList:{length:t.length,index:h},className:L({[a.className]:!!a.className,[d]:!0})},u,{style:Object.assign({},a.style),close:m=>this.remove(m),ref:o}))})})))}},n.defaultOpts={motion:!0,zIndex:1010,content:""},n.propTypes={content:p.node,duration:p.number,onClose:p.func,icon:p.node,direction:p.oneOf(Cl.directions),stack:p.bool},n.defaultProps={},n};class xz{static create(e){const t=Cz();return t.useToast=Sz,e&&t.config(e),t}}const Oz=xz.create(),At=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Math.pow(10,e);return Math.round(t*n)/t},Pz={grad:360/400,turn:360,rad:360/(Math.PI*2)},p3=n=>ly(sy(n)),sy=n=>{n[0]==="#"&&(n=n.substring(1));const e=t=>{const r=parseInt(t,16);return isNaN(r)?1:r/255};return{r:parseInt(n.substring(0,2),16),g:parseInt(n.substring(2,4),16),b:parseInt(n.substring(4,6),16),a:e(n.substring(6,8))}},Ez=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"deg";return Number(n)*(Pz[e]||1)},oy=n=>Vl(Ma(n)),f3=n=>{let{h:e,s:t,v:r,a:i}=n;const s=(200-t)*r/100;return{h:At(e),s:At(s>0&&s<200?t*r/100/(s<=100?s:200-s)*100:0),l:At(s/2),a:At(i,2)}},g3=n=>{const{h:e,s:t,l:r}=f3(n);return`hsl(${e}, ${t}%, ${r}%)`},Wm=n=>{const{h:e,s:t,l:r,a:i}=f3(n);return`hsla(${e}, ${t}%, ${r}%, ${i})`},Ma=n=>{let{h:e,s:t,v:r,a:i}=n;e=e/360*6,t=t/100,r=r/100;const s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),h=r*(1-(1-e+s)*t),c=s%6;return{r:At([r,a,o,o,h,r][c]*255),g:At([h,r,r,a,o,o][c]*255),b:At([o,o,h,r,r,a][c]*255),a:At(i,2)}},Tz=n=>{const{r:e,g:t,b:r,a:i}=Ma(n);return`rgba(${e}, ${t}, ${r}, ${i})`},kz=n=>{const t=/hsva?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(n);return t?Mz({h:Ez(t[1],t[2]),s:Number(t[3]),v:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)}):{h:0,s:0,v:0,a:1}},ay=n=>ly(Lp(n)),Lp=n=>{const t=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(n);return t?{r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}:{r:0,g:0,b:0,a:1}},Az=Lp,Iz=ay,io=n=>{const e=n.toString(16);return e.length<2?"0"+e:e},Vl=n=>{let{r:e,g:t,b:r,a:i}=n;const s=o=>Math.round(o/100*255).toString(16).padStart(2,"0").toLowerCase();return i===void 0||i===1?"#"+io(e)+io(t)+io(r):"#"+io(e)+io(t)+io(r)+s(i*100)},ly=n=>{let{r:e,g:t,b:r,a:i}=n;const s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:At(60*(a<0?a+6:a)),s:At(s?o/s*100:0),v:At(s/255*100),a:i}},Mz=n=>({h:At(n.h),s:At(n.s),v:At(n.v),a:At(n.a,2)});class ft extends ze{constructor(e){super(Object.assign({},e)),this.handleChangeH=(t,r)=>{const i=Object.assign(Object.assign({},t.hsva),{h:r}),s=Ma(i),o=oy(i),a={rgba:s,hsva:i,hex:o};this._adapter.notifyChange(a),this.getProp("value")||this._adapter.setState({currentColor:a})},this.handleChangeA=(t,r)=>{let i=this._adapter.getProp("alpha");i||(r=1);const s=Object.assign(Object.assign({},t.rgba),{a:r}),o=Vl(s);t={rgba:s,hex:i?o:o.slice(0,7),hsva:Object.assign(Object.assign({},t.hsva),{a:r})},this._adapter.notifyChange(t),this.getProp("value")||this._adapter.setState({currentColor:t})},this.getCurrentColor=()=>{const t=this.getProp("value"),r=this.getState("currentColor");return t||r},this.handleChange=(t,r)=>{let i;if(r==="hsva")i={hsva:t,rgba:ft.hsvaToRgba(t),hex:ft.hsvaToHex(t)};else if(r==="rgba")i={rgba:t,hsva:ft.rgbaToHsva(t),hex:ft.rgbaToHex(t)};else if(r==="hex")i={hex:t,hsva:ft.hexToHsva(t),rgba:ft.hexToRgba(t)};else throw new Error("format error");this._adapter.notifyChange(i),this.getProp("value")||this._adapter.setState({currentColor:i})},this.handleAlphaChangeByHandle=t=>{this.handleChangeA(this.getCurrentColor(),t.a)},this.handleColorChangeByHandle=t=>{this.handleChangeH(this.getCurrentColor(),t.h)},this.getHandlePositionByHSVA=(t,r,i)=>{let{width:s,height:o}=r;const a={x:t.s/100*s,y:(1-t.v/100)*o};return{x:a.x-i/2,y:a.y-i/2}},this.getHandlePositionByMousePosition=(t,r,i)=>{let{width:s,height:o}=r;return t.x>s||t.x<0||t.y>o||t.y<0?null:{x:t.x-i/2,y:t.y-i/2}},this.getAlphaHandlePositionByMousePosition=(t,r,i)=>t<0||t>r?null:t-i/2,this.getColorHandlePositionByMousePosition=(t,r,i)=>t<0||t>r?null:t-i/2}}ft.hsvaToRgba=Ma;ft.rgbaToHsva=ly;ft.rgbaToHex=Vl;ft.hsvaToHex=oy;ft.hexToRgba=sy;ft.hexToHsva=p3;ft.hsvaToHslaString=Wm;ft.hsvaToHslString=g3;ft.rgbaStringToHsva=ay;ft.rgbaStringToRgba=Lp;const Dt={PREFIX:`${te}-colorPicker`};class Nz extends ze{constructor(e){super(Object.assign({},e)),this.getHandlePositionByHSVA=()=>{const{hsva:t,width:r,height:i,handleSize:s}=this.getProps();return this._adapter.getColorPickerFoundation().getHandlePositionByHSVA(t,{width:r,height:i},s)},this.handleMouseDown=t=>{this._adapter.handleMouseDown(t)},this.handleMouseUp=t=>{this._adapter.handleMouseUp(t)},this.setHandlePositionByMousePosition=t=>{var r;const i=(r=this._adapter.getDOM())===null||r===void 0?void 0:r.getBoundingClientRect();if(!i)return;const s={x:t.clientX-i.x,y:t.clientY-i.y},{width:o,height:a,handleSize:h}=this.getProps(),l=this._adapter.getColorPickerFoundation().getHandlePositionByMousePosition(s,{width:o,height:a},h);l&&(this.setState({handlePosition:l}),this._adapter.notifyChange({s:Math.round(s.x/o*100),v:Math.round(100-Math.min(Math.max(s.y/a,0),1)*100)}))}}}class Dz extends Ee{constructor(e){super(e),this.handleClick=t=>{this.foundation.setHandlePositionByMousePosition(t),this.foundation.handleMouseDown(t)},this.foundation=new Nz(this.adapter),this.state={handlePosition:this.foundation.getHandlePositionByHSVA(),isHandleGrabbing:!1},this.ref=_.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{getColorPickerFoundation:()=>this.props.foundation,handleMouseDown:e=>{this.setState({isHandleGrabbing:!0}),this.ref.current.addEventListener("mousemove",this.foundation.setHandlePositionByMousePosition),window.addEventListener("mouseup",this.foundation.handleMouseUp)},handleMouseUp:()=>{this.ref.current.removeEventListener("mousemove",this.foundation.setHandlePositionByMousePosition),window.removeEventListener("mouseup",this.foundation.handleMouseUp),this.setState({isHandleGrabbing:!1})},getDOM:()=>this.ref.current,notifyChange:e=>this.props.onChange(e)})}componentDidUpdate(e,t,r){JSON.stringify(e.hsva)!==JSON.stringify(this.props.hsva)&&this.setState({handlePosition:this.foundation.getHandlePositionByHSVA()})}render(){const e=g3({h:this.props.hsva.h,s:100,v:100,a:1}),t=Ma(this.props.hsva);return _.createElement("div",{className:L(`${Dt.PREFIX}-colorChooseArea`,this.props.className),style:Object.assign({backgroundColor:e,width:this.props.width,height:this.props.height,cursor:this.state.isHandleGrabbing?"grabbing":"pointer"},this.props.style),ref:this.ref,"aria-label":"Color",onMouseDown:this.handleClick,"aria-valuetext":`Saturation ${At(this.props.hsva.s)}%, Brightness ${At(this.props.hsva.v)}%`},_.createElement("div",{className:`${Dt.PREFIX}-handle`,style:{width:this.props.handleSize,height:this.props.handleSize,left:this.state.handlePosition.x,top:this.state.handlePosition.y,backgroundColor:`rgba(${t.r},${t.g},${t.b},${t.a})`},onMouseDown:r=>this.foundation.handleMouseDown(r)}))}}class $z extends ze{constructor(e){super(Object.assign({},e)),this.handleMouseDown=t=>{this._adapter.handleMouseDown(t)},this.handleMouseUp=t=>{this._adapter.handleMouseUp(t)},this.setHandlePositionByMousePosition=t=>{var r;const i=(r=this._adapter.getDOM())===null||r===void 0?void 0:r.getBoundingClientRect();if(!i)return;const{width:s,handleSize:o}=this._adapter.getProps(),a=this._adapter.getColorPickerFoundation(),h=t.clientX-i.x,c=a.getAlphaHandlePositionByMousePosition(h,s,o);a.handleAlphaChangeByHandle({a:Number(Math.min(Math.max(h/s,0),1).toFixed(2))}),this.setState({handlePosition:c})}}}class Rz extends Ee{constructor(e){super(e),this.handleClick=t=>{this.foundation.setHandlePositionByMousePosition(t),this.foundation.handleMouseDown(t)},this.foundation=new $z(this.adapter),this.state={handlePosition:e.hsva.a*e.width-e.handleSize/2,isHandleGrabbing:!1},this.ref=_.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{handleMouseDown:e=>{this.setState({isHandleGrabbing:!0}),window.addEventListener("mousemove",this.foundation.setHandlePositionByMousePosition),window.addEventListener("mouseup",this.foundation.handleMouseUp)},handleMouseUp:e=>{this.setState({isHandleGrabbing:!1}),window.removeEventListener("mousemove",this.foundation.setHandlePositionByMousePosition),window.removeEventListener("mouseup",this.foundation.handleMouseUp)},getColorPickerFoundation:()=>this.props.foundation,getDOM:()=>this.ref.current})}componentDidUpdate(e,t,r){e.hsva.a!==this.props.hsva.a&&this.setState({handlePosition:this.props.hsva.a*this.props.width-this.props.handleSize/2})}render(){const e=Wm(Object.assign(Object.assign({},this.props.hsva),{a:0})),t=Wm(Object.assign(Object.assign({},this.props.hsva),{a:1})),r=`linear-gradient(90deg, ${e}, ${t})`;return _.createElement("div",{className:`${Dt.PREFIX}-alphaSlider`,ref:this.ref,"aria-label":"Alpha","aria-valuetext":`${At(this.props.hsva.a*100)}%`,onMouseDown:this.handleClick,style:Object.assign({width:this.props.width,height:this.props.height},this.props.style)},_.createElement("div",{className:`${Dt.PREFIX}-alphaSliderInner`,style:{background:r}},_.createElement("div",{className:`${Dt.PREFIX}-alphaHandle`,style:{width:this.props.handleSize,height:this.props.handleSize,left:this.state.handlePosition,top:"50%",transform:"translateY(-50%)",backgroundColor:Tz(this.props.hsva)},onMouseDown:i=>this.foundation.handleMouseDown(i)})))}}class Fz extends ze{constructor(e){super(Object.assign({},e)),this.handleMouseDown=t=>{this._adapter.handleMouseDown(t)},this.handleMouseUp=t=>{this._adapter.handleMouseUp(t)},this.setHandlePositionByMousePosition=t=>{var r;const i=(r=this._adapter.getDOM())===null||r===void 0?void 0:r.getBoundingClientRect();if(!i)return;const{width:s,handleSize:o}=this._adapter.getProps(),a=this._adapter.getColorPickerFoundation(),h=t.clientX-i.x;a.handleColorChangeByHandle({h:Math.round(Math.min(Math.max(h/s,0),1)*360)});const c=a.getColorHandlePositionByMousePosition(h,s,o);this.setState({handlePosition:c})}}}class Lz extends Ee{constructor(e){super(e),this.handleClick=t=>{this.foundation.setHandlePositionByMousePosition(t),this.foundation.handleMouseDown(t)},this.foundation=new Fz(this.adapter),this.state={handlePosition:e.hue/360*e.width-e.handleSize/2,isHandleGrabbing:!1},this.ref=_.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{handleMouseDown:e=>{this.setState({isHandleGrabbing:!0}),window.addEventListener("mousemove",this.foundation.setHandlePositionByMousePosition),window.addEventListener("mouseup",this.foundation.handleMouseUp)},handleMouseUp:e=>{this.setState({isHandleGrabbing:!1}),window.removeEventListener("mousemove",this.foundation.setHandlePositionByMousePosition),window.removeEventListener("mouseup",this.foundation.handleMouseUp)},getColorPickerFoundation:()=>this.props.foundation,getDOM:()=>this.ref.current})}componentDidUpdate(e,t,r){e.hue!==this.props.hue&&this.setState({handlePosition:this.props.hue/360*this.props.width-this.props.handleSize/2})}render(){return _.createElement("div",{className:L(`${Dt.PREFIX}-colorSlider`,this.props.className),ref:this.ref,onMouseDown:this.handleClick,style:Object.assign({width:this.props.width,height:this.props.height},this.props.style)},_.createElement("div",{className:`${Dt.PREFIX}-handle`,style:{width:this.props.handleSize,height:this.props.handleSize,left:this.state.handlePosition,top:"50%",transform:"translateY(-50%)",backgroundColor:ft.hsvaToHslString({h:this.props.hue,s:100,v:100,a:1})},onMouseDown:e=>this.foundation.handleMouseDown(e)}))}}const u2=(n,e)=>{const t=/^\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*,?\s*([\d.]*)\s*$/,r=n.match(t),i=[];i[0]=Number(r==null?void 0:r[1]),i[1]=Number(r==null?void 0:r[2]),i[2]=Number(r==null?void 0:r[3]),i[3]=Number((r==null?void 0:r[4])===void 0||(r==null?void 0:r[4])===""?1:r==null?void 0:r[4]);const s=(a,h)=>!(isNaN(a)||a<0||a>h);return s(i[0],e==="rgba"?255:360)&&s(i[1],e==="rgba"?255:100)&&s(i[2],e==="rgba"?255:100)&&s(i[3],1)?e==="rgba"?{r:i[0],g:i[1],b:i[2],a:i[3]}:{h:i[0],s:i[1],v:i[2],a:i[3]}:!1};var jz=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function h(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,h)}c((r=r.apply(n,e||[])).next())})};class Bz extends ze{constructor(e){super(Object.assign({},e)),this.getInputValue=()=>{const{currentColor:t}=this._adapter.getProps(),{format:r}=this._adapter.getStates(),i=t.rgba,s=t.hsva,o=t.hex;return r==="rgba"?`${i.r},${i.g},${i.b}`:r==="hsva"?`${s.h},${s.s},${s.v}`:o.slice(0,7)},this.getValueByInputValue=t=>{const{format:r}=this.getStates();if(r==="rgba"){const i=u2(t,r);if(i)return i}else if(r==="hsva"){const i=u2(t,r);if(i)return i}else if(r==="hex"&&(t.startsWith("#")||(t="#"+t),/#[\d\w]{6,8}/.test(t)))return t;return!1},this.handlePickValueWithStraw=()=>jz(this,void 0,void 0,function*(){const t=this._adapter.getColorPickerFoundation();if(!window.EyeDropper)return;const r=new EyeDropper;try{const s=(yield r.open()).sRGBHex;if(s.startsWith("#"))t.handleChange(s,"hex");else if(s.startsWith("rgba")){const o=ft.rgbaStringToRgba(s);o.a=1,t.handleChange(o,"rgba")}}catch{}}),this.handleInputValueChange=t=>{this._adapter.setState({inputValue:t})},this.handleFormatChange=t=>{this._adapter.setState({format:t})}}}class Gz extends Ee{constructor(e){super(e),this.handleChange=t=>{this.props.foundation.handleChange(t,this.state.format)},this.foundation=new Bz(this.adapter),this.state={format:this.props.defaultFormat,inputValue:""}}get adapter(){return Object.assign(Object.assign({},super.adapter),{getColorPickerFoundation:()=>this.props.foundation})}componentDidMount(){this.foundation.handleInputValueChange(this.foundation.getInputValue())}componentDidUpdate(e,t,r){(!yt(e.currentColor,this.props.currentColor)||t.format!==this.state.format)&&this.foundation.handleInputValueChange(this.foundation.getInputValue())}render(){const e=this.props.currentColor.rgba;return _.createElement("div",{className:`${Dt.PREFIX}-dataPart`,style:{width:this.props.width}},_.createElement("div",{className:`${Dt.PREFIX}-colorDemoBlock`,style:{minWidth:20,minHeight:20,backgroundColor:`rgba(${e.r},${e.g},${e.b},${e.a})`}}),_.createElement(Zv,{size:"small",className:`${Dt.PREFIX}-inputGroup`},_.createElement(Td,{className:`${Dt.PREFIX}-colorPickerInput`,value:this.state.inputValue,onChange:t=>{const r=this.foundation.getValueByInputValue(t);r&&this.handleChange(r),this.foundation.handleInputValueChange(t)}}),this.props.alpha&&_.createElement(BG,{min:0,max:100,className:`${Dt.PREFIX}-colorPickerInputNumber`,value:Number(Math.round(this.props.currentColor.rgba.a*100)),onNumberChange:t=>{if(this.state.format==="rgba")this.handleChange(Object.assign(Object.assign({},this.props.currentColor.rgba),{a:Number((t/100).toFixed(2))}));else if(this.state.format==="hex"){const r=Object.assign(Object.assign({},this.props.currentColor.rgba),{a:Number((t/100).toFixed(2))}),i=ft.rgbaToHex(r);this.handleChange(i)}else if(this.state.format==="hsva"){const r=Object.assign(Object.assign({},this.props.currentColor.hsva),{a:Number((t/100).toFixed(2))});this.handleChange(r)}},suffix:_.createElement("span",{className:`${Dt.PREFIX}-inputNumberSuffix`},"%"),hideButtons:!0}),_.createElement(Or,{className:`${Dt.PREFIX}-formatSelect`,size:"small",value:this.state.format,onSelect:t=>this.foundation.handleFormatChange(t),optionList:["hex","rgba","hsva"].map(t=>({label:t,value:t}))})),this.props.eyeDropper&&_.createElement(He,{type:"tertiary",theme:"light",size:"small",onClick:this.foundation.handlePickValueWithStraw,icon:_.createElement(BF,null)}))}}class jp extends Ee{constructor(e){var t;super(e),this.foundation=new ft(this.adapter);const r=(t=e.value)!==null&&t!==void 0?t:e.defaultValue;this.state={currentColor:r}}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyChange:e=>{var t,r;(r=(t=this.props).onChange)===null||r===void 0||r.call(t,e)}})}renderPicker(){var e,t,r,i,s;const{className:o}=this.props,a=L(`${Dt.PREFIX}`,o),h=this.foundation.getCurrentColor();return _.createElement("div",{className:a},this.props.topSlot,_.createElement(Dz,{hsva:h.hsva,foundation:this.foundation,onChange:c=>{let{s:l,v:d}=c;this.foundation.handleChange({s:l,v:d,a:h.hsva.a,h:h.hsva.h},"hsva")},handleSize:20,width:(e=this.props.width)!==null&&e!==void 0?e:280,height:(t=this.props.height)!==null&&t!==void 0?t:280}),_.createElement(Lz,{width:(r=this.props.width)!==null&&r!==void 0?r:280,height:10,handleSize:18,hue:h.hsva.h,className:"colorSliderWrapper",foundation:this.foundation}),this.props.alpha&&_.createElement(Rz,{width:(i=this.props.width)!==null&&i!==void 0?i:280,height:10,handleSize:18,hsva:h.hsva,className:"alphaSliderWrapper",foundation:this.foundation}),_.createElement(Gz,{currentColor:h,eyeDropper:this.props.eyeDropper,alpha:this.props.alpha,width:(s=this.props.width)!==null&&s!==void 0?s:280,foundation:this.foundation,defaultFormat:this.props.defaultFormat}),this.props.bottomSlot)}render(){var e,t;const r=this.foundation.getCurrentColor();return this.props.usePopover?_.createElement(un,Object.assign({},this.props.popoverProps,{className:L(`${Dt.PREFIX}-popover`,(e=this.props.popoverProps)===null||e===void 0?void 0:e.className),content:this.renderPicker()}),(t=this.props.children)!==null&&t!==void 0?t:_.createElement("div",{style:{backgroundColor:r.hex},className:L(`${Dt.PREFIX}-popover-defaultChildren`)})):this.renderPicker()}}jp.__SemiComponentName__="ColorPicker";jp.defaultProps={defaultValue:{hsva:{h:176,s:71,v:77,a:1},rgba:{r:57,g:197,b:187,a:1},hex:"#39c5bb"},eyeDropper:!0,defaultFormat:"hex"};jp.colorStringToValue=n=>{if(n.startsWith("#"))return{hsva:p3(n),rgba:sy(n),hex:n};if(n.startsWith("rgba")){const e=Lp(n);return{hsva:ay(n),rgba:e,hex:Vl(e)}}else if(n.startsWith("rgb")){const e=Az(n);return{hsva:Iz(n),rgba:e,hex:Vl(e)}}else if(n.startsWith("hsv")){const e=kz(n),t=Ma(e),r=oy(e);return{hsva:e,rgba:t,hex:r}}else throw new Error("Semi ColorPicker: error on static colorStringToValue method, input value is invalid: "+n)};var Nd=(n=>(n[n.简体中文=0]="简体中文",n[n.English=1]="English",n[n.日本語=2]="日本語",n))(Nd||{});const Xm=[{language:0,title:"卡拉彼丘地图助手",sidebar:{attact:"进攻",defense:"防守",mapsetting:"地图设置",character:"超弦体",skill:"技能",grenade:"战术道具",lineup:"战术道具点位",skilllineup:"技能点位",mobaisuperjump:"白墨超级跳点位",bugpoint:"Bug点位",bugpointwarning:N.jsxs("div",{style:{fontSize:"12px",textAlign:"left"},children:[N.jsx("div",{children:"这里列出的Bug点位仅用于警示作用，请勿在游戏中利于Bug！"}),N.jsx("div",{children:"在游戏中利用Bug导致被封禁等不良后果本站概不负责！"})]}),learnmore:"了解更多",supportus:"支持我们",supportusContent:N.jsx(N.Fragment,{})},mapsetting:{choosemap:"选择地图",maps:{WindyTown:"风曳镇",SpaceLab:"空间实验室",Khesmet:"科斯迷特",EulerPort:"欧拉港口",CauchyDistrict:"柯西街区",Area88:"88区",Base404:"404基地"},TeamHighlight:"区分阵营",TeamHighlightOptions:{prepare:"准备阶段",blank:"空白"},Landmarks:"点位标记"},lineupsetting:{spotmark:"点位标记",spotmarks:{disable:"禁用",available:"仅有效",all:"全部"}},skilllineupsetting:{spotmark:"点位标记",spotmarks:{disable:"禁用",available:"仅有效",all:"全部"}},mobaisuperjumpsetting:{spotmark:"点位标记",spotmarks:{disable:"禁用",available:"仅有效",all:"全部"}},bugpointsetting:{spotmark:"点位标记",spotmarks:{disable:"禁用",available:"仅有效",all:"全部"}},factions:{PUS:"欧泊",TheScissors:"剪刀手",Urbino:"乌尔比诺"},characters:{PUS:{Michele:"米雪儿·李",Nobunaga:"信",Kokona:"心夏",Yvette:"伊薇特",Flavia:"芙拉薇娅"},TheScissors:{Ming:"明",Lawine:"拉薇",Meredith:"梅瑞狄斯",Reiichi:"令",Kanami:"香奈美",Eika:"艾卡",Fragrans:"珐格兰丝"},Urbino:{Celestia:"星绘",Audrey:"奥黛丽",Maddelena:"白墨",Fuchsia:"玛德蕾娜",BaiMo:"绯莎",Galatea:"加拉蒂亚"}},grenades:{Flashbang:"闪光弹",FragGrenade:"手雷",HealingGrenade:"治疗雷",Interceptor:"拦截者",SlowGrenade:"减速雷",SmokeBomb:"烟雾弹",Alarm:"警报器",WindstormGrenade:"风场雷",SnowBall:"雪球"},markbox:{mark:"画笔",straightline:"直线",arrowline:"箭头",color:"颜色",undo:"撤销",clear:"清空",clearwarning:{title:"确认清除所有笔迹？",content:"此操作不可撤销",ok:"确认",cancel:"取消",success:"已清除所有笔迹",failure:"清除笔迹失败"}}},{language:1,title:"Strinova Map Assistant",sidebar:{attact:"Attack",defense:"Defense",mapsetting:"Map Setting",character:"Character",skill:"Skills",grenade:"Grenades",lineup:"Grenade Lineups",skilllineup:"Skill Lineups",mobaisuperjump:"Baimo Super Jumps",bugpoint:"Bugs",bugpointwarning:N.jsxs("div",{style:{fontSize:"12px",textAlign:"left"},children:[N.jsx("div",{children:"Bugs listed here are for your information only!"}),N.jsx("div",{children:"We are not responsible for any bans for abusing any of these bugs."})]}),learnmore:"Learn More",supportus:"SUPPORT US",supportusContent:N.jsx(N.Fragment,{})},mapsetting:{choosemap:"Map",maps:{WindyTown:"Windy Town",SpaceLab:"Space Lab",Khesmet:"Khesmet",CauchyDistrict:"Cauchy District",EulerPort:"Port Euler",Area88:"Area 88",Base404:"Base 404"},TeamHighlight:"Team Highlight",TeamHighlightOptions:{prepare:"Show",blank:"Hide"},Landmarks:"Landmarks"},lineupsetting:{spotmark:"Spot Mark",spotmarks:{disable:"Disable",available:"Available Only",all:"All"}},skilllineupsetting:{spotmark:"Spot Mark",spotmarks:{disable:"Disable",available:"Available Only",all:"All"}},mobaisuperjumpsetting:{spotmark:"Spot Mark",spotmarks:{disable:"Disable",available:"Available Only",all:"All"}},bugpointsetting:{spotmark:"Spot Mark",spotmarks:{disable:"Disable",available:"Available Only",all:"All"}},factions:{PUS:"PUS",TheScissors:"The Scissors",Urbino:"Urbino"},characters:{PUS:{Michele:"Michele Li",Nobunaga:"Nobunaga",Kokona:"Kokona",Yvette:"Yvette",Flavia:"Flavia"},TheScissors:{Ming:"Ming",Lawine:"Lawine",Meredith:"Meredith",Reiichi:"Reiichi",Kanami:"Kanami",Eika:"Eika",Fragrans:"Fragrans"},Urbino:{Celestia:"Celestia",Audrey:"Audrey",Maddelena:"Maddelena",Fuchsia:"Fuchsia",BaiMo:"Bai Mo",Galatea:"Galatea"}},grenades:{Flashbang:"Flashbang",FragGrenade:"Frag Grenade",HealingGrenade:"Healing Grenade",Interceptor:"Interceptor",SlowGrenade:"Slow Grenade",SmokeBomb:"Smoke Bomb",Alarm:"Alarm",WindstormGrenade:"Windstorm Grenade",SnowBall:"Snow Ball"},markbox:{mark:"Mark",straightline:"Straight Line",arrowline:"Arrow Line",color:"Color",undo:"Undo",clear:"Clear",clearwarning:{title:"Confirm to clear all marks?",content:"This action cannot be undone",ok:"Confirm",cancel:"Cancel",success:"Cleared all markings",failure:"Failed to clear markings"}}},{language:2,title:"Strinova マップアシスタント",sidebar:{attact:"Attack",defense:"Defense",mapsetting:"マップの設定",character:"キャラクター（超弦体）",skill:"スキル",grenade:"戦術アイテム",lineup:"戦術アイテムのポイント",skilllineup:"スキルポイント",mobaisuperjump:"白墨スーパージャンプ",bugpoint:"プログラムエラー",bugpointwarning:N.jsxs("div",{style:{fontSize:"12px",textAlign:"left"},children:[N.jsx("div",{children:"ここにリストされているエラーは参照用です！"}),N.jsx("div",{children:"私たちはこれらの脆弱性を悪用する禁止令には責任を負いません。"})]}),learnmore:"詳細",supportus:"SUPPORT US",supportusContent:N.jsx(N.Fragment,{})},mapsetting:{choosemap:"マップ",maps:{WindyTown:"ウィンディタウン",SpaceLab:"スペースラボ",Khesmet:"科斯迷特",CauchyDistrict:"柯西街区",EulerPort:"オイラー港",Area88:"88街区",Base404:"ベース404"},TeamHighlight:"チームハイライト",TeamHighlightOptions:{prepare:"表示",blank:"非表示"},Landmarks:"ランドマーク"},lineupsetting:{spotmark:"スポットマーク",spotmarks:{disable:"無効",available:"可能なものだけ",all:"全て"}},skilllineupsetting:{spotmark:"スポットマーク",spotmarks:{disable:"無効",available:"可能なものだけ",all:"全て"}},mobaisuperjumpsetting:{spotmark:"スポットマーク",spotmarks:{disable:"無効",available:"可能なものだけ",all:"全て"}},bugpointsetting:{spotmark:"スポットマーク",spotmarks:{disable:"無効",available:"可能なものだけ",all:"全て"}},factions:{PUS:"PUS",TheScissors:"シザーズ",Urbino:"ウルビノ"},characters:{PUS:{Michele:"ミシェル",Nobunaga:"ノブナガ",Kokona:"ココナ",Yvette:"イヴェット",Flavia:"フラヴィア"},TheScissors:{Ming:"ミン",Lawine:"ラヴィーネ",Meredith:"メレディス",Reiichi:"レイイチ",Kanami:"カナミ",Eika:"アイカ",Fragrans:"フラグランス"},Urbino:{Celestia:"ホシリエ",Audrey:"オードリー",Maddelena:"マダレーナ",Fuchsia:"フェイシャ",BaiMo:"ハクボク",Galatea:"ガラテア"}},grenades:{Flashbang:"閃光弹",FragGrenade:"フラググレネード",HealingGrenade:"回復グレネード",Interceptor:"インターセプター",SlowGrenade:"减速ボム",SmokeBomb:"煙幕弾",Alarm:"警報器",WindstormGrenade:"風雷ボム",SnowBall:"雪玉"},markbox:{mark:"マーク",straightline:"直線",arrowline:"Arrow Line",color:"カラー",undo:"戻す",clear:"消去",clearwarning:{title:"全てのマークを消去しますか?",content:"この操作は元に戻せません",ok:"確認",cancel:"キャンセル",success:"全てのマークを消去しました",failure:"マークの削除に失敗しました"}}}];var m3={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},p2=_.createContext&&_.createContext(m3),zz=["attr","size","title"];function Uz(n,e){if(n==null)return{};var t=Vz(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Vz(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Dd(){return Dd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Dd.apply(this,arguments)}function f2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function $d(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?f2(Object(t),!0).forEach(function(r){Hz(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):f2(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Hz(n,e,t){return e=Kz(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Kz(n){var e=Wz(n,"string");return typeof e=="symbol"?e:e+""}function Wz(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function v3(n){return n&&n.map((e,t)=>_.createElement(e.tag,$d({key:t},e.attr),v3(e.child)))}function bt(n){return e=>_.createElement(Xz,Dd({attr:$d({},n.attr)},e),v3(n.child))}function Xz(n){var e=t=>{var{attr:r,size:i,title:s}=n,o=Uz(n,zz),a=i||t.size||"1em",h;return t.className&&(h=t.className),n.className&&(h=(h?h+" ":"")+n.className),_.createElement("svg",Dd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:h,style:$d($d({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&_.createElement("title",null,s),n.children)};return p2!==void 0?_.createElement(p2.Consumer,null,t=>e(t)):e(m3)}function Yz(n){return bt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function qz(n){return bt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function Zz(n){return bt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(n)}function Qz(n){return bt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(n)}function Jz(n){return bt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"},child:[]}]})(n)}function eU(n){return bt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m18.85 10.39 1.06-1.06c.78-.78.78-2.05 0-2.83L18.5 5.09c-.78-.78-2.05-.78-2.83 0l-1.06 1.06 4.24 4.24zm-5.66-2.83L4 16.76V21h4.24l9.19-9.19-4.24-4.25zM19 17.5c0 2.19-2.54 3.5-5 3.5-.55 0-1-.45-1-1s.45-1 1-1c1.54 0 3-.73 3-1.5 0-.47-.48-.87-1.23-1.2l1.48-1.48c1.07.63 1.75 1.47 1.75 2.68zM4.58 13.35C3.61 12.79 3 12.06 3 11c0-1.8 1.89-2.63 3.56-3.36C7.59 7.18 9 6.56 9 6c0-.41-.78-1-2-1-1.26 0-1.8.61-1.83.64-.35.41-.98.46-1.4.12a.992.992 0 0 1-.15-1.38C3.73 4.24 4.76 3 7 3s4 1.32 4 3c0 1.87-1.93 2.72-3.64 3.47C6.42 9.88 5 10.5 5 11c0 .31.43.6 1.07.86l-1.49 1.49z"},child:[]}]})(n)}function tU(n){return bt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7 1.62-4.33L19.12 17h-3.24z"},child:[]}]})(n)}function nU(n){return bt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"},child:[]}]})(n)}function hy(n){return bt({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(n)}function rU(n){return bt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M391.17,103.47H352.54v109.7h38.63ZM285,103H246.37V212.75H285ZM120.83,0,24.31,91.42V420.58H140.14V512l96.53-91.42h77.25L487.69,256V0ZM449.07,237.75l-77.22,73.12H294.61l-67.6,64v-64H140.14V36.58H449.07Z"},child:[]}]})(n)}function iU(n){return bt({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 117.66v346.32c0 11.32 11.43 19.06 21.94 14.86L160 416V32L20.12 87.95A32.006 32.006 0 0 0 0 117.66zM192 416l192 64V96L192 32v384zM554.06 33.16L416 96v384l139.88-55.95A31.996 31.996 0 0 0 576 394.34V48.02c0-11.32-11.43-19.06-21.94-14.86z"},child:[]}]})(n)}function sU(n){return bt({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M302.189 329.126H196.105l55.831 135.993c3.889 9.428-.555 19.999-9.444 23.999l-49.165 21.427c-9.165 4-19.443-.571-23.332-9.714l-53.053-129.136-86.664 89.138C18.729 472.71 0 463.554 0 447.977V18.299C0 1.899 19.921-6.096 30.277 5.443l284.412 292.542c11.472 11.179 3.007 31.141-12.5 31.141z"},child:[]}]})(n)}var Rd=(n=>(n.WindyTown="WindyTown",n.SpaceLab="SpaceLab",n.Khesmet="Khesmet",n.EulerPort="EulerPort",n.CauchyDistrict="CauchyDistrict",n.Area88="Area88",n.Base404="Base404",n))(Rd||{});const Ym=[{map:"WindyTown",imgPrepareLink:"https://s2.loli.net/2024/09/24/Shk6rXTwvAlDGMC.png",imgBlankLink:"https://s2.loli.net/2024/09/24/85uxWct3DeRByTO.png"},{map:"SpaceLab",imgPrepareLink:"https://s2.loli.net/2024/09/24/QI6hnMtsJpSCKgE.png",imgBlankLink:"https://s2.loli.net/2024/09/24/KxUYEBqdlyZ92rC.png"},{map:"Khesmet",imgPrepareLink:"https://s2.loli.net/2024/09/24/QnNZHhT4wDbFxIO.png",imgBlankLink:"https://s2.loli.net/2024/09/24/jroCB9iqR1l5LDp.png"},{map:"EulerPort",imgPrepareLink:"https://s2.loli.net/2024/09/24/Md2Pa1HKtJyk7oO.png",imgBlankLink:"https://s2.loli.net/2024/09/24/NGWk2HXwSvmdgOY.png"},{map:"CauchyDistrict",imgPrepareLink:"https://s2.loli.net/2024/09/24/Uw3ftVPQOLu5MCj.png",imgBlankLink:"https://s2.loli.net/2024/09/24/cLDQtdwAJyr2k7T.png"},{map:"Area88",imgPrepareLink:"https://s2.loli.net/2024/09/24/wouqxsUy1JaP8l6.png",imgBlankLink:"https://s2.loli.net/2024/09/24/YBUsSC78oOrx16W.png"},{map:"Base404",imgPrepareLink:"https://s2.loli.net/2024/09/24/XfMi4qcV5zmTy78.png",imgBlankLink:"https://s2.loli.net/2024/09/24/pjGMHJClRsXEoAf.png"}],oU=({currentLanguage:n,currentMap:e,setPresentMap:t,setPresentMapURL:r,editor:i})=>{const s=o=>{t(Rd[o]);for(const a of Ym)a.map===o&&(i==null||i.reset(),r({imgPrepareLink:a.imgPrepareLink,imgBlankLink:a.imgBlankLink}))};return N.jsx("div",{children:N.jsx(Ze,{trigger:"click",position:"bottom",clickToHide:!0,render:N.jsx(Ze.Menu,{children:Object.keys(Rd).map(o=>N.jsx(Ze.Item,{onClick:()=>s(o),children:n.mapsetting.maps[o]},o))}),children:N.jsx(He,{icon:N.jsx(iU,{}),theme:"light",children:n.mapsetting.maps[e]})})})},aU=({mapPrepareMode:n,setMapPrepareMode:e,content:t})=>N.jsx(He,{theme:n?"solid":"outline",type:"primary",onClick:()=>e(!n),children:t}),lU=({changeLanguage:n,currentLanguageMode:e,currentMap:t,mapPrepareMode:r,setPresentMap:i,setPresentMapURL:s,setMapPrepareMode:o,editor:a})=>{const h=Xm[e],[c,l]=G.useState(!document.body.hasAttribute("theme-mode")),d=()=>{document.body.hasAttribute("theme-mode")?(document.body.removeAttribute("theme-mode"),l(!0)):(document.body.setAttribute("theme-mode","dark"),l(!1))};return N.jsx("div",{style:{width:"100%"},children:N.jsxs(yn,{mode:"horizontal",children:[N.jsx(yn.Header,{children:N.jsx(Ip,{children:h.title})}),N.jsx(yn.Item,{style:{flexDirection:"column",justifyContent:"center"},children:N.jsx(oU,{editor:a,currentLanguage:h,currentMap:t,setPresentMap:i,setPresentMapURL:s})}),N.jsx(yn.Item,{style:{flexDirection:"column",justifyContent:"center"},children:N.jsx(aU,{content:h.mapsetting.TeamHighlight,mapPrepareMode:r,setMapPrepareMode:o})}),N.jsxs(yn.Footer,{children:[N.jsx(He,{icon:c?N.jsx(Jz,{size:"1rem",style:{padding:"0 1rem"},color:"rgba(var(--semi-grey-9), 1)"}):N.jsx(Qz,{size:"1rem",style:{padding:"0 1rem"},color:"rgba(var(--semi-grey-9), 1)"}),onClick:d}),N.jsx(tU,{size:"1.5rem",style:{padding:"0 1rem"},color:"rgba(var(--semi-grey-9), 1)"}),N.jsx(Or,{defaultValue:Nd[h.language],onChange:u=>n(u),children:Object.keys(Xm).map(u=>N.jsx(Or.Option,{value:u,children:Nd[u]},u))})]})]})})};function hU(n){return bt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M491.844 22.533l-83.42 14.865L196.572 249.25c3.262 4.815 5.37 10.72 5.37 16.932 0 5.863-1.71 11.35-4.643 15.996-5.065-1.606-10.448-2.477-16.027-2.477-15.724 0-29.904 6.89-39.69 17.796l-9.112-9.113 17.237-17.237c-4.515-5.772-8.907-11.645-13.19-17.6l-19.443 19.44-13.215-13.215 21.828-21.827c-4.403-6.59-8.67-13.278-12.792-20.068l-40.802 40.803 58.314 58.314c-1.613 5.075-2.49 10.47-2.49 16.063 0 7.666 1.65 14.96 4.592 21.564l-72.14 72.14-14.56-14.56L21.013 437l14.558 14.56-8.607 8.608 27.246 27.246 8.606-8.61 14.56 14.56 24.798-24.8-14.557-14.556 72.158-72.16c6.586 2.922 13.858 4.562 21.498 4.562 5.593 0 10.988-.877 16.063-2.49l58.363 58.363L296.5 401.48c-6.797-4.127-13.486-8.395-20.068-12.793l-21.83 21.83L241.39 397.3l19.442-19.44c-5.962-4.29-11.835-8.683-17.603-13.194l-17.238 17.238-9.16-9.16c10.905-9.785 17.795-23.965 17.795-39.69 0-5.346-.806-10.51-2.285-15.39 4.703-3.04 10.288-4.817 16.265-4.816 6.21 0 11.776 1.77 16.52 4.955L476.98 105.95l14.864-83.417zm-66.227 53.012l13.215 13.215-191.684 191.68-13.214-13.213L425.617 75.545zM181.273 298.39c19.257 0 34.665 15.41 34.665 34.665 0 19.256-15.408 34.666-34.665 34.666-19.256 0-34.666-15.41-34.666-34.665s15.41-34.666 34.666-34.666z"},child:[]}]})(n)}function cU(n){return bt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 16c25 24 100 72 150 72v96c0 96-75 240-150 312-75-72-150-216-150-312V88c50 0 125-48 150-72z"},child:[]}]})(n)}var St=(n=>(n.PUS="PUS",n.TheScissors="TheScissors",n.Urbino="Urbino",n))(St||{}),Mn=(n=>(n.Michele="Michele",n.Nobunaga="Nobunaga",n.Kokona="Kokona",n.Yvette="Yvette",n.Flavia="Flavia",n))(Mn||{}),zt=(n=>(n.Ming="Ming",n.Lawine="Lawine",n.Meredith="Meredith",n.Reiichi="Reiichi",n.Kanami="Kanami",n.Eika="Eika",n.Fragrans="Fragrans",n))(zt||{}),Zt=(n=>(n.Celestia="Celestia",n.Audrey="Audrey",n.Maddelena="Maddelena",n.Fuchsia="Fuchsia",n.BaiMo="BaiMo",n.Galatea="Galatea",n))(Zt||{});const So={[Mn.Michele]:{faction:St.PUS,id:Mn.Michele,defense:{canvasImage:"https://s2.loli.net/2024/09/29/29JH5SlaTdCwgFR.png",skills:{active:{canvasImage:"https://s2.loli.net/2024/09/25/8iCzWDaNQPSxqvw.png",rangeRadius:0},passive:{canvasImage:"https://s2.loli.net/2024/09/25/ANhKZ6GDzOIjPtf.png"},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/UGeEvYfXiSgD4zr.png",rangeRadius:0}}}},[Mn.Nobunaga]:{faction:St.PUS,id:Mn.Nobunaga,defense:{canvasImage:"https://s2.loli.net/2024/09/29/7UuX5VTR8AYWD2o.png",skills:{passive:{canvasImage:"https://s2.loli.net/2024/09/25/AHsc9o8W25UlpNa.png"},active:{canvasImage:"https://s2.loli.net/2024/09/25/VJFzGhSyXmsiHpO.png	",rangeRadius:0},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/Vr78sb9T32ADMuy.png",rangeRadius:0}}}},[Mn.Kokona]:{faction:St.PUS,id:Mn.Kokona,defense:{canvasImage:"https://s2.loli.net/2024/09/29/jtlryiY8WHIGAMq.png",skills:{passive:{canvasImage:"https://s2.loli.net/2024/09/25/V8NijM5onGulX9m.png"},active:{canvasImage:"https://s2.loli.net/2024/09/25/9zFsMYumpwJZrTg.png",rangeRadius:void 0},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/tilQp18zRheBMaJ.png",rangeRadius:void 0}}}},[Mn.Yvette]:{faction:St.PUS,id:Mn.Yvette,defense:{canvasImage:"https://s2.loli.net/2024/09/29/eIVFmswk3tUlOcR.png",skills:{active:{canvasImage:"https://s2.loli.net/2024/09/25/ESH6FNKQjbafMZn.png",rangeRadius:0},passive:{canvasImage:"https://s2.loli.net/2024/09/25/2hqoyUWsnbA83BP.png"},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/32VnSv59tPwTIhl.png",rangeRadius:0}}}},[Mn.Flavia]:{faction:St.PUS,id:Mn.Flavia,defense:{canvasImage:"https://s2.loli.net/2024/09/29/jC98Rq3NhrUXYWK.png",skills:{active:{canvasImage:"https://s2.loli.net/2024/09/25/58dg6OpPntlviqW.png"},passive:{canvasImage:"https://s2.loli.net/2024/09/25/u5tV9xaNyjUL6EM.png"},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/ezsVQS62bY5iBcG.png",rangeRadius:0}}}},[zt.Ming]:{faction:St.TheScissors,id:zt.Ming,attack:{canvasImage:"https://s2.loli.net/2024/09/29/nuhFZjpVGgJSEyc.png",skills:{active:{canvasImage:"https://s2.loli.net/2024/09/25/NQ2TdSqhseRZY7b.png",rangeRadius:void 0},passive:{canvasImage:"https://s2.loli.net/2024/09/25/bsAzZemy4uEcaHt.png"},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/B6KC72wphAdt4Ri.png"}}}},[zt.Lawine]:{faction:St.TheScissors,id:zt.Lawine,attack:{canvasImage:"https://s2.loli.net/2024/09/29/DeK5afJoAhpyNcM.png",skills:{active:{canvasImage:"https://s2.loli.net/2024/09/25/gOFlGIzPjxbpYKw.png",rangeRadius:0},passive:{canvasImage:"https://s2.loli.net/2024/09/25/8AxLszwVIg17WGq.png"},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/HuEnVYb8Mr5e24I.png"}}}},[zt.Meredith]:{faction:St.TheScissors,id:zt.Meredith,attack:{canvasImage:"https://s2.loli.net/2024/09/29/C4QmVOhp1rB9Gd6.png",skills:{active:{canvasImage:"https://s2.loli.net/2024/09/25/KWYZTSQmjOHJ2RX.png",rangeRadius:0},passive:{canvasImage:"https://s2.loli.net/2024/09/25/O8kRqCVEDoK6T3p.png"},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/V8KZrx9sY7QBlaP.png",rangeRadius:0}}}},[zt.Reiichi]:{faction:St.TheScissors,id:zt.Reiichi,attack:{canvasImage:"https://s2.loli.net/2024/09/29/txSOyYkT4pXhGBn.png",skills:{active:{canvasImage:"https://s2.loli.net/2024/09/25/C6qts5xeVpS1N4E.png"},passive:{canvasImage:"https://s2.loli.net/2024/09/25/iuSvZDYnFTzmBrl.png"},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/bESOlDh9oURvFC3.png"}}}},[zt.Kanami]:{faction:St.TheScissors,id:zt.Kanami,attack:{canvasImage:"https://s2.loli.net/2024/09/29/7DHOLqvWMzmlch3.png",skills:{active:{canvasImage:"https://s2.loli.net/2024/09/25/UBJqoYz835GvVxy.png"},passive:{canvasImage:"https://s2.loli.net/2024/09/25/OHbINYGSQhFazcd.png"},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/YH3Phg5XQumsbCM.png",rangeRadius:0}}}},[zt.Eika]:{faction:St.TheScissors,id:zt.Eika,attack:{canvasImage:"https://s2.loli.net/2024/09/29/SrnDsxX5bAiBNcE.png",skills:{active:{canvasImage:"https://s2.loli.net/2024/09/25/SPYXJZwHGObnrmV.png",rangeRadius:0},passive:{canvasImage:"https://s2.loli.net/2024/09/25/JYfa5PdE6r4Kcio.png"},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/sFgyUNK7iWtcvfp.png",rangeRadius:0}}}},[zt.Fragrans]:{faction:St.TheScissors,id:zt.Fragrans,attack:{canvasImage:"https://s2.loli.net/2024/09/29/AM58XCKyixJlTGO.png",skills:{active:{canvasImage:"https://s2.loli.net/2024/09/25/L9j3uWBrl5hNyzx.png",rangeRadius:0},passive:{canvasImage:"https://s2.loli.net/2024/09/25/B3HDdTpLjAyYQ74.png"},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/5Xk9PUOlwFsgE6B.png",rangeRadius:0}}}},[Zt.Audrey]:{faction:St.Urbino,id:Zt.Audrey,attack:{canvasImage:"https://s2.loli.net/2024/09/29/qD7YufUpTmbzX1x.png",skills:{active:{canvasImage:"https://s2.loli.net/2024/09/26/9PqOBd7owjJrRVp.png"},passive:{canvasImage:"https://s2.loli.net/2024/09/26/pfyJk2RLYsXlBFg.png"},ultimate:{canvasImage:"https://s2.loli.net/2024/09/26/E6tTWi1Suls5Y9R.png",rangeRadius:0}}},defense:{canvasImage:"https://s2.loli.net/2024/09/29/IVhuSTZvYmk4CNj.png",skills:{active:{canvasImage:"https://s2.loli.net/2024/09/26/9PqOBd7owjJrRVp.png"},passive:{canvasImage:"https://s2.loli.net/2024/09/26/pfyJk2RLYsXlBFg.png"},ultimate:{canvasImage:"https://s2.loli.net/2024/09/26/E6tTWi1Suls5Y9R.png",rangeRadius:0}}}},[Zt.Maddelena]:{faction:St.PUS,id:Zt.Maddelena,attack:{canvasImage:"https://s2.loli.net/2024/09/29/OGgXKe6pPERflQL.png",skills:{passive:{canvasImage:"https://s2.loli.net/2024/09/25/2r7wkizoLbpqMOZ.png"},active:{canvasImage:"https://s2.loli.net/2024/09/25/q61FltINbyrA8YV.png",rangeRadius:void 0},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/tazvXEJNs5HuyeD.png",rangeRadius:void 0}}},defense:{canvasImage:"https://s2.loli.net/2024/09/29/dxqSrs3ivIJlF5h.png",skills:{passive:{canvasImage:"https://s2.loli.net/2024/09/25/tazvXEJNs5HuyeD.png"},active:{canvasImage:"https://s2.loli.net/2024/09/25/2r7wkizoLbpqMOZ.png",rangeRadius:void 0},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/tazvXEJNs5HuyeD.png",rangeRadius:void 0}}}},[Zt.Fuchsia]:{faction:St.Urbino,id:Zt.Fuchsia,attack:{canvasImage:"https://s2.loli.net/2024/09/29/5Vbc3mYw8KJtTDC.png",skills:{active:{canvasImage:"https://s2.loli.net/2024/09/25/tkQ3jlHGeRTDPyn.png"},passive:{canvasImage:"https://s2.loli.net/2024/09/25/5ZCmFuQhoP3zYnV.png"},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/rOxFKuLX7e5QWhw.png"}}},defense:{canvasImage:"https://s2.loli.net/2024/09/29/TU81atfzDKiRV2o.png",skills:{active:{canvasImage:"https://s2.loli.net/2024/09/25/tkQ3jlHGeRTDPyn.png"},passive:{canvasImage:"https://s2.loli.net/2024/09/25/5ZCmFuQhoP3zYnV.png"},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/rOxFKuLX7e5QWhw.png"}}}},[Zt.Celestia]:{faction:St.Urbino,id:Zt.Celestia,attack:{canvasImage:"https://s2.loli.net/2024/09/29/PI6eiLuZfcAQ2aR.png",skills:{active:{canvasImage:"https://s2.loli.net/2024/09/25/WmtSU2hFLBPaf85.png"},passive:{canvasImage:"https://s2.loli.net/2024/09/25/O5dXCxh3R1wVINQ.png"},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/bJalMyBfZ7iXVtx.png"}}},defense:{canvasImage:"https://s2.loli.net/2024/09/29/Zt93QEgreUnvaxX.png",skills:{active:{canvasImage:"https://s2.loli.net/2024/09/25/WmtSU2hFLBPaf85.png"},passive:{canvasImage:"https://s2.loli.net/2024/09/25/O5dXCxh3R1wVINQ.png"},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/bJalMyBfZ7iXVtx.png"}}}},[Zt.BaiMo]:{faction:St.Urbino,id:Zt.BaiMo,attack:{canvasImage:"https://s2.loli.net/2024/09/29/jt4621ivFRfbEqD.png",skills:{passive:{canvasImage:"https://s2.loli.net/2024/09/25/xvVheX57uGJMI2k.png"},active:{canvasImage:"https://s2.loli.net/2024/09/25/eUzu75aSXVw2kQF.png",rangeRadius:void 0},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/VkyGJKzHYr4pnlm.png",rangeRadius:void 0}}},defense:{canvasImage:"https://s2.loli.net/2024/09/29/2KrCPXp5k1e6wfm.png",skills:{passive:{canvasImage:"https://s2.loli.net/2024/09/25/xvVheX57uGJMI2k.png"},active:{canvasImage:"https://s2.loli.net/2024/09/25/eUzu75aSXVw2kQF.png",rangeRadius:void 0},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/VkyGJKzHYr4pnlm.png",rangeRadius:void 0}}}},[Zt.Galatea]:{faction:St.Urbino,id:Zt.Galatea,attack:{canvasImage:"https://s2.loli.net/2024/09/29/wpBbSjafRNFD43K.png",skills:{active:{canvasImage:"https://s2.loli.net/2024/09/25/UQVBxmGPD9q1tsr.png"},passive:{canvasImage:"https://s2.loli.net/2024/09/25/VmDbBPl9ezv5ZgU.png"},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/xGpjiLgcUtTJbno.png"}}},defense:{canvasImage:"https://s2.loli.net/2024/09/29/t1vlASe5DNRHVZq.png",skills:{active:{canvasImage:"https://s2.loli.net/2024/09/25/UQVBxmGPD9q1tsr.png"},passive:{canvasImage:"https://s2.loli.net/2024/09/25/VmDbBPl9ezv5ZgU.png"},ultimate:{canvasImage:"https://s2.loli.net/2024/09/25/xGpjiLgcUtTJbno.png"}}}}},dU=({currentLanguage:n,setSelectedCharacter:e,setSiderSide:t})=>{const r=(i,s,o)=>{i.dataTransfer.setData("character",s),i.dataTransfer.setData("side",o);const a=So[s];e(a)};return N.jsx("div",{children:N.jsxs(Ls,{onChange:i=>{t(i),e(null)},style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[N.jsxs(oa,{tab:N.jsxs("span",{children:[N.jsx(hU,{style:{marginRight:"5px",marginLeft:"5px"}}),n.sidebar.attact]}),itemKey:"attack",children:[N.jsx(wr,{style:{width:"100%"},children:Object.keys(zt).map(i=>{var s;return N.jsx(an,{span:6,style:{display:"flex",placeItems:"center",placeContent:"center"},children:N.jsx(gt,{position:"topLeft",content:i,children:N.jsx("span",{draggable:!0,onDragStart:o=>r(o,i,"attack"),children:N.jsx(_r,{src:(s=So[i].attack)==null?void 0:s.canvasImage,style:{padding:"0.25rem"}})})})})})}),N.jsx(na,{dashed:!0,margin:"1rem"}),N.jsx(wr,{style:{width:"100%"},children:Object.keys(Zt).map(i=>{var s;return N.jsx(an,{span:6,style:{display:"flex",placeItems:"center",placeContent:"center"},children:N.jsx(gt,{position:"topLeft",content:i,children:N.jsx("span",{draggable:!0,onDragStart:o=>r(o,i,"attack"),children:N.jsx(_r,{src:(s=So[i].attack)==null?void 0:s.canvasImage,style:{padding:"0.25rem"}})})})})})})]}),N.jsxs(oa,{tab:N.jsxs("span",{children:[N.jsx(cU,{style:{marginRight:"5px"}}),n.sidebar.defense]}),itemKey:"defense",children:[N.jsx(wr,{style:{width:"100%"},children:Object.keys(Mn).map(i=>{var s;return N.jsx(an,{span:6,style:{display:"flex",placeItems:"center",placeContent:"center"},children:N.jsx(gt,{position:"topLeft",content:i,children:N.jsx("span",{draggable:!0,onDragStart:o=>r(o,i,"defense"),children:N.jsx(_r,{className:"none-drag",src:(s=So[i].defense)==null?void 0:s.canvasImage,style:{padding:"0.25rem"}})})})})})}),N.jsx(na,{dashed:!0,margin:"1rem"}),N.jsx(wr,{style:{width:"100%"},children:Object.keys(Zt).map(i=>{var s;return N.jsx(an,{span:6,style:{display:"flex",placeItems:"center",placeContent:"center"},children:N.jsx(gt,{position:"topLeft",content:i,children:N.jsx("span",{draggable:!0,onDragStart:o=>r(o,i,"defense"),children:N.jsx(_r,{src:(s=So[i].defense)==null?void 0:s.canvasImage,style:{padding:"0.25rem"}})})})})})})]})]})})};var Fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function y3(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function uU(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var cy={exports:{}},Ld={},b3={},fe={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n._registerNode=n.Konva=n.glob=void 0;const e=Math.PI/180;n.glob=Fd!==void 0?Fd:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},n.Konva={_global:n.glob,version:"9.3.6",isBrowser:typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]"),isUnminified:/param/.test((function(t){}).toString()),dblClickWindow:400,getAngle:t=>n.Konva.angleDeg?t*e:t,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>n.Konva.DD.isDragging,isTransforming(){var t;return(t=n.Konva.Transformer)===null||t===void 0?void 0:t.isTransforming()},isDragReady:()=>!!n.Konva.DD.node,releaseCanvasOnDestroy:!0,document:n.glob.document,_injectGlobal(t){n.glob.Konva=t}},n._registerNode=t=>{n.Konva[t.prototype.getClassName()]=t},n.Konva._injectGlobal(n.Konva)})(fe);var rt={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Util=n.Transform=void 0;const e=fe;class t{constructor(d=[1,0,0,1,0,0]){this.dirty=!1,this.m=d&&d.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new t(this.m)}copyInto(d){d.m[0]=this.m[0],d.m[1]=this.m[1],d.m[2]=this.m[2],d.m[3]=this.m[3],d.m[4]=this.m[4],d.m[5]=this.m[5]}point(d){var u=this.m;return{x:u[0]*d.x+u[2]*d.y+u[4],y:u[1]*d.x+u[3]*d.y+u[5]}}translate(d,u){return this.m[4]+=this.m[0]*d+this.m[2]*u,this.m[5]+=this.m[1]*d+this.m[3]*u,this}scale(d,u){return this.m[0]*=d,this.m[1]*=d,this.m[2]*=u,this.m[3]*=u,this}rotate(d){var u=Math.cos(d),f=Math.sin(d),m=this.m[0]*u+this.m[2]*f,g=this.m[1]*u+this.m[3]*f,y=this.m[0]*-f+this.m[2]*u,v=this.m[1]*-f+this.m[3]*u;return this.m[0]=m,this.m[1]=g,this.m[2]=y,this.m[3]=v,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(d,u){var f=this.m[0]+this.m[2]*u,m=this.m[1]+this.m[3]*u,g=this.m[2]+this.m[0]*d,y=this.m[3]+this.m[1]*d;return this.m[0]=f,this.m[1]=m,this.m[2]=g,this.m[3]=y,this}multiply(d){var u=this.m[0]*d.m[0]+this.m[2]*d.m[1],f=this.m[1]*d.m[0]+this.m[3]*d.m[1],m=this.m[0]*d.m[2]+this.m[2]*d.m[3],g=this.m[1]*d.m[2]+this.m[3]*d.m[3],y=this.m[0]*d.m[4]+this.m[2]*d.m[5]+this.m[4],v=this.m[1]*d.m[4]+this.m[3]*d.m[5]+this.m[5];return this.m[0]=u,this.m[1]=f,this.m[2]=m,this.m[3]=g,this.m[4]=y,this.m[5]=v,this}invert(){var d=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),u=this.m[3]*d,f=-this.m[1]*d,m=-this.m[2]*d,g=this.m[0]*d,y=d*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),v=d*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=u,this.m[1]=f,this.m[2]=m,this.m[3]=g,this.m[4]=y,this.m[5]=v,this}getMatrix(){return this.m}decompose(){var d=this.m[0],u=this.m[1],f=this.m[2],m=this.m[3],g=d*m-u*f;let y={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(d!=0||u!=0){var v=Math.sqrt(d*d+u*u);y.rotation=u>0?Math.acos(d/v):-Math.acos(d/v),y.scaleX=v,y.scaleY=g/v,y.skewX=(d*f+u*m)/g,y.skewY=0}else if(f!=0||m!=0){var b=Math.sqrt(f*f+m*m);y.rotation=Math.PI/2-(m>0?Math.acos(-f/b):-Math.acos(f/b)),y.scaleX=g/b,y.scaleY=b,y.skewX=0,y.skewY=(d*f+u*m)/g}return y.rotation=n.Util._getRotation(y.rotation),y}}n.Transform=t;var r=Math.PI/180,i=180/Math.PI,s="Konva error: ",o={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},a=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,h=[];const c=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(l){setTimeout(l,60)};n.Util={_isElement:l=>!(!l||l.nodeType!=1),_isFunction:l=>!!(l&&l.constructor&&l.call&&l.apply),_isPlainObject:l=>!!l&&l.constructor===Object,_isArray:l=>Object.prototype.toString.call(l)==="[object Array]",_isNumber:l=>Object.prototype.toString.call(l)==="[object Number]"&&!isNaN(l)&&isFinite(l),_isString:l=>Object.prototype.toString.call(l)==="[object String]",_isBoolean:l=>Object.prototype.toString.call(l)==="[object Boolean]",isObject:l=>l instanceof Object,isValidSelector(l){if(typeof l!="string")return!1;var d=l[0];return d==="#"||d==="."||d===d.toUpperCase()},_sign:l=>l===0||l>0?1:-1,requestAnimFrame(l){h.push(l),h.length===1&&c(function(){const d=h;h=[],d.forEach(function(u){u()})})},createCanvasElement(){var l=document.createElement("canvas");try{l.style=l.style||{}}catch{}return l},createImageElement:()=>document.createElement("img"),_isInDocument(l){for(;l=l.parentNode;)if(l==document)return!0;return!1},_urlToImage(l,d){var u=n.Util.createImageElement();u.onload=function(){d(u)},u.src=l},_rgbToHex:(l,d,u)=>((1<<24)+(l<<16)+(d<<8)+u).toString(16).slice(1),_hexToRgb(l){l=l.replace("#","");var d=parseInt(l,16);return{r:d>>16&255,g:d>>8&255,b:255&d}},getRandomColor(){for(var l=(16777215*Math.random()|0).toString(16);l.length<6;)l="0"+l;return"#"+l},getRGB(l){var d;return l in o?{r:(d=o[l])[0],g:d[1],b:d[2]}:l[0]==="#"?this._hexToRgb(l.substring(1)):l.substr(0,4)==="rgb("?(d=a.exec(l.replace(/ /g,"")),{r:parseInt(d[1],10),g:parseInt(d[2],10),b:parseInt(d[3],10)}):{r:0,g:0,b:0}},colorToRGBA:l=>(l=l||"black",n.Util._namedColorToRBA(l)||n.Util._hex3ColorToRGBA(l)||n.Util._hex4ColorToRGBA(l)||n.Util._hex6ColorToRGBA(l)||n.Util._hex8ColorToRGBA(l)||n.Util._rgbColorToRGBA(l)||n.Util._rgbaColorToRGBA(l)||n.Util._hslColorToRGBA(l)),_namedColorToRBA(l){var d=o[l.toLowerCase()];return d?{r:d[0],g:d[1],b:d[2],a:1}:null},_rgbColorToRGBA(l){if(l.indexOf("rgb(")===0){var d=(l=l.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:d[0],g:d[1],b:d[2],a:1}}},_rgbaColorToRGBA(l){if(l.indexOf("rgba(")===0){var d=(l=l.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map((u,f)=>u.slice(-1)==="%"?f===3?parseInt(u)/100:parseInt(u)/100*255:Number(u));return{r:d[0],g:d[1],b:d[2],a:d[3]}}},_hex8ColorToRGBA(l){if(l[0]==="#"&&l.length===9)return{r:parseInt(l.slice(1,3),16),g:parseInt(l.slice(3,5),16),b:parseInt(l.slice(5,7),16),a:parseInt(l.slice(7,9),16)/255}},_hex6ColorToRGBA(l){if(l[0]==="#"&&l.length===7)return{r:parseInt(l.slice(1,3),16),g:parseInt(l.slice(3,5),16),b:parseInt(l.slice(5,7),16),a:1}},_hex4ColorToRGBA(l){if(l[0]==="#"&&l.length===5)return{r:parseInt(l[1]+l[1],16),g:parseInt(l[2]+l[2],16),b:parseInt(l[3]+l[3],16),a:parseInt(l[4]+l[4],16)/255}},_hex3ColorToRGBA(l){if(l[0]==="#"&&l.length===4)return{r:parseInt(l[1]+l[1],16),g:parseInt(l[2]+l[2],16),b:parseInt(l[3]+l[3],16),a:1}},_hslColorToRGBA(l){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(l)){const[d,...u]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(l),f=Number(u[0])/360,m=Number(u[1])/100,g=Number(u[2])/100;let y,v,b;if(m===0)return b=255*g,{r:Math.round(b),g:Math.round(b),b:Math.round(b),a:1};y=g<.5?g*(1+m):g+m-g*m;const w=2*g-y,C=[0,0,0];for(let O=0;O<3;O++)v=f+1/3*-(O-1),v<0&&v++,v>1&&v--,b=6*v<1?w+6*(y-w)*v:2*v<1?y:3*v<2?w+(y-w)*(2/3-v)*6:w,C[O]=255*b;return{r:Math.round(C[0]),g:Math.round(C[1]),b:Math.round(C[2]),a:1}}},haveIntersection:(l,d)=>!(d.x>l.x+l.width||d.x+d.width<l.x||d.y>l.y+l.height||d.y+d.height<l.y),cloneObject(l){var d={};for(var u in l)this._isPlainObject(l[u])?d[u]=this.cloneObject(l[u]):this._isArray(l[u])?d[u]=this.cloneArray(l[u]):d[u]=l[u];return d},cloneArray:l=>l.slice(0),degToRad:l=>l*r,radToDeg:l=>l*i,_degToRad:l=>(n.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),n.Util.degToRad(l)),_radToDeg:l=>(n.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),n.Util.radToDeg(l)),_getRotation:l=>e.Konva.angleDeg?n.Util.radToDeg(l):l,_capitalize:l=>l.charAt(0).toUpperCase()+l.slice(1),throw(l){throw new Error(s+l)},error(l){console.error(s+l)},warn(l){e.Konva.showWarnings&&console.warn("Konva warning: "+l)},each(l,d){for(var u in l)d(u,l[u])},_inRange:(l,d,u)=>d<=l&&l<u,_getProjectionToSegment(l,d,u,f,m,g){var y,v,b,w=(l-u)*(l-u)+(d-f)*(d-f);if(w==0)y=l,v=d,b=(m-u)*(m-u)+(g-f)*(g-f);else{var C=((m-l)*(u-l)+(g-d)*(f-d))/w;C<0?(y=l,v=d,b=(l-m)*(l-m)+(d-g)*(d-g)):C>1?(y=u,v=f,b=(u-m)*(u-m)+(f-g)*(f-g)):b=((y=l+C*(u-l))-m)*(y-m)+((v=d+C*(f-d))-g)*(v-g)}return[y,v,b]},_getProjectionToLine(l,d,u){var f=n.Util.cloneObject(l),m=Number.MAX_VALUE;return d.forEach(function(g,y){if(u||y!==d.length-1){var v=d[(y+1)%d.length],b=n.Util._getProjectionToSegment(g.x,g.y,v.x,v.y,l.x,l.y),w=b[0],C=b[1],O=b[2];O<m&&(f.x=w,f.y=C,m=O)}}),f},_prepareArrayForTween(l,d,u){var f,m=[],g=[];if(l.length>d.length){var y=d;d=l,l=y}for(f=0;f<l.length;f+=2)m.push({x:l[f],y:l[f+1]});for(f=0;f<d.length;f+=2)g.push({x:d[f],y:d[f+1]});var v=[];return g.forEach(function(b){var w=n.Util._getProjectionToLine(b,m,u);v.push(w.x),v.push(w.y)}),v},_prepareToStringify(l){var d;for(var u in l.visitedByCircularReferenceRemoval=!0,l)if(l.hasOwnProperty(u)&&l[u]&&typeof l[u]=="object"){if(d=Object.getOwnPropertyDescriptor(l,u),l[u].visitedByCircularReferenceRemoval||n.Util._isElement(l[u])){if(!d.configurable)return null;delete l[u]}else if(n.Util._prepareToStringify(l[u])===null){if(!d.configurable)return null;delete l[u]}}return delete l.visitedByCircularReferenceRemoval,l},_assign(l,d){for(var u in d)l[u]=d[u];return l},_getFirstPointerId:l=>l.touches?l.changedTouches[0].identifier:l.pointerId||999,releaseCanvas(...l){e.Konva.releaseCanvasOnDestroy&&l.forEach(d=>{d.width=0,d.height=0})},drawRoundedRectPath(l,d,u,f){let m=0,g=0,y=0,v=0;typeof f=="number"?m=g=y=v=Math.min(f,d/2,u/2):(m=Math.min(f[0]||0,d/2,u/2),g=Math.min(f[1]||0,d/2,u/2),v=Math.min(f[2]||0,d/2,u/2),y=Math.min(f[3]||0,d/2,u/2)),l.moveTo(m,0),l.lineTo(d-g,0),l.arc(d-g,g,g,3*Math.PI/2,0,!1),l.lineTo(d,u-v),l.arc(d-v,u-v,v,0,Math.PI/2,!1),l.lineTo(y,u),l.arc(y,u-y,y,Math.PI/2,Math.PI,!1),l.lineTo(0,m),l.arc(m,m,m,Math.PI,3*Math.PI/2,!1)}}})(rt);var Qe={},de={},re={};Object.defineProperty(re,"__esModule",{value:!0}),re.getComponentValidator=re.getBooleanValidator=re.getNumberArrayValidator=re.getFunctionValidator=re.getStringOrGradientValidator=re.getStringValidator=re.getNumberOrAutoValidator=re.getNumberOrArrayOfNumbersValidator=re.getNumberValidator=re.alphaComponent=re.RGBComponent=void 0;const Ar=fe,ot=rt;function Ir(n){return ot.Util._isString(n)?'"'+n+'"':Object.prototype.toString.call(n)==="[object Number]"||ot.Util._isBoolean(n)?n:Object.prototype.toString.call(n)}re.RGBComponent=function(n){return n>255?255:n<0?0:Math.round(n)},re.alphaComponent=function(n){return n>1?1:n<1e-4?1e-4:n},re.getNumberValidator=function(){if(Ar.Konva.isUnminified)return function(n,e){return ot.Util._isNumber(n)||ot.Util.warn(Ir(n)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),n}},re.getNumberOrArrayOfNumbersValidator=function(n){if(Ar.Konva.isUnminified)return function(e,t){let r=ot.Util._isNumber(e),i=ot.Util._isArray(e)&&e.length==n;return r||i||ot.Util.warn(Ir(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or Array<number>('+n+")"),e}},re.getNumberOrAutoValidator=function(){if(Ar.Konva.isUnminified)return function(n,e){return ot.Util._isNumber(n)||n==="auto"||ot.Util.warn(Ir(n)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),n}},re.getStringValidator=function(){if(Ar.Konva.isUnminified)return function(n,e){return ot.Util._isString(n)||ot.Util.warn(Ir(n)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),n}},re.getStringOrGradientValidator=function(){if(Ar.Konva.isUnminified)return function(n,e){const t=ot.Util._isString(n),r=Object.prototype.toString.call(n)==="[object CanvasGradient]"||n&&n.addColorStop;return t||r||ot.Util.warn(Ir(n)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),n}},re.getFunctionValidator=function(){if(Ar.Konva.isUnminified)return function(n,e){return ot.Util._isFunction(n)||ot.Util.warn(Ir(n)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),n}},re.getNumberArrayValidator=function(){if(Ar.Konva.isUnminified)return function(n,e){const t=Int8Array?Object.getPrototypeOf(Int8Array):null;return t&&n instanceof t||(ot.Util._isArray(n)?n.forEach(function(r){ot.Util._isNumber(r)||ot.Util.warn('"'+e+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):ot.Util.warn(Ir(n)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),n}},re.getBooleanValidator=function(){if(Ar.Konva.isUnminified)return function(n,e){return n===!0||n===!1||ot.Util.warn(Ir(n)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),n}},re.getComponentValidator=function(n){if(Ar.Konva.isUnminified)return function(e,t){return e==null||ot.Util.isObject(e)||ot.Util.warn(Ir(e)+' is a not valid value for "'+t+'" attribute. The value should be an object with properties '+n),e}},function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Factory=void 0;const e=rt,t=re;var r="get",i="set";n.Factory={addGetterSetter(s,o,a,h,c){n.Factory.addGetter(s,o,a),n.Factory.addSetter(s,o,h,c),n.Factory.addOverloadedGetterSetter(s,o)},addGetter(s,o,a){var h=r+e.Util._capitalize(o);s.prototype[h]=s.prototype[h]||function(){var c=this.attrs[o];return c===void 0?a:c}},addSetter(s,o,a,h){var c=i+e.Util._capitalize(o);s.prototype[c]||n.Factory.overWriteSetter(s,o,a,h)},overWriteSetter(s,o,a,h){var c=i+e.Util._capitalize(o);s.prototype[c]=function(l){return a&&l!=null&&(l=a.call(this,l,o)),this._setAttr(o,l),h&&h.call(this),this}},addComponentsGetterSetter(s,o,a,h,c){var l,d,u=a.length,f=e.Util._capitalize,m=r+f(o),g=i+f(o);s.prototype[m]=function(){var v={};for(l=0;l<u;l++)v[d=a[l]]=this.getAttr(o+f(d));return v};var y=(0,t.getComponentValidator)(a);s.prototype[g]=function(v){var b,w=this.attrs[o];for(b in h&&(v=h.call(this,v)),y&&y.call(this,v,o),v)v.hasOwnProperty(b)&&this._setAttr(o+f(b),v[b]);return v||a.forEach(C=>{this._setAttr(o+f(C),void 0)}),this._fireChangeEvent(o,w,v),c&&c.call(this),this},n.Factory.addOverloadedGetterSetter(s,o)},addOverloadedGetterSetter(s,o){var a=e.Util._capitalize(o),h=i+a,c=r+a;s.prototype[o]=function(){return arguments.length?(this[h](arguments[0]),this):this[c]()}},addDeprecatedGetterSetter(s,o,a,h){e.Util.error("Adding deprecated "+o);var c=r+e.Util._capitalize(o),l=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[c]=function(){e.Util.error(l);var d=this.attrs[o];return d===void 0?a:d},n.Factory.addSetter(s,o,h,function(){e.Util.error(l)}),n.Factory.addOverloadedGetterSetter(s,o)},backCompat(s,o){e.Util.each(o,function(a,h){var c=s.prototype[h],l=r+e.Util._capitalize(a),d=i+e.Util._capitalize(a);function u(){c.apply(this,arguments),e.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+h+'" instead.')}s.prototype[a]=u,s.prototype[l]=u,s.prototype[d]=u})},afterSetFilter(){this._filterUpToDate=!1}}}(de);var ir={},Vr={};Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.HitContext=Vr.SceneContext=Vr.Context=void 0;const g2=rt,pU=fe;var m2=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];let jd=class{constructor(e){this.canvas=e,pU.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,t){var r,i,s,o,a=this.traceArr,h=a.length,c="";for(r=0;r<h;r++)(s=(i=a[r]).method)?(o=i.args,c+=s,e?c+="()":g2.Util._isArray(o[0])?c+="(["+o.join(",")+"])":(t&&(o=o.map(l=>typeof l=="number"?Math.floor(l):l)),c+="("+o.join(",")+")")):(c+=i.property,e||(c+="="+i.val)),c+=";";return c}clearTrace(){this.traceArr=[]}_trace(e){var t=this.traceArr;t.push(e),t.length>=100&&t.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)}_applyLineCap(e){const t=e.attrs.lineCap;t&&this.setAttr("lineCap",t)}_applyOpacity(e){var t=e.getAbsoluteOpacity();t!==1&&this.setAttr("globalAlpha",t)}_applyLineJoin(e){const t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)}setAttr(e,t){this._context[e]=t}arc(e,t,r,i,s,o){this._context.arc(e,t,r,i,s,o)}arcTo(e,t,r,i,s){this._context.arcTo(e,t,r,i,s)}beginPath(){this._context.beginPath()}bezierCurveTo(e,t,r,i,s,o){this._context.bezierCurveTo(e,t,r,i,s,o)}clearRect(e,t,r,i){this._context.clearRect(e,t,r,i)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,t){var r=arguments;return r.length===2?this._context.createImageData(e,t):r.length===1?this._context.createImageData(e):void 0}createLinearGradient(e,t,r,i){return this._context.createLinearGradient(e,t,r,i)}createPattern(e,t){return this._context.createPattern(e,t)}createRadialGradient(e,t,r,i,s,o){return this._context.createRadialGradient(e,t,r,i,s,o)}drawImage(e,t,r,i,s,o,a,h,c){var l=arguments,d=this._context;l.length===3?d.drawImage(e,t,r):l.length===5?d.drawImage(e,t,r,i,s):l.length===9&&d.drawImage(e,t,r,i,s,o,a,h,c)}ellipse(e,t,r,i,s,o,a,h){this._context.ellipse(e,t,r,i,s,o,a,h)}isPointInPath(e,t,r,i){return r?this._context.isPointInPath(r,e,t,i):this._context.isPointInPath(e,t,i)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,t,r,i){this._context.fillRect(e,t,r,i)}strokeRect(e,t,r,i){this._context.strokeRect(e,t,r,i)}fillText(e,t,r,i){i?this._context.fillText(e,t,r,i):this._context.fillText(e,t,r)}measureText(e){return this._context.measureText(e)}getImageData(e,t,r,i){return this._context.getImageData(e,t,r,i)}lineTo(e,t){this._context.lineTo(e,t)}moveTo(e,t){this._context.moveTo(e,t)}rect(e,t,r,i){this._context.rect(e,t,r,i)}roundRect(e,t,r,i,s){this._context.roundRect(e,t,r,i,s)}putImageData(e,t,r){this._context.putImageData(e,t,r)}quadraticCurveTo(e,t,r,i){this._context.quadraticCurveTo(e,t,r,i)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,t){this._context.scale(e,t)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,t,r,i,s,o){this._context.setTransform(e,t,r,i,s,o)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,t,r,i){this._context.strokeText(e,t,r,i)}transform(e,t,r,i,s,o){this._context.transform(e,t,r,i,s,o)}translate(e,t){this._context.translate(e,t)}_enableTrace(){var e,t,r=this,i=m2.length,s=this.setAttr,o=function(a){var h,c=r[a];r[a]=function(){return t=function(l){var d,u,f=[],m=l.length,g=g2.Util;for(d=0;d<m;d++)u=l[d],g._isNumber(u)?u=Math.round(1e3*u)/1e3:g._isString(u)||(u+=""),f.push(u);return f}(Array.prototype.slice.call(arguments,0)),h=c.apply(r,arguments),r._trace({method:a,args:t}),h}};for(e=0;e<i;e++)o(m2[e]);r.setAttr=function(){s.apply(r,arguments);var a=arguments[0],h=arguments[1];a!=="shadowOffsetX"&&a!=="shadowOffsetY"&&a!=="shadowBlur"||(h/=this.canvas.getPixelRatio()),r._trace({property:a,val:h})}}_applyGlobalCompositeOperation(e){const t=e.attrs.globalCompositeOperation;!t||t==="source-over"||this.setAttr("globalCompositeOperation",t)}};Vr.Context=jd,["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach(function(n){Object.defineProperty(jd.prototype,n,{get(){return this._context[n]},set(e){this._context[n]=e}})});Vr.SceneContext=class extends jd{constructor(n,{willReadFrequently:e=!1}={}){super(n),this._context=n._canvas.getContext("2d",{willReadFrequently:e})}_fillColor(n){var e=n.fill();this.setAttr("fillStyle",e),n._fillFunc(this)}_fillPattern(n){this.setAttr("fillStyle",n._getFillPattern()),n._fillFunc(this)}_fillLinearGradient(n){var e=n._getLinearGradient();e&&(this.setAttr("fillStyle",e),n._fillFunc(this))}_fillRadialGradient(n){const e=n._getRadialGradient();e&&(this.setAttr("fillStyle",e),n._fillFunc(this))}_fill(n){const e=n.fill(),t=n.getFillPriority();if(e&&t==="color")return void this._fillColor(n);const r=n.getFillPatternImage();if(r&&t==="pattern")return void this._fillPattern(n);const i=n.getFillLinearGradientColorStops();if(i&&t==="linear-gradient")return void this._fillLinearGradient(n);const s=n.getFillRadialGradientColorStops();s&&t==="radial-gradient"?this._fillRadialGradient(n):e?this._fillColor(n):r?this._fillPattern(n):i?this._fillLinearGradient(n):s&&this._fillRadialGradient(n)}_strokeLinearGradient(n){const e=n.getStrokeLinearGradientStartPoint(),t=n.getStrokeLinearGradientEndPoint(),r=n.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(e.x,e.y,t.x,t.y);if(r){for(var s=0;s<r.length;s+=2)i.addColorStop(r[s],r[s+1]);this.setAttr("strokeStyle",i)}}_stroke(n){var e=n.dash(),t=n.getStrokeScaleEnabled();if(n.hasStroke()){if(!t){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(n),e&&n.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",n.dashOffset())),this.setAttr("lineWidth",n.strokeWidth()),n.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),n.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(n):this.setAttr("strokeStyle",n.stroke()),n._strokeFunc(this),t||this.restore()}}_applyShadow(n){var e,t,r,i=(e=n.getShadowRGBA())!==null&&e!==void 0?e:"black",s=(t=n.getShadowBlur())!==null&&t!==void 0?t:5,o=(r=n.getShadowOffset())!==null&&r!==void 0?r:{x:0,y:0},a=n.getAbsoluteScale(),h=this.canvas.getPixelRatio(),c=a.x*h,l=a.y*h;this.setAttr("shadowColor",i),this.setAttr("shadowBlur",s*Math.min(Math.abs(c),Math.abs(l))),this.setAttr("shadowOffsetX",o.x*c),this.setAttr("shadowOffsetY",o.y*l)}};Vr.HitContext=class extends jd{constructor(n){super(n),this._context=n._canvas.getContext("2d",{willReadFrequently:!0})}_fill(n){this.save(),this.setAttr("fillStyle",n.colorKey),n._fillFuncHit(this),this.restore()}strokeShape(n){n.hasHitStroke()&&this._stroke(n)}_stroke(n){if(n.hasHitStroke()){const i=n.getStrokeScaleEnabled();if(!i){this.save();var e=this.getCanvas().getPixelRatio();this.setTransform(e,0,0,e,0,0)}this._applyLineCap(n);var t=n.hitStrokeWidth(),r=t==="auto"?n.strokeWidth():t;this.setAttr("lineWidth",r),this.setAttr("strokeStyle",n.colorKey),n._strokeFuncHit(this),i||this.restore()}}},Object.defineProperty(ir,"__esModule",{value:!0}),ir.HitCanvas=ir.SceneCanvas=ir.Canvas=void 0;const qh=rt,_3=Vr,v2=fe,fU=de,gU=re;var Zh;let Bd=class{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var t=(e||{}).pixelRatio||v2.Konva.pixelRatio||function(){if(Zh)return Zh;var r=qh.Util.createCanvasElement(),i=r.getContext("2d");return Zh=(v2.Konva._global.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1),qh.Util.releaseCanvas(r),Zh}();this.pixelRatio=t,this._canvas=qh.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var t=this.pixelRatio;this.getContext()._context.scale(t,t)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var t=this.pixelRatio;this.getContext()._context.scale(t,t)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,t){this.setWidth(e||0),this.setHeight(t||0)}toDataURL(e,t){try{return this._canvas.toDataURL(e,t)}catch{try{return this._canvas.toDataURL()}catch(i){return qh.Util.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};ir.Canvas=Bd,fU.Factory.addGetterSetter(Bd,"pixelRatio",void 0,(0,gU.getNumberValidator)());ir.SceneCanvas=class extends Bd{constructor(n={width:0,height:0,willReadFrequently:!1}){super(n),this.context=new _3.SceneContext(this,{willReadFrequently:n.willReadFrequently}),this.setSize(n.width,n.height)}};ir.HitCanvas=class extends Bd{constructor(n={width:0,height:0}){super(n),this.hitCanvas=!0,this.context=new _3.HitContext(this),this.setSize(n.width,n.height)}};var Bp={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DD=void 0;const e=fe,t=rt;n.DD={get isDragging(){var r=!1;return n.DD._dragElements.forEach(i=>{i.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){var r;return n.DD._dragElements.forEach(i=>{r=i.node}),r},_dragElements:new Map,_drag(r){const i=[];n.DD._dragElements.forEach((s,o)=>{const{node:a}=s,h=a.getStage();h.setPointersPositions(r),s.pointerId===void 0&&(s.pointerId=t.Util._getFirstPointerId(r));const c=h._changedPointerPositions.find(d=>d.id===s.pointerId);if(c){if(s.dragStatus!=="dragging"){var l=a.dragDistance();if(Math.max(Math.abs(c.x-s.startPointerPos.x),Math.abs(c.y-s.startPointerPos.y))<l||(a.startDrag({evt:r}),!a.isDragging()))return}a._setDragPosition(r,s),i.push(a)}}),i.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:r},!0)})},_endDragBefore(r){const i=[];n.DD._dragElements.forEach(s=>{const{node:o}=s,a=o.getStage();if(r&&a.setPointersPositions(r),!a._changedPointerPositions.find(c=>c.id===s.pointerId))return;s.dragStatus!=="dragging"&&s.dragStatus!=="stopped"||(n.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,s.dragStatus="stopped");const h=s.node.getLayer()||s.node instanceof e.Konva.Stage&&s.node;h&&i.indexOf(h)===-1&&i.push(h)}),i.forEach(s=>{s.draw()})},_endDragAfter(r){n.DD._dragElements.forEach((i,s)=>{i.dragStatus==="stopped"&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:r},!0),i.dragStatus!=="dragging"&&n.DD._dragElements.delete(s)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",n.DD._endDragBefore,!0),window.addEventListener("touchend",n.DD._endDragBefore,!0),window.addEventListener("mousemove",n.DD._drag),window.addEventListener("touchmove",n.DD._drag),window.addEventListener("mouseup",n.DD._endDragAfter,!1),window.addEventListener("touchend",n.DD._endDragAfter,!1))})(Bp),Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.Node=void 0;const ve=rt,hl=de,Ya=ir,si=fe,An=Bp,ct=re;var Vc="absoluteOpacity",Qh="allEventListeners",jr="absoluteTransform",y2="absoluteScale",Ji="canvas",qm="listening",b2="mouseenter",_2="mouseleave",w2="Shape",Hc=" ",S2="stage",bi="transform",Zm="visible",mU=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Hc);let vU=1,le=class Qm{constructor(e){this._id=vU++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){e!==bi&&e!==jr||!this._cache.get(e)?e?this._cache.delete(e):this._cache.clear():this._cache.get(e).dirty=!0}_getCache(e,t){var r=this._cache.get(e);return(r===void 0||(e===bi||e===jr)&&r.dirty===!0)&&(r=t.call(this),this._cache.set(e,r)),r}_calculate(e,t,r){if(!this._attachedDepsListeners.get(e)){const i=t.map(s=>s+"Change.konva").join(Hc);this.on(i,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,r)}_getCanvasCache(){return this._cache.get(Ji)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===jr&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Ji)){const{scene:e,filter:t,hit:r}=this._cache.get(Ji);ve.Util.releaseCanvas(e,t,r),this._cache.delete(Ji)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var t=e||{},r={};t.x!==void 0&&t.y!==void 0&&t.width!==void 0&&t.height!==void 0||(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var i=Math.ceil(t.width||r.width),s=Math.ceil(t.height||r.height),o=t.pixelRatio,a=t.x===void 0?Math.floor(r.x):t.x,h=t.y===void 0?Math.floor(r.y):t.y,c=t.offset||0,l=t.drawBorder||!1,d=t.hitCanvasPixelRatio||1;if(!i||!s)return void ve.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");i+=2*c+(Math.abs(Math.round(r.x)-a)>.5?1:0),s+=2*c+(Math.abs(Math.round(r.y)-h)>.5?1:0),a-=c,h-=c;var u=new Ya.SceneCanvas({pixelRatio:o,width:i,height:s}),f=new Ya.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),m=new Ya.HitCanvas({pixelRatio:d,width:i,height:s}),g=u.getContext(),y=m.getContext();return m.isCache=!0,u.isCache=!0,this._cache.delete(Ji),this._filterUpToDate=!1,t.imageSmoothingEnabled===!1&&(u.getContext()._context.imageSmoothingEnabled=!1,f.getContext()._context.imageSmoothingEnabled=!1),g.save(),y.save(),g.translate(-a,-h),y.translate(-a,-h),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Vc),this._clearSelfAndDescendantCache(y2),this.drawScene(u,this),this.drawHit(m,this),this._isUnderCache=!1,g.restore(),y.restore(),l&&(g.save(),g.beginPath(),g.rect(0,0,i,s),g.closePath(),g.setAttr("strokeStyle","red"),g.setAttr("lineWidth",5),g.stroke(),g.restore()),this._cache.set(Ji,{scene:u,filter:f,hit:m,x:a,y:h}),this._requestDraw(),this}isCached(){return this._cache.has(Ji)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,t){var r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],i=1/0,s=1/0,o=-1/0,a=-1/0,h=this.getAbsoluteTransform(t);return r.forEach(function(c){var l=h.point(c);i===void 0&&(i=o=l.x,s=a=l.y),i=Math.min(i,l.x),s=Math.min(s,l.y),o=Math.max(o,l.x),a=Math.max(a,l.y)}),{x:i,y:s,width:o-i,height:a-s}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const t=this._getCanvasCache();e.translate(t.x,t.y);var r=this._getCachedSceneCanvas(),i=r.pixelRatio;e.drawImage(r._canvas,0,0,r.width/i,r.height/i),e.restore()}_drawCachedHitCanvas(e){var t=this._getCanvasCache(),r=t.hit;e.save(),e.translate(t.x,t.y),e.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e,t,r,i,s=this.filters(),o=this._getCanvasCache(),a=o.scene,h=o.filter,c=h.getContext();if(s){if(!this._filterUpToDate){var l=a.pixelRatio;h.setSize(a.width/a.pixelRatio,a.height/a.pixelRatio);try{for(e=s.length,c.clear(),c.drawImage(a._canvas,0,0,a.getWidth()/l,a.getHeight()/l),t=c.getImageData(0,0,h.getWidth(),h.getHeight()),r=0;r<e;r++)typeof(i=s[r])=="function"?(i.call(this,t),c.putImageData(t,0,0)):ve.Util.error("Filter should be type of function, but got "+typeof i+" instead. Please check correct filters")}catch(d){ve.Util.error("Unable to apply filter. "+d.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return h}return a}on(e,t){if(this._cache&&this._cache.delete(Qh),arguments.length===3)return this._delegate.apply(this,arguments);var r,i,s,o,a=e.split(Hc),h=a.length;for(r=0;r<h;r++)s=(i=a[r].split("."))[0],o=i[1]||"",this.eventListeners[s]||(this.eventListeners[s]=[]),this.eventListeners[s].push({name:o,handler:t});return this}off(e,t){var r,i,s,o,a,h=(e||"").split(Hc),c=h.length;if(this._cache&&this._cache.delete(Qh),!e)for(i in this.eventListeners)this._off(i);for(r=0;r<c;r++)if(o=(s=h[r].split("."))[0],a=s[1],o)this.eventListeners[o]&&this._off(o,a,t);else for(i in this.eventListeners)this._off(i,a,t);return this}dispatchEvent(e){var t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this}addEventListener(e,t){return this.on(e,function(r){t.call(this,r.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,t,r){var i=this;this.on(e,function(s){for(var o=s.target.findAncestors(t,!0,i),a=0;a<o.length;a++)(s=ve.Util.cloneObject(s)).currentTarget=o[a],r.call(o[a],s)})}remove(){return this.isDragging()&&this.stopDrag(),An.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(jr),this._clearSelfAndDescendantCache(Vc),this._clearSelfAndDescendantCache(y2),this._clearSelfAndDescendantCache(S2),this._clearSelfAndDescendantCache(Zm),this._clearSelfAndDescendantCache(qm)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var t="get"+ve.Util._capitalize(e);return ve.Util._isFunction(this[t])?this[t]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),t=[];e;)t.push(e),e=e.getParent();return t}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var t,r;if(!e)return this;for(t in e)t!=="children"&&(r="set"+ve.Util._capitalize(t),ve.Util._isFunction(this[r])?this[r](e[t]):this._setAttr(t,e[t]))}),this}isListening(){return this._getCache(qm,this._isListening)}_isListening(e){if(!this.listening())return!1;const t=this.getParent();return!t||t===e||this===e||t._isListening(e)}isVisible(){return this._getCache(Zm,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const t=this.getParent();return!t||t===e||this===e||t._isVisible(e)}shouldDrawHit(e,t=!1){if(e)return this._isVisible(e)&&this._isListening(e);var r=this.getLayer(),i=!1;An.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===r)&&(i=!0)});var s=!t&&!si.Konva.hitOnDragEnabled&&(i||si.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e,t,r,i,s=this.getDepth(),o=this,a=0;const h=this.getStage();return o.nodeType!=="Stage"&&h&&function c(l){for(e=[],t=l.length,r=0;r<t;r++)i=l[r],a++,i.nodeType!==w2&&(e=e.concat(i.getChildren().slice())),i._id===o._id&&(r=t);e.length>0&&e[0].getDepth()<=s&&c(e)}(h.getChildren()),a}getDepth(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(bi),this._clearSelfAndDescendantCache(jr)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;var t=e.getPointerPosition();if(!t)return null;var r=this.getAbsoluteTransform().copy();return r.invert(),r.point(t)}getAbsolutePosition(e){let t=!1,r=this.parent;for(;r;){if(r.isCached()){t=!0;break}r=r.parent}t&&!e&&(e=!0);var i=this.getAbsoluteTransform(e).getMatrix(),s=new ve.Transform,o=this.offset();return s.m=i.slice(),s.translate(o.x,o.y),s.getTranslation()}setAbsolutePosition(e){const{x:t,y:r,...i}=this._clearTransform();this.attrs.x=t,this.attrs.y=r,this._clearCache(bi);var s=this._getAbsoluteTransform().copy();return s.invert(),s.translate(e.x,e.y),e={x:this.attrs.x+s.getTranslation().x,y:this.attrs.y+s.getTranslation().y},this._setTransform(i),this.setPosition({x:e.x,y:e.y}),this._clearCache(bi),this._clearSelfAndDescendantCache(jr),this}_setTransform(e){var t;for(t in e)this.attrs[t]=e[t]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var t=e.x,r=e.y,i=this.x(),s=this.y();return t!==void 0&&(i+=t),r!==void 0&&(s+=r),this.setPosition({x:i,y:s}),this}_eachAncestorReverse(e,t){var r,i,s=[],o=this.getParent();if(!t||t._id!==this._id){for(s.unshift(this);o&&(!t||o._id!==t._id);)s.unshift(o),o=o.parent;for(r=s.length,i=0;i<r;i++)e(s[i])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return ve.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return ve.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return ve.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return ve.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(e){if(!this.parent)return ve.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&ve.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Vc,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),t=this.getParent();return t&&!t._isUnderCache&&(e*=t.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e,t,r,i,s=this.getAttrs();const o={attrs:{},className:this.getClassName()};for(e in s)t=s[e],ve.Util.isObject(t)&&!ve.Util._isPlainObject(t)&&!ve.Util._isArray(t)||(r=typeof this[e]=="function"&&this[e],delete s[e],i=r?r.call(this):null,s[e]=t,i!==t&&(o.attrs[e]=t));return ve.Util._prepareToStringify(o)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,t,r){var i=[];t&&this._isMatch(e)&&i.push(this);for(var s=this.parent;s;){if(s===r)return i;s._isMatch(e)&&i.push(s),s=s.parent}return i}isAncestorOf(e){return!1}findAncestor(e,t,r){return this.findAncestors(e,t,r)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var t,r,i=e.replace(/ /g,"").split(","),s=i.length;for(t=0;t<s;t++)if(r=i[t],ve.Util.isValidSelector(r)||(ve.Util.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),ve.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),ve.Util.warn("Konva is awesome, right?")),r.charAt(0)==="#"){if(this.id()===r.slice(1))return!0}else if(r.charAt(0)==="."){if(this.hasName(r.slice(1)))return!0}else if(this.className===r||this.nodeType===r)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(S2,this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():null}fire(e,t={},r){return t.target=t.target||this,r?this._fireAndBubble(e,t):this._fire(e,t),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(jr,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var t;if(e)return t=new ve.Transform,this._eachAncestorReverse(function(i){var s=i.transformsEnabled();s==="all"?t.multiply(i.getTransform()):s==="position"&&t.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},e),t;t=this._cache.get(jr)||new ve.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(t):t.reset();var r=this.transformsEnabled();if(r==="all")t.multiply(this.getTransform());else if(r==="position"){const i=this.attrs.x||0,s=this.attrs.y||0,o=this.attrs.offsetX||0,a=this.attrs.offsetY||0;t.translate(i-o,s-a)}return t.dirty=!1,t}getAbsoluteScale(e){for(var t=this;t;)t._isUnderCache&&(e=t),t=t.getParent();const r=this.getAbsoluteTransform(e).decompose();return{x:r.scaleX,y:r.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(bi,this._getTransform)}_getTransform(){var e,t,r=this._cache.get(bi)||new ve.Transform;r.reset();var i=this.x(),s=this.y(),o=si.Konva.getAngle(this.rotation()),a=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,h=(t=this.attrs.scaleY)!==null&&t!==void 0?t:1,c=this.attrs.skewX||0,l=this.attrs.skewY||0,d=this.attrs.offsetX||0,u=this.attrs.offsetY||0;return i===0&&s===0||r.translate(i,s),o!==0&&r.rotate(o),c===0&&l===0||r.skew(c,l),a===1&&h===1||r.scale(a,h),d===0&&u===0||r.translate(-1*d,-1*u),r.dirty=!1,r}clone(e){var t,r,i,s,o,a=ve.Util.cloneObject(this.attrs);for(t in e)a[t]=e[t];var h=new this.constructor(a);for(t in this.eventListeners)for(i=(r=this.eventListeners[t]).length,s=0;s<i;s++)(o=r[s]).name.indexOf("konva")<0&&(h.eventListeners[t]||(h.eventListeners[t]=[]),h.eventListeners[t].push(o));return h}_toKonvaCanvas(e){e=e||{};var t=this.getClientRect(),r=this.getStage(),i=e.x!==void 0?e.x:Math.floor(t.x),s=e.y!==void 0?e.y:Math.floor(t.y),o=e.pixelRatio||1,a=new Ya.SceneCanvas({width:e.width||Math.ceil(t.width)||(r?r.width():0),height:e.height||Math.ceil(t.height)||(r?r.height():0),pixelRatio:o}),h=a.getContext();const c=new Ya.SceneCanvas({width:a.width/a.pixelRatio+Math.abs(i),height:a.height/a.pixelRatio+Math.abs(s),pixelRatio:a.pixelRatio});return e.imageSmoothingEnabled===!1&&(h._context.imageSmoothingEnabled=!1),h.save(),(i||s)&&h.translate(-1*i,-1*s),this.drawScene(a,void 0,c),h.restore(),a}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){var t=(e=e||{}).mimeType||null,r=e.quality||null,i=this._toKonvaCanvas(e).toDataURL(t,r);return e.callback&&e.callback(i),i}toImage(e){return new Promise((t,r)=>{try{const i=e==null?void 0:e.callback;i&&delete e.callback,ve.Util._urlToImage(this.toDataURL(e),function(s){t(s),i==null||i(s)})}catch(i){r(i)}})}toBlob(e){return new Promise((t,r)=>{try{const i=e==null?void 0:e.callback;i&&delete e.callback,this.toCanvas(e).toBlob(s=>{t(s),i==null||i(s)},e==null?void 0:e.mimeType,e==null?void 0:e.quality)}catch(i){r(i)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():si.Konva.dragDistance}_off(e,t,r){var i,s,o,a=this.eventListeners[e];for(i=0;i<a.length;i++)if(s=a[i].name,o=a[i].handler,!(s==="konva"&&t!=="konva"||t&&s!==t||r&&r!==o)){if(a.splice(i,1),a.length===0){delete this.eventListeners[e];break}i--}}_fireChangeEvent(e,t,r){this._fire(e+"Change",{oldVal:t,newVal:r})}addName(e){if(!this.hasName(e)){var t=this.name(),r=t?t+" "+e:e;this.name(r)}return this}hasName(e){if(!e)return!1;const t=this.name();return!!t&&(t||"").split(/\s/g).indexOf(e)!==-1}removeName(e){var t=(this.name()||"").split(/\s/g),r=t.indexOf(e);return r!==-1&&(t.splice(r,1),this.name(t.join(" "))),this}setAttr(e,t){var r=this["set"+ve.Util._capitalize(e)];return ve.Util._isFunction(r)?r.call(this,t):this._setAttr(e,t),this}_requestDraw(){if(si.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,t){var r=this.attrs[e];(r!==t||ve.Util.isObject(t))&&(t==null?delete this.attrs[e]:this.attrs[e]=t,this._shouldFireChangeEvents&&this._fireChangeEvent(e,r,t),this._requestDraw())}_setComponentAttr(e,t,r){var i;r!==void 0&&((i=this.attrs[e])||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=r,this._fireChangeEvent(e,i,r))}_fireAndBubble(e,t,r){if(t&&this.nodeType===w2&&(t.target=this),!((e===b2||e===_2)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r))){this._fire(e,t);var i=(e===b2||e===_2)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(t&&!t.cancelBubble||!t)&&this.parent&&this.parent.isListening()&&!i&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,t,r):this._fireAndBubble.call(this.parent,e,t))}}_getProtoListeners(e){var t,r,i;const s=(t=this._cache.get(Qh))!==null&&t!==void 0?t:{};let o=s==null?void 0:s[e];if(o===void 0){o=[];let a=Object.getPrototypeOf(this);for(;a;){const h=(i=(r=a.eventListeners)===null||r===void 0?void 0:r[e])!==null&&i!==void 0?i:[];o.push(...h),a=Object.getPrototypeOf(a)}s[e]=o,this._cache.set(Qh,s)}return o}_fire(e,t){(t=t||{}).currentTarget=this,t.type=e;const r=this._getProtoListeners(e);if(r)for(var i=0;i<r.length;i++)r[i].handler.call(this,t);const s=this.eventListeners[e];if(s)for(i=0;i<s.length;i++)s[i].handler.call(this,t)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var t=e?e.pointerId:void 0,r=this.getStage(),i=this.getAbsolutePosition();if(r){var s=r._getPointerById(t)||r._changedPointerPositions[0]||i;An.DD._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-i.x,y:s.y-i.y},dragStatus:"ready",pointerId:t})}}startDrag(e,t=!0){An.DD._dragElements.has(this._id)||this._createDragElement(e),An.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},t)}_setDragPosition(e,t){const r=this.getStage()._getPointerById(t.pointerId);if(r){var i={x:r.x-t.offset.x,y:r.y-t.offset.y},s=this.dragBoundFunc();if(s!==void 0){const o=s.call(this,i,e);o?i=o:ve.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===i.x&&this._lastPos.y===i.y||(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}}stopDrag(e){const t=An.DD._dragElements.get(this._id);t&&(t.dragStatus="stopped"),An.DD._endDragBefore(e),An.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=An.DD._dragElements.get(this._id);return!!e&&e.dragStatus==="dragging"}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if((e.evt.button===void 0||si.Konva.dragButtons.indexOf(e.evt.button)>=0)&&!this.isDragging()){var t=!1;An.DD._dragElements.forEach(r=>{this.isAncestorOf(r.node)&&(t=!0)}),t||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const e=An.DD._dragElements.get(this._id),t=e&&e.dragStatus==="dragging",r=e&&e.dragStatus==="ready";t?this.stopDrag():r&&An.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const t=this.getStage();if(!t)return!1;const r={x:-e.x,y:-e.y,width:t.width()+2*e.x,height:t.height()+2*e.y};return ve.Util.haveIntersection(r,this.getClientRect())}static create(e,t){return ve.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,t)}static _createNode(e,t){var r,i,s,o=Qm.prototype.getClassName.call(e),a=e.children;if(t&&(e.attrs.container=t),si.Konva[o]||(ve.Util.warn('Can not find a node with class name "'+o+'". Fallback to "Shape".'),o="Shape"),r=new si.Konva[o](e.attrs),a)for(i=a.length,s=0;s<i;s++)r.add(Qm._createNode(a[s]));return r}};Qe.Node=le,le.prototype.nodeType="Node",le.prototype._attrsAffectingSize=[],le.prototype.eventListeners={},le.prototype.on.call(le.prototype,mU,function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(bi),this._clearSelfAndDescendantCache(jr))}),le.prototype.on.call(le.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Zm)}),le.prototype.on.call(le.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(qm)}),le.prototype.on.call(le.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Vc)});const Fe=hl.Factory.addGetterSetter;Fe(le,"zIndex"),Fe(le,"absolutePosition"),Fe(le,"position"),Fe(le,"x",0,(0,ct.getNumberValidator)()),Fe(le,"y",0,(0,ct.getNumberValidator)()),Fe(le,"globalCompositeOperation","source-over",(0,ct.getStringValidator)()),Fe(le,"opacity",1,(0,ct.getNumberValidator)()),Fe(le,"name","",(0,ct.getStringValidator)()),Fe(le,"id","",(0,ct.getStringValidator)()),Fe(le,"rotation",0,(0,ct.getNumberValidator)()),hl.Factory.addComponentsGetterSetter(le,"scale",["x","y"]),Fe(le,"scaleX",1,(0,ct.getNumberValidator)()),Fe(le,"scaleY",1,(0,ct.getNumberValidator)()),hl.Factory.addComponentsGetterSetter(le,"skew",["x","y"]),Fe(le,"skewX",0,(0,ct.getNumberValidator)()),Fe(le,"skewY",0,(0,ct.getNumberValidator)()),hl.Factory.addComponentsGetterSetter(le,"offset",["x","y"]),Fe(le,"offsetX",0,(0,ct.getNumberValidator)()),Fe(le,"offsetY",0,(0,ct.getNumberValidator)()),Fe(le,"dragDistance",null,(0,ct.getNumberValidator)()),Fe(le,"width",0,(0,ct.getNumberValidator)()),Fe(le,"height",0,(0,ct.getNumberValidator)()),Fe(le,"listening",!0,(0,ct.getBooleanValidator)()),Fe(le,"preventDefault",!0,(0,ct.getBooleanValidator)()),Fe(le,"filters",null,function(n){return this._filterUpToDate=!1,n}),Fe(le,"visible",!0,(0,ct.getBooleanValidator)()),Fe(le,"transformsEnabled","all",(0,ct.getStringValidator)()),Fe(le,"size"),Fe(le,"dragBoundFunc"),Fe(le,"draggable",!1,(0,ct.getBooleanValidator)()),hl.Factory.backCompat(le,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Bs={};Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.Container=void 0;const so=de,Yf=Qe,Jh=re;let es=class extends Yf.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const t=this.children||[];var r=[];return t.forEach(function(i){e(i)&&r.push(i)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(var t=0;t<e.length;t++)this.add(e[t]);return this}const r=e[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var t=this._generalFind(e,!0);return t.length>0?t[0]:void 0}_generalFind(e,t){var r=[];return this._descendants(i=>{const s=i._isMatch(e);return s&&r.push(i),!(!s||!t)}),r}_descendants(e){let t=!1;const r=this.getChildren();for(const i of r)if(t=e(i),t||i.hasChildren()&&(t=i._descendants(e),t))return!0;return!1}toObject(){var e=Yf.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(t=>{e.children.push(t.toObject())}),e}isAncestorOf(e){for(var t=e.getParent();t;){if(t._id===this._id)return!0;t=t.getParent()}return!1}clone(e){var t=Yf.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(r){t.add(r.clone())}),t}getAllIntersections(e){var t=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(e)&&t.push(r)}),t}_clearSelfAndDescendantCache(e){var t;super._clearSelfAndDescendantCache(e),this.isCached()||(t=this.children)===null||t===void 0||t.forEach(function(r){r._clearSelfAndDescendantCache(e)})}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(t,r){t.index=r}),this._requestDraw()}drawScene(e,t,r){var i=this.getLayer(),s=e||i&&i.getCanvas(),o=s&&s.getContext(),a=this._getCanvasCache(),h=a&&a.scene,c=s&&s.isCache;if(!this.isVisible()&&!c)return this;if(h){o.save();var l=this.getAbsoluteTransform(t).getMatrix();o.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",s,t,r);return this}drawHit(e,t){if(!this.shouldDrawHit(t))return this;var r=this.getLayer(),i=e||r&&r.hitCanvas,s=i&&i.getContext(),o=this._getCanvasCache();if(o&&o.hit){s.save();var a=this.getAbsoluteTransform(t).getMatrix();s.transform(a[0],a[1],a[2],a[3],a[4],a[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",i,t);return this}_drawChildren(e,t,r,i){var s,o=t&&t.getContext(),a=this.clipWidth(),h=this.clipHeight(),c=this.clipFunc(),l=typeof a=="number"&&typeof h=="number"||c;const d=r===this;if(l){o.save();var u=this.getAbsoluteTransform(r),f=u.getMatrix();let v;if(o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),o.beginPath(),c)v=c.call(this,o,this);else{var m=this.clipX(),g=this.clipY();o.rect(m||0,g||0,a,h)}o.clip.apply(o,v),f=u.copy().invert().getMatrix(),o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}var y=!d&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";y&&(o.save(),o._applyGlobalCompositeOperation(this)),(s=this.children)===null||s===void 0||s.forEach(function(v){v[e](t,r,i)}),y&&o.restore(),l&&o.restore()}getClientRect(e={}){var t,r,i,s,o,a=e.skipTransform,h=e.relativeTo,c={x:1/0,y:1/0,width:0,height:0},l=this;(t=this.children)===null||t===void 0||t.forEach(function(m){if(m.visible()){var g=m.getClientRect({relativeTo:l,skipShadow:e.skipShadow,skipStroke:e.skipStroke});g.width===0&&g.height===0||(r===void 0?(r=g.x,i=g.y,s=g.x+g.width,o=g.y+g.height):(r=Math.min(r,g.x),i=Math.min(i,g.y),s=Math.max(s,g.x+g.width),o=Math.max(o,g.y+g.height)))}});for(var d=this.find("Shape"),u=!1,f=0;f<d.length;f++)if(d[f]._isVisible(this)){u=!0;break}return c=u&&r!==void 0?{x:r,y:i,width:s-r,height:o-i}:{x:0,y:0,width:0,height:0},a?c:this._transformedRect(c,h)}};Bs.Container=es,so.Factory.addComponentsGetterSetter(es,"clip",["x","y","width","height"]),so.Factory.addGetterSetter(es,"clipX",void 0,(0,Jh.getNumberValidator)()),so.Factory.addGetterSetter(es,"clipY",void 0,(0,Jh.getNumberValidator)()),so.Factory.addGetterSetter(es,"clipWidth",void 0,(0,Jh.getNumberValidator)()),so.Factory.addGetterSetter(es,"clipHeight",void 0,(0,Jh.getNumberValidator)()),so.Factory.addGetterSetter(es,"clipFunc");var w3={},mn={};Object.defineProperty(mn,"__esModule",{value:!0}),mn.releaseCapture=mn.setPointerCapture=mn.hasPointerCapture=mn.createEvent=mn.getCapturedShape=void 0;const yU=fe,xl=new Map,S3=yU.Konva._global.PointerEvent!==void 0;function Jm(n){return{evt:n,pointerId:n.pointerId}}function C2(n,e){const t=xl.get(n);if(!t)return;const r=t.getStage();r&&r.content,xl.delete(n),S3&&t._fire("lostpointercapture",Jm(new PointerEvent("lostpointercapture")))}mn.getCapturedShape=function(n){return xl.get(n)},mn.createEvent=Jm,mn.hasPointerCapture=function(n,e){return xl.get(n)===e},mn.setPointerCapture=function(n,e){C2(n),e.getStage()&&(xl.set(n,e),S3&&e._fire("gotpointercapture",Jm(new PointerEvent("gotpointercapture"))))},mn.releaseCapture=C2,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Stage=n.stages=void 0;const e=rt,t=de,r=Bs,i=fe,s=ir,o=Bp,a=fe,h=mn;var c="mouseleave",l="mouseover",d="mouseenter",u="mousemove",f="mousedown",m="mouseup",g="pointermove",y="pointerdown",v="pointerup",b="pointercancel",w="pointerout",C="pointerleave",O="pointerover",x="pointerenter",P="contextmenu",T="touchstart",k="touchend",E="touchmove",I="touchcancel",M="wheel",R=[[d,"_pointerenter"],[f,"_pointerdown"],[u,"_pointermove"],[m,"_pointerup"],[c,"_pointerleave"],[T,"_pointerdown"],[E,"_pointermove"],[k,"_pointerup"],[I,"_pointercancel"],[l,"_pointerover"],[M,"_wheel"],[P,"_contextmenu"],[y,"_pointerdown"],[g,"_pointermove"],[v,"_pointerup"],[b,"_pointercancel"],["lostpointercapture","_lostpointercapture"]];const U={mouse:{[w]:"mouseout",[C]:c,[O]:l,[x]:d,[g]:u,[y]:f,[v]:m,[b]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[w]:"touchout",[C]:"touchleave",[O]:"touchover",[x]:"touchenter",[g]:E,[y]:T,[v]:k,[b]:I,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[w]:w,[C]:C,[O]:O,[x]:x,[g]:g,[y]:y,[v]:v,[b]:b,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},V=j=>j.indexOf("pointer")>=0?"pointer":j.indexOf("touch")>=0?"touch":"mouse",H=j=>{const S=V(j);return S==="pointer"?i.Konva.pointerEventsEnabled&&U.pointer:S==="touch"?U.touch:S==="mouse"?U.mouse:void 0};function K(j={}){return(j.clipFunc||j.clipWidth||j.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),j}n.stages=[];class $ extends r.Container{constructor(S){super(K(S)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),n.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{K(this.attrs)}),this._checkVisibility()}_validateAdd(S){const A=S.getType()==="Layer",D=S.getType()==="FastLayer";A||D||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const S=this.visible()?"":"none";this.content.style.display=S}setContainer(S){if(typeof S=="string"){if(S.charAt(0)==="."){var A=S.slice(1);S=document.getElementsByClassName(A)[0]}else{var D;D=S.charAt(0)!=="#"?S:S.slice(1),S=document.getElementById(D)}if(!S)throw"Can not find container in document with id "+D}return this._setAttr("container",S),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),S.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var S,A=this.children,D=A.length;for(S=0;S<D;S++)A[S].clear();return this}clone(S){return S||(S={}),S.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,S)}destroy(){super.destroy();var S=this.content;S&&e.Util._isInDocument(S)&&this.container().removeChild(S);var A=n.stages.indexOf(this);return A>-1&&n.stages.splice(A,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const S=this._pointerPositions[0]||this._changedPointerPositions[0];return S?{x:S.x,y:S.y}:(e.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(S){return this._pointerPositions.find(A=>A.id===S)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(S){(S=S||{}).x=S.x||0,S.y=S.y||0,S.width=S.width||this.width(),S.height=S.height||this.height();var A=new s.SceneCanvas({width:S.width,height:S.height,pixelRatio:S.pixelRatio||1}),D=A.getContext()._context,F=this.children;return(S.x||S.y)&&D.translate(-1*S.x,-1*S.y),F.forEach(function(B){if(B.isVisible()){var z=B._toKonvaCanvas(S);D.drawImage(z._canvas,S.x,S.y,z.getWidth()/z.getPixelRatio(),z.getHeight()/z.getPixelRatio())}}),A}getIntersection(S){if(!S)return null;var A,D=this.children;for(A=D.length-1;A>=0;A--){const F=D[A].getIntersection(S);if(F)return F}return null}_resizeDOM(){var S=this.width(),A=this.height();this.content&&(this.content.style.width=S+"px",this.content.style.height=A+"px"),this.bufferCanvas.setSize(S,A),this.bufferHitCanvas.setSize(S,A),this.children.forEach(D=>{D.setSize({width:S,height:A}),D.draw()})}add(S,...A){if(arguments.length>1){for(var D=0;D<arguments.length;D++)this.add(arguments[D]);return this}super.add(S);var F=this.children.length;return F>5&&e.Util.warn("The stage has "+F+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),S.setSize({width:this.width(),height:this.height()}),S.draw(),i.Konva.isBrowser&&this.content.appendChild(S.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(S){return h.hasPointerCapture(S,this)}setPointerCapture(S){h.setPointerCapture(S,this)}releaseCapture(S){h.releaseCapture(S,this)}getLayers(){return this.children}_bindContentEvents(){i.Konva.isBrowser&&R.forEach(([S,A])=>{this.content.addEventListener(S,D=>{this[A](D)},{passive:!1})})}_pointerenter(S){this.setPointersPositions(S);const A=H(S.type);A&&this._fire(A.pointerenter,{evt:S,target:this,currentTarget:this})}_pointerover(S){this.setPointersPositions(S);const A=H(S.type);A&&this._fire(A.pointerover,{evt:S,target:this,currentTarget:this})}_getTargetShape(S){let A=this[S+"targetShape"];return A&&!A.getStage()&&(A=null),A}_pointerleave(S){const A=H(S.type),D=V(S.type);if(A){this.setPointersPositions(S);var F=this._getTargetShape(D),B=!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled;F&&B?(F._fireAndBubble(A.pointerout,{evt:S}),F._fireAndBubble(A.pointerleave,{evt:S}),this._fire(A.pointerleave,{evt:S,target:this,currentTarget:this}),this[D+"targetShape"]=null):B&&(this._fire(A.pointerleave,{evt:S,target:this,currentTarget:this}),this._fire(A.pointerout,{evt:S,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(S){const A=H(S.type),D=V(S.type);if(A){this.setPointersPositions(S);var F=!1;this._changedPointerPositions.forEach(B=>{var z=this.getIntersection(B);if(o.DD.justDragged=!1,i.Konva["_"+D+"ListenClick"]=!0,!z||!z.isListening())return;i.Konva.capturePointerEventsEnabled&&z.setPointerCapture(B.id),this[D+"ClickStartShape"]=z,z._fireAndBubble(A.pointerdown,{evt:S,pointerId:B.id}),F=!0;const Z=S.type.indexOf("touch")>=0;z.preventDefault()&&S.cancelable&&Z&&S.preventDefault()}),F||this._fire(A.pointerdown,{evt:S,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(S){const A=H(S.type),D=V(S.type);if(!A||(i.Konva.isDragging()&&o.DD.node.preventDefault()&&S.cancelable&&S.preventDefault(),this.setPointersPositions(S),!(!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled)))return;var F={};let B=!1;var z=this._getTargetShape(D);this._changedPointerPositions.forEach(Z=>{const q=h.getCapturedShape(Z.id)||this.getIntersection(Z),se=Z.id,J={evt:S,pointerId:se};var xe=z!==q;if(xe&&z&&(z._fireAndBubble(A.pointerout,{...J},q),z._fireAndBubble(A.pointerleave,{...J},q)),q){if(F[q._id])return;F[q._id]=!0}q&&q.isListening()?(B=!0,xe&&(q._fireAndBubble(A.pointerover,{...J},z),q._fireAndBubble(A.pointerenter,{...J},z),this[D+"targetShape"]=q),q._fireAndBubble(A.pointermove,{...J})):z&&(this._fire(A.pointerover,{evt:S,target:this,currentTarget:this,pointerId:se}),this[D+"targetShape"]=null)}),B||this._fire(A.pointermove,{evt:S,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(S){const A=H(S.type),D=V(S.type);if(!A)return;this.setPointersPositions(S);const F=this[D+"ClickStartShape"],B=this[D+"ClickEndShape"];var z={};let Z=!1;this._changedPointerPositions.forEach(q=>{const se=h.getCapturedShape(q.id)||this.getIntersection(q);if(se){if(se.releaseCapture(q.id),z[se._id])return;z[se._id]=!0}const J=q.id,xe={evt:S,pointerId:J};let Xt=!1;i.Konva["_"+D+"InDblClickWindow"]?(Xt=!0,clearTimeout(this[D+"DblTimeout"])):o.DD.justDragged||(i.Konva["_"+D+"InDblClickWindow"]=!0,clearTimeout(this[D+"DblTimeout"])),this[D+"DblTimeout"]=setTimeout(function(){i.Konva["_"+D+"InDblClickWindow"]=!1},i.Konva.dblClickWindow),se&&se.isListening()?(Z=!0,this[D+"ClickEndShape"]=se,se._fireAndBubble(A.pointerup,{...xe}),i.Konva["_"+D+"ListenClick"]&&F&&F===se&&(se._fireAndBubble(A.pointerclick,{...xe}),Xt&&B&&B===se&&se._fireAndBubble(A.pointerdblclick,{...xe}))):(this[D+"ClickEndShape"]=null,i.Konva["_"+D+"ListenClick"]&&this._fire(A.pointerclick,{evt:S,target:this,currentTarget:this,pointerId:J}),Xt&&this._fire(A.pointerdblclick,{evt:S,target:this,currentTarget:this,pointerId:J}))}),Z||this._fire(A.pointerup,{evt:S,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.Konva["_"+D+"ListenClick"]=!1,S.cancelable&&D!=="touch"&&S.preventDefault()}_contextmenu(S){this.setPointersPositions(S);var A=this.getIntersection(this.getPointerPosition());A&&A.isListening()?A._fireAndBubble(P,{evt:S}):this._fire(P,{evt:S,target:this,currentTarget:this})}_wheel(S){this.setPointersPositions(S);var A=this.getIntersection(this.getPointerPosition());A&&A.isListening()?A._fireAndBubble(M,{evt:S}):this._fire(M,{evt:S,target:this,currentTarget:this})}_pointercancel(S){this.setPointersPositions(S);const A=h.getCapturedShape(S.pointerId)||this.getIntersection(this.getPointerPosition());A&&A._fireAndBubble(v,h.createEvent(S)),h.releaseCapture(S.pointerId)}_lostpointercapture(S){h.releaseCapture(S.pointerId)}setPointersPositions(S){var A=this._getContentPosition(),D=null,F=null;(S=S||window.event).touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(S.touches,B=>{this._pointerPositions.push({id:B.identifier,x:(B.clientX-A.left)/A.scaleX,y:(B.clientY-A.top)/A.scaleY})}),Array.prototype.forEach.call(S.changedTouches||S.touches,B=>{this._changedPointerPositions.push({id:B.identifier,x:(B.clientX-A.left)/A.scaleX,y:(B.clientY-A.top)/A.scaleY})})):(D=(S.clientX-A.left)/A.scaleX,F=(S.clientY-A.top)/A.scaleY,this.pointerPos={x:D,y:F},this._pointerPositions=[{x:D,y:F,id:e.Util._getFirstPointerId(S)}],this._changedPointerPositions=[{x:D,y:F,id:e.Util._getFirstPointerId(S)}])}_setPointerPosition(S){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(S)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var S=this.content.getBoundingClientRect();return{top:S.top,left:S.left,scaleX:S.width/this.content.clientWidth||1,scaleY:S.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),i.Konva.isBrowser){var S=this.container();if(!S)throw"Stage has no container. A container is required.";S.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),S.appendChild(this.content),this._resizeDOM()}}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(S){S.batchDraw()}),this}}n.Stage=$,$.prototype.nodeType="Stage",(0,a._registerNode)($),t.Factory.addGetterSetter($,"container")}(w3);var Hl={},Pt={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Shape=n.shapes=void 0;const e=fe,t=rt,r=de,i=Qe,s=re,o=fe,a=mn;var h="hasShadow",c="shadowRGBA",l="patternImage",d="linearGradient",u="radialGradient";let f;function m(){return f||(f=t.Util.createCanvasElement().getContext("2d"),f)}n.shapes={};class g extends i.Node{constructor(v){let b;for(super(v);b=t.Util.getRandomColor(),!b||b in n.shapes;);this.colorKey=b,n.shapes[b]=this}getContext(){return t.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return t.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(h,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(l,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const v=m().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(v&&v.setTransform){const b=new t.Transform;b.translate(this.fillPatternX(),this.fillPatternY()),b.rotate(e.Konva.getAngle(this.fillPatternRotation())),b.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),b.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const w=b.getMatrix(),C=typeof DOMMatrix>"u"?{a:w[0],b:w[1],c:w[2],d:w[3],e:w[4],f:w[5]}:new DOMMatrix(w);v.setTransform(C)}return v}}_getLinearGradient(){return this._getCache(d,this.__getLinearGradient)}__getLinearGradient(){var v=this.fillLinearGradientColorStops();if(v){for(var b=m(),w=this.fillLinearGradientStartPoint(),C=this.fillLinearGradientEndPoint(),O=b.createLinearGradient(w.x,w.y,C.x,C.y),x=0;x<v.length;x+=2)O.addColorStop(v[x],v[x+1]);return O}}_getRadialGradient(){return this._getCache(u,this.__getRadialGradient)}__getRadialGradient(){var v=this.fillRadialGradientColorStops();if(v){for(var b=m(),w=this.fillRadialGradientStartPoint(),C=this.fillRadialGradientEndPoint(),O=b.createRadialGradient(w.x,w.y,this.fillRadialGradientStartRadius(),C.x,C.y,this.fillRadialGradientEndRadius()),x=0;x<v.length;x+=2)O.addColorStop(v[x],v[x+1]);return O}}getShadowRGBA(){return this._getCache(c,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var v=t.Util.colorToRGBA(this.shadowColor());return v?"rgba("+v.r+","+v.g+","+v.b+","+v.a*(this.shadowOpacity()||1)+")":void 0}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops()))}hasHitStroke(){const v=this.hitStrokeWidth();return v==="auto"?this.hasStroke():this.strokeEnabled()&&!!v}intersects(v){var b=this.getStage();if(!b)return!1;const w=b.bufferHitCanvas;return w.getContext().clear(),this.drawHit(w,void 0,!0),w.context.getImageData(Math.round(v.x),Math.round(v.y),1,1).data[3]>0}destroy(){return i.Node.prototype.destroy.call(this),delete n.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(v){var b;if(!((b=this.attrs.perfectDrawEnabled)===null||b===void 0||b))return!1;const w=v||this.hasFill(),C=this.hasStroke(),O=this.getAbsoluteOpacity()!==1;if(w&&C&&O)return!0;const x=this.hasShadow(),P=this.shadowForStrokeEnabled();return!!(w&&C&&x&&P)}setStrokeHitEnabled(v){t.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),v?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var v=this.size();return{x:this._centroid?-v.width/2:0,y:this._centroid?-v.height/2:0,width:v.width,height:v.height}}getClientRect(v={}){const b=v.skipTransform,w=v.relativeTo,C=this.getSelfRect(),O=!v.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,x=C.width+O,P=C.height+O,T=!v.skipShadow&&this.hasShadow(),k=T?this.shadowOffsetX():0,E=T?this.shadowOffsetY():0,I=x+Math.abs(k),M=P+Math.abs(E),R=T&&this.shadowBlur()||0,U={width:I+2*R,height:M+2*R,x:-(O/2+R)+Math.min(k,0)+C.x,y:-(O/2+R)+Math.min(E,0)+C.y};return b?U:this._transformedRect(U,w)}drawScene(v,b,w){var C,O,x=this.getLayer(),P=v||x.getCanvas(),T=P.getContext(),k=this._getCanvasCache(),E=this.getSceneFunc(),I=this.hasShadow(),M=P.isCache,R=b===this;if(!this.isVisible()&&!R)return this;if(k){T.save();var U=this.getAbsoluteTransform(b).getMatrix();return T.transform(U[0],U[1],U[2],U[3],U[4],U[5]),this._drawCachedSceneCanvas(T),T.restore(),this}if(!E)return this;if(T.save(),this._useBufferCanvas()&&!M){C=this.getStage();const K=w||C.bufferCanvas;(O=K.getContext()).clear(),O.save(),O._applyLineJoin(this);var V=this.getAbsoluteTransform(b).getMatrix();O.transform(V[0],V[1],V[2],V[3],V[4],V[5]),E.call(this,O,this),O.restore();var H=K.pixelRatio;I&&T._applyShadow(this),T._applyOpacity(this),T._applyGlobalCompositeOperation(this),T.drawImage(K._canvas,0,0,K.width/H,K.height/H)}else T._applyLineJoin(this),!R&&(V=this.getAbsoluteTransform(b).getMatrix(),T.transform(V[0],V[1],V[2],V[3],V[4],V[5]),T._applyOpacity(this),T._applyGlobalCompositeOperation(this)),I&&T._applyShadow(this),E.call(this,T,this);return T.restore(),this}drawHit(v,b,w=!1){if(!this.shouldDrawHit(b,w))return this;var C=this.getLayer(),O=v||C.hitCanvas,x=O&&O.getContext(),P=this.hitFunc()||this.sceneFunc(),T=this._getCanvasCache(),k=T&&T.hit;if(this.colorKey||t.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),k){x.save();var E=this.getAbsoluteTransform(b).getMatrix();return x.transform(E[0],E[1],E[2],E[3],E[4],E[5]),this._drawCachedHitCanvas(x),x.restore(),this}if(!P)return this;if(x.save(),x._applyLineJoin(this),this!==b){var I=this.getAbsoluteTransform(b).getMatrix();x.transform(I[0],I[1],I[2],I[3],I[4],I[5])}return P.call(this,x,this),x.restore(),this}drawHitFromCache(v=0){var b,w,C,O,x,P=this._getCanvasCache(),T=this._getCachedSceneCanvas(),k=P.hit,E=k.getContext(),I=k.getWidth(),M=k.getHeight();E.clear(),E.drawImage(T._canvas,0,0,I,M);try{for(C=(w=(b=E.getImageData(0,0,I,M)).data).length,O=t.Util._hexToRgb(this.colorKey),x=0;x<C;x+=4)w[x+3]>v?(w[x]=O.r,w[x+1]=O.g,w[x+2]=O.b,w[x+3]=255):w[x+3]=0;E.putImageData(b,0,0)}catch(R){t.Util.error("Unable to draw hit graph from cached scene canvas. "+R.message)}return this}hasPointerCapture(v){return a.hasPointerCapture(v,this)}setPointerCapture(v){a.setPointerCapture(v,this)}releaseCapture(v){a.releaseCapture(v,this)}}n.Shape=g,g.prototype._fillFunc=function(y){const v=this.attrs.fillRule;v?y.fill(v):y.fill()},g.prototype._strokeFunc=function(y){y.stroke()},g.prototype._fillFuncHit=function(y){y.fill()},g.prototype._strokeFuncHit=function(y){y.stroke()},g.prototype._centroid=!1,g.prototype.nodeType="Shape",(0,o._registerNode)(g),g.prototype.eventListeners={},g.prototype.on.call(g.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(h)}),g.prototype.on.call(g.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(c)}),g.prototype.on.call(g.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",function(){this._clearCache(l)}),g.prototype.on.call(g.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",function(){this._clearCache(d)}),g.prototype.on.call(g.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",function(){this._clearCache(u)}),r.Factory.addGetterSetter(g,"stroke",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(g,"strokeWidth",2,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(g,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(g,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(g,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(g,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(g,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(g,"lineJoin"),r.Factory.addGetterSetter(g,"lineCap"),r.Factory.addGetterSetter(g,"sceneFunc"),r.Factory.addGetterSetter(g,"hitFunc"),r.Factory.addGetterSetter(g,"dash"),r.Factory.addGetterSetter(g,"dashOffset",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(g,"shadowColor",void 0,(0,s.getStringValidator)()),r.Factory.addGetterSetter(g,"shadowBlur",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(g,"shadowOpacity",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(g,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(g,"shadowOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(g,"shadowOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(g,"fillPatternImage"),r.Factory.addGetterSetter(g,"fill",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(g,"fillPatternX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(g,"fillPatternY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(g,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(g,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(g,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(g,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(g,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(g,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(g,"fillEnabled",!0),r.Factory.addGetterSetter(g,"strokeEnabled",!0),r.Factory.addGetterSetter(g,"shadowEnabled",!0),r.Factory.addGetterSetter(g,"dashEnabled",!0),r.Factory.addGetterSetter(g,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(g,"fillPriority","color"),r.Factory.addComponentsGetterSetter(g,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(g,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(g,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(g,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(g,"fillPatternScaleX",1,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(g,"fillPatternScaleY",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(g,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(g,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(g,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(g,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(g,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(g,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(g,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(g,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(g,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(g,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(g,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(g,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(g,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(g,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(g,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(g,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(g,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(g,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(g,"fillPatternRotation",0),r.Factory.addGetterSetter(g,"fillRule",void 0,(0,s.getStringValidator)()),r.Factory.backCompat(g,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Pt),Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.Layer=void 0;const Mr=rt,qf=Bs,oo=Qe,Zf=de,x2=ir,bU=re,_U=Pt,wU=fe;var C3=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],SU=C3.length;let ao=class extends qf.Container{constructor(e){super(e),this.canvas=new x2.SceneCanvas,this.hitCanvas=new x2.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),e<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[e+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){oo.Node.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!oo.Node.prototype.moveUp.call(this))return!1;var e=this.getStage();return!(!e||!e.content)&&(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(oo.Node.prototype.moveDown.call(this)){var e=this.getStage();if(e){var t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(oo.Node.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return oo.Node.prototype.remove.call(this),e&&e.parentNode&&Mr.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:t}){return this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t),this._setSmoothEnabled(),this}_validateAdd(e){var t=e.getType();t!=="Group"&&t!=="Shape"&&Mr.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return(e=e||{}).width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),oo.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){const e=this.visible();this.canvas._canvas.style.display=e?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Mr.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Mr.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Mr.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var t=1,r=!1;;){for(let i=0;i<SU;i++){const s=C3[i],o=this._getIntersection({x:e.x+s.x*t,y:e.y+s.y*t}),a=o.shape;if(a)return a;if(r=!!o.antialiased,!o.antialiased)break}if(!r)return null;t+=1}}_getIntersection(e){const t=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(e.x*t),Math.round(e.y*t),1,1).data,i=r[3];if(i===255){const s=Mr.Util._rgbToHex(r[0],r[1],r[2]),o=_U.shapes["#"+s];return o?{shape:o}:{antialiased:!0}}return i>0?{antialiased:!0}:{}}drawScene(e,t){var r=this.getLayer(),i=e||r&&r.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),qf.Container.prototype.drawScene.call(this,i,t),this._fire("draw",{node:this}),this}drawHit(e,t){var r=this.getLayer(),i=e||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),qf.Container.prototype.drawHit.call(this,i,t),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){Mr.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return Mr.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(this.parent&&this.parent.content){var e=this.parent;this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}destroy(){return Mr.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Hl.Layer=ao,ao.prototype.nodeType="Layer",(0,wU._registerNode)(ao),Zf.Factory.addGetterSetter(ao,"imageSmoothingEnabled",!0),Zf.Factory.addGetterSetter(ao,"clearBeforeDraw",!0),Zf.Factory.addGetterSetter(ao,"hitGraphEnabled",!0,(0,bU.getBooleanValidator)());var Gd={};Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.FastLayer=void 0;const CU=rt,xU=Hl,OU=fe;let Qf=class extends xU.Layer{constructor(e){super(e),this.listening(!1),CU.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};Gd.FastLayer=Qf,Qf.prototype.nodeType="FastLayer",(0,OU._registerNode)(Qf);var aa={};Object.defineProperty(aa,"__esModule",{value:!0}),aa.Group=void 0;const PU=rt,EU=Bs,TU=fe;let Jf=class extends EU.Container{_validateAdd(e){var t=e.getType();t!=="Group"&&t!=="Shape"&&PU.Util.throw("You may only add groups and shapes to groups.")}};aa.Group=Jf,Jf.prototype.nodeType="Group",(0,TU._registerNode)(Jf);var la={};Object.defineProperty(la,"__esModule",{value:!0}),la.Animation=void 0;const eg=fe,O2=rt,tg=eg.glob.performance&&eg.glob.performance.now?function(){return eg.glob.performance.now()}:function(){return new Date().getTime()};let ec=class Co{constructor(e,t){this.id=Co.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:tg(),frameRate:0},this.func=e,this.setLayers(t)}setLayers(e){let t=[];return e&&(t=Array.isArray(e)?e:[e]),this.layers=t,this}getLayers(){return this.layers}addLayer(e){const t=this.layers,r=t.length;for(let i=0;i<r;i++)if(t[i]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const e=Co.animations,t=e.length;for(let r=0;r<t;r++)if(e[r].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=tg(),Co._addAnimation(this),this}stop(){return Co._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const t=e.id,r=this.animations,i=r.length;for(let s=0;s<i;s++)if(r[s].id===t){this.animations.splice(s,1);break}}static _runFrames(){const e={},t=this.animations;for(let r=0;r<t.length;r++){const i=t[r],s=i.layers,o=i.func;i._updateFrameObject(tg());const a=s.length;let h;if(h=!o||o.call(i,i.frame)!==!1,h)for(let c=0;c<a;c++){const l=s[c];l._id!==void 0&&(e[l._id]=l)}}for(let r in e)e.hasOwnProperty(r)&&e[r].batchDraw()}static _animationLoop(){const e=Co;e.animations.length?(e._runFrames(),O2.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,O2.Util.requestAnimFrame(this._animationLoop))}};la.Animation=ec,ec.animations=[],ec.animIdCounter=0,ec.animRunning=!1;var P2={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Easings=n.Tween=void 0;const e=rt,t=la,r=Qe,i=fe;var s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=0,a=["fill","stroke","shadowColor"];class h{constructor(d,u,f,m,g,y,v){this.prop=d,this.propFunc=u,this.begin=m,this._pos=m,this.duration=y,this._change=0,this.prevPos=0,this.yoyo=v,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=f,this._change=g-this.begin,this.pause()}fire(d){var u=this[d];u&&u()}setTime(d){d>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():d<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=d,this.update())}getTime(){return this._time}setPosition(d){this.prevPos=this._pos,this.propFunc(d),this._pos=d}getPosition(d){return d===void 0&&(d=this._time),this.func(d,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(d){this.pause(),this._time=d,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var d=this.getTimer()-this._startTime;this.state===2?this.setTime(d):this.state===3&&this.setTime(this.duration-d)}pause(){this.state=1,this.fire("onPause")}getTimer(){return new Date().getTime()}}class c{constructor(d){var u,f,m=this,g=d.node,y=g._id,v=d.easing||n.Easings.Linear,b=!!d.yoyo;u=d.duration===void 0?.3:d.duration===0?.001:d.duration,this.node=g,this._id=o++;var w=g.getLayer()||(g instanceof i.Konva.Stage?g.getLayers():null);for(f in w||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new t.Animation(function(){m.tween.onEnterFrame()},w),this.tween=new h(f,function(C){m._tweenFunc(C)},v,0,1,1e3*u,b),this._addListeners(),c.attrs[y]||(c.attrs[y]={}),c.attrs[y][this._id]||(c.attrs[y][this._id]={}),c.tweens[y]||(c.tweens[y]={}),d)s[f]===void 0&&this._addAttr(f,d[f]);this.reset(),this.onFinish=d.onFinish,this.onReset=d.onReset,this.onUpdate=d.onUpdate}_addAttr(d,u){var f,m,g,y,v,b,w,C,O=this.node,x=O._id;if((g=c.tweens[x][d])&&delete c.attrs[x][g][d],f=O.getAttr(d),e.Util._isArray(u))if(m=[],v=Math.max(u.length,f.length),d==="points"&&u.length!==f.length&&(u.length>f.length?(w=f,f=e.Util._prepareArrayForTween(f,u,O.closed())):(b=u,u=e.Util._prepareArrayForTween(u,f,O.closed()))),d.indexOf("fill")===0)for(y=0;y<v;y++)if(y%2==0)m.push(u[y]-f[y]);else{var P=e.Util.colorToRGBA(f[y]);C=e.Util.colorToRGBA(u[y]),f[y]=P,m.push({r:C.r-P.r,g:C.g-P.g,b:C.b-P.b,a:C.a-P.a})}else for(y=0;y<v;y++)m.push(u[y]-f[y]);else a.indexOf(d)!==-1?(f=e.Util.colorToRGBA(f),m={r:(C=e.Util.colorToRGBA(u)).r-f.r,g:C.g-f.g,b:C.b-f.b,a:C.a-f.a}):m=u-f;c.attrs[x][this._id][d]={start:f,diff:m,end:u,trueEnd:b,trueStart:w},c.tweens[x][d]=this._id}_tweenFunc(d){var u,f,m,g,y,v,b,w,C=this.node,O=c.attrs[C._id][this._id];for(u in O){if(m=(f=O[u]).start,g=f.diff,w=f.end,e.Util._isArray(m))if(y=[],b=Math.max(m.length,w.length),u.indexOf("fill")===0)for(v=0;v<b;v++)v%2==0?y.push((m[v]||0)+g[v]*d):y.push("rgba("+Math.round(m[v].r+g[v].r*d)+","+Math.round(m[v].g+g[v].g*d)+","+Math.round(m[v].b+g[v].b*d)+","+(m[v].a+g[v].a*d)+")");else for(v=0;v<b;v++)y.push((m[v]||0)+g[v]*d);else y=a.indexOf(u)!==-1?"rgba("+Math.round(m.r+g.r*d)+","+Math.round(m.g+g.g*d)+","+Math.round(m.b+g.b*d)+","+(m.a+g.a*d)+")":m+g*d;C.setAttr(u,y)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var d=this.node,u=c.attrs[d._id][this._id];u.points&&u.points.trueEnd&&d.setAttr("points",u.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var d=this.node,u=c.attrs[d._id][this._id];u.points&&u.points.trueStart&&d.points(u.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(d){return this.tween.seek(1e3*d),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var d,u=this.node._id,f=this._id,m=c.tweens[u];for(d in this.pause(),m)delete c.tweens[u][d];delete c.attrs[u][f]}}n.Tween=c,c.attrs={},c.tweens={},r.Node.prototype.to=function(l){var d=l.onFinish;l.node=this,l.onFinish=function(){this.destroy(),d&&d()},new c(l).play()},n.Easings={BackEaseIn(l,d,u,f){var m=1.70158;return u*(l/=f)*l*((m+1)*l-m)+d},BackEaseOut(l,d,u,f){var m=1.70158;return u*((l=l/f-1)*l*((m+1)*l+m)+1)+d},BackEaseInOut(l,d,u,f){var m=1.70158;return(l/=f/2)<1?u/2*(l*l*((1+(m*=1.525))*l-m))+d:u/2*((l-=2)*l*((1+(m*=1.525))*l+m)+2)+d},ElasticEaseIn(l,d,u,f,m,g){var y=0;return l===0?d:(l/=f)==1?d+u:(g||(g=.3*f),!m||m<Math.abs(u)?(m=u,y=g/4):y=g/(2*Math.PI)*Math.asin(u/m),-m*Math.pow(2,10*(l-=1))*Math.sin((l*f-y)*(2*Math.PI)/g)+d)},ElasticEaseOut(l,d,u,f,m,g){var y=0;return l===0?d:(l/=f)==1?d+u:(g||(g=.3*f),!m||m<Math.abs(u)?(m=u,y=g/4):y=g/(2*Math.PI)*Math.asin(u/m),m*Math.pow(2,-10*l)*Math.sin((l*f-y)*(2*Math.PI)/g)+u+d)},ElasticEaseInOut(l,d,u,f,m,g){var y=0;return l===0?d:(l/=f/2)==2?d+u:(g||(g=f*(.3*1.5)),!m||m<Math.abs(u)?(m=u,y=g/4):y=g/(2*Math.PI)*Math.asin(u/m),l<1?m*Math.pow(2,10*(l-=1))*Math.sin((l*f-y)*(2*Math.PI)/g)*-.5+d:m*Math.pow(2,-10*(l-=1))*Math.sin((l*f-y)*(2*Math.PI)/g)*.5+u+d)},BounceEaseOut:(l,d,u,f)=>(l/=f)<1/2.75?u*(7.5625*l*l)+d:l<2/2.75?u*(7.5625*(l-=1.5/2.75)*l+.75)+d:l<2.5/2.75?u*(7.5625*(l-=2.25/2.75)*l+.9375)+d:u*(7.5625*(l-=2.625/2.75)*l+.984375)+d,BounceEaseIn:(l,d,u,f)=>u-n.Easings.BounceEaseOut(f-l,0,u,f)+d,BounceEaseInOut:(l,d,u,f)=>l<f/2?.5*n.Easings.BounceEaseIn(2*l,0,u,f)+d:.5*n.Easings.BounceEaseOut(2*l-f,0,u,f)+.5*u+d,EaseIn:(l,d,u,f)=>u*(l/=f)*l+d,EaseOut:(l,d,u,f)=>-u*(l/=f)*(l-2)+d,EaseInOut:(l,d,u,f)=>(l/=f/2)<1?u/2*l*l+d:-u/2*(--l*(l-2)-1)+d,StrongEaseIn:(l,d,u,f)=>u*(l/=f)*l*l*l*l+d,StrongEaseOut:(l,d,u,f)=>u*((l=l/f-1)*l*l*l*l+1)+d,StrongEaseInOut:(l,d,u,f)=>(l/=f/2)<1?u/2*l*l*l*l*l+d:u/2*((l-=2)*l*l*l*l+2)+d,Linear:(l,d,u,f)=>u*l/f+d}})(P2),function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Konva=void 0;const e=fe,t=rt,r=Qe,i=Bs,s=w3,o=Hl,a=Gd,h=aa,c=Bp,l=Pt,d=la,u=P2,f=Vr,m=ir;n.Konva=t.Util._assign(e.Konva,{Util:t.Util,Transform:t.Transform,Node:r.Node,Container:i.Container,Stage:s.Stage,stages:s.stages,Layer:o.Layer,FastLayer:a.FastLayer,Group:h.Group,DD:c.DD,Shape:l.Shape,shapes:l.shapes,Animation:d.Animation,Tween:u.Tween,Easings:u.Easings,Context:f.Context,Canvas:m.Canvas}),n.default=n.Konva}(b3);var zd={};Object.defineProperty(zd,"__esModule",{value:!0}),zd.Arc=void 0;const tc=de,kU=Pt,E2=fe,nc=re,AU=fe;let Nr=class extends kU.Shape{_sceneFunc(e){var t=E2.Konva.getAngle(this.angle()),r=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,t,r),e.arc(0,0,this.innerRadius(),t,0,!r),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),t=this.outerRadius(),r=this.clockwise(),i=E2.Konva.getAngle(r?360-this.angle():this.angle()),s=Math.cos(Math.min(i,Math.PI)),o=Math.sin(Math.min(Math.max(Math.PI,i),3*Math.PI/2)),a=Math.sin(Math.min(i,Math.PI/2)),h=s*(s>0?e:t),c=o*(o>0?e:t),l=a*(a>0?t:e);return{x:h,y:r?-1*l:c,width:1*t-h,height:l-c}}};zd.Arc=Nr,Nr.prototype._centroid=!0,Nr.prototype.className="Arc",Nr.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,AU._registerNode)(Nr),tc.Factory.addGetterSetter(Nr,"innerRadius",0,(0,nc.getNumberValidator)()),tc.Factory.addGetterSetter(Nr,"outerRadius",0,(0,nc.getNumberValidator)()),tc.Factory.addGetterSetter(Nr,"angle",0,(0,nc.getNumberValidator)()),tc.Factory.addGetterSetter(Nr,"clockwise",!1,(0,nc.getBooleanValidator)());var Ud={},Kl={};Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.Line=void 0;const rc=de,IU=Pt,T2=re,MU=fe;function e0(n,e,t,r,i,s,o){var a=Math.sqrt(Math.pow(t-n,2)+Math.pow(r-e,2)),h=Math.sqrt(Math.pow(i-t,2)+Math.pow(s-r,2)),c=o*a/(a+h),l=o*h/(a+h);return[t-c*(i-n),r-c*(s-e),t+l*(i-n),r+l*(s-e)]}function k2(n,e){var t,r,i=n.length,s=[];for(t=2;t<i-2;t+=2)r=e0(n[t-2],n[t-1],n[t],n[t+1],n[t+2],n[t+3],e),isNaN(r[0])||(s.push(r[0]),s.push(r[1]),s.push(n[t]),s.push(n[t+1]),s.push(r[2]),s.push(r[3]));return s}let oi=class extends IU.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var t,r,i,s=this.points(),o=s.length,a=this.tension(),h=this.closed(),c=this.bezier();if(o){if(e.beginPath(),e.moveTo(s[0],s[1]),a!==0&&o>4){for(r=(t=this.getTensionPoints()).length,i=h?0:4,h||e.quadraticCurveTo(t[0],t[1],t[2],t[3]);i<r-2;)e.bezierCurveTo(t[i++],t[i++],t[i++],t[i++],t[i++],t[i++]);h||e.quadraticCurveTo(t[r-2],t[r-1],s[o-2],s[o-1])}else if(c)for(i=2;i<o;)e.bezierCurveTo(s[i++],s[i++],s[i++],s[i++],s[i++],s[i++]);else for(i=2;i<o;i+=2)e.lineTo(s[i],s[i+1]);h?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():k2(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),t=e.length,r=this.tension(),i=e0(e[t-2],e[t-1],e[0],e[1],e[2],e[3],r),s=e0(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],r),o=k2(e,r);return[i[2],i[3]].concat(o).concat([s[0],s[1],e[t-2],e[t-1],s[2],s[3],i[0],i[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};for(var t,r,i=(e=this.tension()!==0?[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:this.points())[0],s=e[0],o=e[1],a=e[1],h=0;h<e.length/2;h++)t=e[2*h],r=e[2*h+1],i=Math.min(i,t),s=Math.max(s,t),o=Math.min(o,r),a=Math.max(a,r);return{x:i,y:o,width:s-i,height:a-o}}};Kl.Line=oi,oi.prototype.className="Line",oi.prototype._attrsAffectingSize=["points","bezier","tension"],(0,MU._registerNode)(oi),rc.Factory.addGetterSetter(oi,"closed",!1),rc.Factory.addGetterSetter(oi,"bezier",!1),rc.Factory.addGetterSetter(oi,"tension",0,(0,T2.getNumberValidator)()),rc.Factory.addGetterSetter(oi,"points",[],(0,T2.getNumberArrayValidator)());var ha={},x3={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.t2length=n.getQuadraticArcLength=n.getCubicArcLength=n.binomialCoefficients=n.cValues=n.tValues=void 0,n.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],n.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],n.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]],n.getCubicArcLength=(r,i,s)=>{let o,a,h;o=s/2,a=0;for(let c=0;c<20;c++)h=o*n.tValues[20][c]+o,a+=n.cValues[20][c]*e(r,i,h);return o*a};function e(r,i,s){const o=t(1,s,r),a=t(1,s,i),h=o*o+a*a;return Math.sqrt(h)}n.getQuadraticArcLength=(r,i,s)=>{s===void 0&&(s=1);const o=r[0]-2*r[1]+r[2],a=i[0]-2*i[1]+i[2],h=2*r[1]-2*r[0],c=2*i[1]-2*i[0],l=4*(o*o+a*a),d=4*(o*h+a*c),u=h*h+c*c;if(l===0)return s*Math.sqrt(Math.pow(r[2]-r[0],2)+Math.pow(i[2]-i[0],2));const f=d/(2*l),m=s+f,g=u/l-f*f,y=m*m+g>0?Math.sqrt(m*m+g):0,v=f*f+g>0?Math.sqrt(f*f+g):0,b=f+Math.sqrt(f*f+g)!==0?g*Math.log(Math.abs((m+y)/(f+v))):0;return Math.sqrt(l)/2*(m*y-f*v+b)};const t=(r,i,s)=>{const o=s.length-1;let a,h;if(o===0)return 0;if(r===0){h=0;for(let c=0;c<=o;c++)h+=n.binomialCoefficients[o][c]*Math.pow(1-i,o-c)*Math.pow(i,c)*s[c];return h}a=new Array(o);for(let c=0;c<o;c++)a[c]=o*(s[c+1]-s[c]);return t(r-1,i,a)};n.t2length=(r,i,s)=>{let o=1,a=r/i,h=(r-s(a))/i,c=0;for(;o>.001;){const l=s(a+h),d=Math.abs(r-l)/i;if(d<o)o=d,a+=h;else{const u=s(a-h),f=Math.abs(r-u)/i;f<o?(o=f,a-=h):h/=2}if(c++,c>500)break}return a}})(x3),Object.defineProperty(ha,"__esModule",{value:!0}),ha.Path=void 0;const NU=de,DU=Pt,$U=fe,lo=x3;let qa=class sn extends DU.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=sn.parsePathData(this.data()),this.pathLength=sn.getPathLength(this.dataArray)}_sceneFunc(e){var t=this.dataArray;e.beginPath();for(var r=!1,i=0;i<t.length;i++){var s=t[i].command,o=t[i].points;switch(s){case"L":e.lineTo(o[0],o[1]);break;case"M":e.moveTo(o[0],o[1]);break;case"C":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":e.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var a=o[0],h=o[1],c=o[2],l=o[3],d=o[4],u=o[5],f=o[6],m=o[7],g=c>l?c:l,y=c>l?1:c/l,v=c>l?l/c:1;e.translate(a,h),e.rotate(f),e.scale(y,v),e.arc(0,0,g,d,d+u,1-m),e.scale(1/y,1/v),e.rotate(-f),e.translate(-a,-h);break;case"z":r=!0,e.closePath()}}r||this.hasFill()?e.fillStrokeShape(this):e.strokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(c){if(c.command==="A"){var l=c.points[4],d=c.points[5],u=c.points[4]+d,f=Math.PI/180;if(Math.abs(l-u)<f&&(f=Math.abs(l-u)),d<0)for(let m=l-f;m>u;m-=f){const g=sn.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],m,0);e.push(g.x,g.y)}else for(let m=l+f;m<u;m+=f){const g=sn.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],m,0);e.push(g.x,g.y)}}else if(c.command==="C")for(let m=0;m<=1;m+=.01){const g=sn.getPointOnCubicBezier(m,c.start.x,c.start.y,c.points[0],c.points[1],c.points[2],c.points[3],c.points[4],c.points[5]);e.push(g.x,g.y)}else e=e.concat(c.points)});for(var t,r,i=e[0],s=e[0],o=e[1],a=e[1],h=0;h<e.length/2;h++)t=e[2*h],r=e[2*h+1],isNaN(t)||(i=Math.min(i,t),s=Math.max(s,t)),isNaN(r)||(o=Math.min(o,r),a=Math.max(a,r));return{x:i,y:o,width:s-i,height:a-o}}getLength(){return this.pathLength}getPointAtLength(e){return sn.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,t,r,i){return Math.sqrt((r-e)*(r-e)+(i-t)*(i-t))}static getPathLength(e){let t=0;for(var r=0;r<e.length;++r)t+=e[r].pathLength;return t}static getPointAtLengthOfDataArray(e,t){var r,i=0,s=t.length;if(!s)return null;for(;i<s&&e>t[i].pathLength;)e-=t[i].pathLength,++i;if(i===s)return{x:(r=t[i-1].points.slice(-2))[0],y:r[1]};if(e<.01)return{x:(r=t[i].points.slice(0,2))[0],y:r[1]};var o=t[i],a=o.points;switch(o.command){case"L":return sn.getPointOnLine(e,o.start.x,o.start.y,a[0],a[1]);case"C":return sn.getPointOnCubicBezier((0,lo.t2length)(e,sn.getPathLength(t),g=>(0,lo.getCubicArcLength)([o.start.x,a[0],a[2],a[4]],[o.start.y,a[1],a[3],a[5]],g)),o.start.x,o.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return sn.getPointOnQuadraticBezier((0,lo.t2length)(e,sn.getPathLength(t),g=>(0,lo.getQuadraticArcLength)([o.start.x,a[0],a[2]],[o.start.y,a[1],a[3]],g)),o.start.x,o.start.y,a[0],a[1],a[2],a[3]);case"A":var h=a[0],c=a[1],l=a[2],d=a[3],u=a[4],f=a[5],m=a[6];return u+=f*e/o.pathLength,sn.getPointOnEllipticalArc(h,c,l,d,u,m)}return null}static getPointOnLine(e,t,r,i,s,o,a){o===void 0&&(o=t),a===void 0&&(a=r);var h=(s-r)/(i-t+1e-8),c=Math.sqrt(e*e/(1+h*h));i<t&&(c*=-1);var l,d=h*c;if(i===t)l={x:o,y:a+d};else if((a-r)/(o-t+1e-8)===h)l={x:o+c,y:a+d};else{var u,f,m=this.getLineLength(t,r,i,s),g=(o-t)*(i-t)+(a-r)*(s-r);u=t+(g/=m*m)*(i-t),f=r+g*(s-r);var y=this.getLineLength(o,a,u,f),v=Math.sqrt(e*e-y*y);c=Math.sqrt(v*v/(1+h*h)),i<t&&(c*=-1),l={x:u+c,y:f+(d=h*c)}}return l}static getPointOnCubicBezier(e,t,r,i,s,o,a,h,c){function l(m){return m*m*m}function d(m){return 3*m*m*(1-m)}function u(m){return 3*m*(1-m)*(1-m)}function f(m){return(1-m)*(1-m)*(1-m)}return{x:h*l(e)+o*d(e)+i*u(e)+t*f(e),y:c*l(e)+a*d(e)+s*u(e)+r*f(e)}}static getPointOnQuadraticBezier(e,t,r,i,s,o,a){function h(d){return d*d}function c(d){return 2*d*(1-d)}function l(d){return(1-d)*(1-d)}return{x:o*h(e)+i*c(e)+t*l(e),y:a*h(e)+s*c(e)+r*l(e)}}static getPointOnEllipticalArc(e,t,r,i,s,o){var a=Math.cos(o),h=Math.sin(o),c=r*Math.cos(s),l=i*Math.sin(s);return{x:e+(c*a-l*h),y:t+(c*h+l*a)}}static parsePathData(e){if(!e)return[];var t=e,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(var i=0;i<r.length;i++)t=t.replace(new RegExp(r[i],"g"),"|"+r[i]);var s,o=t.split("|"),a=[],h=[],c=0,l=0,d=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(i=1;i<o.length;i++){var u=o[i],f=u.charAt(0);for(u=u.slice(1),h.length=0;s=d.exec(u);)h.push(s[0]);for(var m=[],g=0,y=h.length;g<y;g++)if(h[g]!=="00"){var v=parseFloat(h[g]);isNaN(v)?m.push(0):m.push(v)}else m.push(0,0);for(;m.length>0&&!isNaN(m[0]);){var b,w,C,O,x,P,T,k,E,I,M="",R=[],U=c,V=l;switch(f){case"l":c+=m.shift(),l+=m.shift(),M="L",R.push(c,l);break;case"L":c=m.shift(),l=m.shift(),R.push(c,l);break;case"m":var H=m.shift(),K=m.shift();if(c+=H,l+=K,M="M",a.length>2&&a[a.length-1].command==="z"){for(var $=a.length-2;$>=0;$--)if(a[$].command==="M"){c=a[$].points[0]+H,l=a[$].points[1]+K;break}}R.push(c,l),f="l";break;case"M":c=m.shift(),l=m.shift(),M="M",R.push(c,l),f="L";break;case"h":c+=m.shift(),M="L",R.push(c,l);break;case"H":c=m.shift(),M="L",R.push(c,l);break;case"v":l+=m.shift(),M="L",R.push(c,l);break;case"V":l=m.shift(),M="L",R.push(c,l);break;case"C":R.push(m.shift(),m.shift(),m.shift(),m.shift()),c=m.shift(),l=m.shift(),R.push(c,l);break;case"c":R.push(c+m.shift(),l+m.shift(),c+m.shift(),l+m.shift()),c+=m.shift(),l+=m.shift(),M="C",R.push(c,l);break;case"S":w=c,C=l,(b=a[a.length-1]).command==="C"&&(w=c+(c-b.points[2]),C=l+(l-b.points[3])),R.push(w,C,m.shift(),m.shift()),c=m.shift(),l=m.shift(),M="C",R.push(c,l);break;case"s":w=c,C=l,(b=a[a.length-1]).command==="C"&&(w=c+(c-b.points[2]),C=l+(l-b.points[3])),R.push(w,C,c+m.shift(),l+m.shift()),c+=m.shift(),l+=m.shift(),M="C",R.push(c,l);break;case"Q":R.push(m.shift(),m.shift()),c=m.shift(),l=m.shift(),R.push(c,l);break;case"q":R.push(c+m.shift(),l+m.shift()),c+=m.shift(),l+=m.shift(),M="Q",R.push(c,l);break;case"T":w=c,C=l,(b=a[a.length-1]).command==="Q"&&(w=c+(c-b.points[0]),C=l+(l-b.points[1])),c=m.shift(),l=m.shift(),M="Q",R.push(w,C,c,l);break;case"t":w=c,C=l,(b=a[a.length-1]).command==="Q"&&(w=c+(c-b.points[0]),C=l+(l-b.points[1])),c+=m.shift(),l+=m.shift(),M="Q",R.push(w,C,c,l);break;case"A":O=m.shift(),x=m.shift(),P=m.shift(),T=m.shift(),k=m.shift(),E=c,I=l,c=m.shift(),l=m.shift(),M="A",R=this.convertEndpointToCenterParameterization(E,I,c,l,T,k,O,x,P);break;case"a":O=m.shift(),x=m.shift(),P=m.shift(),T=m.shift(),k=m.shift(),E=c,I=l,c+=m.shift(),l+=m.shift(),M="A",R=this.convertEndpointToCenterParameterization(E,I,c,l,T,k,O,x,P)}a.push({command:M||f,points:R,start:{x:U,y:V},pathLength:this.calcLength(U,V,M||f,R)})}f!=="z"&&f!=="Z"||a.push({command:"z",points:[],start:void 0,pathLength:0})}return a}static calcLength(e,t,r,i){var s,o,a,h,c=sn;switch(r){case"L":return c.getLineLength(e,t,i[0],i[1]);case"C":return(0,lo.getCubicArcLength)([e,i[0],i[2],i[4]],[t,i[1],i[3],i[5]],1);case"Q":return(0,lo.getQuadraticArcLength)([e,i[0],i[2]],[t,i[1],i[3]],1);case"A":s=0;var l=i[4],d=i[5],u=i[4]+d,f=Math.PI/180;if(Math.abs(l-u)<f&&(f=Math.abs(l-u)),o=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),d<0)for(h=l-f;h>u;h-=f)a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],h,0),s+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(h=l+f;h<u;h+=f)a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],h,0),s+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),s+=c.getLineLength(o.x,o.y,a.x,a.y)}return 0}static convertEndpointToCenterParameterization(e,t,r,i,s,o,a,h,c){var l=c*(Math.PI/180),d=Math.cos(l)*(e-r)/2+Math.sin(l)*(t-i)/2,u=-1*Math.sin(l)*(e-r)/2+Math.cos(l)*(t-i)/2,f=d*d/(a*a)+u*u/(h*h);f>1&&(a*=Math.sqrt(f),h*=Math.sqrt(f));var m=Math.sqrt((a*a*(h*h)-a*a*(u*u)-h*h*(d*d))/(a*a*(u*u)+h*h*(d*d)));s===o&&(m*=-1),isNaN(m)&&(m=0);var g=m*a*u/h,y=m*-h*d/a,v=(e+r)/2+Math.cos(l)*g-Math.sin(l)*y,b=(t+i)/2+Math.sin(l)*g+Math.cos(l)*y,w=function(E){return Math.sqrt(E[0]*E[0]+E[1]*E[1])},C=function(E,I){return(E[0]*I[0]+E[1]*I[1])/(w(E)*w(I))},O=function(E,I){return(E[0]*I[1]<E[1]*I[0]?-1:1)*Math.acos(C(E,I))},x=O([1,0],[(d-g)/a,(u-y)/h]),P=[(d-g)/a,(u-y)/h],T=[(-1*d-g)/a,(-1*u-y)/h],k=O(P,T);return C(P,T)<=-1&&(k=Math.PI),C(P,T)>=1&&(k=0),o===0&&k>0&&(k-=2*Math.PI),o===1&&k<0&&(k+=2*Math.PI),[v,b,a,h,x,k,l,o]}};ha.Path=qa,qa.prototype.className="Path",qa.prototype._attrsAffectingSize=["data"],(0,$U._registerNode)(qa),NU.Factory.addGetterSetter(qa,"data"),Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.Arrow=void 0;const ic=de,RU=Kl,A2=re,FU=fe,I2=ha;let ts=class extends RU.Line{_sceneFunc(e){super._sceneFunc(e);var t=2*Math.PI,r=this.points(),i=r,s=this.tension()!==0&&r.length>4;s&&(i=this.getTensionPoints());var o,a,h=this.pointerLength(),c=r.length;if(s){const u=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],r[c-2],r[c-1]],f=I2.Path.calcLength(i[i.length-4],i[i.length-3],"C",u),m=I2.Path.getPointOnQuadraticBezier(Math.min(1,1-h/f),u[0],u[1],u[2],u[3],u[4],u[5]);o=r[c-2]-m.x,a=r[c-1]-m.y}else o=r[c-2]-r[c-4],a=r[c-1]-r[c-3];var l=(Math.atan2(a,o)+t)%t,d=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(r[c-2],r[c-1]),e.rotate(l),e.moveTo(0,0),e.lineTo(-h,d/2),e.lineTo(-h,-d/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(r[0],r[1]),s?(o=(i[0]+i[2])/2-r[0],a=(i[1]+i[3])/2-r[1]):(o=r[2]-r[0],a=r[3]-r[1]),e.rotate((Math.atan2(-a,-o)+t)%t),e.moveTo(0,0),e.lineTo(-h,d/2),e.lineTo(-h,-d/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var t=this.dashEnabled();t&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),t&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),t=this.pointerWidth()/2;return{x:e.x-t,y:e.y-t,width:e.width+2*t,height:e.height+2*t}}};Ud.Arrow=ts,ts.prototype.className="Arrow",(0,FU._registerNode)(ts),ic.Factory.addGetterSetter(ts,"pointerLength",10,(0,A2.getNumberValidator)()),ic.Factory.addGetterSetter(ts,"pointerWidth",10,(0,A2.getNumberValidator)()),ic.Factory.addGetterSetter(ts,"pointerAtBeginning",!1),ic.Factory.addGetterSetter(ts,"pointerAtEnding",!0);var Vd={};Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.Circle=void 0;const LU=de,jU=Pt,BU=re,GU=fe;let ho=class extends jU.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}};Vd.Circle=ho,ho.prototype._centroid=!0,ho.prototype.className="Circle",ho.prototype._attrsAffectingSize=["radius"],(0,GU._registerNode)(ho),LU.Factory.addGetterSetter(ho,"radius",0,(0,BU.getNumberValidator)());var Hd={};Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.Ellipse=void 0;const ng=de,zU=Pt,M2=re,UU=fe;let ai=class extends zU.Shape{_sceneFunc(e){var t=this.radiusX(),r=this.radiusY();e.beginPath(),e.save(),t!==r&&e.scale(1,r/t),e.arc(0,0,t,0,2*Math.PI,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}};Hd.Ellipse=ai,ai.prototype.className="Ellipse",ai.prototype._centroid=!0,ai.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,UU._registerNode)(ai),ng.Factory.addComponentsGetterSetter(ai,"radius",["x","y"]),ng.Factory.addGetterSetter(ai,"radiusX",0,(0,M2.getNumberValidator)()),ng.Factory.addGetterSetter(ai,"radiusY",0,(0,M2.getNumberValidator)());var Kd={};Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.Image=void 0;const rg=rt,ns=de,VU=Pt,HU=fe,Za=re;let ur=class O3 extends VU.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const t=this.getWidth(),r=this.getHeight(),i=this.cornerRadius(),s=this.attrs.image;let o;if(s){const a=this.attrs.cropWidth,h=this.attrs.cropHeight;o=a&&h?[s,this.cropX(),this.cropY(),a,h,0,0,t,r]:[s,0,0,t,r]}(this.hasFill()||this.hasStroke()||i)&&(e.beginPath(),i?rg.Util.drawRoundedRectPath(e,t,r,i):e.rect(0,0,t,r),e.closePath(),e.fillStrokeShape(this)),s&&(i&&e.clip(),e.drawImage.apply(e,o))}_hitFunc(e){var t=this.width(),r=this.height(),i=this.cornerRadius();e.beginPath(),i?rg.Util.drawRoundedRectPath(e,t,r,i):e.rect(0,0,t,r),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,t;return(e=this.attrs.width)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.width}getHeight(){var e,t;return(e=this.attrs.height)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.height}static fromURL(e,t,r=null){var i=rg.Util.createImageElement();i.onload=function(){var s=new O3({image:i});t(s)},i.onerror=r,i.crossOrigin="Anonymous",i.src=e}};Kd.Image=ur,ur.prototype.className="Image",(0,HU._registerNode)(ur),ns.Factory.addGetterSetter(ur,"cornerRadius",0,(0,Za.getNumberOrArrayOfNumbersValidator)(4)),ns.Factory.addGetterSetter(ur,"image"),ns.Factory.addComponentsGetterSetter(ur,"crop",["x","y","width","height"]),ns.Factory.addGetterSetter(ur,"cropX",0,(0,Za.getNumberValidator)()),ns.Factory.addGetterSetter(ur,"cropY",0,(0,Za.getNumberValidator)()),ns.Factory.addGetterSetter(ur,"cropWidth",0,(0,Za.getNumberValidator)()),ns.Factory.addGetterSetter(ur,"cropHeight",0,(0,Za.getNumberValidator)());var Ko={};Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.Tag=Ko.Label=void 0;const sc=de,KU=Pt,WU=aa,ig=re,P3=fe;var E3=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],t0="up",n0="right",r0="down",i0="left",XU=E3.length;let sg=class extends WU.Group{constructor(e){super(e),this.on("add.konva",function(t){this._addListeners(t.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var t,r=this,i=function(){r._sync()};for(t=0;t<XU;t++)e.on(E3[t]+"Change.konva",i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e,t,r,i,s,o,a,h=this.getText(),c=this.getTag();if(h&&c){switch(e=h.width(),t=h.height(),r=c.pointerDirection(),i=c.pointerWidth(),a=c.pointerHeight(),s=0,o=0,r){case t0:s=e/2,o=-1*a;break;case n0:s=e+i,o=t/2;break;case r0:s=e/2,o=t+a;break;case i0:s=-1*i,o=t/2}c.setAttrs({x:-1*s,y:-1*o,width:e,height:t}),h.setAttrs({x:-1*s,y:-1*o})}}};Ko.Label=sg,sg.prototype.className="Label",(0,P3._registerNode)(sg);let rs=class extends KU.Shape{_sceneFunc(e){var t=this.width(),r=this.height(),i=this.pointerDirection(),s=this.pointerWidth(),o=this.pointerHeight(),a=this.cornerRadius();let h=0,c=0,l=0,d=0;typeof a=="number"?h=c=l=d=Math.min(a,t/2,r/2):(h=Math.min(a[0]||0,t/2,r/2),c=Math.min(a[1]||0,t/2,r/2),d=Math.min(a[2]||0,t/2,r/2),l=Math.min(a[3]||0,t/2,r/2)),e.beginPath(),e.moveTo(h,0),i===t0&&(e.lineTo((t-s)/2,0),e.lineTo(t/2,-1*o),e.lineTo((t+s)/2,0)),e.lineTo(t-c,0),e.arc(t-c,c,c,3*Math.PI/2,0,!1),i===n0&&(e.lineTo(t,(r-o)/2),e.lineTo(t+s,r/2),e.lineTo(t,(r+o)/2)),e.lineTo(t,r-d),e.arc(t-d,r-d,d,0,Math.PI/2,!1),i===r0&&(e.lineTo((t+s)/2,r),e.lineTo(t/2,r+o),e.lineTo((t-s)/2,r)),e.lineTo(l,r),e.arc(l,r-l,l,Math.PI/2,Math.PI,!1),i===i0&&(e.lineTo(0,(r+o)/2),e.lineTo(-1*s,r/2),e.lineTo(0,(r-o)/2)),e.lineTo(0,h),e.arc(h,h,h,Math.PI,3*Math.PI/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,t=0,r=this.pointerWidth(),i=this.pointerHeight(),s=this.pointerDirection(),o=this.width(),a=this.height();return s===t0?(t-=i,a+=i):s===r0?a+=i:s===i0?(e-=1.5*r,o+=r):s===n0&&(o+=1.5*r),{x:e,y:t,width:o,height:a}}};Ko.Tag=rs,rs.prototype.className="Tag",(0,P3._registerNode)(rs),sc.Factory.addGetterSetter(rs,"pointerDirection","none"),sc.Factory.addGetterSetter(rs,"pointerWidth",0,(0,ig.getNumberValidator)()),sc.Factory.addGetterSetter(rs,"pointerHeight",0,(0,ig.getNumberValidator)()),sc.Factory.addGetterSetter(rs,"cornerRadius",0,(0,ig.getNumberOrArrayOfNumbersValidator)(4));var Wl={};Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.Rect=void 0;const YU=de,qU=Pt,ZU=fe,QU=rt,JU=re;let oc=class extends qU.Shape{_sceneFunc(e){var t=this.cornerRadius(),r=this.width(),i=this.height();e.beginPath(),t?QU.Util.drawRoundedRectPath(e,r,i,t):e.rect(0,0,r,i),e.closePath(),e.fillStrokeShape(this)}};Wl.Rect=oc,oc.prototype.className="Rect",(0,ZU._registerNode)(oc),YU.Factory.addGetterSetter(oc,"cornerRadius",0,(0,JU.getNumberOrArrayOfNumbersValidator)(4));var Wd={};Object.defineProperty(Wd,"__esModule",{value:!0}),Wd.RegularPolygon=void 0;const N2=de,eV=Pt,D2=re,tV=fe;let is=class extends eV.Shape{_sceneFunc(e){const t=this._getPoints();e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var r=1;r<t.length;r++)e.lineTo(t[r].x,t[r].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,t=this.attrs.radius||0,r=[];for(var i=0;i<e;i++)r.push({x:t*Math.sin(2*i*Math.PI/e),y:-1*t*Math.cos(2*i*Math.PI/e)});return r}getSelfRect(){const e=this._getPoints();var t=e[0].x,r=e[0].y,i=e[0].x,s=e[0].y;return e.forEach(o=>{t=Math.min(t,o.x),r=Math.max(r,o.x),i=Math.min(i,o.y),s=Math.max(s,o.y)}),{x:t,y:i,width:r-t,height:s-i}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};Wd.RegularPolygon=is,is.prototype.className="RegularPolygon",is.prototype._centroid=!0,is.prototype._attrsAffectingSize=["radius"],(0,tV._registerNode)(is),N2.Factory.addGetterSetter(is,"radius",0,(0,D2.getNumberValidator)()),N2.Factory.addGetterSetter(is,"sides",0,(0,D2.getNumberValidator)());var Xd={};Object.defineProperty(Xd,"__esModule",{value:!0}),Xd.Ring=void 0;const $2=de,nV=Pt,R2=re,rV=fe;var F2=2*Math.PI;let ss=class extends nV.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,F2,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),F2,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}};Xd.Ring=ss,ss.prototype.className="Ring",ss.prototype._centroid=!0,ss.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,rV._registerNode)(ss),$2.Factory.addGetterSetter(ss,"innerRadius",0,(0,R2.getNumberValidator)()),$2.Factory.addGetterSetter(ss,"outerRadius",0,(0,R2.getNumberValidator)());var Yd={};Object.defineProperty(Yd,"__esModule",{value:!0}),Yd.Sprite=void 0;const os=de,iV=Pt,sV=la,L2=re,oV=fe;let pr=class extends iV.Shape{constructor(e){super(e),this._updated=!0,this.anim=new sV.Animation(()=>{var t=this._updated;return this._updated=!1,t}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var t=this.animation(),r=this.frameIndex(),i=4*r,s=this.animations()[t],o=this.frameOffsets(),a=s[i+0],h=s[i+1],c=s[i+2],l=s[i+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,c,l),e.closePath(),e.fillStrokeShape(this)),d)if(o){var u=o[t],f=2*r;e.drawImage(d,a,h,c,l,u[f+0],u[f+1],c,l)}else e.drawImage(d,a,h,c,l,0,0,c,l)}_hitFunc(e){var t=this.animation(),r=this.frameIndex(),i=4*r,s=this.animations()[t],o=this.frameOffsets(),a=s[i+2],h=s[i+3];if(e.beginPath(),o){var c=o[t],l=2*r;e.rect(c[l+0],c[l+1],a,h)}else e.rect(0,0,a,h);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),t=this.animation();e<this.animations()[t].length/4-1?this.frameIndex(e+1):this.frameIndex(0)}};Yd.Sprite=pr,pr.prototype.className="Sprite",(0,oV._registerNode)(pr),os.Factory.addGetterSetter(pr,"animation"),os.Factory.addGetterSetter(pr,"animations"),os.Factory.addGetterSetter(pr,"frameOffsets"),os.Factory.addGetterSetter(pr,"image"),os.Factory.addGetterSetter(pr,"frameIndex",0,(0,L2.getNumberValidator)()),os.Factory.addGetterSetter(pr,"frameRate",17,(0,L2.getNumberValidator)()),os.Factory.backCompat(pr,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var qd={};Object.defineProperty(qd,"__esModule",{value:!0}),qd.Star=void 0;const og=de,aV=Pt,ag=re,lV=fe;let li=class extends aV.Shape{_sceneFunc(e){var t=this.innerRadius(),r=this.outerRadius(),i=this.numPoints();e.beginPath(),e.moveTo(0,0-r);for(var s=1;s<2*i;s++){var o=s%2==0?r:t,a=o*Math.sin(s*Math.PI/i),h=-1*o*Math.cos(s*Math.PI/i);e.lineTo(a,h)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}};qd.Star=li,li.prototype.className="Star",li.prototype._centroid=!0,li.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,lV._registerNode)(li),og.Factory.addGetterSetter(li,"numPoints",5,(0,ag.getNumberValidator)()),og.Factory.addGetterSetter(li,"innerRadius",0,(0,ag.getNumberValidator)()),og.Factory.addGetterSetter(li,"outerRadius",0,(0,ag.getNumberValidator)());var ks={};Object.defineProperty(ks,"__esModule",{value:!0}),ks.Text=ks.stringToArray=void 0;const s0=rt,Bt=de,hV=Pt,hi=re,cV=fe;function T3(n){return Array.from(n)}ks.stringToArray=T3;var j2,co="auto",k3="inherit",Qa="justify",A3="left",B2="middle",G2="normal",ac=" ",z2="none",I3=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],dV=I3.length;function lg(){return j2||(j2=s0.Util.createCanvasElement().getContext("2d"))}let st=class extends hV.Shape{constructor(e){super(function(r){return(r=r||{}).fillLinearGradientColorStops||r.fillRadialGradientColorStops||r.fillPatternImage||(r.fill=r.fill||"black"),r}(e)),this._partialTextX=0,this._partialTextY=0;for(var t=0;t<dV;t++)this.on(I3[t]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(e){var t=this.textArr,r=t.length;if(this.text()){var i,s=this.padding(),o=this.fontSize(),a=this.lineHeight()*o,h=this.verticalAlign(),c=this.direction(),l=0,d=this.align(),u=this.getWidth(),f=this.letterSpacing(),m=this.fill(),g=this.textDecoration(),y=g.indexOf("underline")!==-1,v=g.indexOf("line-through")!==-1,b=0,w=(b=a/2,0),C=0;for((c=c===k3?e.direction:c)==="rtl"&&e.setAttr("direction",c),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",B2),e.setAttr("textAlign",A3),h===B2?l=(this.getHeight()-r*a-2*s)/2:h==="bottom"&&(l=this.getHeight()-r*a-2*s),e.translate(s,l+s),i=0;i<r;i++){w=0,C=0;var O,x,P,T=t[i],k=T.text,E=T.width,I=T.lastInParagraph;if(e.save(),d==="right"?w+=u-E-2*s:d==="center"&&(w+=(u-E-2*s)/2),y){e.save(),e.beginPath(),e.moveTo(w,b+C+Math.round(o/2)),x=(O=k.split(" ").length-1)===0,P=d!==Qa||I?E:u-2*s,e.lineTo(w+Math.round(P),b+C+Math.round(o/2)),e.lineWidth=o/15;const V=this._getLinearGradient();e.strokeStyle=V||m,e.stroke(),e.restore()}if(v){e.save(),e.beginPath(),e.moveTo(w,b+C),x=(O=k.split(" ").length-1)===0,P=d===Qa&&I&&!x?u-2*s:E,e.lineTo(w+Math.round(P),b+C),e.lineWidth=o/15;const V=this._getLinearGradient();e.strokeStyle=V||m,e.stroke(),e.restore()}if(c==="rtl"||f===0&&d!==Qa)f!==0&&e.setAttr("letterSpacing",`${f}px`),this._partialTextX=w,this._partialTextY=b+C,this._partialText=k,e.fillStrokeShape(this);else{O=k.split(" ").length-1;for(var M=T3(k),R=0;R<M.length;R++){var U=M[R];U!==" "||I||d!==Qa||(w+=(u-2*s-E)/O),this._partialTextX=w,this._partialTextY=b+C,this._partialText=U,e.fillStrokeShape(this),w+=this.measureSize(U).width+f}}e.restore(),r>1&&(b+=a)}}}_hitFunc(e){var t=this.getWidth(),r=this.getHeight();e.beginPath(),e.rect(0,0,t,r),e.closePath(),e.fillStrokeShape(this)}setText(e){var t=s0.Util._isString(e)?e:e==null?"":e+"";return this._setAttr("text",t),this}getWidth(){return this.attrs.width===co||this.attrs.width===void 0?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===co||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return s0.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var t,r=lg(),i=this.fontSize();return r.save(),r.font=this._getContextFont(),t=r.measureText(e),r.restore(),{width:t.width,height:i}}_getContextFont(){return this.fontStyle()+ac+this.fontVariant()+ac+(this.fontSize()+"px ")+this.fontFamily().split(",").map(e=>{const t=(e=e.trim()).indexOf(" ")>=0,r=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!r&&(e=`"${e}"`),e}).join(", ")}_addTextLine(e){this.align()===Qa&&(e=e.trim());var t=this._getTextWidth(e);return this.textArr.push({text:e,width:t,lastInParagraph:!1})}_getTextWidth(e){var t=this.letterSpacing(),r=e.length;return lg().measureText(e).width+(r?t*(r-1):0)}_setTextData(){var e=this.text().split(`
`),t=+this.fontSize(),r=0,i=this.lineHeight()*t,s=this.attrs.width,o=this.attrs.height,a=s!==co&&s!==void 0,h=o!==co&&o!==void 0,c=this.padding(),l=s-2*c,d=o-2*c,u=0,f=this.wrap(),m=f!=="char"&&f!==z2,g=this.ellipsis();this.textArr=[],lg().font=this._getContextFont();for(var y=g?this._getTextWidth("…"):0,v=0,b=e.length;v<b;++v){var w=e[v],C=this._getTextWidth(w);if(a&&C>l)for(;w.length>0;){for(var O=0,x=w.length,P="",T=0;O<x;){var k=O+x>>>1,E=w.slice(0,k+1),I=this._getTextWidth(E)+y;I<=l?(O=k+1,P=E,T=I):x=k}if(!P)break;if(m){var M,R=w[P.length];(M=(R===ac||R==="-")&&T<=l?P.length:Math.max(P.lastIndexOf(ac),P.lastIndexOf("-"))+1)>0&&(O=M,P=P.slice(0,O),T=this._getTextWidth(P))}if(P=P.trimRight(),this._addTextLine(P),r=Math.max(r,T),u+=i,this._shouldHandleEllipsis(u)){this._tryToAddEllipsisToLastLine();break}if((w=(w=w.slice(O)).trimLeft()).length>0&&(C=this._getTextWidth(w))<=l){this._addTextLine(w),u+=i,r=Math.max(r,C);break}}else this._addTextLine(w),u+=i,r=Math.max(r,C),this._shouldHandleEllipsis(u)&&v<b-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),h&&u+i>d)break}this.textHeight=t,this.textWidth=r}_shouldHandleEllipsis(e){var t=+this.fontSize(),r=this.lineHeight()*t,i=this.attrs.height,s=i!==co&&i!==void 0,o=i-2*this.padding();return this.wrap()===z2||s&&e+r>o}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,t=e!==co&&e!==void 0,r=e-2*this.padding(),i=this.ellipsis(),s=this.textArr[this.textArr.length-1];s&&i&&(t&&(this._getTextWidth(s.text+"…")<r||(s.text=s.text.slice(0,s.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(s.text+"…"))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,t=this.hasShadow();return!(!e||!t)||super._useBufferCanvas()}};ks.Text=st,st.prototype._fillFunc=function(n){n.fillText(this._partialText,this._partialTextX,this._partialTextY)},st.prototype._strokeFunc=function(n){n.setAttr("miterLimit",2),n.strokeText(this._partialText,this._partialTextX,this._partialTextY)},st.prototype.className="Text",st.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,cV._registerNode)(st),Bt.Factory.overWriteSetter(st,"width",(0,hi.getNumberOrAutoValidator)()),Bt.Factory.overWriteSetter(st,"height",(0,hi.getNumberOrAutoValidator)()),Bt.Factory.addGetterSetter(st,"direction",k3),Bt.Factory.addGetterSetter(st,"fontFamily","Arial"),Bt.Factory.addGetterSetter(st,"fontSize",12,(0,hi.getNumberValidator)()),Bt.Factory.addGetterSetter(st,"fontStyle",G2),Bt.Factory.addGetterSetter(st,"fontVariant",G2),Bt.Factory.addGetterSetter(st,"padding",0,(0,hi.getNumberValidator)()),Bt.Factory.addGetterSetter(st,"align",A3),Bt.Factory.addGetterSetter(st,"verticalAlign","top"),Bt.Factory.addGetterSetter(st,"lineHeight",1,(0,hi.getNumberValidator)()),Bt.Factory.addGetterSetter(st,"wrap","word"),Bt.Factory.addGetterSetter(st,"ellipsis",!1,(0,hi.getBooleanValidator)()),Bt.Factory.addGetterSetter(st,"letterSpacing",0,(0,hi.getNumberValidator)()),Bt.Factory.addGetterSetter(st,"text","",(0,hi.getStringValidator)()),Bt.Factory.addGetterSetter(st,"textDecoration","");var Zd={};Object.defineProperty(Zd,"__esModule",{value:!0}),Zd.TextPath=void 0;const hg=rt,Kn=de,uV=Pt,Ja=ha,cg=ks,U2=re,pV=fe;var V2="normal";function H2(n){n.fillText(this.partialText,0,0)}function K2(n){n.strokeText(this.partialText,0,0)}let _t=class extends uV.Shape{constructor(e){super(e),this.dummyCanvas=hg.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Ja.Path.getPathLength(this.dataArray)}_getPointAtLength(e){return this.attrs.data?e-1>this.pathLength?null:Ja.Path.getPointAtLengthOfDataArray(e,this.dataArray):null}_readDataAttribute(){this.dataArray=Ja.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var t=this.textDecoration(),r=this.fill(),i=this.fontSize(),s=this.glyphInfo;t==="underline"&&e.beginPath();for(var o=0;o<s.length;o++){e.save();var a=s[o].p0;e.translate(a.x,a.y),e.rotate(s[o].rotation),this.partialText=s[o].text,e.fillStrokeShape(this),t==="underline"&&(o===0&&e.moveTo(0,i/2+1),e.lineTo(i,i/2+1)),e.restore()}t==="underline"&&(e.strokeStyle=r,e.lineWidth=i/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var t=this.glyphInfo;if(t.length>=1){var r=t[0].p0;e.moveTo(r.x,r.y)}for(var i=0;i<t.length;i++){var s=t[i].p1;e.lineTo(s.x,s.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return hg.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return cg.Text.prototype.setText.call(this,e)}_getContextFont(){return cg.Text.prototype._getContextFont.call(this)}_getTextSize(e){var t=this.dummyCanvas.getContext("2d");t.save(),t.font=this._getContextFont();var r=t.measureText(e);return t.restore(),{width:r.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:t}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=t,this.glyphInfo=[],!this.attrs.data)return null;const r=this.letterSpacing(),i=this.align(),s=this.kerningFunc(),o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);let a=0;i==="center"&&(a=Math.max(0,this.pathLength/2-o/2)),i==="right"&&(a=Math.max(0,this.pathLength-o));const h=(0,cg.stringToArray)(this.text());let c=a;for(var l=0;l<h.length;l++){const d=this._getPointAtLength(c);if(!d)return;let u=this._getTextSize(h[l]).width+r;if(h[l]===" "&&i==="justify"){const b=this.text().split(" ").length-1;u+=(this.pathLength-o)/b}const f=this._getPointAtLength(c+u);if(!f)return;const m=Ja.Path.getLineLength(d.x,d.y,f.x,f.y);let g=0;if(s)try{g=s(h[l-1],h[l])*this.fontSize()}catch{g=0}d.x+=g,f.x+=g,this.textWidth+=g;const y=Ja.Path.getPointOnLine(g+m/2,d.x,d.y,f.x,f.y),v=Math.atan2(f.y-d.y,f.x-d.x);this.glyphInfo.push({transposeX:y.x,transposeY:y.y,text:h[l],rotation:v,p0:d,p1:f}),c+=u}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(l){e.push(l.p0.x),e.push(l.p0.y),e.push(l.p1.x),e.push(l.p1.y)});for(var t,r,i=e[0]||0,s=e[0]||0,o=e[1]||0,a=e[1]||0,h=0;h<e.length/2;h++)t=e[2*h],r=e[2*h+1],i=Math.min(i,t),s=Math.max(s,t),o=Math.min(o,r),a=Math.max(a,r);var c=this.fontSize();return{x:i-c/2,y:o-c/2,width:s-i+c,height:a-o+c}}destroy(){return hg.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};Zd.TextPath=_t,_t.prototype._fillFunc=H2,_t.prototype._strokeFunc=K2,_t.prototype._fillFuncHit=H2,_t.prototype._strokeFuncHit=K2,_t.prototype.className="TextPath",_t.prototype._attrsAffectingSize=["text","fontSize","data"],(0,pV._registerNode)(_t),Kn.Factory.addGetterSetter(_t,"data"),Kn.Factory.addGetterSetter(_t,"fontFamily","Arial"),Kn.Factory.addGetterSetter(_t,"fontSize",12,(0,U2.getNumberValidator)()),Kn.Factory.addGetterSetter(_t,"fontStyle",V2),Kn.Factory.addGetterSetter(_t,"align","left"),Kn.Factory.addGetterSetter(_t,"letterSpacing",0,(0,U2.getNumberValidator)()),Kn.Factory.addGetterSetter(_t,"textBaseline","middle"),Kn.Factory.addGetterSetter(_t,"fontVariant",V2),Kn.Factory.addGetterSetter(_t,"text",""),Kn.Factory.addGetterSetter(_t,"textDecoration",null),Kn.Factory.addGetterSetter(_t,"kerningFunc",null);var Qd={};Object.defineProperty(Qd,"__esModule",{value:!0}),Qd.Transformer=void 0;const $e=rt,Oe=de,W2=Qe,fV=Pt,gV=Wl,X2=aa,Xn=fe,ci=re,mV=fe;var M3="tr-konva",vV=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(n=>n+`.${M3}`).join(" "),Y2="nodesRect",yV=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],bV={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const _V="ontouchstart"in Xn.Konva._global;var Kc=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function N3(n,e,t){const r=t.x+(n.x-t.x)*Math.cos(e)-(n.y-t.y)*Math.sin(e),i=t.y+(n.x-t.x)*Math.sin(e)+(n.y-t.y)*Math.cos(e);return{...n,rotation:n.rotation+e,x:r,y:i}}function wV(n,e){const t=function(r){return{x:r.x+r.width/2*Math.cos(r.rotation)+r.height/2*Math.sin(-r.rotation),y:r.y+r.height/2*Math.cos(r.rotation)+r.width/2*Math.sin(r.rotation)}}(n);return N3(n,e,t)}let o0=0,be=class extends X2.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(vV,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return $e.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return M3+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const t=e.filter(r=>!r.isAncestorOf(this)||($e.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1));return this._nodes=e=t,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(r=>{const i=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),this._transforming||this.isDragging()||this.update()},s=r._attrsAffectingSize.map(o=>o+"Change."+this._getEventNamespace()).join(" ");r.on(s,i),r.on(yV.map(o=>o+`.${this._getEventNamespace()}`).join(" "),i),r.on(`absoluteTransformChange.${this._getEventNamespace()}`,i),this._proxyDrag(r)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let t;e.on(`dragstart.${this._getEventNamespace()}`,r=>{t=e.getAbsolutePosition(),this.isDragging()||e===this.findOne(".back")||this.startDrag(r,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!t)return;const i=e.getAbsolutePosition(),s=i.x-t.x,o=i.y-t.y;this.nodes().forEach(a=>{if(a===e||a.isDragging())return;const h=a.getAbsolutePosition();a.setAbsolutePosition({x:h.x+s,y:h.y+o}),a.startDrag(r)}),t=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Y2),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Y2,this.__getNodeRect)}__getNodeShape(e,t=this.rotation(),r){var i=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=e.getAbsoluteScale(r),o=e.getAbsolutePosition(r),a=i.x*s.x-e.offsetX()*s.x,h=i.y*s.y-e.offsetY()*s.y;const c=(Xn.Konva.getAngle(e.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return N3({x:o.x+a*Math.cos(c)+h*Math.sin(-c),y:o.y+h*Math.cos(c)+a*Math.sin(c),width:i.width*s.x,height:i.height*s.y,rotation:c},-Xn.Konva.getAngle(t),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const e=[];this.nodes().map(h=>{const c=h.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var l=[{x:c.x,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x+c.width,y:c.y+c.height},{x:c.x,y:c.y+c.height}],d=h.getAbsoluteTransform();l.forEach(function(u){var f=d.point(u);e.push(f)})});const t=new $e.Transform;t.rotate(-Xn.Konva.getAngle(this.rotation()));var r=1/0,i=1/0,s=-1/0,o=-1/0;e.forEach(function(h){var c=t.point(h);r===void 0&&(r=s=c.x,i=o=c.y),r=Math.min(r,c.x),i=Math.min(i,c.y),s=Math.max(s,c.x),o=Math.max(o,c.y)}),t.invert();const a=t.point({x:r,y:i});return{x:a.x,y:a.y,width:s-r,height:o-i,rotation:Xn.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Kc.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){var t=new gV.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:_V?10:"auto"}),r=this;t.on("mousedown touchstart",function(i){r._handleMouseDown(i)}),t.on("dragstart",i=>{t.stopDrag(),i.cancelBubble=!0}),t.on("dragend",i=>{i.cancelBubble=!0}),t.on("mouseenter",()=>{var i=Xn.Konva.getAngle(this.rotation()),s=this.rotateAnchorCursor(),o=function(a,h,c){if(a==="rotater")return c;h+=$e.Util.degToRad(bV[a]||0);var l=($e.Util.radToDeg(h)%360+360)%360;return $e.Util._inRange(l,337.5,360)||$e.Util._inRange(l,0,22.5)?"ns-resize":$e.Util._inRange(l,22.5,67.5)?"nesw-resize":$e.Util._inRange(l,67.5,112.5)?"ew-resize":$e.Util._inRange(l,112.5,157.5)?"nwse-resize":$e.Util._inRange(l,157.5,202.5)?"ns-resize":$e.Util._inRange(l,202.5,247.5)?"nesw-resize":$e.Util._inRange(l,247.5,292.5)?"ew-resize":$e.Util._inRange(l,292.5,337.5)?"nwse-resize":($e.Util.error("Transformer has unknown angle for cursor detection: "+l),"pointer")}(e,i,s);t.getStage().content&&(t.getStage().content.style.cursor=o),this._cursorChange=!0}),t.on("mouseout",()=>{t.getStage().content&&(t.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(t)}_createBack(){var e=new fV.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(t,r){var i=r.getParent(),s=i.padding();t.beginPath(),t.rect(-s,-s,r.width()+2*s,r.height()+2*s),t.moveTo(r.width()/2,-s),i.rotateEnabled()&&i.rotateLineVisible()&&t.lineTo(r.width()/2,-i.rotateAnchorOffset()*$e.Util._sign(r.height())-s),t.fillStrokeShape(r)},hitFunc:(t,r)=>{if(this.shouldOverdrawWholeArea()){var i=this.padding();t.beginPath(),t.rect(-i,-i,r.width()+2*i,r.height()+2*i),t.fillStrokeShape(r)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",t=>{t.cancelBubble=!0}),e.on("dragmove",t=>{t.cancelBubble=!0}),e.on("dragend",t=>{t.cancelBubble=!0}),this.on("dragmove",t=>{this.update()})}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var t=this._getNodeRect(),r=t.width,i=t.height,s=Math.sqrt(Math.pow(r,2)+Math.pow(i,2));this.sin=Math.abs(i/s),this.cos=Math.abs(r/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var o=e.target.getAbsolutePosition(),a=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-o.x,y:a.y-o.y},o0++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(h=>{h._fire("transformstart",{evt:e.evt,target:h})})}_handleMouseMove(e){var t,r,i,s=this.findOne("."+this._movingAnchorName),o=s.getStage();o.setPointersPositions(e);const a=o.getPointerPosition();let h={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const c=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(h=this.anchorDragBoundFunc()(c,h,e)),s.setAbsolutePosition(h);const l=s.getAbsolutePosition();if(c.x!==l.x||c.y!==l.y)if(this._movingAnchorName!=="rotater"){var d,u=this.shiftBehavior();d=u==="inverted"?this.keepRatio()&&!e.shiftKey:u==="none"?this.keepRatio():this.keepRatio()||e.shiftKey;var f=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(d){var m=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(m.x-s.x(),2)+Math.pow(m.y-s.y(),2));var g=this.findOne(".top-left").x()>m.x?-1:1,y=this.findOne(".top-left").y()>m.y?-1:1;t=i*this.cos*g,r=i*this.sin*y,this.findOne(".top-left").x(m.x-t),this.findOne(".top-left").y(m.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){d&&(m=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()},i=Math.sqrt(Math.pow(s.x()-m.x,2)+Math.pow(m.y-s.y(),2)),g=this.findOne(".top-right").x()<m.x?-1:1,y=this.findOne(".top-right").y()>m.y?-1:1,t=i*this.cos*g,r=i*this.sin*y,this.findOne(".top-right").x(m.x+t),this.findOne(".top-right").y(m.y-r));var v=s.position();this.findOne(".top-left").y(v.y),this.findOne(".bottom-right").x(v.x)}else this._movingAnchorName==="middle-left"?this.findOne(".top-left").x(s.x()):this._movingAnchorName==="middle-right"?this.findOne(".bottom-right").x(s.x()):this._movingAnchorName==="bottom-left"?(d&&(m=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()},i=Math.sqrt(Math.pow(m.x-s.x(),2)+Math.pow(s.y()-m.y,2)),g=m.x<s.x()?-1:1,y=s.y()<m.y?-1:1,t=i*this.cos*g,r=i*this.sin*y,s.x(m.x-t),s.y(m.y+r)),v=s.position(),this.findOne(".top-left").x(v.x),this.findOne(".bottom-right").y(v.y)):this._movingAnchorName==="bottom-center"?this.findOne(".bottom-right").y(s.y()):this._movingAnchorName==="bottom-right"?d&&(m=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()},i=Math.sqrt(Math.pow(s.x()-m.x,2)+Math.pow(s.y()-m.y,2)),g=this.findOne(".bottom-right").x()<m.x?-1:1,y=this.findOne(".bottom-right").y()<m.y?-1:1,t=i*this.cos*g,r=i*this.sin*y,this.findOne(".bottom-right").x(m.x+t),this.findOne(".bottom-right").y(m.y+r)):console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(f=this.centeredScaling()||e.altKey){var b=this.findOne(".top-left"),w=this.findOne(".bottom-right"),C=b.x(),O=b.y(),x=this.getWidth()-w.x(),P=this.getHeight()-w.y();w.move({x:-C,y:-O}),b.move({x,y:P})}var T=this.findOne(".top-left").getAbsolutePosition();t=T.x,r=T.y;var k=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),E=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:t,y:r,width:k,height:E,rotation:Xn.Konva.getAngle(this.rotation())},e)}else{var I=this._getNodeRect();t=s.x()-I.width/2,r=-s.y()+I.height/2;let M=Math.atan2(-r,t)+Math.PI/2;I.height<0&&(M-=Math.PI);const R=Xn.Konva.getAngle(this.rotation())+M,U=Xn.Konva.getAngle(this.rotationSnapTolerance()),V=wV(I,function(H,K,$){let j=K;for(let S=0;S<H.length;S++){const A=Xn.Konva.getAngle(H[S]),D=Math.abs(A-K)%(2*Math.PI);Math.min(D,2*Math.PI-D)<$&&(j=A)}return j}(this.rotationSnaps(),R,U)-I.rotation);this._fitNodesInto(V,e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var t;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var r=this.getNode();o0--,this._fire("transformend",{evt:e,target:r}),(t=this.getLayer())===null||t===void 0||t.batchDraw(),r&&this._nodes.forEach(i=>{var s;i._fire("transformend",{evt:e,target:i}),(s=i.getLayer())===null||s===void 0||s.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,t){var r=this._getNodeRect();if($e.Util._inRange(e.width,2*-this.padding()-1,1))return void this.update();if($e.Util._inRange(e.height,2*-this.padding()-1,1))return void this.update();var i=new $e.Transform;if(i.rotate(Xn.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const d=i.point({x:2*-this.padding(),y:0});e.x+=d.x,e.y+=d.y,e.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const d=i.point({x:2*this.padding(),y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,e.width+=2*this.padding()}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const d=i.point({x:0,y:2*-this.padding()});e.x+=d.x,e.y+=d.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,e.height+=2*this.padding()}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const d=i.point({x:0,y:2*this.padding()});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,e.height+=2*this.padding()}if(this.boundBoxFunc()){const d=this.boundBoxFunc()(r,e);d?e=d:$e.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const s=1e7,o=new $e.Transform;o.translate(r.x,r.y),o.rotate(r.rotation),o.scale(r.width/s,r.height/s);const a=new $e.Transform,h=e.width/s,c=e.height/s;this.flipEnabled()===!1?(a.translate(e.x,e.y),a.rotate(e.rotation),a.translate(e.width<0?e.width:0,e.height<0?e.height:0),a.scale(Math.abs(h),Math.abs(c))):(a.translate(e.x,e.y),a.rotate(e.rotation),a.scale(h,c));const l=a.multiply(o.invert());this._nodes.forEach(d=>{var u;const f=d.getParent().getAbsoluteTransform(),m=d.getTransform().copy();m.translate(d.offsetX(),d.offsetY());const g=new $e.Transform;g.multiply(f.copy().invert()).multiply(l).multiply(f).multiply(m);const y=g.decompose();d.setAttrs(y),(u=d.getLayer())===null||u===void 0||u.batchDraw()}),this.rotation($e.Util._getRotation(e.rotation)),this._nodes.forEach(d=>{this._fire("transform",{evt:t,target:d}),d._fire("transform",{evt:t,target:d})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,t){this.findOne(e).setAttrs(t)}update(){var e,t=this._getNodeRect();this.rotation($e.Util._getRotation(t.rotation));var r=t.width,i=t.height,s=this.enabledAnchors(),o=this.resizeEnabled(),a=this.padding(),h=this.anchorSize();const c=this.find("._anchor");c.forEach(d=>{d.setAttrs({width:h,height:h,offsetX:h/2,offsetY:h/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:h/2+a,offsetY:h/2+a,visible:o&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:h/2+a,visible:o&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:h/2-a,offsetY:h/2+a,visible:o&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:h/2+a,visible:o&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:i/2,offsetX:h/2-a,visible:o&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:h/2+a,offsetY:h/2-a,visible:o&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:i,offsetY:h/2-a,visible:o&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:i,offsetX:h/2-a,offsetY:h/2-a,visible:o&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*$e.Util._sign(i)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const l=this.anchorStyleFunc();l&&c.forEach(d=>{l(d)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),X2.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return W2.Node.prototype.toObject.call(this)}clone(e){return W2.Node.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Qd.Transformer=be,be.isTransforming=()=>o0>0,be.prototype.className="Transformer",(0,mV._registerNode)(be),Oe.Factory.addGetterSetter(be,"enabledAnchors",Kc,function(n){return n instanceof Array||$e.Util.warn("enabledAnchors value should be an array"),n instanceof Array&&n.forEach(function(e){Kc.indexOf(e)===-1&&$e.Util.warn("Unknown anchor name: "+e+". Available names are: "+Kc.join(", "))}),n||[]}),Oe.Factory.addGetterSetter(be,"flipEnabled",!0,(0,ci.getBooleanValidator)()),Oe.Factory.addGetterSetter(be,"resizeEnabled",!0),Oe.Factory.addGetterSetter(be,"anchorSize",10,(0,ci.getNumberValidator)()),Oe.Factory.addGetterSetter(be,"rotateEnabled",!0),Oe.Factory.addGetterSetter(be,"rotateLineVisible",!0),Oe.Factory.addGetterSetter(be,"rotationSnaps",[]),Oe.Factory.addGetterSetter(be,"rotateAnchorOffset",50,(0,ci.getNumberValidator)()),Oe.Factory.addGetterSetter(be,"rotateAnchorCursor","crosshair"),Oe.Factory.addGetterSetter(be,"rotationSnapTolerance",5,(0,ci.getNumberValidator)()),Oe.Factory.addGetterSetter(be,"borderEnabled",!0),Oe.Factory.addGetterSetter(be,"anchorStroke","rgb(0, 161, 255)"),Oe.Factory.addGetterSetter(be,"anchorStrokeWidth",1,(0,ci.getNumberValidator)()),Oe.Factory.addGetterSetter(be,"anchorFill","white"),Oe.Factory.addGetterSetter(be,"anchorCornerRadius",0,(0,ci.getNumberValidator)()),Oe.Factory.addGetterSetter(be,"borderStroke","rgb(0, 161, 255)"),Oe.Factory.addGetterSetter(be,"borderStrokeWidth",1,(0,ci.getNumberValidator)()),Oe.Factory.addGetterSetter(be,"borderDash"),Oe.Factory.addGetterSetter(be,"keepRatio",!0),Oe.Factory.addGetterSetter(be,"shiftBehavior","default"),Oe.Factory.addGetterSetter(be,"centeredScaling",!1),Oe.Factory.addGetterSetter(be,"ignoreStroke",!1),Oe.Factory.addGetterSetter(be,"padding",0,(0,ci.getNumberValidator)()),Oe.Factory.addGetterSetter(be,"node"),Oe.Factory.addGetterSetter(be,"nodes"),Oe.Factory.addGetterSetter(be,"boundBoxFunc"),Oe.Factory.addGetterSetter(be,"anchorDragBoundFunc"),Oe.Factory.addGetterSetter(be,"anchorStyleFunc"),Oe.Factory.addGetterSetter(be,"shouldOverdrawWholeArea",!1),Oe.Factory.addGetterSetter(be,"useSingleNodeRotation",!0),Oe.Factory.backCompat(be,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var Jd={};Object.defineProperty(Jd,"__esModule",{value:!0}),Jd.Wedge=void 0;const lc=de,SV=Pt,CV=fe,q2=re,xV=fe;let Dr=class extends SV.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,CV.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};Jd.Wedge=Dr,Dr.prototype.className="Wedge",Dr.prototype._centroid=!0,Dr.prototype._attrsAffectingSize=["radius"],(0,xV._registerNode)(Dr),lc.Factory.addGetterSetter(Dr,"radius",0,(0,q2.getNumberValidator)()),lc.Factory.addGetterSetter(Dr,"angle",0,(0,q2.getNumberValidator)()),lc.Factory.addGetterSetter(Dr,"clockwise",!1),lc.Factory.backCompat(Dr,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var eu={};Object.defineProperty(eu,"__esModule",{value:!0}),eu.Blur=void 0;const Z2=de,OV=Qe,PV=re;function Q2(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var EV=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],TV=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];eu.Blur=function(n){var e=Math.round(this.blurRadius());e>0&&function(t,r){var i,s,o,a,h,c,l,d,u,f,m,g,y,v,b,w,C,O,x,P,T,k,E,I,M=t.data,R=t.width,U=t.height,V=r+r+1,H=R-1,K=U-1,$=r+1,j=$*($+1)/2,S=new Q2,A=null,D=S,F=null,B=null,z=EV[r],Z=TV[r];for(o=1;o<V;o++)D=D.next=new Q2,o===$&&(A=D);for(D.next=S,l=c=0,s=0;s<U;s++){for(w=C=O=x=d=u=f=m=0,g=$*(P=M[c]),y=$*(T=M[c+1]),v=$*(k=M[c+2]),b=$*(E=M[c+3]),d+=j*P,u+=j*T,f+=j*k,m+=j*E,D=S,o=0;o<$;o++)D.r=P,D.g=T,D.b=k,D.a=E,D=D.next;for(o=1;o<$;o++)a=c+((H<o?H:o)<<2),d+=(D.r=P=M[a])*(I=$-o),u+=(D.g=T=M[a+1])*I,f+=(D.b=k=M[a+2])*I,m+=(D.a=E=M[a+3])*I,w+=P,C+=T,O+=k,x+=E,D=D.next;for(F=S,B=A,i=0;i<R;i++)M[c+3]=E=m*z>>Z,E!==0?(E=255/E,M[c]=(d*z>>Z)*E,M[c+1]=(u*z>>Z)*E,M[c+2]=(f*z>>Z)*E):M[c]=M[c+1]=M[c+2]=0,d-=g,u-=y,f-=v,m-=b,g-=F.r,y-=F.g,v-=F.b,b-=F.a,a=l+((a=i+r+1)<H?a:H)<<2,d+=w+=F.r=M[a],u+=C+=F.g=M[a+1],f+=O+=F.b=M[a+2],m+=x+=F.a=M[a+3],F=F.next,g+=P=B.r,y+=T=B.g,v+=k=B.b,b+=E=B.a,w-=P,C-=T,O-=k,x-=E,B=B.next,c+=4;l+=R}for(i=0;i<R;i++){for(C=O=x=w=u=f=m=d=0,g=$*(P=M[c=i<<2]),y=$*(T=M[c+1]),v=$*(k=M[c+2]),b=$*(E=M[c+3]),d+=j*P,u+=j*T,f+=j*k,m+=j*E,D=S,o=0;o<$;o++)D.r=P,D.g=T,D.b=k,D.a=E,D=D.next;for(h=R,o=1;o<=r;o++)c=h+i<<2,d+=(D.r=P=M[c])*(I=$-o),u+=(D.g=T=M[c+1])*I,f+=(D.b=k=M[c+2])*I,m+=(D.a=E=M[c+3])*I,w+=P,C+=T,O+=k,x+=E,D=D.next,o<K&&(h+=R);for(c=i,F=S,B=A,s=0;s<U;s++)M[3+(a=c<<2)]=E=m*z>>Z,E>0?(E=255/E,M[a]=(d*z>>Z)*E,M[a+1]=(u*z>>Z)*E,M[a+2]=(f*z>>Z)*E):M[a]=M[a+1]=M[a+2]=0,d-=g,u-=y,f-=v,m-=b,g-=F.r,y-=F.g,v-=F.b,b-=F.a,a=i+((a=s+$)<K?a:K)*R<<2,d+=w+=F.r=M[a],u+=C+=F.g=M[a+1],f+=O+=F.b=M[a+2],m+=x+=F.a=M[a+3],F=F.next,g+=P=B.r,y+=T=B.g,v+=k=B.b,b+=E=B.a,w-=P,C-=T,O-=k,x-=E,B=B.next,c+=R}}(n,e)},Z2.Factory.addGetterSetter(OV.Node,"blurRadius",0,(0,PV.getNumberValidator)(),Z2.Factory.afterSetFilter);var tu={};Object.defineProperty(tu,"__esModule",{value:!0}),tu.Brighten=void 0;const J2=de,kV=Qe,AV=re;tu.Brighten=function(n){var e,t=255*this.brightness(),r=n.data,i=r.length;for(e=0;e<i;e+=4)r[e]+=t,r[e+1]+=t,r[e+2]+=t},J2.Factory.addGetterSetter(kV.Node,"brightness",0,(0,AV.getNumberValidator)(),J2.Factory.afterSetFilter);var nu={};Object.defineProperty(nu,"__esModule",{value:!0}),nu.Contrast=void 0;const e_=de,IV=Qe,MV=re;nu.Contrast=function(n){var e,t=Math.pow((this.contrast()+100)/100,2),r=n.data,i=r.length,s=150,o=150,a=150;for(e=0;e<i;e+=4)s=r[e],o=r[e+1],a=r[e+2],s/=255,s-=.5,s*=t,s+=.5,o/=255,o-=.5,o*=t,o+=.5,a/=255,a-=.5,a*=t,a+=.5,s=(s*=255)<0?0:s>255?255:s,o=(o*=255)<0?0:o>255?255:o,a=(a*=255)<0?0:a>255?255:a,r[e]=s,r[e+1]=o,r[e+2]=a},e_.Factory.addGetterSetter(IV.Node,"contrast",0,(0,MV.getNumberValidator)(),e_.Factory.afterSetFilter);var ru={};Object.defineProperty(ru,"__esModule",{value:!0}),ru.Emboss=void 0;const di=de,hc=Qe,NV=rt,t_=re;ru.Emboss=function(n){var e=10*this.embossStrength(),t=255*this.embossWhiteLevel(),r=this.embossDirection(),i=this.embossBlend(),s=0,o=0,a=n.data,h=n.width,c=n.height,l=4*h,d=c;switch(r){case"top-left":s=-1,o=-1;break;case"top":s=-1,o=0;break;case"top-right":s=-1,o=1;break;case"right":s=0,o=1;break;case"bottom-right":s=1,o=1;break;case"bottom":s=1,o=0;break;case"bottom-left":s=1,o=-1;break;case"left":s=0,o=-1;break;default:NV.Util.error("Unknown emboss direction: "+r)}do{var u=(d-1)*l,f=s;d+f<1&&(f=0),d+f>c&&(f=0);var m=(d-1+f)*h*4,g=h;do{var y=u+4*(g-1),v=o;g+v<1&&(v=0),g+v>h&&(v=0);var b=m+4*(g-1+v),w=a[y]-a[b],C=a[y+1]-a[b+1],O=a[y+2]-a[b+2],x=w,P=x>0?x:-x;if((C>0?C:-C)>P&&(x=C),(O>0?O:-O)>P&&(x=O),x*=e,i){var T=a[y]+x,k=a[y+1]+x,E=a[y+2]+x;a[y]=T>255?255:T<0?0:T,a[y+1]=k>255?255:k<0?0:k,a[y+2]=E>255?255:E<0?0:E}else{var I=t-x;I<0?I=0:I>255&&(I=255),a[y]=a[y+1]=a[y+2]=I}}while(--g)}while(--d)},di.Factory.addGetterSetter(hc.Node,"embossStrength",.5,(0,t_.getNumberValidator)(),di.Factory.afterSetFilter),di.Factory.addGetterSetter(hc.Node,"embossWhiteLevel",.5,(0,t_.getNumberValidator)(),di.Factory.afterSetFilter),di.Factory.addGetterSetter(hc.Node,"embossDirection","top-left",null,di.Factory.afterSetFilter),di.Factory.addGetterSetter(hc.Node,"embossBlend",!1,null,di.Factory.afterSetFilter);var iu={};Object.defineProperty(iu,"__esModule",{value:!0}),iu.Enhance=void 0;const n_=de,DV=Qe,$V=re;function dg(n,e,t,r,i){var s=t-e,o=i-r;return s===0?r+o/2:o===0?r:o*((n-e)/s)+r}iu.Enhance=function(n){var e,t,r,i,s=n.data,o=s.length,a=s[0],h=a,c=s[1],l=c,d=s[2],u=d,f=this.enhance();if(f!==0){for(i=0;i<o;i+=4)(e=s[i+0])<a?a=e:e>h&&(h=e),(t=s[i+1])<c?c=t:t>l&&(l=t),(r=s[i+2])<d?d=r:r>u&&(u=r);var m,g,y,v,b,w,C,O,x;for(h===a&&(h=255,a=0),l===c&&(l=255,c=0),u===d&&(u=255,d=0),f>0?(g=h+f*(255-h),y=a-f*(a-0),b=l+f*(255-l),w=c-f*(c-0),O=u+f*(255-u),x=d-f*(d-0)):(g=h+f*(h-(m=.5*(h+a))),y=a+f*(a-m),b=l+f*(l-(v=.5*(l+c))),w=c+f*(c-v),O=u+f*(u-(C=.5*(u+d))),x=d+f*(d-C)),i=0;i<o;i+=4)s[i+0]=dg(s[i+0],a,h,y,g),s[i+1]=dg(s[i+1],c,l,w,b),s[i+2]=dg(s[i+2],d,u,x,O)}},n_.Factory.addGetterSetter(DV.Node,"enhance",0,(0,$V.getNumberValidator)(),n_.Factory.afterSetFilter);var su={};Object.defineProperty(su,"__esModule",{value:!0}),su.Grayscale=void 0;su.Grayscale=function(n){var e,t,r=n.data,i=r.length;for(e=0;e<i;e+=4)t=.34*r[e]+.5*r[e+1]+.16*r[e+2],r[e]=t,r[e+1]=t,r[e+2]=t};var ou={};Object.defineProperty(ou,"__esModule",{value:!0}),ou.HSL=void 0;const uo=de,ug=Qe,pg=re;uo.Factory.addGetterSetter(ug.Node,"hue",0,(0,pg.getNumberValidator)(),uo.Factory.afterSetFilter),uo.Factory.addGetterSetter(ug.Node,"saturation",0,(0,pg.getNumberValidator)(),uo.Factory.afterSetFilter),uo.Factory.addGetterSetter(ug.Node,"luminance",0,(0,pg.getNumberValidator)(),uo.Factory.afterSetFilter);ou.HSL=function(n){var e,t,r,i,s,o=n.data,a=o.length,h=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,l=127*this.luminance(),d=1*h*Math.cos(c*Math.PI/180),u=1*h*Math.sin(c*Math.PI/180),f=.299+.701*d+.167*u,m=.587-.587*d+.33*u,g=.114-.114*d-.497*u,y=.299-.299*d-.328*u,v=.587+.413*d+.035*u,b=.114-.114*d+.293*u,w=.299-.3*d+1.25*u,C=.587-.586*d-1.05*u,O=.114+.886*d-.2*u;for(e=0;e<a;e+=4)t=o[e+0],r=o[e+1],i=o[e+2],s=o[e+3],o[e+0]=f*t+m*r+g*i+l,o[e+1]=y*t+v*r+b*i+l,o[e+2]=w*t+C*r+O*i+l,o[e+3]=s};var au={};Object.defineProperty(au,"__esModule",{value:!0}),au.HSV=void 0;const po=de,fg=Qe,gg=re;au.HSV=function(n){var e,t,r,i,s,o=n.data,a=o.length,h=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,d=h*c*Math.cos(l*Math.PI/180),u=h*c*Math.sin(l*Math.PI/180),f=.299*h+.701*d+.167*u,m=.587*h-.587*d+.33*u,g=.114*h-.114*d-.497*u,y=.299*h-.299*d-.328*u,v=.587*h+.413*d+.035*u,b=.114*h-.114*d+.293*u,w=.299*h-.3*d+1.25*u,C=.587*h-.586*d-1.05*u,O=.114*h+.886*d-.2*u;for(e=0;e<a;e+=4)t=o[e+0],r=o[e+1],i=o[e+2],s=o[e+3],o[e+0]=f*t+m*r+g*i,o[e+1]=y*t+v*r+b*i,o[e+2]=w*t+C*r+O*i,o[e+3]=s},po.Factory.addGetterSetter(fg.Node,"hue",0,(0,gg.getNumberValidator)(),po.Factory.afterSetFilter),po.Factory.addGetterSetter(fg.Node,"saturation",0,(0,gg.getNumberValidator)(),po.Factory.afterSetFilter),po.Factory.addGetterSetter(fg.Node,"value",0,(0,gg.getNumberValidator)(),po.Factory.afterSetFilter);var lu={};Object.defineProperty(lu,"__esModule",{value:!0}),lu.Invert=void 0;lu.Invert=function(n){var e,t=n.data,r=t.length;for(e=0;e<r;e+=4)t[e]=255-t[e],t[e+1]=255-t[e+1],t[e+2]=255-t[e+2]};var hu={};Object.defineProperty(hu,"__esModule",{value:!0}),hu.Kaleidoscope=void 0;const cc=de,r_=Qe,i_=rt,s_=re;hu.Kaleidoscope=function(n){var e,t,r,i,s,o,a,h,c,l=n.width,d=n.height,u=Math.round(this.kaleidoscopePower()),f=Math.round(this.kaleidoscopeAngle()),m=Math.floor(l*(f%360)/360);if(!(u<1)){var g=i_.Util.createCanvasElement();g.width=l,g.height=d;var y=g.getContext("2d").getImageData(0,0,l,d);i_.Util.releaseCanvas(g),function(x,P,T){var k,E,I,M,R=x.data,U=P.data,V=x.width,H=x.height,K=T.polarCenterX||V/2,$=T.polarCenterY||H/2,j=0,S=0,A=0,D=0,F=Math.sqrt(K*K+$*$);E=V-K,I=H-$,F=(M=Math.sqrt(E*E+I*I))>F?M:F;var B,z,Z,q,se=H,J=V,xe=360/J*Math.PI/180;for(z=0;z<J;z+=1)for(Z=Math.sin(z*xe),q=Math.cos(z*xe),B=0;B<se;B+=1)E=Math.floor(K+F*B/se*q),j=R[0+(k=4*((I=Math.floor($+F*B/se*Z))*V+E))],S=R[k+1],A=R[k+2],D=R[k+3],U[0+(k=4*(z+B*V))]=j,U[k+1]=S,U[k+2]=A,U[k+3]=D}(n,y,{polarCenterX:l/2,polarCenterY:d/2});for(var v=l/Math.pow(2,u);v<=8;)v*=2,u-=1;var b=v=Math.ceil(v),w=0,C=b,O=1;for(m+v>l&&(w=b,C=0,O=-1),t=0;t<d;t+=1)for(e=w;e!==C;e+=O)h=4*(l*t+Math.round(e+m)%l),i=y.data[h+0],s=y.data[h+1],o=y.data[h+2],a=y.data[h+3],c=4*(l*t+e),y.data[c+0]=i,y.data[c+1]=s,y.data[c+2]=o,y.data[c+3]=a;for(t=0;t<d;t+=1)for(b=Math.floor(v),r=0;r<u;r+=1){for(e=0;e<b+1;e+=1)h=4*(l*t+e),i=y.data[h+0],s=y.data[h+1],o=y.data[h+2],a=y.data[h+3],c=4*(l*t+2*b-e-1),y.data[c+0]=i,y.data[c+1]=s,y.data[c+2]=o,y.data[c+3]=a;b*=2}(function(x,P,T){var k,E,I,M,R,U,V=x.data,H=P.data,K=x.width,$=x.height,j=T.polarCenterX||K/2,S=T.polarCenterY||$/2,A=0,D=0,F=0,B=0,z=Math.sqrt(j*j+S*S);E=K-j,I=$-S,z=(U=Math.sqrt(E*E+I*I))>z?U:z;var Z,q,se,J=$,xe=K;for(E=0;E<K;E+=1)for(I=0;I<$;I+=1)M=E-j,R=I-S,Z=Math.sqrt(M*M+R*R)*J/z,q=(q=(180*Math.atan2(R,M)/Math.PI+360+0)%360)*xe/360,se=Math.floor(q),A=V[0+(k=4*(Math.floor(Z)*K+se))],D=V[k+1],F=V[k+2],B=V[k+3],H[0+(k=4*(I*K+E))]=A,H[k+1]=D,H[k+2]=F,H[k+3]=B})(y,n,{polarRotation:0})}},cc.Factory.addGetterSetter(r_.Node,"kaleidoscopePower",2,(0,s_.getNumberValidator)(),cc.Factory.afterSetFilter),cc.Factory.addGetterSetter(r_.Node,"kaleidoscopeAngle",0,(0,s_.getNumberValidator)(),cc.Factory.afterSetFilter);var cu={};Object.defineProperty(cu,"__esModule",{value:!0}),cu.Mask=void 0;const o_=de,RV=Qe,FV=re;function dc(n,e,t){var r=4*(t*n.width+e),i=[];return i.push(n.data[r++],n.data[r++],n.data[r++],n.data[r++]),i}function el(n,e){return Math.sqrt(Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2)+Math.pow(n[2]-e[2],2))}cu.Mask=function(n){var e=function(t,r){var i=dc(t,0,0),s=dc(t,t.width-1,0),o=dc(t,0,t.height-1),a=dc(t,t.width-1,t.height-1),h=r||10;if(el(i,s)<h&&el(s,a)<h&&el(a,o)<h&&el(o,i)<h){for(var c=function(f){for(var m=[0,0,0],g=0;g<f.length;g++)m[0]+=f[g][0],m[1]+=f[g][1],m[2]+=f[g][2];return m[0]/=f.length,m[1]/=f.length,m[2]/=f.length,m}([s,i,a,o]),l=[],d=0;d<t.width*t.height;d++){var u=el(c,[t.data[4*d],t.data[4*d+1],t.data[4*d+2]]);l[d]=u<h?0:255}return l}}(n,this.threshold());return e&&function(t,r){for(var i=0;i<t.width*t.height;i++)t.data[4*i+3]=r[i]}(n,e=function(t,r,i){for(var s=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],o=Math.round(Math.sqrt(s.length)),a=Math.floor(o/2),h=[],c=0;c<i;c++)for(var l=0;l<r;l++){for(var d=c*r+l,u=0,f=0;f<o;f++)for(var m=0;m<o;m++){var g=c+f-a,y=l+m-a;if(g>=0&&g<i&&y>=0&&y<r){var v=s[f*o+m];u+=t[g*r+y]*v}}h[d]=u}return h}(e=function(t,r,i){for(var s=[1,1,1,1,1,1,1,1,1],o=Math.round(Math.sqrt(s.length)),a=Math.floor(o/2),h=[],c=0;c<i;c++)for(var l=0;l<r;l++){for(var d=c*r+l,u=0,f=0;f<o;f++)for(var m=0;m<o;m++){var g=c+f-a,y=l+m-a;if(g>=0&&g<i&&y>=0&&y<r){var v=s[f*o+m];u+=t[g*r+y]*v}}h[d]=u>=1020?255:0}return h}(e=function(t,r,i){for(var s=[1,1,1,1,0,1,1,1,1],o=Math.round(Math.sqrt(s.length)),a=Math.floor(o/2),h=[],c=0;c<i;c++)for(var l=0;l<r;l++){for(var d=c*r+l,u=0,f=0;f<o;f++)for(var m=0;m<o;m++){var g=c+f-a,y=l+m-a;if(g>=0&&g<i&&y>=0&&y<r){var v=s[f*o+m];u+=t[g*r+y]*v}}h[d]=u===2040?255:0}return h}(e,n.width,n.height),n.width,n.height),n.width,n.height)),n},o_.Factory.addGetterSetter(RV.Node,"threshold",0,(0,FV.getNumberValidator)(),o_.Factory.afterSetFilter);var du={};Object.defineProperty(du,"__esModule",{value:!0}),du.Noise=void 0;const a_=de,LV=Qe,jV=re;du.Noise=function(n){var e,t=255*this.noise(),r=n.data,i=r.length,s=t/2;for(e=0;e<i;e+=4)r[e+0]+=s-2*s*Math.random(),r[e+1]+=s-2*s*Math.random(),r[e+2]+=s-2*s*Math.random()},a_.Factory.addGetterSetter(LV.Node,"noise",.2,(0,jV.getNumberValidator)(),a_.Factory.afterSetFilter);var uu={};Object.defineProperty(uu,"__esModule",{value:!0}),uu.Pixelate=void 0;const l_=de,BV=rt,GV=Qe,zV=re;uu.Pixelate=function(n){var e,t,r,i,s,o,a,h,c,l,d,u,f,m,g=Math.ceil(this.pixelSize()),y=n.width,v=n.height,b=Math.ceil(y/g),w=Math.ceil(v/g),C=n.data;if(g<=0)BV.Util.error("pixelSize value can not be <= 0");else for(u=0;u<b;u+=1)for(f=0;f<w;f+=1){for(i=0,s=0,o=0,a=0,c=(h=u*g)+g,d=(l=f*g)+g,m=0,e=h;e<c;e+=1)if(!(e>=y))for(t=l;t<d;t+=1)t>=v||(i+=C[(r=4*(y*t+e))+0],s+=C[r+1],o+=C[r+2],a+=C[r+3],m+=1);for(i/=m,s/=m,o/=m,a/=m,e=h;e<c;e+=1)if(!(e>=y))for(t=l;t<d;t+=1)t>=v||(C[(r=4*(y*t+e))+0]=i,C[r+1]=s,C[r+2]=o,C[r+3]=a)}},l_.Factory.addGetterSetter(GV.Node,"pixelSize",8,(0,zV.getNumberValidator)(),l_.Factory.afterSetFilter);var pu={};Object.defineProperty(pu,"__esModule",{value:!0}),pu.Posterize=void 0;const h_=de,UV=Qe,VV=re;pu.Posterize=function(n){var e,t=Math.round(254*this.levels())+1,r=n.data,i=r.length,s=255/t;for(e=0;e<i;e+=1)r[e]=Math.floor(r[e]/s)*s},h_.Factory.addGetterSetter(UV.Node,"levels",.5,(0,VV.getNumberValidator)(),h_.Factory.afterSetFilter);var fu={};Object.defineProperty(fu,"__esModule",{value:!0}),fu.RGB=void 0;const uc=de,mg=Qe,HV=re;fu.RGB=function(n){var e,t,r=n.data,i=r.length,s=this.red(),o=this.green(),a=this.blue();for(e=0;e<i;e+=4)t=(.34*r[e]+.5*r[e+1]+.16*r[e+2])/255,r[e]=t*s,r[e+1]=t*o,r[e+2]=t*a,r[e+3]=r[e+3]},uc.Factory.addGetterSetter(mg.Node,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),uc.Factory.addGetterSetter(mg.Node,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),uc.Factory.addGetterSetter(mg.Node,"blue",0,HV.RGBComponent,uc.Factory.afterSetFilter);var gu={};Object.defineProperty(gu,"__esModule",{value:!0}),gu.RGBA=void 0;const tl=de,pc=Qe,KV=re;gu.RGBA=function(n){var e,t,r=n.data,i=r.length,s=this.red(),o=this.green(),a=this.blue(),h=this.alpha();for(e=0;e<i;e+=4)t=1-h,r[e]=s*h+r[e]*t,r[e+1]=o*h+r[e+1]*t,r[e+2]=a*h+r[e+2]*t},tl.Factory.addGetterSetter(pc.Node,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),tl.Factory.addGetterSetter(pc.Node,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),tl.Factory.addGetterSetter(pc.Node,"blue",0,KV.RGBComponent,tl.Factory.afterSetFilter),tl.Factory.addGetterSetter(pc.Node,"alpha",1,function(n){return this._filterUpToDate=!1,n>1?1:n<0?0:n});var mu={};Object.defineProperty(mu,"__esModule",{value:!0}),mu.Sepia=void 0;mu.Sepia=function(n){var e,t,r,i,s=n.data,o=s.length;for(e=0;e<o;e+=4)t=s[e+0],r=s[e+1],i=s[e+2],s[e+0]=Math.min(255,.393*t+.769*r+.189*i),s[e+1]=Math.min(255,.349*t+.686*r+.168*i),s[e+2]=Math.min(255,.272*t+.534*r+.131*i)};var vu={};Object.defineProperty(vu,"__esModule",{value:!0}),vu.Solarize=void 0;vu.Solarize=function(n){var e=n.data,t=n.width,r=4*t,i=n.height;do{var s=(i-1)*r,o=t;do{var a=s+4*(o-1),h=e[a],c=e[a+1],l=e[a+2];h>127&&(h=255-h),c>127&&(c=255-c),l>127&&(l=255-l),e[a]=h,e[a+1]=c,e[a+2]=l}while(--o)}while(--i)};var yu={};Object.defineProperty(yu,"__esModule",{value:!0}),yu.Threshold=void 0;const c_=de,WV=Qe,XV=re;yu.Threshold=function(n){var e,t=255*this.threshold(),r=n.data,i=r.length;for(e=0;e<i;e+=1)r[e]=r[e]<t?0:255},c_.Factory.addGetterSetter(WV.Node,"threshold",.5,(0,XV.getNumberValidator)(),c_.Factory.afterSetFilter),Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.Konva=void 0;const d_=b3,YV=zd,qV=Ud,ZV=Vd,QV=Hd,JV=Kd,u_=Ko,eH=Kl,tH=ha,nH=Wl,rH=Wd,iH=Xd,sH=Yd,oH=qd,aH=ks,lH=Zd,hH=Qd,cH=Jd,dH=eu,uH=tu,pH=nu,fH=ru,gH=iu,mH=su,vH=ou,yH=au,bH=lu,_H=hu,wH=cu,SH=du,CH=uu,xH=pu,OH=fu,PH=gu,EH=mu,TH=vu,kH=yu;Ld.Konva=d_.Konva.Util._assign(d_.Konva,{Arc:YV.Arc,Arrow:qV.Arrow,Circle:ZV.Circle,Ellipse:QV.Ellipse,Image:JV.Image,Label:u_.Label,Tag:u_.Tag,Line:eH.Line,Path:tH.Path,Rect:nH.Rect,RegularPolygon:rH.RegularPolygon,Ring:iH.Ring,Sprite:sH.Sprite,Star:oH.Star,Text:aH.Text,TextPath:lH.TextPath,Transformer:hH.Transformer,Wedge:cH.Wedge,Filters:{Blur:dH.Blur,Brighten:uH.Brighten,Contrast:pH.Contrast,Emboss:fH.Emboss,Enhance:gH.Enhance,Grayscale:mH.Grayscale,HSL:vH.HSL,HSV:yH.HSV,Invert:bH.Invert,Kaleidoscope:_H.Kaleidoscope,Mask:wH.Mask,Noise:SH.Noise,Pixelate:CH.Pixelate,Posterize:xH.Posterize,RGB:OH.RGB,RGBA:PH.RGBA,Sepia:EH.Sepia,Solarize:TH.Solarize,Threshold:kH.Threshold}});var AH=uU(Object.freeze({__proto__:null,default:{}})),IH=cy.exports;Object.defineProperty(IH,"__esModule",{value:!0});const vg=Ld,p_=AH,a0=p_.default||p_;Fd.DOMMatrix=a0.DOMMatrix;Fd.document===void 0&&(vg.Konva.Util.createCanvasElement=()=>{const n=a0.createCanvas(300,300);return n.style||(n.style={}),n},vg.Konva.Util.createImageElement=()=>new a0.Image),cy.exports=vg.Konva;var ye=y3(cy.exports),l0=function(n,e){return l0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},l0(n,e)};function Ne(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=n}l0(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ne=function(){return ne=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},ne.apply(this,arguments)};function Gs(n,e,t,r){return new(t||(t=Promise))(function(i,s){function o(c){try{h(r.next(c))}catch(l){s(l)}}function a(c){try{h(r.throw(c))}catch(l){s(l)}}function h(c){var l;c.done?i(c.value):(l=c.value,l instanceof t?l:new t(function(d){d(l)})).then(o,a)}h((r=r.apply(n,e||[])).next())})}function zs(n,e){var t,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(h){return function(c){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(o=0)),o;)try{if(t=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||l[0]!==6&&l[0]!==2)){o=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){o.label=l[1];break}if(l[0]===6&&o.label<i[1]){o.label=i[1],i=l;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(l);break}i[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(n,o)}catch(d){l=[6,d],r=0}finally{t=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([h,c])}}}function Ot(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r,i,s=t.call(n),o=[];try{for(;(e===void 0||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(t=s.return)&&t.call(s)}finally{if(i)throw i.error}}return o}function Ie(n,e,t){if(arguments.length===2)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))}var MH=function(n){return function(e){return!!e&&typeof e=="object"}(n)&&!function(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||function(r){return r.$$typeof===NH}(e)}(n)},NH=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.element"):60103;function Xl(n,e){return e.clone!==!1&&e.isMergeableObject(n)?ca((t=n,Array.isArray(t)?[]:{}),n,e):n;var t}function DH(n,e,t){return n.concat(e).map(function(r){return Xl(r,t)})}function f_(n){return Object.keys(n).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}(n))}function g_(n,e){try{return e in n}catch{return!1}}function $H(n,e,t){var r={};return t.isMergeableObject(n)&&f_(n).forEach(function(i){r[i]=Xl(n[i],t)}),f_(e).forEach(function(i){(function(s,o){return g_(s,o)&&!(Object.hasOwnProperty.call(s,o)&&Object.propertyIsEnumerable.call(s,o))})(n,i)||(g_(n,i)&&t.isMergeableObject(e[i])?r[i]=function(s,o){if(!o.customMerge)return ca;var a=o.customMerge(s);return typeof a=="function"?a:ca}(i,t)(n[i],e[i],t):r[i]=Xl(e[i],t))}),r}function ca(n,e,t){(t=t||{}).arrayMerge=t.arrayMerge||DH,t.isMergeableObject=t.isMergeableObject||MH,t.cloneUnlessOtherwiseSpecified=Xl;var r=Array.isArray(e);return r===Array.isArray(n)?r?t.arrayMerge(n,e,t):$H(n,e,t):Xl(e,t)}ca.all=function(n,e){if(!Array.isArray(n))throw new Error("first argument should be an array");return n.reduce(function(t,r){return ca(t,r,e)},{})};var RH=y3(ca),Wc={borderDash:[15,10],borderStroke:"#fff",borderStrokeWidth:3,anchorSize:15,anchorFill:"#fff",anchorStroke:"#fff",anchorStrokeWidth:1,anchorCornerRadius:30},D3={disableCanvasContextMenu:!0,containerClassName:"pikaso",transformer:Wc,snapToGrid:null,cropper:{transformer:Wc,circular:!1,fixed:!1,keepRatio:!0,aspectRatio:1,minWidth:100,minHeight:100,marginRatio:1.1,overlay:{color:"#262626",opacity:.5},guides:{show:!0,count:3,color:"#fff",width:1,dash:[15,10]}},drawing:{autoSelect:!1,keyboard:{cancelOnEscape:!0}},selection:{interactive:!0,keyboard:{enabled:!0,movingSpaces:5,map:{delete:["Backspace","Delete"],moveLeft:["ArrowLeft"],moveRight:["ArrowRight"],moveUp:["ArrowUp"],moveDown:["ArrowDown"],deselect:["Escape"]}},transformer:ne(ne({},Wc),{borderDash:[0,0]}),zone:{fill:"rgba(105, 105, 105, 0.7)",stroke:"#dbdbdb"}},history:{keyboard:{enabled:!0}},measurement:null};function Xi(n,e){var t=n.getClientRect(),r=t.x+t.width/2,i=t.y+t.height/2;n.rotation(e);var s=n.getClientRect(),o=r-(s.x+s.width/2),a=i-(s.y+s.height/2);n.setAttrs({x:n.x()+o,y:n.y()+a})}var Xe,$3=function(){function n(e){this.board=e}return n.prototype.apply=function(e,t){var r=this;this.board.history.create(this.board.layer,e.map(function(i){return i.node}),{undo:function(i){return r.clearCache(i)},redo:function(i){return r.addCache(i)}}),e.forEach(function(i){i.node.cache(),(Array.isArray(t)?t:[t]).forEach(function(s){"options"in s&&i.node.setAttrs(s.options);var o=i.node.filters()||[],a=r.getFilterFunction(s);o.includes(a)===!1&&i.node.filters(Ie(Ie([],Ot(o),!1),[a],!1))})}),this.board.events.emit("filter:add",{shapes:e,data:{filters:t}})},n.prototype.remove=function(e,t){var r=this;this.board.history.create(this.board.layer,e.map(function(i){return i.node}),{undo:function(i){return r.addCache(i)},redo:function(i){return r.clearCache(i)}}),e.forEach(function(i){if(i.node.filters()){var s=Array.isArray(t)?t.map(r.getFilterFunction):[r.getFilterFunction(t)],o=i.node.filters().filter(function(a){return!s.includes(a)});o.length===0&&i.node.clearCache(),i.node.filters(o)}}),this.board.events.emit("filter:remove",{shapes:e,data:{filters:t}})},n.prototype.addCache=function(e){e.forEach(function(t){return t.nodes.forEach(function(r){var i;!r.isCached()&&(!((i=r.filters())===null||i===void 0)&&i.length)&&r.cache()})}),this.board.selection.reselect()},n.prototype.clearCache=function(e){e.forEach(function(t){return t.nodes.forEach(function(r){var i;r.isCached()&&!(!((i=r.filters())===null||i===void 0)&&i.length)&&r.clearCache()})}),this.board.selection.reselect()},n.prototype.getFilterFunction=function(e){return"customFn"in e?e.customFn:ye.Filters[e.name]},n}(),FH=function(){function n(e){this.board=e}return n.prototype.horizontal=function(e){var t=(e??Ie(Ie([],Ot(this.board.activeShapes),!1),[this.board.background.image],!1)).filter(function(r){return!r.hasGroup()});this.board.history.create(this.board.layer,t.map(function(r){return r.node})),t.forEach(function(r){var i=r.node,s=i.getClientRect();i.scaleX(-1*i.scaleX());var o=i.getClientRect();i.setAttrs({x:i.x()+(s.x-o.x),y:i.y()+(s.y-o.y)})}),this.board.events.emit("flip:x",{shapes:t})},n.prototype.vertical=function(e){var t=(e??Ie(Ie([],Ot(this.board.activeShapes),!1),[this.board.background.image],!1)).filter(function(r){return!r.hasGroup()});this.board.history.create(this.board.layer,t.map(function(r){return r.node})),t.forEach(function(r){var i=r.node,s=i.getClientRect();i.scaleY(-1*i.scaleY());var o=i.getClientRect();i.setAttrs({x:i.x()+(s.x-o.x),y:i.y()+(s.y-o.y)})}),this.board.events.emit("flip:y",{shapes:t})},n}(),h0="__group__",Gn=function(){function n(e,t,r){r===void 0&&(r={});var i,s,o,a=this;this.deleted=!1,this.selectable=!1,this.filtersList=[],this.board=e,this.node=t,this.flip=new FH(e),this.filter=new $3(e),this.selectable=(o=(i=r.selectable)!==null&&i!==void 0?i:(s=this.board.settings.selection)===null||s===void 0?void 0:s.interactive)===null||o===void 0||o,this.config=ne({transformer:{},internal:!1,history:!0,selectable:!0},r),this.config.history&&this.board.history.create(this.board.layer,[],{undo:function(){return a.delete()},redo:function(){return a.undelete()}}),this.config.internal===!1&&this.board.addShape(this),this.board.events.emit("shape:create",{shapes:[this]}),this.selectable&&this.node.draggable(!0),this.board.layer.add(this.node),this.registerEvents()}return Object.defineProperty(n.prototype,"isActive",{get:function(){return!this.isDeleted&&!this.isInvisible},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDeleted",{get:function(){return this.deleted},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isVisible",{get:function(){return this.node.isVisible()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isInvisible",{get:function(){return this.isVisible===!1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSelectable",{get:function(){return this.selectable},set:function(e){this.selectable=e,this.node.draggable(e),e?this.board.addShape(this):(this.deselect(),this.board.removeShape(this)),this.board.events.emit("shape:selectable",{shapes:[this],data:{selectable:e}})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"group",{get:function(){return this.node.getAttr(h0)},set:function(e){this.group&&e!==this.group&&this.board.groups.detach([this],this.group),e&&e.length>0&&this.board.groups.attach([this],e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this.node.name()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"filters",{get:function(){return this.filtersList},enumerable:!1,configurable:!0}),n.prototype.hasGroup=function(){return!!this.group},n.prototype.flipX=function(){this.flip.horizontal([this])},n.prototype.flipY=function(){this.flip.vertical([this])},n.prototype.select=function(){this.board.selection.add(this)},n.prototype.deselect=function(){this.board.selection.deselect(this)},n.prototype.addFilter=function(e){this.filter.apply([this],e),this.filtersList=Ie(Ie([],Ot(this.getFiltersDiff(e)),!1),Ot(Array.isArray(e)?e:[e]),!1)},n.prototype.removeFilter=function(e){this.filter.remove([this],e),this.filtersList=this.getFiltersDiff(e)},n.prototype.delete=function(){this.deleted||(this.deselect(),this.node.hide(),!this.node.isCached&&this.node.width()&&this.node.height()&&this.node.cache(),this.deleted=!0,this.board.events.emit("shape:delete",{shapes:[this]}))},n.prototype.undelete=function(){this.deleted&&(this.node.show(),this.node.isCached()&&this.node.clearCache(),this.deleted=!1,this.board.events.emit("shape:undelete",{shapes:[this]}))},n.prototype.destroy=function(){var e=this;this.node.destroy();var t=this.board.activeShapes.filter(function(r){return r.node!==e.node});this.board.setShapes(t),this.board.events.emit("shape:destroy",{shapes:[this]})},n.prototype.rotate=function(e){this.node.rotation(e),this.board.events.emit("shape:rotate",{shapes:[this]})},n.prototype.x=function(){return this.node.x()},n.prototype.y=function(){return this.node.y()},n.prototype.width=function(){return this.node.width()},n.prototype.height=function(){return this.node.height()},n.prototype.scale=function(){return this.node.scale()},n.prototype.scaleX=function(){return this.node.scaleX()},n.prototype.scaleY=function(){return this.node.scaleY()},n.prototype.show=function(){return this.node.show()},n.prototype.hide=function(){return this.node.hide()},n.prototype.update=function(e){this.board.history.create(this.board.layer,this.node),this.node.setAttrs(e)},n.prototype.to=function(e){this.board.history.create(this.board.layer,this.node),this.node.to(e)},n.prototype.registerEvents=function(){var e=this;this.node.addEventListener("mouseover",function(){e.selectable&&!e.board.activeDrawing&&(e.board.stage.getContent().style.cursor="move")}),this.node.addEventListener("mouseout",function(){e.board.stage.getContent().style.cursor="inherit"}),this.node.addEventListener("dragstart",function(){(e.selectable===!1||e.board.selection.isDisabled)&&e.node.stopDrag()}),this.node.on("dragend",function(t){return t.currentTarget.setAttrs({originalX:void 0,originalY:void 0})}),this.node.on("transformend",function(t){return t.currentTarget.setAttrs({originalScaleX:void 0,originalScaleY:void 0})})},n.prototype.getFiltersDiff=function(e){var t=Array.isArray(e)?e:[e];return this.filters.filter(function(r){return!t.find(function(i){return"name"in r&&"name"in i?i.name===r.name:"customFn"in r&&"customFn"in i&&r.customFn===i.customFn})})},n}(),LH=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Ne(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"group"},enumerable:!1,configurable:!0}),e.prototype.rotate=function(t){Xi(this.node,t),this.board.events.emit("shape:rotate",{shapes:[this]})},e}(Gn),jH=function(){function n(e){this.groups=[],this.board=e}return Object.defineProperty(n.prototype,"list",{get:function(){return this.groups},enumerable:!1,configurable:!0}),n.prototype.findGroup=function(e){return this.groups.find(function(t){var r=t.container;return r.name===e&&r.isActive})},n.prototype.createGroup=function(e,t,r){var i=this;t===void 0&&(t={}),r===void 0&&(r=!0);var s={container:new LH(this.board,new ye.Group(ne({name:e,draggable:this.isDraggable()},t)),{history:r}),children:[]};return this.groups=Ie(Ie([],Ot(this.groups),!1),[s],!1),r&&this.board.history.create(this.board.layer,[],{undo:function(){return i.destroyGroup(e)},redo:function(){return i.createGroup(e,t,!1)}}),this.board.events.emit("group:create",{data:{groupName:e}}),s},n.prototype.findOrCreateGroup=function(e,t,r){t===void 0&&(t={}),r===void 0&&(r=!0);var i=this.findGroup(e);return i??this.createGroup(e,t,r)},n.prototype.deleteGroup=function(e,t){var r=this;t===void 0&&(t=!0);var i=this.findGroup(e);i&&(i.container.delete(),i.children.forEach(function(s){return s.delete()}),t&&this.board.history.create(this.board.layer,[],{undo:function(){return r.undeleteGroup(e,!1)},redo:function(){return r.deleteGroup(e,!1)}}),this.board.events.emit("group:delete",{data:{groupName:e}}))},n.prototype.undeleteGroup=function(e,t){var r=this;t===void 0&&(t=!0);var i=this.groups.find(function(s){return s.container.name===e});i&&(i.container.undelete(),i.children.forEach(function(s){return s.undelete()}),t&&this.board.history.create(this.board.layer,[],{undo:function(){return r.deleteGroup(e,!1)},redo:function(){return r.undeleteGroup(e,!1)}}),this.board.events.emit("group:undelete",{data:{groupName:e}}))},n.prototype.destroyGroup=function(e){var t=this.findGroup(e);t&&(t.container.destroy(),t.children.forEach(function(r){return r.destroy()}),this.groups=this.groups.filter(function(r){var i=r.container;return t.container.name!==i.name}),this.board.events.emit("group:destroy",{data:{groupName:e}}))},n.prototype.splitGroup=function(e,t){var r=this;t===void 0&&(t=!0);var i=this.findGroup(e);i&&!i.container.node.isCached()&&(this.removeFromGroup(i.children,e,!1),i.container.delete(),this.groups=this.groups.filter(function(s){var o=s.container;return i.container.name!==o.name}),t&&this.board.history.create(this.board.layer,[],{undo:function(){return r.addToGroup(i.children,e,!1)},redo:function(){return r.splitGroup(e,!1)}}),this.board.events.emit("group:ungroup",{data:{groupName:e}}))},n.prototype.addToGroup=function(e,t,r){var i=this;r===void 0&&(r=!0);var s=this.findOrCreateGroup(t,{},r);return e.forEach(function(o){s.children.includes(o)||(i.groups=i.groups.map(function(a){var h=a.container,c=a.children;return h.name===t?{container:h,children:Ie(Ie([],Ot(c),!1),[o],!1)}:{container:h,children:c}}),s.container.node.add(o.node),o.node.draggable(!1),o.node.setAttr(h0,t))}),r&&this.board.history.create(this.board.layer,[],{undo:function(){i.removeFromGroup(e,t,!1),i.deleteEmpty(t,!1)},redo:function(){return i.addToGroup(e,t,!1)}}),this.board.events.emit("group:attach",{shapes:e,data:{groupName:t}}),s},n.prototype.removeFromGroup=function(e,t,r){var i=this;r===void 0&&(r=!0);var s=this.findGroup(t);s&&(e.forEach(function(o){var a;if(s.children.includes(o)!==!1){i.groups=i.groups.map(function(u){var f=u.container,m=u.children;return f.name===t?{container:f,children:m.filter(function(g){return o.node!==g.node})}:{container:f,children:m}});var h=o.node.getAbsolutePosition(),c=o.node.getAbsoluteScale(),l=o.node.getAbsoluteRotation();o.node.moveTo(s.container.node.parent),o.node.x(h.x),o.node.y(h.y),o.node.scale({x:c.x,y:c.y}),o.node.rotation(l),o.node.draggable(i.isDraggable());var d=s.container.node;d.children=(a=d.children)===null||a===void 0?void 0:a.filter(function(u){return u!==o.node}),o.node.setAttr(h0,null)}}),r&&this.board.history.create(this.board.layer,[],{undo:function(){return i.addToGroup(e,t,!1)},redo:function(){i.removeFromGroup(e,t,!1),i.deleteEmpty(t,!1)}}),this.board.events.emit("group:detach",{shapes:e,data:{groupName:t}}))},n.prototype.isDraggable=function(){var e,t;return(t=(e=this.board.settings.selection)===null||e===void 0?void 0:e.interactive)===null||t===void 0||t},n.prototype.deleteEmpty=function(e,t){var r,i;t===void 0&&(t=!0),((i=(r=this.findGroup(e))===null||r===void 0?void 0:r.children)===null||i===void 0?void 0:i.length)===0&&this.deleteGroup(e,t)},n}(),BH=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Ne(e,n),e.prototype.create=function(t,r){return r===void 0&&(r={}),this.createGroup(t,r)},e.prototype.find=function(t){return this.findGroup(t)},e.prototype.findOrCreate=function(t,r){return r===void 0&&(r={}),this.findOrCreateGroup(t,r)},e.prototype.delete=function(t){this.deleteGroup(t)},e.prototype.undelete=function(t){this.undeleteGroup(t)},e.prototype.destroy=function(t){this.destroyGroup(t)},e.prototype.ungroup=function(t){this.splitGroup(t)},e.prototype.attach=function(t,r){return this.addToGroup(t,r)},e.prototype.detach=function(t,r){this.removeFromGroup(t,r)},e}(jH),R3=function(){function n(e,t){var r,i;t===void 0&&(t=!1),this.board=e,this.node=new ye.Label,this.backgroundNode=new ye.Tag((r=this.board.settings.measurement)===null||r===void 0?void 0:r.background),this.textNode=new ye.Text(ne({text:" "},(i=this.board.settings.measurement)===null||i===void 0?void 0:i.text)),this.node.add(this.backgroundNode,this.textNode),t===!1&&this.hide(),this.board.layer.add(this.node)}return Object.defineProperty(n.prototype,"position",{set:function(e){this.node.setAttrs({x:e.x,y:e.y}),this.node.moveToTop()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"text",{set:function(e){this.textNode.setAttr("text",e)},enumerable:!1,configurable:!0}),n.prototype.show=function(){this.node.isVisible()||(this.node.clearCache(),this.node.show())},n.prototype.hide=function(){this.node.isVisible()!==!1&&(this.node.hide(),this.node.cache())},n.prototype.measure=function(e,t){var r,i,s,o;if(e&&this.board.settings.measurement){var a=Math.max((r=this.board.settings.measurement.margin)!==null&&r!==void 0?r:0,(s=(i=this.board.settings.transformer)===null||i===void 0?void 0:i.anchorSize)!==null&&s!==void 0?s:0,(o=Wc.anchorSize)!==null&&o!==void 0?o:0),h=t??e.getClientRect();this.text="".concat(h.width.toFixed(0)," × ").concat(h.height.toFixed(0));var c=h.x+h.width/2-this.node.width()/2,l=h.y+h.height+a;l+this.node.height()>this.board.getDimensions().height&&(l=h.y+e.height()-2*this.node.height()-a),this.position={x:c,y:l},this.node.isVisible()===!1&&this.show()}},n}();function GH(n){n===void 0&&(n="");var e=String(n);return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/&nbsp;/gi," ")).replace(/&amp;/gi,"&")).replace(/<br>/gi,`
`)).replace(/<br\/>/gi,`
`)).replace(/<div>/gi,`
`)).replace(/<p>/gi,`
`)).replace(/<(.*?)>/g,"")).split(`
`).map(function(t){return t===void 0&&(t=""),t.trim()}).join(`
`)).replace(/\n\n+/g,`

`)).replace(/[ ]+/g," ")).trim()}function qs(){return typeof window<"u"&&window.document!==void 0}function cl(){var n;return!qs()&&typeof process<"u"&&!!(!((n=process.versions)===null||n===void 0)&&n.node)}(function(n){n.Svg="Svg",n.Text="Text",n.Pencil="Pencil",n.Line="Line",n.Arrow="Arrow",n.Circle="Circle",n.Rect="Rect",n.Ellipse="Ellipse",n.Polygon="Polygon",n.Triangle="Triangle"})(Xe||(Xe={}));var zH=function(n){function e(t,r,i){i===void 0&&(i={});var s=n.call(this,t,r,i)||this;return s.isEditingEnabled=!1,s.config=i,r.on("transform",s.transform.bind(s)),r.on("dblclick",s.inlineEdit.bind(s)),s}return Ne(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"label"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEditing",{get:function(){return this.isEditingEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textNode",{get:function(){return this.node.getText()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagNode",{get:function(){return this.node.getTag()},enumerable:!1,configurable:!0}),e.prototype.rotate=function(t){Xi(this.node,t),this.board.events.emit("shape:rotate",{shapes:[this]})},e.prototype.updateTag=function(t){this.board.history.create(this.board.layer,this.tagNode),this.tagNode.setAttrs(t)},e.prototype.updateText=function(t){this.board.history.create(this.board.layer,this.textNode),this.textNode.setAttrs(t),this.updateTransformer()},e.prototype.transform=function(){this.config.keepScale!==!1&&this.board.selection.transformer.getActiveAnchor()!=="rotater"&&(this.textNode.setAttrs({width:this.node.width()*this.node.scaleX(),scaleX:this.node.scaleY()}),this.node.scaleX(this.textNode.scaleY()),this.tagNode.scaleX(this.node.scaleY()))},e.prototype.inlineEdit=function(t){var r,i,s,o=this;if(!cl()&&!this.node.isCached()){t.cancelBubble=!0,this.isEditingEnabled=!0,this.board.setActiveDrawing(Xe.Text);var a=t.target.absolutePosition(),h=this.textNode.getAttr("text");this.node.hide(),(r=this.node)===null||r===void 0||r.draggable(!1),this.board.selection.deselectAll();var c=document.createElement("span");(s=(i=this.board.container)===null||i===void 0?void 0:i.getElementsByClassName(this.board.settings.containerClassName)[0])===null||s===void 0||s.append(c),qs()&&this.setInputFocus(c),c.setAttribute("contenteditable",""),c.setAttribute("role","textbox"),c.innerText=this.textNode.getAttr("text"),Object.assign(c.style,{position:"absolute",display:"inline-block",left:"".concat(a.x-this.textNode.padding(),"px"),top:"".concat(a.y-this.textNode.padding(),"px"),width:"".concat(this.textNode.width()*this.node.scaleX(),"px"),minWidth:"".concat(2*this.textNode.padding(),"px"),maxWidth:"".concat(this.textNode.width()*this.node.scaleX(),"px"),minHeight:"".concat(this.textNode.height()*this.node.scaleY(),"px"),fontSize:"".concat(this.textNode.fontSize()*this.node.scaleY(),"px"),border:"none",padding:"".concat(this.textNode.padding(),"px"),margin:"".concat(this.textNode.padding(),"px"),overflow:"hidden",background:this.tagNode.fill(),borderRadius:"".concat(this.tagNode.cornerRadius(),"px"),outline:"none",resize:"none",lineHeight:this.textNode.lineHeight(),fontFamily:this.textNode.fontFamily(),transformOrigin:"left top",textAlign:this.textNode.align(),color:this.textNode.fill(),transform:"".concat(c.style.transform," rotateZ(").concat(this.node.rotation(),"deg)")}),c.addEventListener("blur",function(l){var d,u;o.isEditingEnabled=!1,(d=c.parentNode)===null||d===void 0||d.removeChild(c),o.board.setActiveDrawing(null);var f=GH(l.target.innerHTML);f!==h&&o.board.history.create(o.board.layer,[],{undo:function(){return o.changeText(h)},redo:function(){return o.changeText(f)}}),o.textNode.setText(f),o.node.show(),o.node.setAttrs({draggable:(u=o.board.settings.selection)===null||u===void 0?void 0:u.interactive,width:o.textNode.width()}),o.board.selection.add(o)})}},e.prototype.changeText=function(t){this.textNode.setAttrs({text:t}),this.updateTransformer(),this.board.events.emit("label:update-text",{shapes:[this],data:{text:t}})},e.prototype.updateTransformer=function(){this.board.selection.isVisible&&this.board.selection.transformer.forceUpdate()},e.prototype.setInputFocus=function(t){return Gs(this,void 0,void 0,function(){var r,i;return zs(this,function(s){switch(s.label){case 0:return[4,new Promise(function(o){return setTimeout(o,50)})];case 1:return s.sent(),(r=document.createRange()).selectNodeContents(t),r.collapse(!1),(i=window.getSelection()).removeAllRanges(),i.addRange(r),[2]}})})},e}(Gn),UH=function(){function n(e){this.list=[],this.board=e,this.filter=new $3(e),this.createZone(),this.createTransformer(),this.board.settings.measurement&&(this.dimensionsTag=new R3(this.board)),this.board.stage.on("mousedown touchstart",this.onDragZoneStart.bind(this)),this.board.stage.on("mousemove touchmove",this.onDragZoneMove.bind(this)),this.board.stage.on("mouseup touchend",this.onDragZoneEnd.bind(this)),qs()&&(window.addEventListener("mouseup",this.onWindowMouseUp.bind(this)),window.addEventListener("touchend",this.onWindowMouseUp.bind(this)),window.addEventListener("keydown",this.onKeyDown.bind(this)))}return Object.defineProperty(n.prototype,"shapes",{get:function(){return this.list},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isVisible",{get:function(){return this.list.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDisabled",{get:function(){return!!this.board.activeDrawing||this.board.activeShapes.some(function(e){return e instanceof zH&&e.isEditing})},enumerable:!1,configurable:!0}),n.prototype.getTransformer=function(){return this.transformer},n.prototype.find=function(e){var t=this.board.activeShapes.filter(function(r){return e(r)});this.multi(t)},n.prototype.selectAll=function(){this.multi(this.board.activeShapes)},n.prototype.deselectAll=function(){this.multi([])},n.prototype.reselect=function(){var e=this.list;this.deselectAll(),this.multi(e)},n.prototype.multi=function(e){var t,r,i;this.list=e;var s=ne(ne({visible:!0,centeredScaling:!0,rotationSnaps:[0,45,90,135,180,225,270,315],keepRatio:e.length>1,rotateEnabled:!0,enabledAnchors:["top-left","top-right","bottom-left","bottom-right","top-center","bottom-center","middle-left","middle-right"]},this.board.settings.transformer),(t=this.board.settings.selection)===null||t===void 0?void 0:t.transformer),o=e.reduce(function(a,h){var c,l=h.node.isCached()?[]:(c=h.config.transformer)===null||c===void 0?void 0:c.enabledAnchors;return ne(ne(ne({},a),h.config.transformer),{enabledAnchors:l})},s);this.transformer.setAttrs(o).nodes(e.map(function(a){return a.node})),(r=this.dimensionsTag)===null||r===void 0||r.measure(this.transformer,this.getTransformerRect()),this.transformer.show(),this.transformer.moveToTop(),e.length===0&&(this.transformer.hide(),(i=this.dimensionsTag)===null||i===void 0||i.hide()),this.board.events.emit("selection:change",{shapes:e})},n.prototype.add=function(e){this.list.some(function(t){return t.node===e.node})||this.multi(Ie(Ie([],Ot(this.list),!1),[e],!1))},n.prototype.toggle=function(e){this.list.some(function(t){return t.node===e.node})?this.deselect(e):this.multi(Ie(Ie([],Ot(this.list),!1),[e],!1))},n.prototype.deselect=function(e){this.list=this.list.filter(function(t){return t!==e}),this.multi(this.list)},n.prototype.delete=function(){if(this.list.length!==0){var e=this.list;this.list=[],this.board.stage.getContent().style.cursor="inherit",this.transformer.nodes([]),this.board.history.create(this.board.layer,[],{undo:function(){return e.forEach(function(t){return t.undelete()})},redo:function(){return e.forEach(function(t){return t.delete()})}}),e.forEach(function(t){return t.delete()}),this.board.events.emit("selection:delete",{shapes:e})}},n.prototype.moveX=function(e){return Gs(this,void 0,void 0,function(){var t=this;return zs(this,function(r){return[2,new Promise(function(i){t.board.history.create(t.board.layer,t.transformer.nodes()),t.list.forEach(function(s){s.node.to({x:s.node.x()+e,onFinish:i})}),t.board.events.emit("selection:move",{shapes:t.list,data:{axis:"x",value:e}})})]})})},n.prototype.moveY=function(e){return Gs(this,void 0,void 0,function(){var t=this;return zs(this,function(r){return[2,new Promise(function(i){t.board.history.create(t.board.layer,t.transformer.nodes()),t.list.forEach(function(s){s.node.to({y:s.node.y()+e,onFinish:i})}),t.board.events.emit("selection:move",{shapes:t.list,data:{axis:"y",value:e}})})]})})},n.prototype.addFilter=function(e){this.filter.apply(this.list,e),this.reselect()},n.prototype.removeFilter=function(e){this.filter.remove(this.list,e),this.reselect()},n.prototype.group=function(e){this.board.groups.attach(this.list,e)},n.prototype.createZone=function(){var e;this.zone=new ye.Rect(ne({visible:!1},(e=this.board.settings.selection)===null||e===void 0?void 0:e.zone)),this.board.layer.add(this.zone)},n.prototype.createTransformer=function(){var e=this;this.transformer=new ye.Transformer,this.transformer.on("dragstart",function(){var t;e.transformer.hide(),(t=e.dimensionsTag)===null||t===void 0||t.hide(),e.board.history.create(e.board.layer,e.list.map(function(r){return r.node})),e.board.events.emit("selection:dragstart",{shapes:e.list})}),this.transformer.on("dragmove",function(){e.board.events.emit("selection:dragmove",{shapes:e.list})}),this.transformer.on("dragend",function(){var t;e.transformer.show(),(t=e.dimensionsTag)===null||t===void 0||t.measure(e.transformer,e.getTransformerRect()),e.board.events.emit("selection:dragend",{shapes:e.list})}),this.transformer.on("transformstart",function(){e.board.history.create(e.board.layer,e.list.map(function(t){return t.node}),{execute:function(){return e.board.selection.transformer.forceUpdate()}}),e.board.events.emit("selection:transformstart",{shapes:e.list})}),this.transformer.on("transform",function(){var t;(t=e.dimensionsTag)===null||t===void 0||t.measure(e.transformer,e.getTransformerRect()),e.board.events.emit("selection:transform",{shapes:e.list})}),this.transformer.on("transformend",function(){e.board.events.emit("selection:transformend",{shapes:e.list})}),this.board.layer.add(this.transformer)},n.prototype.onDragZoneStart=function(e){var t,r=this;if(((t=this.board.settings.selection)===null||t===void 0?void 0:t.interactive)!==!1&&!this.isDisabled){var i=this.board.activeShapes.find(function(a){return a.node===r.getParentNode(e.target)});if(i&&!this.list.includes(i)){var s=e.evt.shiftKey===!0,o=e.evt.ctrlKey===!0;return s||o?s&&!o?this.add(i):o&&!s&&this.toggle(i):this.multi([i]),void this.board.setActiveDrawing(null)}this.board.activeDrawing===null&&this.isBackgroundNode(e.target)!==!1&&(this.startPointerPosition=this.board.stage.getPointerPosition(),this.zone.setAttrs({width:0,height:0,visible:!0}).moveToTop())}},n.prototype.onDragZoneMove=function(){if(this.zone.visible()){var e=this.board.stage.getPointerPosition(),t=e.x,r=e.y;this.zone.setAttrs({x:Math.min(this.startPointerPosition.x,t),y:Math.min(this.startPointerPosition.y,r),width:Math.abs(t-this.startPointerPosition.x),height:Math.abs(r-this.startPointerPosition.y)})}},n.prototype.onDragZoneEnd=function(){var e=this;if(this.zone.visible()){setTimeout(function(){e.zone.visible(!1)},10);var t=this.zone.getClientRect(),r=this.board.activeShapes.filter(function(i){return ye.Util.haveIntersection(t,i.node.getClientRect())});this.multi(r)}},n.prototype.onWindowMouseUp=function(e){e.target instanceof HTMLCanvasElement||this.onDragZoneEnd()},n.prototype.onKeyDown=function(e){var t,r,i,s,o,a,h,c,l,d,u,f,m,g,y=(t=this.board.settings.selection)===null||t===void 0?void 0:t.keyboard;if((y==null?void 0:y.enabled)!==!1){var v=this.transformer.nodes(),b=(r=y==null?void 0:y.movingSpaces)!==null&&r!==void 0?r:5;this.transformer.getAttr("visible")!==!1&&v.length!==0&&(!((s=(i=y==null?void 0:y.map)===null||i===void 0?void 0:i.delete)===null||s===void 0)&&s.includes(e.key)&&this.delete(),!((a=(o=y==null?void 0:y.map)===null||o===void 0?void 0:o.moveLeft)===null||a===void 0)&&a.includes(e.key)&&this.moveX(-b),!((c=(h=y==null?void 0:y.map)===null||h===void 0?void 0:h.moveRight)===null||c===void 0)&&c.includes(e.key)&&this.moveX(b),!((d=(l=y==null?void 0:y.map)===null||l===void 0?void 0:l.moveUp)===null||d===void 0)&&d.includes(e.key)&&this.moveY(-b),!((f=(u=y==null?void 0:y.map)===null||u===void 0?void 0:u.moveDown)===null||f===void 0)&&f.includes(e.key)&&this.moveY(b),!((g=(m=y==null?void 0:y.map)===null||m===void 0?void 0:m.deselect)===null||g===void 0)&&g.includes(e.key)&&this.deselectAll())}},n.prototype.getParentNode=function(e){for(var t,r=e;r.parent&&((t=r.parent)===null||t===void 0?void 0:t.getType())!=="Layer";)r=r.parent;return r},n.prototype.isBackgroundNode=function(e){return e===this.board.stage||e===this.board.background.overlay.node},n.prototype.getTransformerRect=function(){return{x:this.transformer.x(),y:this.transformer.y(),width:this.transformer.width(),height:this.transformer.height()}},n}();function VH(n){return Gs(this,void 0,void 0,function(){return zs(this,function(e){return[2,new Promise(function(t,r){var i=new FileReader;i.addEventListener("load",function(){t(i.result)}),i.addEventListener("error",function(s){r(s)}),i.readAsDataURL(n)})]})})}function F3(n){return new Promise(function(e,t){ye.Image.fromURL(n,function(r){r?e(r):t()})})}var HH=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Ne(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"image"},enumerable:!1,configurable:!0}),e.prototype.rotate=function(t){Xi(this.node,t),this.board.events.emit("shape:rotate",{shapes:[this]})},e}(Gn),L3=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Ne(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"rect"},enumerable:!1,configurable:!0}),e.prototype.rotate=function(t){Xi(this.node,t),this.board.events.emit("shape:rotate",{shapes:[this]})},e}(Gn),KH=function(){function n(e){this.board=e;var t=new ye.Image({image:void 0}),r=new ye.Rect;this.image=new HH(e,t,{internal:!0,selectable:!1,history:!1}),this.overlay=new L3(e,r,{internal:!0,selectable:!1,history:!1})}return Object.defineProperty(n.prototype,"nodes",{get:function(){return[this.image.node,this.overlay.node]},enumerable:!1,configurable:!0}),n.prototype.getPosition=function(){return{x:this.image.node.x()||this.overlay.node.x(),y:this.image.node.y()||this.overlay.node.y()}},n.prototype.setImageFromFile=function(e,t){return Gs(this,void 0,void 0,function(){var r;return zs(this,function(i){switch(i.label){case 0:return[4,VH(e)];case 1:return r=i.sent(),this.setImageFromUrl(r,t),[2]}})})},n.prototype.setImageFromUrl=function(e){return Gs(this,arguments,void 0,function(t,r){var i,s,o,a,h,c,l;return r===void 0&&(r={size:"resize"}),zs(this,function(d){switch(d.label){case 0:return this.board.history.create(this.board.layer,[this.board.stage,this.image.node,this.overlay.node],this.board.rescale.bind(this)),[4,F3(t)];case 1:return i=d.sent(),s=i.width(),o=i.height(),a={width:this.board.stage.width()/s,height:this.board.stage.height()/o},r.size==="cover"&&(h=Math.max(a.width,a.height),s*=h,o*=h),r.size==="contain"&&(h=Math.min(a.width,a.height),s*=h,o*=h),r.size==="resize"&&this.board.stage.setAttrs({width:s,height:o}),r.size==="stretch"&&(s=this.board.stage.width(),o=this.board.stage.height()),this.image.node.setAttrs({width:s,height:o,image:i.image(),x:(c=r.x)!==null&&c!==void 0?c:i.x(),y:(l=r.y)!==null&&l!==void 0?l:i.y()}),this.overlay.node.setAttrs({width:s,height:o}),[2]}})})},n.prototype.fill=function(e){this.board.history.create(this.board.layer,this.overlay.node),this.overlay.node.setAttrs({width:this.board.stage.width(),height:this.board.stage.height(),fill:e})},n}();(function(){function n(e,t,r){var i,s,o,a,h,c,l;this.activeDrawing=null,this.shapesList=[],this.settings=e,this.history=r,this.events=t;var d=(o=(i=this.settings.width)!==null&&i!==void 0?i:(s=this.settings.container)===null||s===void 0?void 0:s.clientWidth)!==null&&o!==void 0?o:0,u=(c=(a=this.settings.height)!==null&&a!==void 0?a:(h=this.settings.container)===null||h===void 0?void 0:h.clientHeight)!==null&&c!==void 0?c:0;this.stage=new ye.Stage({width:d,height:u,container:this.settings.container}),this.stage.content&&(this.stage.content.className=this.settings.containerClassName,Object.assign(this.stage.content.style,{position:"relative",top:"50%",left:"50%",transform:"translate(-50%,-50%)"})),qs()&&(this.stage.on("widthChange",this.rescale.bind(this)),this.stage.on("heightChange",this.rescale.bind(this))),this.settings.disableCanvasContextMenu&&((l=this.settings.container)===null||l===void 0||l.addEventListener("contextmenu",function(f){return f.preventDefault()})),this.layer=new ye.Layer,this.stage.add(this.layer),this.background=new KH(this),this.selection=new UH(this),this.groups=new BH(this),this.container=this.settings.container}return Object.defineProperty(n.prototype,"shapes",{get:function(){return this.shapesList},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"activeShapes",{get:function(){return this.shapesList.filter(function(e){return e.isActive})},enumerable:!1,configurable:!0}),n.prototype.getDimensions=function(){return{width:this.background.image.node.width()||this.background.overlay.node.width()||this.stage.width()||this.settings.width,height:this.background.image.node.height()||this.background.overlay.node.height()||this.stage.height()||this.settings.height}},n.prototype.getNodes=function(){return Ie(Ie([],Ot(this.background.nodes),!1),Ot(this.shapesList.map(function(e){return e.node})),!1)},n.prototype.addShape=function(e){this.shapesList.some(function(t){return t.node===e.node})||this.shapesList.push(e)},n.prototype.removeShape=function(e){this.shapesList=this.shapesList.filter(function(t){return t.node!==e.node})},n.prototype.setShapes=function(e){this.shapesList=e},n.prototype.rescale=function(){var e=this.getContainerTransform();e&&this.stage.content.style.transform!==e&&(this.stage.content.style.transform=e,this.events.emit("board:rescale",{data:{transform:e}}))},n.prototype.setActiveDrawing=function(e){e&&(this.selection.transformer.hide(),this.draw()),e!==this.activeDrawing&&this.events.emit("board:change-active-drawing",{data:{type:e}}),this.activeDrawing=e},n.prototype.getContainerTransform=function(){if(this.container){var e=this.getDimensions(),t=this.container.clientWidth<this.container.clientHeight?this.stage.width()/e.width:this.stage.height()/e.height;return t*this.stage.width()>this.container.clientWidth&&(t=this.container.clientWidth/this.stage.width()),t*this.stage.height()>this.container.clientHeight&&(t=this.container.clientHeight/this.stage.height()),"translate(-50%, -50%) scale(".concat(t.toFixed(6),")")}},n.prototype.draw=function(){this.layer.batchDraw()},n.prototype.gc=function(){this.shapesList=this.shapesList.filter(function(e){return!e.isDeleted||(e.node.destroy(),!1)})},n})();function WH(n,e){return{x:n.x*Math.cos(e)+-n.y*Math.sin(e),y:n.x*Math.sin(e)- -n.y*Math.cos(e)}}function XH(n){return Number(n)*Math.PI/180}var j3=function(){function n(e,t){this.board=e,this.options=this.createOptions(t),this.layer=new ye.Layer;var r=new ye.Rect({fill:this.options.overlay.color,opacity:this.options.overlay.opacity,width:this.board.stage.width(),height:this.board.stage.height()});this.overlay=this.createOverlay(),this.cropzone=this.createCropzone(),this.layer.add(r,this.overlay,this.cropzone)}return n.prototype.getCursorEvents=function(){return qs()?[{name:"mouseout",cursor:"default"},{name:"mouseover",cursor:"grab"},{name:"dragmove",cursor:"grabbing"},{name:"dragend",cursor:"default"}]:[]},n.prototype.createCropzone=function(){var e,t,r,i,s,o,a,h=this,c=new ye.Group({x:this.options.x,y:this.options.y}),l={x:0,y:0,fill:"transparent",dash:this.options.transformer.borderDash};return this.options.circular?c.add(new ye.Circle(ne(ne({},l),{radius:this.options.radius,stroke:(t=(e=this.options.circle)===null||e===void 0?void 0:e.borderStroke)!==null&&t!==void 0?t:this.options.transformer.borderStroke,strokeWidth:(i=(r=this.options.circle)===null||r===void 0?void 0:r.borderStrokeWidth)!==null&&i!==void 0?i:this.options.transformer.borderStrokeWidth,dash:(o=(s=this.options.circle)===null||s===void 0?void 0:s.borderDash)!==null&&o!==void 0?o:this.options.transformer.borderDash}))):c.add(new ye.Rect(ne(ne({},l),{width:this.options.width,height:this.options.height,stroke:this.options.fixed?this.options.transformer.borderStroke:void 0,strokeWidth:this.options.fixed?this.options.transformer.borderStrokeWidth:void 0}))),!((a=this.options.guides)===null||a===void 0)&&a.show&&c.add.apply(c,Ie([],Ot(this.createGuideLines()),!1)),this.getCursorEvents().forEach(function(d){var u=d.name,f=d.cursor;c.on(u,function(){h.board.stage.container().style.cursor=f})}),c},n.prototype.createGuideLines=function(){var e,t,r=this.options.guides,i={stroke:r.color,strokeWidth:r.width,dash:r.dash};if(this.options.circular)return[new ye.Line(ne({points:[-this.options.radius,0,this.options.radius,0]},i)),new ye.Line(ne({points:[0,-this.options.radius,0,this.options.radius]},i))];var s=this.options,o=s.width,a=s.height,h=r.count||((t=(e=D3.cropper)===null||e===void 0?void 0:e.guides)===null||t===void 0?void 0:t.count);return Array.from({length:h}).flatMap(function(c,l){var d=o/(h+1),u=d+l*d,f=a/(h+1),m=f+l*f;return[new ye.Line(ne({points:[u,0,u,a]},i)),new ye.Line(ne({points:[0,m,o,m]},i))]})},n.prototype.createOverlay=function(){return new ye.Rect({x:0,y:0,width:this.board.stage.width(),height:this.board.stage.height()})},n.prototype.createOptions=function(e){var t,r=ne(ne(ne({},this.board.settings.cropper),{transformer:ne(ne(ne({},this.board.settings.transformer),(t=this.board.settings.cropper)===null||t===void 0?void 0:t.transformer),e.transformer)}),e);return e.circular?ne(ne({circular:!0},r),this.getCircularCropperOptions(r)):ne(ne({circular:!1},r),this.getRectangularCropperOptions(r))},n.prototype.getCircularCropperOptions=function(e){var t,r,i,s,o=(t=e.transformer)===null||t===void 0?void 0:t.borderStrokeWidth,a=(Math.min(this.board.stage.width(),this.board.stage.height())-2*o)/2,h=(r=e.x)!==null&&r!==void 0?r:-1,c=(i=e.y)!==null&&i!==void 0?i:-1;return{radius:(s=e.radius)!==null&&s!==void 0?s:a/e.marginRatio,x:h>=Math.max(h,o)?h:this.board.stage.width()/2,y:c>=Math.max(c,o)?c:this.board.stage.height()/2}},n.prototype.getRectangularCropperOptions=function(e){var t,r,i,s,o=(t=e.transformer)===null||t===void 0?void 0:t.borderStrokeWidth,a=e.fixed?2*o:2*((r=e.transformer)===null||r===void 0?void 0:r.anchorSize),h=e.aspectRatio||this.board.stage.width()/this.board.stage.height(),c=e.width||(this.board.stage.width()-a)/e.marginRatio,l=e.height||c/h;l>this.board.stage.height()-a&&(c=(l=this.board.stage.height()-a)*h);var d=(i=e.x)!==null&&i!==void 0?i:-1,u=(s=e.y)!==null&&s!==void 0?s:-1;return{aspectRatio:h,width:c,height:l,x:d>=0?Math.max(d,o):(this.board.stage.width()-c)/2,y:u>=0?Math.max(u,o):(this.board.stage.height()-l)/2}},n}(),B3=function(n){function e(t,r){var i=n.call(this,t,r)||this;return i.draggable=i.createDraggableOverlay(),i.layer.add(i.draggable),i.setupCropzone(),i.board.stage.add(i.layer),i}return Ne(e,n),e.prototype.zoom=function(t){this.board.layer.scale({x:t,y:t});var r=this.board.layer.width()*t,i=this.board.layer.height()*t,s=[this.draggable.width()/2,this.draggable.height()/2],o=[r/2,i/2];this.draggable.width(r),this.draggable.height(i);var a=this.getDraggableOverlayBoundRect({x:this.draggable.x()+s[0]-o[0],y:this.draggable.y()+s[1]-o[1]}),h=a.x,c=a.y;this.draggable.x(h),this.draggable.y(c),this.board.layer.x(this.draggable.x()),this.board.layer.y(this.draggable.y()),this.board.draw()},e.prototype.setDraggableOverlayPosition=function(t){var r=t.x,i=t.y,s=this.getDraggableOverlayBoundRect({x:r,y:i}),o=s.x,a=s.y;this.draggable.x(o),this.board.layer.x(o),this.draggable.y(a),this.board.layer.y(a),this.board.draw()},e.prototype.setupCropzone=function(){this.cropzone.draggable(!1)},e.prototype.getDraggableOverlayBoundRect=function(t){var r=this.draggable,i=this.options.circular?2*this.options.radius:this.options.width,s=this.options.circular?2*this.options.radius:this.options.height,o=this.options.circular?this.options.x-this.options.radius:this.options.x,a=this.options.circular?this.options.y-this.options.radius:this.options.y,h=o+i-r.width(),c=a+s-r.height(),l=t.x,d=t.y;return l>=o?l=o:l<=h&&(l=h),d>=a?d=a:d<=c&&(d=c),{x:l,y:d}},e.prototype.createDraggableOverlay=function(){var t=this,r=new ye.Rect({x:0,y:0,width:this.board.stage.width(),height:this.board.stage.height(),fill:"transparent",opacity:0,draggable:!0,dragBoundFunc:function(i){var s=t.getDraggableOverlayBoundRect(i),o=s.x,a=s.y;return t.board.layer.x(o),t.board.layer.y(a),t.board.draw(),{x:o,y:a}}});return this.getCursorEvents().forEach(function(i){var s=i.name,o=i.cursor;r.on(s,function(){t.board.stage.container().style.cursor=o})}),r},e}(j3),YH=function(n){function e(t,r){var i=n.call(this,t,ne(ne({},r),{keepRatio:!0}))||this;return i.setupOverlay(),i}return Ne(e,n),e.prototype.getRect=function(){var t=this.options,r=this.draggable.width()/this.layer.width(),i=this.draggable.height()/this.layer.height();return{x:(t.x-t.radius-this.draggable.x())/r,y:(t.y-t.radius-this.draggable.y())/i,width:2*t.radius/r,height:2*t.radius/i}},e.prototype.setupOverlay=function(){var t=this.options;this.overlay.sceneFunc(function(r,i){r.beginPath(),r.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),r.clip(),r.clearRect(t.x-t.radius,t.y-t.radius,2*t.radius,2*t.radius),r.closePath(),r.fillStrokeShape(i)})},e}(B3),qH=function(n){function e(t,r){var i=n.call(this,t,r)||this;return i.setupOverlay(),i}return Ne(e,n),e.prototype.getRect=function(){var t=this.options,r=this.draggable.width()/this.layer.width(),i=this.draggable.height()/this.layer.height();return{x:(t.x-this.draggable.x())/r,y:(t.y-this.draggable.y())/i,width:t.width/r,height:t.height/i}},e.prototype.setupOverlay=function(){var t=this.options;this.overlay.sceneFunc(function(r,i){r.beginPath(),r.clearRect(t.x,t.y,t.width,t.height),r.closePath(),r.fillStrokeShape(i)})},e}(B3),G3=function(n){function e(t,r){var i=n.call(this,t,r)||this;return i.transformer=i.createTransformer(),i.layer.add(i.transformer),i.setupCropzone(),i.board.stage.add(i.layer),i}return Ne(e,n),e.prototype.setPosition=function(t){var r=t===void 0?{x:this.options.x,y:this.options.y}:t,i=r.x,s=r.y,o=this.getCropzoneBoundRect({x:i,y:s}),a=o.x,h=o.y;this.cropzone.x(a),this.cropzone.y(h),this.layer.batchDraw()},e.prototype.getRect=function(){return{x:this.transformer.x(),y:this.transformer.y(),width:this.transformer.width(),height:this.transformer.height()}},e.prototype.setupCropzone=function(){var t=this;this.cropzone.draggable(!0),this.cropzone.dragBoundFunc(function(r){return t.getCropzoneBoundRect(r)})},e.prototype.getCropzoneBoundRect=function(t){var r=this.options.transformer.borderStrokeWidth,i=(this.options.circular?this.transformer.width()/2:0)+r,s=(this.options.circular?this.transformer.height()/2:0)+r,o=(this.options.circular?this.board.stage.width()-this.transformer.width()/2:this.board.stage.width()-this.transformer.width())-r,a=(this.options.circular?this.board.stage.height()-this.transformer.height()/2:this.board.stage.height()-this.transformer.height())-r;return{x:t.x<=i?Math.max(t.x,i):Math.min(t.x,o),y:t.y<=s?Math.max(t.y,s):Math.min(t.y,a)}},e.prototype.createTransformer=function(){var t=this;return new ye.Transformer(ne(ne({nodes:[this.cropzone],keepRatio:this.options.keepRatio,rotateEnabled:!1},this.options.transformer),{enabledAnchors:Ie(["top-left","top-right","bottom-left","bottom-right"],Ot(this.options.keepRatio?[]:["top-center","bottom-center"]),!1),boundBoxFunc:function(r,i){return Math.ceil(i.x)<-1||Math.ceil(i.y)<-1||i.width<t.options.minWidth||i.height<t.options.minHeight||i.width>=t.board.stage.width()||i.height>=t.board.stage.height()||i.x+i.width>=t.board.stage.width()||i.y+i.height>=t.board.stage.height()?r:i}}))},e}(j3),ZH=function(n){function e(t,r){var i=n.call(this,t,ne(ne({},r),{circular:!0,keepRatio:!0}))||this;return i.setupOverlay(),i}return Ne(e,n),e.prototype.setupOverlay=function(){var t=this;this.overlay.sceneFunc(function(r,i){r.beginPath();var s=t.transformer.width()/2;r.arc(t.cropzone.x(),t.cropzone.y(),s,0,2*Math.PI,!1),r.clip(),r.clearRect(t.cropzone.x()-s,t.cropzone.y()-s,2*s,2*s),r.closePath(),r.fillStrokeShape(i)})},e}(G3),QH=function(n){function e(t,r){var i=n.call(this,t,r)||this;return i.setupOverlay(),i}return Ne(e,n),e.prototype.setupOverlay=function(){var t=this;this.overlay.sceneFunc(function(r,i){r.beginPath(),r.clearRect(t.cropzone.x(),t.cropzone.y(),t.transformer.width(),t.transformer.height()),r.closePath(),r.fillStrokeShape(i)})},e}(G3);(function(){function n(e){this.board=e}return Object.defineProperty(n.prototype,"isActive",{get:function(){return this.active},enumerable:!1,configurable:!0}),n.prototype.getInstance=function(){return this.instance},n.prototype.start=function(e){if(!this.active){var t=RH(D3.cropper,e);this.active=!0,this.board.selection.deselectAll();var r=t.circular,i=t.fixed&&this.board.stage.rotation()===0;!i&&r&&(this.instance=new ZH(this.board,ne(ne({},t),{fixed:!1,circular:!0}))),i||r||(this.instance=new QH(this.board,ne(ne({},t),{fixed:!1,circular:!1}))),i&&r&&(this.instance=new YH(this.board,ne(ne({},t),{fixed:!0,circular:!0}))),i&&!r&&(this.instance=new qH(this.board,ne(ne({},t),{fixed:!0,circular:!1})))}},n.prototype.stop=function(){this.active&&(this.active=!1,this.instance.layer.remove(),this.board.layer.setAttrs({x:0,y:0,scale:{x:1,y:1}}),qs()&&(this.board.stage.container().style.cursor="default"))},n.prototype.zoom=function(e){if(!this.instance.options.fixed)return!1;this.instance.zoom(e)},n.prototype.setPosition=function(e){this.instance.options.fixed?this.instance.setDraggableOverlayPosition(e):this.instance.setPosition(e)},n.prototype.getRect=function(){return this.isActive?this.instance.getRect():null},n.prototype.crop=function(){return Gs(this,arguments,void 0,function(e){var t,r,i,s,o;return e===void 0&&(e={}),zs(this,function(a){switch(a.label){case 0:return(t=e.rect||this.getRect())?(this.board.history.create(this.board.stage,Ie([this.board.stage],Ot(this.board.layer.children||[]),!1)),r=this.board.selection.isVisible,this.stop(),i=this.board.stage,s=Math.min(i.width()/t.width,i.height()/t.height),i.setAttrs({scale:{x:s*i.scaleX(),y:s*i.scaleY()},width:t.width*s,height:t.height*s,x:-t.x*s+i.x()*s,y:-t.y*s+i.y()*s,rotation:i.rotation()}),this.board.background.overlay.hide(),r&&this.board.selection.transformer.hide(),this.board.activeShapes.forEach(function(h){h.hasGroup()||h.node.hide()}),[4,F3(this.board.stage.toDataURL({pixelRatio:1}))]):[2,null];case 1:return o=a.sent(),this.board.background.nodes.forEach(function(h){h.setAttrs({width:o.width(),height:o.height(),rotation:0,x:0,y:0,scale:{x:1,y:1}})}),this.board.background.image.node.setAttrs({image:o.image()}),this.board.shapes.forEach(function(h){if(!h.isDeleted&&!h.hasGroup()){var c=h.node,l=WH({x:c.x(),y:c.y()},XH(i.rotation()));c.setAttrs({rotation:c.rotation(),x:l.x*i.scaleX()+i.x(),y:l.y*i.scaleY()+i.y(),scaleX:c.scaleX()*i.scaleX(),scaleY:c.scaleY()*i.scaleY()}).show()}}),this.board.background.overlay.show(),r&&this.board.selection.transformer.show(),i.setAttrs({rotation:0,scaleX:1,scaleY:1,x:0,y:0}),i.batchDraw(),this.board.events.emit("crop",{data:{options:e,rect:t}}),[2,t]}})})},n})();(function(){function n(e){this.lines=[],this.offset=5,this.options={},this.active=!1;var t=e.settings.snapToGrid;this.board=e,this.options=t,this.active=t!==null,this.active&&this.registerEvents()}return Object.defineProperty(n.prototype,"isActive",{get:function(){return this.active},enumerable:!1,configurable:!0}),n.prototype.setOptions=function(e){this.options=e},n.prototype.setOffset=function(e){this.offset=e},n.prototype.enable=function(){this.active||(this.active=!0,this.registerEvents())},n.prototype.disable=function(){this.active!==!1&&(this.active=!1,this.unregisterEvents())},n.prototype.getLineStops=function(e){var t={vertical:[0,this.board.stage.width()/2,this.board.stage.width()],horizontal:[0,this.board.stage.height()/2,this.board.stage.height()]};return this.board.activeShapes.forEach(function(r){if(r.node!==e&&!r.hasGroup()){var i=r.node.getClientRect();t={vertical:Ie(Ie([],Ot(t.vertical),!1),[i.x,i.x+i.width,i.x+i.width/2],!1),horizontal:Ie(Ie([],Ot(t.horizontal),!1),[i.y,i.y+i.height,i.y+i.height/2],!1)}}}),t},n.prototype.getNodeEdgeBounds=function(e){var t=e.getClientRect(),r=e.absolutePosition();return[{guide:Math.round(t.x),offset:Math.round(r.x-t.x),snap:"start",orientation:"vertical"},{guide:Math.round(t.x+t.width/2),offset:Math.round(r.x-t.x-t.width/2),snap:"center",orientation:"vertical"},{guide:Math.round(t.x+t.width),offset:Math.round(r.x-t.x-t.width),snap:"end",orientation:"vertical"},{guide:Math.round(t.y),offset:Math.round(r.y-t.y),snap:"start",orientation:"horizontal"},{guide:Math.round(t.y+t.height/2),offset:Math.round(r.y-t.y-t.height/2),snap:"center",orientation:"horizontal"},{guide:Math.round(t.y+t.height),offset:Math.round(r.y-t.y-t.height),snap:"end",orientation:"horizontal"}]},n.prototype.getGuideLines=function(e,t){var r=this,i=[];t.forEach(function(o){Object.entries(e).forEach(function(a){var h=Ot(a,2),c=h[0],l=h[1];c===o.orientation&&l.forEach(function(d){var u=Math.abs(d-o.guide);u>=r.offset||i.push({diff:u,stop:d,snap:o.snap,offset:o.offset,orientation:o.orientation})})})});var s=function(o){return i.filter(function(a){return a.orientation===o}).sort(function(a,h){return a.diff-h.diff})[0]};return[s("vertical"),s("horizontal")].filter(function(o){return!!o})},n.prototype.draw=function(e){var t=this;e.length&&e.forEach(function(r){var i=ne({stroke:"#000",strokeWidth:1,dash:[2,6]},t.options);r.orientation==="vertical"?i.points=[0,0,0,t.board.stage.height()]:r.orientation==="horizontal"&&(i.points=[0,0,t.board.stage.width(),0]);var s=new ye.Line(i);r.orientation==="vertical"?s.absolutePosition({x:r.stop,y:0}):r.orientation==="horizontal"&&s.absolutePosition({x:0,y:r.stop}),t.board.layer.add(s),t.lines.push(s)})},n.prototype.setNodePosition=function(e,t){t.forEach(function(r){var i=r.orientation,s=r.stop,o=r.offset,a=e.absolutePosition();i==="vertical"?a.x=s+o:i==="horizontal"&&(a.y=s+o),e.absolutePosition(a)})},n.prototype.onDragMove=function(e){var t=e.target;if(this.board.activeShapes.find(function(i){return i.node===t})){this.destroy();var r=this.getGuideLines(this.getLineStops(t),this.getNodeEdgeBounds(t));this.draw(r),this.setNodePosition(t,r)}},n.prototype.onDragEnd=function(){this.destroy()},n.prototype.destroy=function(){this.lines.length>0&&(this.lines.forEach(function(e){return e.destroy()}),this.lines=[])},n.prototype.registerEvents=function(){this.board.layer.on("dragmove",this.onDragMove.bind(this)),this.board.layer.on("dragend",this.onDragEnd.bind(this))},n.prototype.unregisterEvents=function(){this.board.layer.removeEventListener("dragmove"),this.board.layer.removeEventListener("dragend")},n})();function Gp(n,e){return Math.sqrt(Math.pow(Math.abs(n.x-e.x),2)+Math.pow(Math.abs(n.y-e.y),2))}var Pr=function(){function n(e,t,r){this.board=e,this.drawType=t,this.board.settings.measurement&&(r==null?void 0:r.measurement)!==!1&&(this.dimensionsTag=new R3(this.board)),this.onStartDrawing=this.onStartDrawing.bind(this),this.onFinishDrawing=this.onFinishDrawing.bind(this),this.onDrawing=this.onDrawing.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}return Object.defineProperty(n.prototype,"isDrawing",{get:function(){return this.board.activeDrawing===this.drawType},enumerable:!1,configurable:!0}),n.prototype.insert=function(e){return this.stopDrawing(),this.createShape(e)},n.prototype.draw=function(e){cl()||(this.config=e,this.stopDrawing(),this.board.setActiveDrawing(this.drawType),this.board.stage.on("mousedown touchstart",this.onStartDrawing),this.board.stage.on("mousemove touchmove",this.onDrawing),this.board.stage.on("mouseup touchend",this.onFinishDrawing),qs()&&(window.addEventListener("mouseup",this.onFinishDrawing),window.addEventListener("touchend",this.onFinishDrawing),window.addEventListener("keydown",this.onKeyDown)))},n.prototype.stopDrawing=function(){var e;cl()||(this.node=null,this.board.setActiveDrawing(null),this.board.stage.container().style.cursor="inherit",(e=this.dimensionsTag)===null||e===void 0||e.hide(),this.board.stage.off("mousedown touchstart",this.onStartDrawing),this.board.stage.off("mousemove touchmove",this.onDrawing),this.board.stage.off("mouseup touchend",this.onFinishDrawing),window.removeEventListener("mouseup",this.onFinishDrawing),window.removeEventListener("touchend",this.onFinishDrawing),window.removeEventListener("keydown",this.onKeyDown))},n.prototype.getShapePosition=function(){return{x:this.node.x(),y:this.node.y()}},n.prototype.onStartDrawing=function(){var e=this.board.stage.getPointerPosition(),t=e.x,r=e.y;this.startPoint={x:t,y:r}},n.prototype.onDrawing=function(e){cl()||this.isDrawing&&(this.board.stage.container().style.cursor="crosshair",this.node&&this.dimensionsTag&&this.dimensionsTag.measure(this.node,this.node.getClientRect()))},n.prototype.onFinishDrawing=function(){var e,t=this;cl()||(this.board.stage.container().style.cursor="inherit",this.node&&(!((e=this.board.settings.drawing)===null||e===void 0)&&e.autoSelect)&&this.board.selection.find(function(r){return r.node===t.node}),this.stopDrawing())},n.prototype.onKeyDown=function(e){var t,r;e.key==="Escape"&&!((r=(t=this.board.settings.drawing)===null||t===void 0?void 0:t.keyboard)===null||r===void 0)&&r.cancelOnEscape&&this.stopDrawing()},n}(),JH=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Ne(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"svg"},enumerable:!1,configurable:!0}),e.prototype.width=function(){return this.node.getClientRect().width},e.prototype.height=function(){return this.node.getClientRect().height},e.prototype.rotate=function(t){Xi(this.node,t),this.board.events.emit("shape:rotate",{shapes:[this]})},e}(Gn);(function(n){function e(t){return n.call(this,t,Xe.Svg)||this}return Ne(e,n),e.prototype.insert=function(t){return n.prototype.insert.call(this,t)},e.prototype.draw=function(t){t===void 0&&(t={}),n.prototype.draw.call(this,t)},e.prototype.createShape=function(t){return this.node=new ye.Path(t),new JH(this.board,this.node)},e.prototype.onStartDrawing=function(){n.prototype.onStartDrawing.call(this),this.isDrawing&&(this.createShape(ne({x:this.startPoint.x,y:this.startPoint.y,scaleX:.001,scaleY:.001},this.config)),this.initialDimensions=this.node.getClientRect())},e.prototype.onDrawing=function(t){if(n.prototype.onDrawing.call(this,t),this.node){var r=this.initialDimensions,i=this.board.stage.getPointerPosition(),s=Gp(i,this.getShapePosition());s&&this.node.setAttrs({x:i.x,scaleX:s/r.width*.001,scaleY:s/r.height*.001})}},e.prototype.onFinishDrawing=function(){n.prototype.onFinishDrawing.call(this),this.initialDimensions=void 0},e})(Pr);var eK=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Ne(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"text"},enumerable:!1,configurable:!0}),e.prototype.rotate=function(t){Xi(this.node,t),this.board.events.emit("shape:rotate",{shapes:[this]})},e}(Gn);(function(n){function e(t){return n.call(this,t,Xe.Text)||this}return Ne(e,n),e.prototype.insert=function(t){return n.prototype.insert.call(this,t)},e.prototype.draw=function(t){t===void 0&&(t={}),n.prototype.draw.call(this,t)},e.prototype.createShape=function(t){return this.node=new ye.Text(t),new eK(this.board,this.node)},e.prototype.onStartDrawing=function(){n.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(ne({x:this.startPoint.x,y:this.startPoint.y},this.config))},e.prototype.onDrawing=function(t){n.prototype.onDrawing.call(this,t)},e})(Pr);var z3=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Ne(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"line"},enumerable:!1,configurable:!0}),e.prototype.rotate=function(t){Xi(this.node,t),this.board.events.emit("shape:rotate",{shapes:[this]})},e}(Gn);(function(n){function e(t){return n.call(this,t,Xe.Line)||this}return Ne(e,n),e.prototype.insert=function(t){return n.prototype.insert.call(this,t)},e.prototype.draw=function(t){t===void 0&&(t={}),n.prototype.draw.call(this,t)},e.prototype.createShape=function(t){return this.node=new ye.Line(ne({hitStrokeWidth:15},t)),new z3(this.board,this.node)},e.prototype.onStartDrawing=function(){n.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(ne({globalCompositeOperation:"source-over",points:[this.startPoint.x,this.startPoint.y]},this.config))},e.prototype.onDrawing=function(t){if(n.prototype.onDrawing.call(this,t),this.node){var r=this.board.stage.getPointerPosition();this.node.points(Ie(Ie([],Ot(this.node.points().slice(0,2)),!1),[r.x,r.y],!1))}},e})(Pr);(function(n){function e(t){return n.call(this,t,Xe.Rect)||this}return Ne(e,n),e.prototype.insert=function(t){return n.prototype.insert.call(this,t)},e.prototype.draw=function(t){t===void 0&&(t={}),n.prototype.draw.call(this,t)},e.prototype.createShape=function(t){return this.node=new ye.Rect(t),new L3(this.board,this.node)},e.prototype.onStartDrawing=function(){n.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(ne({x:this.startPoint.x,y:this.startPoint.y},this.config))},e.prototype.onDrawing=function(t){if(n.prototype.onDrawing.call(this,t),this.node){var r=this.board.stage.getPointerPosition(),i=Math.abs(r.x-this.startPoint.x),s=Math.abs(r.y-this.startPoint.y);this.node.setAttrs({x:Math.min(this.startPoint.x,r.x),y:Math.min(this.startPoint.y,r.y),width:i,height:t.evt.shiftKey?i:s})}},e})(Pr);var tK=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Ne(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"arrow"},enumerable:!1,configurable:!0}),e.prototype.rotate=function(t){Xi(this.node,t),this.board.events.emit("shape:rotate",{shapes:[this]})},e}(Gn);(function(n){function e(t){return n.call(this,t,Xe.Arrow)||this}return Ne(e,n),e.prototype.insert=function(t){return n.prototype.insert.call(this,t)},e.prototype.draw=function(t){t===void 0&&(t={}),n.prototype.draw.call(this,t)},e.prototype.createShape=function(t){return this.node=new ye.Arrow(t),new tK(this.board,this.node)},e.prototype.onStartDrawing=function(){n.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(ne({globalCompositeOperation:"source-over",points:[this.startPoint.x,this.startPoint.y]},this.config))},e.prototype.onDrawing=function(t){if(n.prototype.onDrawing.call(this,t),this.node){var r=this.board.stage.getPointerPosition();this.node.points(Ie(Ie([],Ot(this.node.points().slice(0,2)),!1),[r.x,r.y],!1))}},e})(Pr);(function(n){function e(t){return n.call(this,t,Xe.Pencil,{measurement:!1})||this}return Ne(e,n),e.prototype.draw=function(t){t===void 0&&(t={}),n.prototype.draw.call(this,t)},e.prototype.createShape=function(t){return this.node=new ye.Line(t),new z3(this.board,this.node)},e.prototype.onStartDrawing=function(){n.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(ne({globalCompositeOperation:"source-over",points:[this.startPoint.x,this.startPoint.y]},this.config))},e.prototype.onDrawing=function(t){if(n.prototype.onDrawing.call(this,t),this.node){var r=this.board.stage.getPointerPosition();this.node.points(this.node.points().concat([r.x,r.y]))}},e.prototype.onFinishDrawing=function(){n.prototype.onFinishDrawing.call(this),this.draw(this.config)},e})(Pr);var nK=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Ne(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"circle"},enumerable:!1,configurable:!0}),e}(Gn);(function(n){function e(t){return n.call(this,t,Xe.Circle)||this}return Ne(e,n),e.prototype.insert=function(t){return n.prototype.insert.call(this,t)},e.prototype.draw=function(t){t===void 0&&(t={}),n.prototype.draw.call(this,t)},e.prototype.createShape=function(t){return this.node=new ye.Circle(t),new nK(this.board,this.node)},e.prototype.onStartDrawing=function(){n.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(ne({x:this.startPoint.x,y:this.startPoint.y,radius:0},this.config))},e.prototype.onDrawing=function(t){if(n.prototype.onDrawing.call(this,t),this.node){var r=this.board.stage.getPointerPosition();this.node.setAttrs({radius:Gp(r,this.getShapePosition())})}},e})(Pr);var rK=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Ne(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"ellipse"},enumerable:!1,configurable:!0}),e}(Gn);(function(n){function e(t){return n.call(this,t,Xe.Ellipse)||this}return Ne(e,n),e.prototype.insert=function(t){return n.prototype.insert.call(this,t)},e.prototype.draw=function(t){t===void 0&&(t={}),n.prototype.draw.call(this,t)},e.prototype.createShape=function(t){return this.node=new ye.Ellipse(t),new rK(this.board,this.node)},e.prototype.onStartDrawing=function(){n.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(ne({x:this.startPoint.x,y:this.startPoint.y,radiusX:0,radiusY:0},this.config))},e.prototype.onDrawing=function(t){if(n.prototype.onDrawing.call(this,t),this.node){var r=this.board.stage.getPointerPosition(),i=Math.abs(r.x-this.node.x()),s=Math.abs(r.y-this.node.y());this.node.setAttrs({radiusX:i,radiusY:t.evt.shiftKey?i:s})}},e})(Pr);var iK=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Ne(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"polygon"},enumerable:!1,configurable:!0}),e}(Gn);(function(n){function e(t){return n.call(this,t,Xe.Polygon)||this}return Ne(e,n),e.prototype.insert=function(t){return n.prototype.insert.call(this,t)},e.prototype.draw=function(t){t===void 0&&(t={}),n.prototype.draw.call(this,t)},e.prototype.createShape=function(t){return this.node=new ye.RegularPolygon(t),new iK(this.board,this.node)},e.prototype.onStartDrawing=function(){n.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(ne({x:this.startPoint.x,y:this.startPoint.y,radius:0,sides:4},this.config))},e.prototype.onDrawing=function(t){if(n.prototype.onDrawing.call(this,t),this.node){var r=this.board.stage.getPointerPosition();this.node.setAttrs({radius:Gp(r,this.getShapePosition())})}},e})(Pr);var sK=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Ne(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"triangle"},enumerable:!1,configurable:!0}),e}(Gn);(function(n){function e(t){return n.call(this,t,Xe.Triangle)||this}return Ne(e,n),e.prototype.insert=function(t){return n.prototype.insert.call(this,t)},e.prototype.draw=function(t){t===void 0&&(t={}),n.prototype.draw.call(this,ne(ne({},t),{sides:3}))},e.prototype.createShape=function(t){return this.node=new ye.RegularPolygon(ne({radius:10,sides:3},t)),new sK(this.board,this.node)},e.prototype.onStartDrawing=function(){n.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(ne({x:this.startPoint.x,y:this.startPoint.y,radius:0},this.config))},e.prototype.onDrawing=function(t){if(n.prototype.onDrawing.call(this,t),this.node){var r=this.board.stage.getPointerPosition();this.node.setAttrs({radius:Gp(r,this.getShapePosition())})}},e})(Pr);const oK=({pikasoRef:n,pikasoEditor:e,currentMap:t,penColor:r,canvasTool:i,penWidth:s,lineWidth:o})=>{G.useLayoutEffect(()=>{switch(i){case Xe.Arrow:e==null||e.shapes.arrow.draw({stroke:r,strokeWidth:o});break;case Xe.Line:e==null||e.shapes.line.draw({stroke:r,strokeWidth:o});break;case Xe.Pencil:e==null||e.shapes.pencil.draw({stroke:r,strokeWidth:s});break;case"SELECT":e==null||e.shapes.pencil.stopDrawing();break}},[t,r,i,s,o,e==null?void 0:e.board.background,e==null?void 0:e.board.stage,e==null?void 0:e.shapes.line,e==null?void 0:e.shapes.pencil,e==null?void 0:e.shapes.arrow]);const a=()=>{switch(i){case Xe.Line:e==null||e.shapes.line.stopDrawing(),e==null||e.shapes.line.draw({stroke:r,strokeWidth:o});break;case Xe.Arrow:e==null||e.shapes.arrow.stopDrawing(),e==null||e.shapes.arrow.draw({stroke:r,strokeWidth:o});break;case Xe.Pencil:e==null||e.shapes.pencil.stopDrawing(),e==null||e.shapes.pencil.draw({stroke:r,strokeWidth:s});break;case"SELECT":e==null||e.shapes.pencil.stopDrawing();break}},h=l=>{var v;const d=l.dataTransfer.getData("character"),u=l.dataTransfer.getData("side"),f=So[d],m=u==="attack"?f.attack.canvasImage:f.defense.canvasImage,g=(v=n.current)==null?void 0:v.getBoundingClientRect(),y=new Image;y.src=m,y.onload=()=>{const w=y.width/y.height;e==null||e.shapes.image.insert(m,{x:l.clientX-g.left-35/2,y:l.clientY-g.top-35/2,width:35*w,height:35})}},c=l=>{l.preventDefault()};return N.jsx("div",{ref:n,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",minHeight:"600px"},className:"pikaso",onDrop:h,onDragOver:c,onClick:a})};var bu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function aK(n){var e=n.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var U3={},_u={},V3={},ge={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n._registerNode=n.Konva=n.glob=void 0;var e=Math.PI/180;n.glob=bu!==void 0?bu:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},n.Konva={_global:n.glob,version:"8.3.9",isBrowser:typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]"),isUnminified:/param/.test((function(t){}).toString()),dblClickWindow:400,getAngle:t=>n.Konva.angleDeg?t*e:t,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>n.Konva.DD.isDragging,isDragReady:()=>!!n.Konva.DD.node,document:n.glob.document,_injectGlobal(t){n.glob.Konva=t}},n._registerNode=t=>{n.Konva[t.prototype.getClassName()]=t},n.Konva._injectGlobal(n.Konva)})(ge);var ht={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Util=n.Transform=void 0;const e=ge;class t{constructor(d=[1,0,0,1,0,0]){this.dirty=!1,this.m=d&&d.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new t(this.m)}copyInto(d){d.m[0]=this.m[0],d.m[1]=this.m[1],d.m[2]=this.m[2],d.m[3]=this.m[3],d.m[4]=this.m[4],d.m[5]=this.m[5]}point(d){var u=this.m;return{x:u[0]*d.x+u[2]*d.y+u[4],y:u[1]*d.x+u[3]*d.y+u[5]}}translate(d,u){return this.m[4]+=this.m[0]*d+this.m[2]*u,this.m[5]+=this.m[1]*d+this.m[3]*u,this}scale(d,u){return this.m[0]*=d,this.m[1]*=d,this.m[2]*=u,this.m[3]*=u,this}rotate(d){var u=Math.cos(d),f=Math.sin(d),m=this.m[0]*u+this.m[2]*f,g=this.m[1]*u+this.m[3]*f,y=this.m[0]*-f+this.m[2]*u,v=this.m[1]*-f+this.m[3]*u;return this.m[0]=m,this.m[1]=g,this.m[2]=y,this.m[3]=v,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(d,u){var f=this.m[0]+this.m[2]*u,m=this.m[1]+this.m[3]*u,g=this.m[2]+this.m[0]*d,y=this.m[3]+this.m[1]*d;return this.m[0]=f,this.m[1]=m,this.m[2]=g,this.m[3]=y,this}multiply(d){var u=this.m[0]*d.m[0]+this.m[2]*d.m[1],f=this.m[1]*d.m[0]+this.m[3]*d.m[1],m=this.m[0]*d.m[2]+this.m[2]*d.m[3],g=this.m[1]*d.m[2]+this.m[3]*d.m[3],y=this.m[0]*d.m[4]+this.m[2]*d.m[5]+this.m[4],v=this.m[1]*d.m[4]+this.m[3]*d.m[5]+this.m[5];return this.m[0]=u,this.m[1]=f,this.m[2]=m,this.m[3]=g,this.m[4]=y,this.m[5]=v,this}invert(){var d=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),u=this.m[3]*d,f=-this.m[1]*d,m=-this.m[2]*d,g=this.m[0]*d,y=d*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),v=d*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=u,this.m[1]=f,this.m[2]=m,this.m[3]=g,this.m[4]=y,this.m[5]=v,this}getMatrix(){return this.m}decompose(){var d=this.m[0],u=this.m[1],f=this.m[2],m=this.m[3],g=d*m-u*f;let y={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(d!=0||u!=0){var v=Math.sqrt(d*d+u*u);y.rotation=u>0?Math.acos(d/v):-Math.acos(d/v),y.scaleX=v,y.scaleY=g/v,y.skewX=(d*f+u*m)/g,y.skewY=0}else if(f!=0||m!=0){var b=Math.sqrt(f*f+m*m);y.rotation=Math.PI/2-(m>0?Math.acos(-f/b):-Math.acos(f/b)),y.scaleX=g/b,y.scaleY=b,y.skewX=0,y.skewY=(d*f+u*m)/g}return y.rotation=n.Util._getRotation(y.rotation),y}}n.Transform=t;var r=Math.PI/180,i=180/Math.PI,s="Konva error: ",o={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},a=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,h=[];const c=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(l){setTimeout(l,60)};n.Util={_isElement:l=>!(!l||l.nodeType!=1),_isFunction:l=>!!(l&&l.constructor&&l.call&&l.apply),_isPlainObject:l=>!!l&&l.constructor===Object,_isArray:l=>Object.prototype.toString.call(l)==="[object Array]",_isNumber:l=>Object.prototype.toString.call(l)==="[object Number]"&&!isNaN(l)&&isFinite(l),_isString:l=>Object.prototype.toString.call(l)==="[object String]",_isBoolean:l=>Object.prototype.toString.call(l)==="[object Boolean]",isObject:l=>l instanceof Object,isValidSelector(l){if(typeof l!="string")return!1;var d=l[0];return d==="#"||d==="."||d===d.toUpperCase()},_sign:l=>l===0||l>0?1:-1,requestAnimFrame(l){h.push(l),h.length===1&&c(function(){const d=h;h=[],d.forEach(function(u){u()})})},createCanvasElement(){var l=document.createElement("canvas");try{l.style=l.style||{}}catch{}return l},createImageElement:()=>document.createElement("img"),_isInDocument(l){for(;l=l.parentNode;)if(l==document)return!0;return!1},_urlToImage(l,d){var u=n.Util.createImageElement();u.onload=function(){d(u)},u.src=l},_rgbToHex:(l,d,u)=>((1<<24)+(l<<16)+(d<<8)+u).toString(16).slice(1),_hexToRgb(l){l=l.replace("#","");var d=parseInt(l,16);return{r:d>>16&255,g:d>>8&255,b:255&d}},getRandomColor(){for(var l=(16777215*Math.random()<<0).toString(16);l.length<6;)l="0"+l;return"#"+l},getRGB(l){var d;return l in o?{r:(d=o[l])[0],g:d[1],b:d[2]}:l[0]==="#"?this._hexToRgb(l.substring(1)):l.substr(0,4)==="rgb("?(d=a.exec(l.replace(/ /g,"")),{r:parseInt(d[1],10),g:parseInt(d[2],10),b:parseInt(d[3],10)}):{r:0,g:0,b:0}},colorToRGBA:l=>(l=l||"black",n.Util._namedColorToRBA(l)||n.Util._hex3ColorToRGBA(l)||n.Util._hex6ColorToRGBA(l)||n.Util._rgbColorToRGBA(l)||n.Util._rgbaColorToRGBA(l)||n.Util._hslColorToRGBA(l)),_namedColorToRBA(l){var d=o[l.toLowerCase()];return d?{r:d[0],g:d[1],b:d[2],a:1}:null},_rgbColorToRGBA(l){if(l.indexOf("rgb(")===0){var d=(l=l.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:d[0],g:d[1],b:d[2],a:1}}},_rgbaColorToRGBA(l){if(l.indexOf("rgba(")===0){var d=(l=l.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map((u,f)=>u.slice(-1)==="%"?f===3?parseInt(u)/100:parseInt(u)/100*255:Number(u));return{r:d[0],g:d[1],b:d[2],a:d[3]}}},_hex6ColorToRGBA(l){if(l[0]==="#"&&l.length===7)return{r:parseInt(l.slice(1,3),16),g:parseInt(l.slice(3,5),16),b:parseInt(l.slice(5,7),16),a:1}},_hex3ColorToRGBA(l){if(l[0]==="#"&&l.length===4)return{r:parseInt(l[1]+l[1],16),g:parseInt(l[2]+l[2],16),b:parseInt(l[3]+l[3],16),a:1}},_hslColorToRGBA(l){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(l)){const[d,...u]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(l),f=Number(u[0])/360,m=Number(u[1])/100,g=Number(u[2])/100;let y,v,b;if(m===0)return b=255*g,{r:Math.round(b),g:Math.round(b),b:Math.round(b),a:1};y=g<.5?g*(1+m):g+m-g*m;const w=2*g-y,C=[0,0,0];for(let O=0;O<3;O++)v=f+1/3*-(O-1),v<0&&v++,v>1&&v--,b=6*v<1?w+6*(y-w)*v:2*v<1?y:3*v<2?w+(y-w)*(2/3-v)*6:w,C[O]=255*b;return{r:Math.round(C[0]),g:Math.round(C[1]),b:Math.round(C[2]),a:1}}},haveIntersection:(l,d)=>!(d.x>l.x+l.width||d.x+d.width<l.x||d.y>l.y+l.height||d.y+d.height<l.y),cloneObject(l){var d={};for(var u in l)this._isPlainObject(l[u])?d[u]=this.cloneObject(l[u]):this._isArray(l[u])?d[u]=this.cloneArray(l[u]):d[u]=l[u];return d},cloneArray:l=>l.slice(0),degToRad:l=>l*r,radToDeg:l=>l*i,_degToRad:l=>(n.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),n.Util.degToRad(l)),_radToDeg:l=>(n.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),n.Util.radToDeg(l)),_getRotation:l=>e.Konva.angleDeg?n.Util.radToDeg(l):l,_capitalize:l=>l.charAt(0).toUpperCase()+l.slice(1),throw(l){throw new Error(s+l)},error(l){console.error(s+l)},warn(l){e.Konva.showWarnings&&console.warn("Konva warning: "+l)},each(l,d){for(var u in l)d(u,l[u])},_inRange:(l,d,u)=>d<=l&&l<u,_getProjectionToSegment(l,d,u,f,m,g){var y,v,b,w=(l-u)*(l-u)+(d-f)*(d-f);if(w==0)y=l,v=d,b=(m-u)*(m-u)+(g-f)*(g-f);else{var C=((m-l)*(u-l)+(g-d)*(f-d))/w;C<0?(y=l,v=d,b=(l-m)*(l-m)+(d-g)*(d-g)):C>1?(y=u,v=f,b=(u-m)*(u-m)+(f-g)*(f-g)):b=((y=l+C*(u-l))-m)*(y-m)+((v=d+C*(f-d))-g)*(v-g)}return[y,v,b]},_getProjectionToLine(l,d,u){var f=n.Util.cloneObject(l),m=Number.MAX_VALUE;return d.forEach(function(g,y){if(u||y!==d.length-1){var v=d[(y+1)%d.length],b=n.Util._getProjectionToSegment(g.x,g.y,v.x,v.y,l.x,l.y),w=b[0],C=b[1],O=b[2];O<m&&(f.x=w,f.y=C,m=O)}}),f},_prepareArrayForTween(l,d,u){var f,m=[],g=[];if(l.length>d.length){var y=d;d=l,l=y}for(f=0;f<l.length;f+=2)m.push({x:l[f],y:l[f+1]});for(f=0;f<d.length;f+=2)g.push({x:d[f],y:d[f+1]});var v=[];return g.forEach(function(b){var w=n.Util._getProjectionToLine(b,m,u);v.push(w.x),v.push(w.y)}),v},_prepareToStringify(l){var d;for(var u in l.visitedByCircularReferenceRemoval=!0,l)if(l.hasOwnProperty(u)&&l[u]&&typeof l[u]=="object"){if(d=Object.getOwnPropertyDescriptor(l,u),l[u].visitedByCircularReferenceRemoval||n.Util._isElement(l[u])){if(!d.configurable)return null;delete l[u]}else if(n.Util._prepareToStringify(l[u])===null){if(!d.configurable)return null;delete l[u]}}return delete l.visitedByCircularReferenceRemoval,l},_assign(l,d){for(var u in d)l[u]=d[u];return l},_getFirstPointerId:l=>l.touches?l.changedTouches[0].identifier:l.pointerId||999}})(ht);var Je={},ue={},ie={};Object.defineProperty(ie,"__esModule",{value:!0}),ie.getComponentValidator=ie.getBooleanValidator=ie.getNumberArrayValidator=ie.getFunctionValidator=ie.getStringOrGradientValidator=ie.getStringValidator=ie.getNumberOrAutoValidator=ie.getNumberOrArrayOfNumbersValidator=ie.getNumberValidator=ie.alphaComponent=ie.RGBComponent=void 0;const $r=ge,at=ht;function Rr(n){return at.Util._isString(n)?'"'+n+'"':Object.prototype.toString.call(n)==="[object Number]"||at.Util._isBoolean(n)?n:Object.prototype.toString.call(n)}ie.RGBComponent=function(n){return n>255?255:n<0?0:Math.round(n)},ie.alphaComponent=function(n){return n>1?1:n<1e-4?1e-4:n},ie.getNumberValidator=function(){if($r.Konva.isUnminified)return function(n,e){return at.Util._isNumber(n)||at.Util.warn(Rr(n)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),n}},ie.getNumberOrArrayOfNumbersValidator=function(n){if($r.Konva.isUnminified)return function(e,t){let r=at.Util._isNumber(e),i=at.Util._isArray(e)&&e.length==n;return r||i||at.Util.warn(Rr(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or Array<number>('+n+")"),e}},ie.getNumberOrAutoValidator=function(){if($r.Konva.isUnminified)return function(n,e){return at.Util._isNumber(n)||n==="auto"||at.Util.warn(Rr(n)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),n}},ie.getStringValidator=function(){if($r.Konva.isUnminified)return function(n,e){return at.Util._isString(n)||at.Util.warn(Rr(n)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),n}},ie.getStringOrGradientValidator=function(){if($r.Konva.isUnminified)return function(n,e){const t=at.Util._isString(n),r=Object.prototype.toString.call(n)==="[object CanvasGradient]"||n&&n.addColorStop;return t||r||at.Util.warn(Rr(n)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),n}},ie.getFunctionValidator=function(){if($r.Konva.isUnminified)return function(n,e){return at.Util._isFunction(n)||at.Util.warn(Rr(n)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),n}},ie.getNumberArrayValidator=function(){if($r.Konva.isUnminified)return function(n,e){return at.Util._isArray(n)?n.forEach(function(t){at.Util._isNumber(t)||at.Util.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")}):at.Util.warn(Rr(n)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),n}},ie.getBooleanValidator=function(){if($r.Konva.isUnminified)return function(n,e){return n===!0||n===!1||at.Util.warn(Rr(n)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),n}},ie.getComponentValidator=function(n){if($r.Konva.isUnminified)return function(e,t){return at.Util.isObject(e)||at.Util.warn(Rr(e)+' is a not valid value for "'+t+'" attribute. The value should be an object with properties '+n),e}},function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Factory=void 0;const e=ht,t=ie;var r="get",i="set";n.Factory={addGetterSetter(s,o,a,h,c){n.Factory.addGetter(s,o,a),n.Factory.addSetter(s,o,h,c),n.Factory.addOverloadedGetterSetter(s,o)},addGetter(s,o,a){var h=r+e.Util._capitalize(o);s.prototype[h]=s.prototype[h]||function(){var c=this.attrs[o];return c===void 0?a:c}},addSetter(s,o,a,h){var c=i+e.Util._capitalize(o);s.prototype[c]||n.Factory.overWriteSetter(s,o,a,h)},overWriteSetter(s,o,a,h){var c=i+e.Util._capitalize(o);s.prototype[c]=function(l){return a&&l!=null&&(l=a.call(this,l,o)),this._setAttr(o,l),h&&h.call(this),this}},addComponentsGetterSetter(s,o,a,h,c){var l,d,u=a.length,f=e.Util._capitalize,m=r+f(o),g=i+f(o);s.prototype[m]=function(){var v={};for(l=0;l<u;l++)v[d=a[l]]=this.getAttr(o+f(d));return v};var y=(0,t.getComponentValidator)(a);s.prototype[g]=function(v){var b,w=this.attrs[o];for(b in h&&(v=h.call(this,v)),y&&y.call(this,v,o),v)v.hasOwnProperty(b)&&this._setAttr(o+f(b),v[b]);return this._fireChangeEvent(o,w,v),c&&c.call(this),this},n.Factory.addOverloadedGetterSetter(s,o)},addOverloadedGetterSetter(s,o){var a=e.Util._capitalize(o),h=i+a,c=r+a;s.prototype[o]=function(){return arguments.length?(this[h](arguments[0]),this):this[c]()}},addDeprecatedGetterSetter(s,o,a,h){e.Util.error("Adding deprecated "+o);var c=r+e.Util._capitalize(o),l=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[c]=function(){e.Util.error(l);var d=this.attrs[o];return d===void 0?a:d},n.Factory.addSetter(s,o,h,function(){e.Util.error(l)}),n.Factory.addOverloadedGetterSetter(s,o)},backCompat(s,o){e.Util.each(o,function(a,h){var c=s.prototype[h],l=r+e.Util._capitalize(a),d=i+e.Util._capitalize(a);function u(){c.apply(this,arguments),e.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+h+'" instead.')}s.prototype[a]=u,s.prototype[l]=u,s.prototype[d]=u})},afterSetFilter(){this._filterUpToDate=!1}}}(ue);var sr={},Hr={};Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.HitContext=Hr.SceneContext=Hr.Context=void 0;const H3=ht,lK=ge;function hK(n){var e,t,r=[],i=n.length,s=H3.Util;for(e=0;e<i;e++)t=n[e],s._isNumber(t)?t=Math.round(1e3*t)/1e3:s._isString(t)||(t+=""),r.push(t);return r}var m_=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];class wu{constructor(e){this.canvas=e,this._context=e._canvas.getContext("2d"),lK.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,t){var r,i,s,o,a=this.traceArr,h=a.length,c="";for(r=0;r<h;r++)(s=(i=a[r]).method)?(o=i.args,c+=s,e?c+="()":H3.Util._isArray(o[0])?c+="(["+o.join(",")+"])":(t&&(o=o.map(l=>typeof l=="number"?Math.floor(l):l)),c+="("+o.join(",")+")")):(c+=i.property,e||(c+="="+i.val)),c+=";";return c}clearTrace(){this.traceArr=[]}_trace(e){var t=this.traceArr;t.push(e),t.length>=100&&t.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)}_applyLineCap(e){var t=e.getLineCap();t&&this.setAttr("lineCap",t)}_applyOpacity(e){var t=e.getAbsoluteOpacity();t!==1&&this.setAttr("globalAlpha",t)}_applyLineJoin(e){var t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)}setAttr(e,t){this._context[e]=t}arc(e,t,r,i,s,o){this._context.arc(e,t,r,i,s,o)}arcTo(e,t,r,i,s){this._context.arcTo(e,t,r,i,s)}beginPath(){this._context.beginPath()}bezierCurveTo(e,t,r,i,s,o){this._context.bezierCurveTo(e,t,r,i,s,o)}clearRect(e,t,r,i){this._context.clearRect(e,t,r,i)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(e,t){var r=arguments;return r.length===2?this._context.createImageData(e,t):r.length===1?this._context.createImageData(e):void 0}createLinearGradient(e,t,r,i){return this._context.createLinearGradient(e,t,r,i)}createPattern(e,t){return this._context.createPattern(e,t)}createRadialGradient(e,t,r,i,s,o){return this._context.createRadialGradient(e,t,r,i,s,o)}drawImage(e,t,r,i,s,o,a,h,c){var l=arguments,d=this._context;l.length===3?d.drawImage(e,t,r):l.length===5?d.drawImage(e,t,r,i,s):l.length===9&&d.drawImage(e,t,r,i,s,o,a,h,c)}ellipse(e,t,r,i,s,o,a,h){this._context.ellipse(e,t,r,i,s,o,a,h)}isPointInPath(e,t){return this._context.isPointInPath(e,t)}fill(e){e?this._context.fill(e):this._context.fill()}fillRect(e,t,r,i){this._context.fillRect(e,t,r,i)}strokeRect(e,t,r,i){this._context.strokeRect(e,t,r,i)}fillText(e,t,r,i){i?this._context.fillText(e,t,r,i):this._context.fillText(e,t,r)}measureText(e){return this._context.measureText(e)}getImageData(e,t,r,i){return this._context.getImageData(e,t,r,i)}lineTo(e,t){this._context.lineTo(e,t)}moveTo(e,t){this._context.moveTo(e,t)}rect(e,t,r,i){this._context.rect(e,t,r,i)}putImageData(e,t,r){this._context.putImageData(e,t,r)}quadraticCurveTo(e,t,r,i){this._context.quadraticCurveTo(e,t,r,i)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,t){this._context.scale(e,t)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,t,r,i,s,o){this._context.setTransform(e,t,r,i,s,o)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,t,r,i){this._context.strokeText(e,t,r,i)}transform(e,t,r,i,s,o){this._context.transform(e,t,r,i,s,o)}translate(e,t){this._context.translate(e,t)}_enableTrace(){var e,t,r=this,i=m_.length,s=this.setAttr,o=function(a){var h,c=r[a];r[a]=function(){return t=hK(Array.prototype.slice.call(arguments,0)),h=c.apply(r,arguments),r._trace({method:a,args:t}),h}};for(e=0;e<i;e++)o(m_[e]);r.setAttr=function(){s.apply(r,arguments);var a=arguments[0],h=arguments[1];a!=="shadowOffsetX"&&a!=="shadowOffsetY"&&a!=="shadowBlur"||(h/=this.canvas.getPixelRatio()),r._trace({property:a,val:h})}}_applyGlobalCompositeOperation(e){const t=e.attrs.globalCompositeOperation;!t||t==="source-over"||this.setAttr("globalCompositeOperation",t)}}Hr.Context=wu,["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach(function(n){Object.defineProperty(wu.prototype,n,{get(){return this._context[n]},set(e){this._context[n]=e}})});Hr.SceneContext=class extends wu{_fillColor(n){var e=n.fill();this.setAttr("fillStyle",e),n._fillFunc(this)}_fillPattern(n){this.setAttr("fillStyle",n._getFillPattern()),n._fillFunc(this)}_fillLinearGradient(n){var e=n._getLinearGradient();e&&(this.setAttr("fillStyle",e),n._fillFunc(this))}_fillRadialGradient(n){var e=n._getRadialGradient();e&&(this.setAttr("fillStyle",e),n._fillFunc(this))}_fill(n){var e=n.fill(),t=n.getFillPriority();if(e&&t==="color")this._fillColor(n);else{var r=n.getFillPatternImage();if(r&&t==="pattern")this._fillPattern(n);else{var i=n.getFillLinearGradientColorStops();if(i&&t==="linear-gradient")this._fillLinearGradient(n);else{var s=n.getFillRadialGradientColorStops();s&&t==="radial-gradient"?this._fillRadialGradient(n):e?this._fillColor(n):r?this._fillPattern(n):i?this._fillLinearGradient(n):s&&this._fillRadialGradient(n)}}}}_strokeLinearGradient(n){var e=n.getStrokeLinearGradientStartPoint(),t=n.getStrokeLinearGradientEndPoint(),r=n.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(e.x,e.y,t.x,t.y);if(r){for(var s=0;s<r.length;s+=2)i.addColorStop(r[s],r[s+1]);this.setAttr("strokeStyle",i)}}_stroke(n){var e=n.dash(),t=n.getStrokeScaleEnabled();if(n.hasStroke()){if(!t){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(n),e&&n.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",n.dashOffset())),this.setAttr("lineWidth",n.strokeWidth()),n.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),n.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(n):this.setAttr("strokeStyle",n.stroke()),n._strokeFunc(this),t||this.restore()}}_applyShadow(n){var e,t,r,i=(e=n.getShadowRGBA())!==null&&e!==void 0?e:"black",s=(t=n.getShadowBlur())!==null&&t!==void 0?t:5,o=(r=n.getShadowOffset())!==null&&r!==void 0?r:{x:0,y:0},a=n.getAbsoluteScale(),h=this.canvas.getPixelRatio(),c=a.x*h,l=a.y*h;this.setAttr("shadowColor",i),this.setAttr("shadowBlur",s*Math.min(Math.abs(c),Math.abs(l))),this.setAttr("shadowOffsetX",o.x*c),this.setAttr("shadowOffsetY",o.y*l)}};Hr.HitContext=class extends wu{_fill(n){this.save(),this.setAttr("fillStyle",n.colorKey),n._fillFuncHit(this),this.restore()}strokeShape(n){n.hasHitStroke()&&this._stroke(n)}_stroke(n){if(n.hasHitStroke()){var e=n.getStrokeScaleEnabled();if(!e){this.save();var t=this.getCanvas().getPixelRatio();this.setTransform(t,0,0,t,0,0)}this._applyLineCap(n);var r=n.hitStrokeWidth(),i=r==="auto"?n.strokeWidth():r;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",n.colorKey),n._strokeFuncHit(this),e||this.restore()}}},Object.defineProperty(sr,"__esModule",{value:!0}),sr.HitCanvas=sr.SceneCanvas=sr.Canvas=void 0;const yg=ht,K3=Hr,v_=ge,cK=ue,dK=ie;var bg;class Su{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var t=(e||{}).pixelRatio||v_.Konva.pixelRatio||function(){if(bg)return bg;var r=yg.Util.createCanvasElement().getContext("2d");return bg=(v_.Konva._global.devicePixelRatio||1)/(r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1)}();this.pixelRatio=t,this._canvas=yg.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var t=this.pixelRatio;this.getContext()._context.scale(t,t)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var t=this.pixelRatio;this.getContext()._context.scale(t,t)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,t){this.setWidth(e||0),this.setHeight(t||0)}toDataURL(e,t){try{return this._canvas.toDataURL(e,t)}catch{try{return this._canvas.toDataURL()}catch(i){return yg.Util.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}sr.Canvas=Su,cK.Factory.addGetterSetter(Su,"pixelRatio",void 0,(0,dK.getNumberValidator)());sr.SceneCanvas=class extends Su{constructor(n={width:0,height:0}){super(n),this.context=new K3.SceneContext(this),this.setSize(n.width,n.height)}};sr.HitCanvas=class extends Su{constructor(n={width:0,height:0}){super(n),this.hitCanvas=!0,this.context=new K3.HitContext(this),this.setSize(n.width,n.height)}};var zp={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DD=void 0;const e=ge,t=ht;n.DD={get isDragging(){var r=!1;return n.DD._dragElements.forEach(i=>{i.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){var r;return n.DD._dragElements.forEach(i=>{r=i.node}),r},_dragElements:new Map,_drag(r){const i=[];n.DD._dragElements.forEach((s,o)=>{const{node:a}=s,h=a.getStage();h.setPointersPositions(r),s.pointerId===void 0&&(s.pointerId=t.Util._getFirstPointerId(r));const c=h._changedPointerPositions.find(d=>d.id===s.pointerId);if(c){if(s.dragStatus!=="dragging"){var l=a.dragDistance();if(Math.max(Math.abs(c.x-s.startPointerPos.x),Math.abs(c.y-s.startPointerPos.y))<l||(a.startDrag({evt:r}),!a.isDragging()))return}a._setDragPosition(r,s),i.push(a)}}),i.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:r},!0)})},_endDragBefore(r){n.DD._dragElements.forEach(i=>{const{node:s}=i,o=s.getStage();if(r&&o.setPointersPositions(r),!o._changedPointerPositions.find(h=>h.id===i.pointerId))return;i.dragStatus!=="dragging"&&i.dragStatus!=="stopped"||(n.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,i.dragStatus="stopped");const a=i.node.getLayer()||i.node instanceof e.Konva.Stage&&i.node;a&&a.batchDraw()})},_endDragAfter(r){n.DD._dragElements.forEach((i,s)=>{i.dragStatus==="stopped"&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:r},!0),i.dragStatus!=="dragging"&&n.DD._dragElements.delete(s)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",n.DD._endDragBefore,!0),window.addEventListener("touchend",n.DD._endDragBefore,!0),window.addEventListener("mousemove",n.DD._drag),window.addEventListener("touchmove",n.DD._drag),window.addEventListener("mouseup",n.DD._endDragAfter,!1),window.addEventListener("touchend",n.DD._endDragAfter,!1))})(zp),Object.defineProperty(Je,"__esModule",{value:!0}),Je.Node=void 0;const _e=ht,dl=ue,fc=sr,as=ge,In=zp,dt=ie;var uK=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(" ");let pK=1;class ae{constructor(e){this._id=pK++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){e!=="transform"&&e!=="absoluteTransform"||!this._cache.get(e)?e?this._cache.delete(e):this._cache.clear():this._cache.get(e).dirty=!0}_getCache(e,t){var r=this._cache.get(e);return(r===void 0||(e==="transform"||e==="absoluteTransform")&&r.dirty===!0)&&(r=t.call(this),this._cache.set(e,r)),r}_calculate(e,t,r){if(!this._attachedDepsListeners.get(e)){const i=t.map(s=>s+"Change.konva").join(" ");this.on(i,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,r)}_getCanvasCache(){return this._cache.get("canvas")}_clearSelfAndDescendantCache(e){this._clearCache(e),e==="absoluteTransform"&&this.fire("absoluteTransformChange")}clearCache(){return this._cache.delete("canvas"),this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var t=e||{},r={};t.x!==void 0&&t.y!==void 0&&t.width!==void 0&&t.height!==void 0||(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var i=Math.ceil(t.width||r.width),s=Math.ceil(t.height||r.height),o=t.pixelRatio,a=t.x===void 0?Math.floor(r.x):t.x,h=t.y===void 0?Math.floor(r.y):t.y,c=t.offset||0,l=t.drawBorder||!1,d=t.hitCanvasPixelRatio||1;if(i&&s){i+=2*c+1,s+=2*c+1,a-=c,h-=c;var u=new fc.SceneCanvas({pixelRatio:o,width:i,height:s}),f=new fc.SceneCanvas({pixelRatio:o,width:0,height:0}),m=new fc.HitCanvas({pixelRatio:d,width:i,height:s}),g=u.getContext(),y=m.getContext();return m.isCache=!0,u.isCache=!0,this._cache.delete("canvas"),this._filterUpToDate=!1,t.imageSmoothingEnabled===!1&&(u.getContext()._context.imageSmoothingEnabled=!1,f.getContext()._context.imageSmoothingEnabled=!1),g.save(),y.save(),g.translate(-a,-h),y.translate(-a,-h),this._isUnderCache=!0,this._clearSelfAndDescendantCache("absoluteOpacity"),this._clearSelfAndDescendantCache("absoluteScale"),this.drawScene(u,this),this.drawHit(m,this),this._isUnderCache=!1,g.restore(),y.restore(),l&&(g.save(),g.beginPath(),g.rect(0,0,i,s),g.closePath(),g.setAttr("strokeStyle","red"),g.setAttr("lineWidth",5),g.stroke(),g.restore()),this._cache.set("canvas",{scene:u,filter:f,hit:m,x:a,y:h}),this._requestDraw(),this}_e.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")}isCached(){return this._cache.has("canvas")}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,t){var r,i,s,o,a=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],h=this.getAbsoluteTransform(t);return a.forEach(function(c){var l=h.point(c);r===void 0&&(r=s=l.x,i=o=l.y),r=Math.min(r,l.x),i=Math.min(i,l.y),s=Math.max(s,l.x),o=Math.max(o,l.y)}),{x:r,y:i,width:s-r,height:o-i}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const t=this._getCanvasCache();e.translate(t.x,t.y);var r=this._getCachedSceneCanvas(),i=r.pixelRatio;e.drawImage(r._canvas,0,0,r.width/i,r.height/i),e.restore()}_drawCachedHitCanvas(e){var t=this._getCanvasCache(),r=t.hit;e.save(),e.translate(t.x,t.y),e.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e,t,r,i,s=this.filters(),o=this._getCanvasCache(),a=o.scene,h=o.filter,c=h.getContext();if(s){if(!this._filterUpToDate){var l=a.pixelRatio;h.setSize(a.width/a.pixelRatio,a.height/a.pixelRatio);try{for(e=s.length,c.clear(),c.drawImage(a._canvas,0,0,a.getWidth()/l,a.getHeight()/l),t=c.getImageData(0,0,h.getWidth(),h.getHeight()),r=0;r<e;r++)typeof(i=s[r])=="function"?(i.call(this,t),c.putImageData(t,0,0)):_e.Util.error("Filter should be type of function, but got "+typeof i+" instead. Please check correct filters")}catch(d){_e.Util.error("Unable to apply filter. "+d.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return h}return a}on(e,t){if(this._cache&&this._cache.delete("allEventListeners"),arguments.length===3)return this._delegate.apply(this,arguments);var r,i,s,o,a=e.split(" "),h=a.length;for(r=0;r<h;r++)s=(i=a[r].split("."))[0],o=i[1]||"",this.eventListeners[s]||(this.eventListeners[s]=[]),this.eventListeners[s].push({name:o,handler:t});return this}off(e,t){var r,i,s,o,a,h=(e||"").split(" "),c=h.length;if(this._cache&&this._cache.delete("allEventListeners"),!e)for(i in this.eventListeners)this._off(i);for(r=0;r<c;r++)if(o=(s=h[r].split("."))[0],a=s[1],o)this.eventListeners[o]&&this._off(o,a,t);else for(i in this.eventListeners)this._off(i,a,t);return this}dispatchEvent(e){var t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this}addEventListener(e,t){return this.on(e,function(r){t.call(this,r.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,t,r){var i=this;this.on(e,function(s){for(var o=s.target.findAncestors(t,!0,i),a=0;a<o.length;a++)(s=_e.Util.cloneObject(s)).currentTarget=o[a],r.call(o[a],s)})}remove(){return this.isDragging()&&this.stopDrag(),In.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache("absoluteTransform"),this._clearSelfAndDescendantCache("absoluteOpacity"),this._clearSelfAndDescendantCache("absoluteScale"),this._clearSelfAndDescendantCache("stage"),this._clearSelfAndDescendantCache("visible"),this._clearSelfAndDescendantCache("listening")}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this}getAttr(e){var t="get"+_e.Util._capitalize(e);return _e.Util._isFunction(this[t])?this[t]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),t=[];e;)t.push(e),e=e.getParent();return t}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var t,r;if(!e)return this;for(t in e)t!=="children"&&(r="set"+_e.Util._capitalize(t),_e.Util._isFunction(this[r])?this[r](e[t]):this._setAttr(t,e[t]))}),this}isListening(){return this._getCache("listening",this._isListening)}_isListening(e){if(!this.listening())return!1;const t=this.getParent();return!t||t===e||this===e||t._isListening(e)}isVisible(){return this._getCache("visible",this._isVisible)}_isVisible(e){if(!this.visible())return!1;const t=this.getParent();return!t||t===e||this===e||t._isVisible(e)}shouldDrawHit(e,t=!1){if(e)return this._isVisible(e)&&this._isListening(e);var r=this.getLayer(),i=!1;In.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===r)&&(i=!0)});var s=!t&&!as.Konva.hitOnDragEnabled&&i;return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e,t,r,i,s=this.getDepth(),o=this,a=0;return o.nodeType!=="Stage"&&function h(c){for(e=[],t=c.length,r=0;r<t;r++)i=c[r],a++,i.nodeType!=="Shape"&&(e=e.concat(i.getChildren().slice())),i._id===o._id&&(r=t);e.length>0&&e[0].getDepth()<=s&&h(e)}(o.getStage().getChildren()),a}getDepth(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var e=this.getStage().getPointerPosition();if(!e)return null;var t=this.getAbsoluteTransform().copy();return t.invert(),t.point(e)}getAbsolutePosition(e){let t=!1,r=this.parent;for(;r;){if(r.isCached()){t=!0;break}r=r.parent}t&&!e&&(e=!0);var i=this.getAbsoluteTransform(e).getMatrix(),s=new _e.Transform,o=this.offset();return s.m=i.slice(),s.translate(o.x,o.y),s.getTranslation()}setAbsolutePosition(e){var t=this._clearTransform();this.attrs.x=t.x,this.attrs.y=t.y,delete t.x,delete t.y,this._clearCache("transform");var r=this._getAbsoluteTransform().copy();return r.invert(),r.translate(e.x,e.y),e={x:this.attrs.x+r.getTranslation().x,y:this.attrs.y+r.getTranslation().y},this._setTransform(t),this.setPosition({x:e.x,y:e.y}),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform"),this}_setTransform(e){var t;for(t in e)this.attrs[t]=e[t]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var t=e.x,r=e.y,i=this.x(),s=this.y();return t!==void 0&&(i+=t),r!==void 0&&(s+=r),this.setPosition({x:i,y:s}),this}_eachAncestorReverse(e,t){var r,i,s=[],o=this.getParent();if(!t||t._id!==this._id){for(s.unshift(this);o&&(!t||o._id!==t._id);)s.unshift(o),o=o.parent;for(r=s.length,i=0;i<r;i++)e(s[i])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return _e.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return _e.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return _e.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return _e.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(e){if(!this.parent)return _e.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&_e.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache("absoluteOpacity",this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),t=this.getParent();return t&&!t._isUnderCache&&(e*=t.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e,t,r,i,s={},o=this.getAttrs();for(e in s.attrs={},o)t=o[e],_e.Util.isObject(t)&&!_e.Util._isPlainObject(t)&&!_e.Util._isArray(t)||(r=typeof this[e]=="function"&&this[e],delete o[e],i=r?r.call(this):null,o[e]=t,i!==t&&(s.attrs[e]=t));return s.className=this.getClassName(),_e.Util._prepareToStringify(s)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,t,r){var i=[];t&&this._isMatch(e)&&i.push(this);for(var s=this.parent;s;){if(s===r)return i;s._isMatch(e)&&i.push(s),s=s.parent}return i}isAncestorOf(e){return!1}findAncestor(e,t,r){return this.findAncestors(e,t,r)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var t,r,i=e.replace(/ /g,"").split(","),s=i.length;for(t=0;t<s;t++)if(r=i[t],_e.Util.isValidSelector(r)||(_e.Util.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),_e.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),_e.Util.warn("Konva is awesome, right?")),r.charAt(0)==="#"){if(this.id()===r.slice(1))return!0}else if(r.charAt(0)==="."){if(this.hasName(r.slice(1)))return!0}else if(this.className===r||this.nodeType===r)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache("stage",this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():void 0}fire(e,t={},r){return t.target=t.target||this,r?this._fireAndBubble(e,t):this._fire(e,t),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache("absoluteTransform",this._getAbsoluteTransform)}_getAbsoluteTransform(e){var t;if(e)return t=new _e.Transform,this._eachAncestorReverse(function(i){var s=i.transformsEnabled();s==="all"?t.multiply(i.getTransform()):s==="position"&&t.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},e),t;t=this._cache.get("absoluteTransform")||new _e.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(t):t.reset();var r=this.transformsEnabled();if(r==="all")t.multiply(this.getTransform());else if(r==="position"){const i=this.attrs.x||0,s=this.attrs.y||0,o=this.attrs.offsetX||0,a=this.attrs.offsetY||0;t.translate(i-o,s-a)}return t.dirty=!1,t}getAbsoluteScale(e){for(var t=this;t;)t._isUnderCache&&(e=t),t=t.getParent();const r=this.getAbsoluteTransform(e).decompose();return{x:r.scaleX,y:r.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache("transform",this._getTransform)}_getTransform(){var e,t,r=this._cache.get("transform")||new _e.Transform;r.reset();var i=this.x(),s=this.y(),o=as.Konva.getAngle(this.rotation()),a=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,h=(t=this.attrs.scaleY)!==null&&t!==void 0?t:1,c=this.attrs.skewX||0,l=this.attrs.skewY||0,d=this.attrs.offsetX||0,u=this.attrs.offsetY||0;return i===0&&s===0||r.translate(i,s),o!==0&&r.rotate(o),c===0&&l===0||r.skew(c,l),a===1&&h===1||r.scale(a,h),d===0&&u===0||r.translate(-1*d,-1*u),r.dirty=!1,r}clone(e){var t,r,i,s,o,a=_e.Util.cloneObject(this.attrs);for(t in e)a[t]=e[t];var h=new this.constructor(a);for(t in this.eventListeners)for(i=(r=this.eventListeners[t]).length,s=0;s<i;s++)(o=r[s]).name.indexOf("konva")<0&&(h.eventListeners[t]||(h.eventListeners[t]=[]),h.eventListeners[t].push(o));return h}_toKonvaCanvas(e){e=e||{};var t=this.getClientRect(),r=this.getStage(),i=e.x!==void 0?e.x:Math.floor(t.x),s=e.y!==void 0?e.y:Math.floor(t.y),o=e.pixelRatio||1,a=new fc.SceneCanvas({width:e.width||Math.ceil(t.width)||(r?r.width():0),height:e.height||Math.ceil(t.height)||(r?r.height():0),pixelRatio:o}),h=a.getContext();return e.imageSmoothingEnabled===!1&&(h._context.imageSmoothingEnabled=!1),h.save(),(i||s)&&h.translate(-1*i,-1*s),this.drawScene(a),h.restore(),a}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){var t=(e=e||{}).mimeType||null,r=e.quality||null,i=this._toKonvaCanvas(e).toDataURL(t,r);return e.callback&&e.callback(i),i}toImage(e){if(!e||!e.callback)throw"callback required for toImage method config argument";var t=e.callback;delete e.callback,_e.Util._urlToImage(this.toDataURL(e),function(r){t(r)})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():as.Konva.dragDistance}_off(e,t,r){var i,s,o,a=this.eventListeners[e];for(i=0;i<a.length;i++)if(s=a[i].name,o=a[i].handler,!(s==="konva"&&t!=="konva"||t&&s!==t||r&&r!==o)){if(a.splice(i,1),a.length===0){delete this.eventListeners[e];break}i--}}_fireChangeEvent(e,t,r){this._fire(e+"Change",{oldVal:t,newVal:r})}addName(e){if(!this.hasName(e)){var t=this.name(),r=t?t+" "+e:e;this.name(r)}return this}hasName(e){if(!e)return!1;const t=this.name();return!!t&&(t||"").split(/\s/g).indexOf(e)!==-1}removeName(e){var t=(this.name()||"").split(/\s/g),r=t.indexOf(e);return r!==-1&&(t.splice(r,1),this.name(t.join(" "))),this}setAttr(e,t){var r=this["set"+_e.Util._capitalize(e)];return _e.Util._isFunction(r)?r.call(this,t):this._setAttr(e,t),this}_requestDraw(){if(as.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,t){var r=this.attrs[e];(r!==t||_e.Util.isObject(t))&&(t==null?delete this.attrs[e]:this.attrs[e]=t,this._shouldFireChangeEvents&&this._fireChangeEvent(e,r,t),this._requestDraw())}_setComponentAttr(e,t,r){var i;r!==void 0&&((i=this.attrs[e])||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=r,this._fireChangeEvent(e,i,r))}_fireAndBubble(e,t,r){if(t&&this.nodeType==="Shape"&&(t.target=this),!((e==="mouseenter"||e==="mouseleave")&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r))){this._fire(e,t);var i=(e==="mouseenter"||e==="mouseleave")&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(t&&!t.cancelBubble||!t)&&this.parent&&this.parent.isListening()&&!i&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,t,r):this._fireAndBubble.call(this.parent,e,t))}}_getProtoListeners(e){let t=this._cache.get("allEventListeners");if(!t){t={};let i=Object.getPrototypeOf(this);for(;i;)if(i.eventListeners){for(var r in i.eventListeners){const s=i.eventListeners[r],o=t[r]||[];t[r]=s.concat(o)}i=Object.getPrototypeOf(i)}else i=Object.getPrototypeOf(i);this._cache.set("allEventListeners",t)}return t[e]}_fire(e,t){(t=t||{}).currentTarget=this,t.type=e;const r=this._getProtoListeners(e);if(r)for(var i=0;i<r.length;i++)r[i].handler.call(this,t);const s=this.eventListeners[e];if(s)for(i=0;i<s.length;i++)s[i].handler.call(this,t)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var t=e?e.pointerId:void 0,r=this.getStage(),i=this.getAbsolutePosition(),s=r._getPointerById(t)||r._changedPointerPositions[0]||i;In.DD._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-i.x,y:s.y-i.y},dragStatus:"ready",pointerId:t})}startDrag(e,t=!0){In.DD._dragElements.has(this._id)||this._createDragElement(e),In.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},t)}_setDragPosition(e,t){const r=this.getStage()._getPointerById(t.pointerId);if(r){var i={x:r.x-t.offset.x,y:r.y-t.offset.y},s=this.dragBoundFunc();if(s!==void 0){const o=s.call(this,i,e);o?i=o:_e.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===i.x&&this._lastPos.y===i.y||(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}}stopDrag(e){const t=In.DD._dragElements.get(this._id);t&&(t.dragStatus="stopped"),In.DD._endDragBefore(e),In.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=In.DD._dragElements.get(this._id);return!!e&&e.dragStatus==="dragging"}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if((e.evt.button===void 0||as.Konva.dragButtons.indexOf(e.evt.button)>=0)&&!this.isDragging()){var t=!1;In.DD._dragElements.forEach(r=>{this.isAncestorOf(r.node)&&(t=!0)}),t||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const e=In.DD._dragElements.get(this._id),t=e&&e.dragStatus==="dragging",r=e&&e.dragStatus==="ready";t?this.stopDrag():r&&In.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const t=this.getStage();if(!t)return!1;const r={x:-e.x,y:-e.y,width:t.width()+2*e.x,height:t.height()+2*e.y};return _e.Util.haveIntersection(r,this.getClientRect())}static create(e,t){return _e.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,t)}static _createNode(e,t){var r,i,s,o=ae.prototype.getClassName.call(e),a=e.children;if(t&&(e.attrs.container=t),as.Konva[o]||(_e.Util.warn('Can not find a node with class name "'+o+'". Fallback to "Shape".'),o="Shape"),r=new as.Konva[o](e.attrs),a)for(i=a.length,s=0;s<i;s++)r.add(ae._createNode(a[s]));return r}}Je.Node=ae,ae.prototype.nodeType="Node",ae.prototype._attrsAffectingSize=[],ae.prototype.eventListeners={},ae.prototype.on.call(ae.prototype,uK,function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform"))}),ae.prototype.on.call(ae.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache("visible")}),ae.prototype.on.call(ae.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache("listening")}),ae.prototype.on.call(ae.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache("absoluteOpacity")});const Le=dl.Factory.addGetterSetter;Le(ae,"zIndex"),Le(ae,"absolutePosition"),Le(ae,"position"),Le(ae,"x",0,(0,dt.getNumberValidator)()),Le(ae,"y",0,(0,dt.getNumberValidator)()),Le(ae,"globalCompositeOperation","source-over",(0,dt.getStringValidator)()),Le(ae,"opacity",1,(0,dt.getNumberValidator)()),Le(ae,"name","",(0,dt.getStringValidator)()),Le(ae,"id","",(0,dt.getStringValidator)()),Le(ae,"rotation",0,(0,dt.getNumberValidator)()),dl.Factory.addComponentsGetterSetter(ae,"scale",["x","y"]),Le(ae,"scaleX",1,(0,dt.getNumberValidator)()),Le(ae,"scaleY",1,(0,dt.getNumberValidator)()),dl.Factory.addComponentsGetterSetter(ae,"skew",["x","y"]),Le(ae,"skewX",0,(0,dt.getNumberValidator)()),Le(ae,"skewY",0,(0,dt.getNumberValidator)()),dl.Factory.addComponentsGetterSetter(ae,"offset",["x","y"]),Le(ae,"offsetX",0,(0,dt.getNumberValidator)()),Le(ae,"offsetY",0,(0,dt.getNumberValidator)()),Le(ae,"dragDistance",null,(0,dt.getNumberValidator)()),Le(ae,"width",0,(0,dt.getNumberValidator)()),Le(ae,"height",0,(0,dt.getNumberValidator)()),Le(ae,"listening",!0,(0,dt.getBooleanValidator)()),Le(ae,"preventDefault",!0,(0,dt.getBooleanValidator)()),Le(ae,"filters",null,function(n){return this._filterUpToDate=!1,n}),Le(ae,"visible",!0,(0,dt.getBooleanValidator)()),Le(ae,"transformsEnabled","all",(0,dt.getStringValidator)()),Le(ae,"size"),Le(ae,"dragBoundFunc"),Le(ae,"draggable",!1,(0,dt.getBooleanValidator)()),dl.Factory.backCompat(ae,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Us={};Object.defineProperty(Us,"__esModule",{value:!0}),Us.Container=void 0;const fo=ue,_g=Je,gc=ie;class ls extends _g.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const t=this.children||[];var r=[];return t.forEach(function(i){e(i)&&r.push(i)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}var r=e[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var t=this._generalFind(e,!0);return t.length>0?t[0]:void 0}_generalFind(e,t){var r=[];return this._descendants(i=>{const s=i._isMatch(e);return s&&r.push(i),!(!s||!t)}),r}_descendants(e){let t=!1;const r=this.getChildren();for(const i of r)if(t=e(i),t||i.hasChildren()&&(t=i._descendants(e),t))return!0;return!1}toObject(){var e=_g.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(t=>{e.children.push(t.toObject())}),e}isAncestorOf(e){for(var t=e.getParent();t;){if(t._id===this._id)return!0;t=t.getParent()}return!1}clone(e){var t=_g.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(r){t.add(r.clone())}),t}getAllIntersections(e){var t=[];return this.find("Shape").forEach(function(r){r.isVisible()&&r.intersects(e)&&t.push(r)}),t}_clearSelfAndDescendantCache(e){var t;super._clearSelfAndDescendantCache(e),this.isCached()||(t=this.children)===null||t===void 0||t.forEach(function(r){r._clearSelfAndDescendantCache(e)})}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(t,r){t.index=r}),this._requestDraw()}drawScene(e,t){var r=this.getLayer(),i=e||r&&r.getCanvas(),s=i&&i.getContext(),o=this._getCanvasCache(),a=o&&o.scene,h=i&&i.isCache;if(!this.isVisible()&&!h)return this;if(a){s.save();var c=this.getAbsoluteTransform(t).getMatrix();s.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(s),s.restore()}else this._drawChildren("drawScene",i,t);return this}drawHit(e,t){if(!this.shouldDrawHit(t))return this;var r=this.getLayer(),i=e||r&&r.hitCanvas,s=i&&i.getContext(),o=this._getCanvasCache();if(o&&o.hit){s.save();var a=this.getAbsoluteTransform(t).getMatrix();s.transform(a[0],a[1],a[2],a[3],a[4],a[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",i,t);return this}_drawChildren(e,t,r){var i,s=t&&t.getContext(),o=this.clipWidth(),a=this.clipHeight(),h=this.clipFunc(),c=o&&a||h;const l=r===this;if(c){s.save();var d=this.getAbsoluteTransform(r),u=d.getMatrix();if(s.transform(u[0],u[1],u[2],u[3],u[4],u[5]),s.beginPath(),h)h.call(this,s,this);else{var f=this.clipX(),m=this.clipY();s.rect(f,m,o,a)}s.clip(),u=d.copy().invert().getMatrix(),s.transform(u[0],u[1],u[2],u[3],u[4],u[5])}var g=!l&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";g&&(s.save(),s._applyGlobalCompositeOperation(this)),(i=this.children)===null||i===void 0||i.forEach(function(y){y[e](t,r)}),g&&s.restore(),c&&s.restore()}getClientRect(e){var t,r,i,s,o,a=(e=e||{}).skipTransform,h=e.relativeTo,c={x:1/0,y:1/0,width:0,height:0},l=this;(t=this.children)===null||t===void 0||t.forEach(function(m){if(m.visible()){var g=m.getClientRect({relativeTo:l,skipShadow:e.skipShadow,skipStroke:e.skipStroke});g.width===0&&g.height===0||(r===void 0?(r=g.x,i=g.y,s=g.x+g.width,o=g.y+g.height):(r=Math.min(r,g.x),i=Math.min(i,g.y),s=Math.max(s,g.x+g.width),o=Math.max(o,g.y+g.height)))}});for(var d=this.find("Shape"),u=!1,f=0;f<d.length;f++)if(d[f]._isVisible(this)){u=!0;break}return c=u&&r!==void 0?{x:r,y:i,width:s-r,height:o-i}:{x:0,y:0,width:0,height:0},a?c:this._transformedRect(c,h)}}Us.Container=ls,fo.Factory.addComponentsGetterSetter(ls,"clip",["x","y","width","height"]),fo.Factory.addGetterSetter(ls,"clipX",void 0,(0,gc.getNumberValidator)()),fo.Factory.addGetterSetter(ls,"clipY",void 0,(0,gc.getNumberValidator)()),fo.Factory.addGetterSetter(ls,"clipWidth",void 0,(0,gc.getNumberValidator)()),fo.Factory.addGetterSetter(ls,"clipHeight",void 0,(0,gc.getNumberValidator)()),fo.Factory.addGetterSetter(ls,"clipFunc");var W3={},vn={};Object.defineProperty(vn,"__esModule",{value:!0}),vn.releaseCapture=vn.setPointerCapture=vn.hasPointerCapture=vn.createEvent=vn.getCapturedShape=void 0;const fK=ge,Ol=new Map,X3=fK.Konva._global.PointerEvent!==void 0;function c0(n){return{evt:n,pointerId:n.pointerId}}function y_(n,e){const t=Ol.get(n);if(!t)return;const r=t.getStage();r&&r.content,Ol.delete(n),X3&&t._fire("lostpointercapture",c0(new PointerEvent("lostpointercapture")))}vn.getCapturedShape=function(n){return Ol.get(n)},vn.createEvent=c0,vn.hasPointerCapture=function(n,e){return Ol.get(n)===e},vn.setPointerCapture=function(n,e){y_(n),e.getStage()&&(Ol.set(n,e),X3&&e._fire("gotpointercapture",c0(new PointerEvent("gotpointercapture"))))},vn.releaseCapture=y_,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Stage=n.stages=void 0;const e=ht,t=ue,r=Us,i=ge,s=sr,o=zp,a=ge,h=vn;var c="mouseleave",l="mouseover",d="mouseenter",u="mousemove",f="mousedown",m="mouseup",g="pointermove",y="pointerdown",v="pointerup",b="pointercancel",w="pointerout",C="pointerleave",O="pointerover",x="pointerenter",P="contextmenu",T="touchstart",k="touchend",E="touchmove",I="touchcancel",M="wheel",R=[[d,"_pointerenter"],[f,"_pointerdown"],[u,"_pointermove"],[m,"_pointerup"],[c,"_pointerleave"],[T,"_pointerdown"],[E,"_pointermove"],[k,"_pointerup"],[I,"_pointercancel"],[l,"_pointerover"],[M,"_wheel"],[P,"_contextmenu"],[y,"_pointerdown"],[g,"_pointermove"],[v,"_pointerup"],[b,"_pointercancel"],["lostpointercapture","_lostpointercapture"]];const U={mouse:{[w]:"mouseout",[C]:c,[O]:l,[x]:d,[g]:u,[y]:f,[v]:m,[b]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[w]:"touchout",[C]:"touchleave",[O]:"touchover",[x]:"touchenter",[g]:E,[y]:T,[v]:k,[b]:I,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[w]:w,[C]:C,[O]:O,[x]:x,[g]:g,[y]:y,[v]:v,[b]:b,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},V=j=>j.indexOf("pointer")>=0?"pointer":j.indexOf("touch")>=0?"touch":"mouse",H=j=>{const S=V(j);return S==="pointer"?i.Konva.pointerEventsEnabled&&U.pointer:S==="touch"?U.touch:S==="mouse"?U.mouse:void 0};function K(j={}){return(j.clipFunc||j.clipWidth||j.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),j}n.stages=[];class $ extends r.Container{constructor(S){super(K(S)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),n.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{K(this.attrs)}),this._checkVisibility()}_validateAdd(S){const A=S.getType()==="Layer",D=S.getType()==="FastLayer";A||D||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const S=this.visible()?"":"none";this.content.style.display=S}setContainer(S){if(typeof S=="string"){if(S.charAt(0)==="."){var A=S.slice(1);S=document.getElementsByClassName(A)[0]}else{var D;D=S.charAt(0)!=="#"?S:S.slice(1),S=document.getElementById(D)}if(!S)throw"Can not find container in document with id "+D}return this._setAttr("container",S),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),S.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var S,A=this.children,D=A.length;for(S=0;S<D;S++)A[S].clear();return this}clone(S){return S||(S={}),S.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,S)}destroy(){super.destroy();var S=this.content;S&&e.Util._isInDocument(S)&&this.container().removeChild(S);var A=n.stages.indexOf(this);return A>-1&&n.stages.splice(A,1),this}getPointerPosition(){const S=this._pointerPositions[0]||this._changedPointerPositions[0];return S?{x:S.x,y:S.y}:(e.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(S){return this._pointerPositions.find(A=>A.id===S)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(S){(S=S||{}).x=S.x||0,S.y=S.y||0,S.width=S.width||this.width(),S.height=S.height||this.height();var A=new s.SceneCanvas({width:S.width,height:S.height,pixelRatio:S.pixelRatio||1}),D=A.getContext()._context,F=this.children;return(S.x||S.y)&&D.translate(-1*S.x,-1*S.y),F.forEach(function(B){if(B.isVisible()){var z=B._toKonvaCanvas(S);D.drawImage(z._canvas,S.x,S.y,z.getWidth()/z.getPixelRatio(),z.getHeight()/z.getPixelRatio())}}),A}getIntersection(S){if(!S)return null;var A,D=this.children;for(A=D.length-1;A>=0;A--){const F=D[A].getIntersection(S);if(F)return F}return null}_resizeDOM(){var S=this.width(),A=this.height();this.content&&(this.content.style.width=S+"px",this.content.style.height=A+"px"),this.bufferCanvas.setSize(S,A),this.bufferHitCanvas.setSize(S,A),this.children.forEach(D=>{D.setSize({width:S,height:A}),D.draw()})}add(S,...A){if(arguments.length>1){for(var D=0;D<arguments.length;D++)this.add(arguments[D]);return this}super.add(S);var F=this.children.length;return F>5&&e.Util.warn("The stage has "+F+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),S.setSize({width:this.width(),height:this.height()}),S.draw(),i.Konva.isBrowser&&this.content.appendChild(S.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(S){return h.hasPointerCapture(S,this)}setPointerCapture(S){h.setPointerCapture(S,this)}releaseCapture(S){h.releaseCapture(S,this)}getLayers(){return this.children}_bindContentEvents(){i.Konva.isBrowser&&R.forEach(([S,A])=>{this.content.addEventListener(S,D=>{this[A](D)})})}_pointerenter(S){this.setPointersPositions(S);const A=H(S.type);this._fire(A.pointerenter,{evt:S,target:this,currentTarget:this})}_pointerover(S){this.setPointersPositions(S);const A=H(S.type);this._fire(A.pointerover,{evt:S,target:this,currentTarget:this})}_getTargetShape(S){let A=this[S+"targetShape"];return A&&!A.getStage()&&(A=null),A}_pointerleave(S){const A=H(S.type),D=V(S.type);if(A){this.setPointersPositions(S);var F=this._getTargetShape(D),B=!o.DD.isDragging||i.Konva.hitOnDragEnabled;F&&B?(F._fireAndBubble(A.pointerout,{evt:S}),F._fireAndBubble(A.pointerleave,{evt:S}),this._fire(A.pointerleave,{evt:S,target:this,currentTarget:this}),this[D+"targetShape"]=null):B&&(this._fire(A.pointerleave,{evt:S,target:this,currentTarget:this}),this._fire(A.pointerout,{evt:S,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(S){const A=H(S.type),D=V(S.type);if(A){this.setPointersPositions(S);var F=!1;this._changedPointerPositions.forEach(B=>{var z=this.getIntersection(B);if(o.DD.justDragged=!1,i.Konva["_"+D+"ListenClick"]=!0,!(z&&z.isListening()))return;i.Konva.capturePointerEventsEnabled&&z.setPointerCapture(B.id),this[D+"ClickStartShape"]=z,z._fireAndBubble(A.pointerdown,{evt:S,pointerId:B.id}),F=!0;const Z=S.type.indexOf("touch")>=0;z.preventDefault()&&S.cancelable&&Z&&S.preventDefault()}),F||this._fire(A.pointerdown,{evt:S,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(S){const A=H(S.type),D=V(S.type);if(!A||(o.DD.isDragging&&o.DD.node.preventDefault()&&S.cancelable&&S.preventDefault(),this.setPointersPositions(S),!(!o.DD.isDragging||i.Konva.hitOnDragEnabled)))return;var F={};let B=!1;var z=this._getTargetShape(D);this._changedPointerPositions.forEach(Z=>{const q=h.getCapturedShape(Z.id)||this.getIntersection(Z),se=Z.id,J={evt:S,pointerId:se};var xe=z!==q;if(xe&&z&&(z._fireAndBubble(A.pointerout,Object.assign({},J),q),z._fireAndBubble(A.pointerleave,Object.assign({},J),q)),q){if(F[q._id])return;F[q._id]=!0}q&&q.isListening()?(B=!0,xe&&(q._fireAndBubble(A.pointerover,Object.assign({},J),z),q._fireAndBubble(A.pointerenter,Object.assign({},J),z),this[D+"targetShape"]=q),q._fireAndBubble(A.pointermove,Object.assign({},J))):z&&(this._fire(A.pointerover,{evt:S,target:this,currentTarget:this,pointerId:se}),this[D+"targetShape"]=null)}),B||this._fire(A.pointermove,{evt:S,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(S){const A=H(S.type),D=V(S.type);if(!A)return;this.setPointersPositions(S);const F=this[D+"ClickStartShape"],B=this[D+"ClickEndShape"];var z={};let Z=!1;this._changedPointerPositions.forEach(q=>{const se=h.getCapturedShape(q.id)||this.getIntersection(q);if(se){if(se.releaseCapture(q.id),z[se._id])return;z[se._id]=!0}const J=q.id,xe={evt:S,pointerId:J};let Xt=!1;i.Konva["_"+D+"InDblClickWindow"]?(Xt=!0,clearTimeout(this[D+"DblTimeout"])):o.DD.justDragged||(i.Konva["_"+D+"InDblClickWindow"]=!0,clearTimeout(this[D+"DblTimeout"])),this[D+"DblTimeout"]=setTimeout(function(){i.Konva["_"+D+"InDblClickWindow"]=!1},i.Konva.dblClickWindow),se&&se.isListening()?(Z=!0,this[D+"ClickEndShape"]=se,se._fireAndBubble(A.pointerup,Object.assign({},xe)),i.Konva["_"+D+"ListenClick"]&&F&&F===se&&(se._fireAndBubble(A.pointerclick,Object.assign({},xe)),Xt&&B&&B===se&&se._fireAndBubble(A.pointerdblclick,Object.assign({},xe)))):(this[D+"ClickEndShape"]=null,i.Konva["_"+D+"ListenClick"]&&this._fire(A.pointerclick,{evt:S,target:this,currentTarget:this,pointerId:J}),Xt&&this._fire(A.pointerdblclick,{evt:S,target:this,currentTarget:this,pointerId:J}))}),Z||this._fire(A.pointerup,{evt:S,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.Konva["_"+D+"ListenClick"]=!1,S.cancelable&&S.preventDefault()}_contextmenu(S){this.setPointersPositions(S);var A=this.getIntersection(this.getPointerPosition());A&&A.isListening()?A._fireAndBubble(P,{evt:S}):this._fire(P,{evt:S,target:this,currentTarget:this})}_wheel(S){this.setPointersPositions(S);var A=this.getIntersection(this.getPointerPosition());A&&A.isListening()?A._fireAndBubble(M,{evt:S}):this._fire(M,{evt:S,target:this,currentTarget:this})}_pointercancel(S){this.setPointersPositions(S);const A=h.getCapturedShape(S.pointerId)||this.getIntersection(this.getPointerPosition());A&&A._fireAndBubble(v,h.createEvent(S)),h.releaseCapture(S.pointerId)}_lostpointercapture(S){h.releaseCapture(S.pointerId)}setPointersPositions(S){var A=this._getContentPosition(),D=null,F=null;(S=S||window.event).touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(S.touches,B=>{this._pointerPositions.push({id:B.identifier,x:(B.clientX-A.left)/A.scaleX,y:(B.clientY-A.top)/A.scaleY})}),Array.prototype.forEach.call(S.changedTouches||S.touches,B=>{this._changedPointerPositions.push({id:B.identifier,x:(B.clientX-A.left)/A.scaleX,y:(B.clientY-A.top)/A.scaleY})})):(D=(S.clientX-A.left)/A.scaleX,F=(S.clientY-A.top)/A.scaleY,this.pointerPos={x:D,y:F},this._pointerPositions=[{x:D,y:F,id:e.Util._getFirstPointerId(S)}],this._changedPointerPositions=[{x:D,y:F,id:e.Util._getFirstPointerId(S)}])}_setPointerPosition(S){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(S)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var S=this.content.getBoundingClientRect();return{top:S.top,left:S.left,scaleX:S.width/this.content.clientWidth||1,scaleY:S.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),i.Konva.isBrowser){var S=this.container();if(!S)throw"Stage has no container. A container is required.";S.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),S.appendChild(this.content),this._resizeDOM()}}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(S){S.batchDraw()}),this}}n.Stage=$,$.prototype.nodeType="Stage",(0,a._registerNode)($),t.Factory.addGetterSetter($,"container")}(W3);var Yl={},Et={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Shape=n.shapes=void 0;const e=ge,t=ht,r=ue,i=Je,s=ie,o=ge,a=vn;var h="hasShadow",c="shadowRGBA",l="patternImage",d="linearGradient",u="radialGradient";let f;function m(){return f||(f=t.Util.createCanvasElement().getContext("2d"),f)}n.shapes={};class g extends i.Node{constructor(v){let b;for(super(v);b=t.Util.getRandomColor(),!b||b in n.shapes;);this.colorKey=b,n.shapes[b]=this}getContext(){return t.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return t.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(h,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(l,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const v=m().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(v&&v.setTransform){const b=new t.Transform;b.translate(this.fillPatternX(),this.fillPatternY()),b.rotate(e.Konva.getAngle(this.fillPatternRotation())),b.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),b.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const w=b.getMatrix(),C=typeof DOMMatrix>"u"?{a:w[0],b:w[1],c:w[2],d:w[3],e:w[4],f:w[5]}:new DOMMatrix(w);v.setTransform(C)}return v}}_getLinearGradient(){return this._getCache(d,this.__getLinearGradient)}__getLinearGradient(){var v=this.fillLinearGradientColorStops();if(v){for(var b=m(),w=this.fillLinearGradientStartPoint(),C=this.fillLinearGradientEndPoint(),O=b.createLinearGradient(w.x,w.y,C.x,C.y),x=0;x<v.length;x+=2)O.addColorStop(v[x],v[x+1]);return O}}_getRadialGradient(){return this._getCache(u,this.__getRadialGradient)}__getRadialGradient(){var v=this.fillRadialGradientColorStops();if(v){for(var b=m(),w=this.fillRadialGradientStartPoint(),C=this.fillRadialGradientEndPoint(),O=b.createRadialGradient(w.x,w.y,this.fillRadialGradientStartRadius(),C.x,C.y,this.fillRadialGradientEndRadius()),x=0;x<v.length;x+=2)O.addColorStop(v[x],v[x+1]);return O}}getShadowRGBA(){return this._getCache(c,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var v=t.Util.colorToRGBA(this.shadowColor());return"rgba("+v.r+","+v.g+","+v.b+","+v.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops()))}hasHitStroke(){const v=this.hitStrokeWidth();return v==="auto"?this.hasStroke():this.strokeEnabled()&&!!v}intersects(v){var b=this.getStage().bufferHitCanvas;return b.getContext().clear(),this.drawHit(b,null,!0),b.context.getImageData(Math.round(v.x),Math.round(v.y),1,1).data[3]>0}destroy(){return i.Node.prototype.destroy.call(this),delete n.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(v){var b;if(!this.getStage()||!((b=this.attrs.perfectDrawEnabled)===null||b===void 0||b))return!1;const w=v||this.hasFill(),C=this.hasStroke(),O=this.getAbsoluteOpacity()!==1;if(w&&C&&O)return!0;const x=this.hasShadow(),P=this.shadowForStrokeEnabled();return!!(w&&C&&x&&P)}setStrokeHitEnabled(v){t.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),v?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var v=this.size();return{x:this._centroid?-v.width/2:0,y:this._centroid?-v.height/2:0,width:v.width,height:v.height}}getClientRect(v={}){const b=v.skipTransform,w=v.relativeTo,C=this.getSelfRect(),O=!v.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,x=C.width+O,P=C.height+O,T=!v.skipShadow&&this.hasShadow(),k=T?this.shadowOffsetX():0,E=T?this.shadowOffsetY():0,I=x+Math.abs(k),M=P+Math.abs(E),R=T&&this.shadowBlur()||0,U={width:I+2*R,height:M+2*R,x:-(O/2+R)+Math.min(k,0)+C.x,y:-(O/2+R)+Math.min(E,0)+C.y};return b?U:this._transformedRect(U,w)}drawScene(v,b){var w,C,O=this.getLayer(),x=v||O.getCanvas(),P=x.getContext(),T=this._getCanvasCache(),k=this.getSceneFunc(),E=this.hasShadow(),I=x.isCache,M=b===this;if(!this.isVisible()&&!M)return this;if(T){P.save();var R=this.getAbsoluteTransform(b).getMatrix();return P.transform(R[0],R[1],R[2],R[3],R[4],R[5]),this._drawCachedSceneCanvas(P),P.restore(),this}if(!k)return this;if(P.save(),this._useBufferCanvas()&&!I){(C=(w=this.getStage().bufferCanvas).getContext()).clear(),C.save(),C._applyLineJoin(this);var U=this.getAbsoluteTransform(b).getMatrix();C.transform(U[0],U[1],U[2],U[3],U[4],U[5]),k.call(this,C,this),C.restore();var V=w.pixelRatio;E&&P._applyShadow(this),P._applyOpacity(this),P._applyGlobalCompositeOperation(this),P.drawImage(w._canvas,0,0,w.width/V,w.height/V)}else P._applyLineJoin(this),!M&&(U=this.getAbsoluteTransform(b).getMatrix(),P.transform(U[0],U[1],U[2],U[3],U[4],U[5]),P._applyOpacity(this),P._applyGlobalCompositeOperation(this)),E&&P._applyShadow(this),k.call(this,P,this);return P.restore(),this}drawHit(v,b,w=!1){if(!this.shouldDrawHit(b,w))return this;var C=this.getLayer(),O=v||C.hitCanvas,x=O&&O.getContext(),P=this.hitFunc()||this.sceneFunc(),T=this._getCanvasCache(),k=T&&T.hit;if(this.colorKey||t.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),k){x.save();var E=this.getAbsoluteTransform(b).getMatrix();return x.transform(E[0],E[1],E[2],E[3],E[4],E[5]),this._drawCachedHitCanvas(x),x.restore(),this}if(!P)return this;if(x.save(),x._applyLineJoin(this),this!==b){var I=this.getAbsoluteTransform(b).getMatrix();x.transform(I[0],I[1],I[2],I[3],I[4],I[5])}return P.call(this,x,this),x.restore(),this}drawHitFromCache(v=0){var b,w,C,O,x,P=this._getCanvasCache(),T=this._getCachedSceneCanvas(),k=P.hit,E=k.getContext(),I=k.getWidth(),M=k.getHeight();E.clear(),E.drawImage(T._canvas,0,0,I,M);try{for(C=(w=(b=E.getImageData(0,0,I,M)).data).length,O=t.Util._hexToRgb(this.colorKey),x=0;x<C;x+=4)w[x+3]>v?(w[x]=O.r,w[x+1]=O.g,w[x+2]=O.b,w[x+3]=255):w[x+3]=0;E.putImageData(b,0,0)}catch(R){t.Util.error("Unable to draw hit graph from cached scene canvas. "+R.message)}return this}hasPointerCapture(v){return a.hasPointerCapture(v,this)}setPointerCapture(v){a.setPointerCapture(v,this)}releaseCapture(v){a.releaseCapture(v,this)}}n.Shape=g,g.prototype._fillFunc=function(y){y.fill()},g.prototype._strokeFunc=function(y){y.stroke()},g.prototype._fillFuncHit=function(y){y.fill()},g.prototype._strokeFuncHit=function(y){y.stroke()},g.prototype._centroid=!1,g.prototype.nodeType="Shape",(0,o._registerNode)(g),g.prototype.eventListeners={},g.prototype.on.call(g.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(h)}),g.prototype.on.call(g.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(c)}),g.prototype.on.call(g.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",function(){this._clearCache(l)}),g.prototype.on.call(g.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",function(){this._clearCache(d)}),g.prototype.on.call(g.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",function(){this._clearCache(u)}),r.Factory.addGetterSetter(g,"stroke",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(g,"strokeWidth",2,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(g,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(g,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(g,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(g,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(g,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(g,"lineJoin"),r.Factory.addGetterSetter(g,"lineCap"),r.Factory.addGetterSetter(g,"sceneFunc"),r.Factory.addGetterSetter(g,"hitFunc"),r.Factory.addGetterSetter(g,"dash"),r.Factory.addGetterSetter(g,"dashOffset",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(g,"shadowColor",void 0,(0,s.getStringValidator)()),r.Factory.addGetterSetter(g,"shadowBlur",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(g,"shadowOpacity",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(g,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(g,"shadowOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(g,"shadowOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(g,"fillPatternImage"),r.Factory.addGetterSetter(g,"fill",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(g,"fillPatternX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(g,"fillPatternY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(g,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(g,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(g,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(g,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(g,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(g,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(g,"fillEnabled",!0),r.Factory.addGetterSetter(g,"strokeEnabled",!0),r.Factory.addGetterSetter(g,"shadowEnabled",!0),r.Factory.addGetterSetter(g,"dashEnabled",!0),r.Factory.addGetterSetter(g,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(g,"fillPriority","color"),r.Factory.addComponentsGetterSetter(g,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(g,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(g,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(g,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(g,"fillPatternScaleX",1,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(g,"fillPatternScaleY",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(g,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(g,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(g,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(g,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(g,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(g,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(g,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(g,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(g,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(g,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(g,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(g,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(g,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(g,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(g,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(g,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(g,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(g,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(g,"fillPatternRotation",0),r.Factory.backCompat(g,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Et),Object.defineProperty(Yl,"__esModule",{value:!0}),Yl.Layer=void 0;const ui=ht,wg=Us,go=Je,Sg=ue,b_=sr,gK=ie,mK=Et,vK=ge;var Y3=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],yK=Y3.length;class mo extends wg.Container{constructor(e){super(e),this.canvas=new b_.SceneCanvas,this.hitCanvas=new b_.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),e<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[e+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){go.Node.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!go.Node.prototype.moveUp.call(this))return!1;var e=this.getStage();return!(!e||!e.content)&&(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(go.Node.prototype.moveDown.call(this)){var e=this.getStage();if(e){var t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(go.Node.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return go.Node.prototype.remove.call(this),e&&e.parentNode&&ui.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:t}){return this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t),this._setSmoothEnabled(),this}_validateAdd(e){var t=e.getType();t!=="Group"&&t!=="Shape"&&ui.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return(e=e||{}).width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),go.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){const e=this.visible();this.canvas._canvas.style.display=e?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){ui.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){ui.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,ui.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var t=1,r=!1;;){for(let i=0;i<yK;i++){const s=Y3[i],o=this._getIntersection({x:e.x+s.x*t,y:e.y+s.y*t}),a=o.shape;if(a)return a;if(r=!!o.antialiased,!o.antialiased)break}if(!r)return null;t+=1}}_getIntersection(e){const t=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(e.x*t),Math.round(e.y*t),1,1).data,i=r[3];if(i===255){const s=ui.Util._rgbToHex(r[0],r[1],r[2]),o=mK.shapes["#"+s];return o?{shape:o}:{antialiased:!0}}return i>0?{antialiased:!0}:{}}drawScene(e,t){var r=this.getLayer(),i=e||r&&r.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),wg.Container.prototype.drawScene.call(this,i,t),this._fire("draw",{node:this}),this}drawHit(e,t){var r=this.getLayer(),i=e||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),wg.Container.prototype.drawHit.call(this,i,t),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){ui.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return ui.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(this.parent&&this.parent.content){var e=this.parent;this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}}Yl.Layer=mo,mo.prototype.nodeType="Layer",(0,vK._registerNode)(mo),Sg.Factory.addGetterSetter(mo,"imageSmoothingEnabled",!0),Sg.Factory.addGetterSetter(mo,"clearBeforeDraw",!0),Sg.Factory.addGetterSetter(mo,"hitGraphEnabled",!0,(0,gK.getBooleanValidator)());var Cu={};Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.FastLayer=void 0;const bK=ht,_K=Yl,wK=ge;class Cg extends _K.Layer{constructor(e){super(e),this.listening(!1),bK.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Cu.FastLayer=Cg,Cg.prototype.nodeType="FastLayer",(0,wK._registerNode)(Cg);var da={};Object.defineProperty(da,"__esModule",{value:!0}),da.Group=void 0;const SK=ht,CK=Us,xK=ge;class xg extends CK.Container{_validateAdd(e){var t=e.getType();t!=="Group"&&t!=="Shape"&&SK.Util.throw("You may only add groups and shapes to groups.")}}da.Group=xg,xg.prototype.nodeType="Group",(0,xK._registerNode)(xg);var ua={};Object.defineProperty(ua,"__esModule",{value:!0}),ua.Animation=void 0;const Og=ge,__=ht;var Pg=Og.glob.performance&&Og.glob.performance.now?function(){return Og.glob.performance.now()}:function(){return new Date().getTime()};class br{constructor(e,t){this.id=br.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Pg(),frameRate:0},this.func=e,this.setLayers(t)}setLayers(e){var t=[];return t=e?e.length>0?e:[e]:[],this.layers=t,this}getLayers(){return this.layers}addLayer(e){var t,r=this.layers,i=r.length;for(t=0;t<i;t++)if(r[t]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){var e,t=br.animations,r=t.length;for(e=0;e<r;e++)if(t[e].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Pg(),br._addAnimation(this),this}stop(){return br._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){var t,r=e.id,i=this.animations,s=i.length;for(t=0;t<s;t++)if(i[t].id===r){this.animations.splice(t,1);break}}static _runFrames(){var e,t,r,i,s,o,a,h,c={},l=this.animations;for(i=0;i<l.length;i++)if(t=(e=l[i]).layers,r=e.func,e._updateFrameObject(Pg()),o=t.length,!r||r.call(e,e.frame)!==!1)for(s=0;s<o;s++)(a=t[s])._id!==void 0&&(c[a._id]=a);for(h in c)c.hasOwnProperty(h)&&c[h].batchDraw()}static _animationLoop(){var e=br;e.animations.length?(e._runFrames(),__.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,__.Util.requestAnimFrame(this._animationLoop))}}ua.Animation=br,br.animations=[],br.animIdCounter=0,br.animRunning=!1;var w_={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Easings=n.Tween=void 0;const e=ht,t=ua,r=Je,i=ge;var s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=0,a=["fill","stroke","shadowColor"];class h{constructor(d,u,f,m,g,y,v){this.prop=d,this.propFunc=u,this.begin=m,this._pos=m,this.duration=y,this._change=0,this.prevPos=0,this.yoyo=v,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=f,this._change=g-this.begin,this.pause()}fire(d){var u=this[d];u&&u()}setTime(d){d>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():d<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=d,this.update())}getTime(){return this._time}setPosition(d){this.prevPos=this._pos,this.propFunc(d),this._pos=d}getPosition(d){return d===void 0&&(d=this._time),this.func(d,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(d){this.pause(),this._time=d,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var d=this.getTimer()-this._startTime;this.state===2?this.setTime(d):this.state===3&&this.setTime(this.duration-d)}pause(){this.state=1,this.fire("onPause")}getTimer(){return new Date().getTime()}}class c{constructor(d){var u,f,m=this,g=d.node,y=g._id,v=d.easing||n.Easings.Linear,b=!!d.yoyo;u=d.duration===void 0?.3:d.duration===0?.001:d.duration,this.node=g,this._id=o++;var w=g.getLayer()||(g instanceof i.Konva.Stage?g.getLayers():null);for(f in w||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new t.Animation(function(){m.tween.onEnterFrame()},w),this.tween=new h(f,function(C){m._tweenFunc(C)},v,0,1,1e3*u,b),this._addListeners(),c.attrs[y]||(c.attrs[y]={}),c.attrs[y][this._id]||(c.attrs[y][this._id]={}),c.tweens[y]||(c.tweens[y]={}),d)s[f]===void 0&&this._addAttr(f,d[f]);this.reset(),this.onFinish=d.onFinish,this.onReset=d.onReset,this.onUpdate=d.onUpdate}_addAttr(d,u){var f,m,g,y,v,b,w,C,O=this.node,x=O._id;if((g=c.tweens[x][d])&&delete c.attrs[x][g][d],f=O.getAttr(d),e.Util._isArray(u))if(m=[],v=Math.max(u.length,f.length),d==="points"&&u.length!==f.length&&(u.length>f.length?(w=f,f=e.Util._prepareArrayForTween(f,u,O.closed())):(b=u,u=e.Util._prepareArrayForTween(u,f,O.closed()))),d.indexOf("fill")===0)for(y=0;y<v;y++)if(y%2==0)m.push(u[y]-f[y]);else{var P=e.Util.colorToRGBA(f[y]);C=e.Util.colorToRGBA(u[y]),f[y]=P,m.push({r:C.r-P.r,g:C.g-P.g,b:C.b-P.b,a:C.a-P.a})}else for(y=0;y<v;y++)m.push(u[y]-f[y]);else a.indexOf(d)!==-1?(f=e.Util.colorToRGBA(f),m={r:(C=e.Util.colorToRGBA(u)).r-f.r,g:C.g-f.g,b:C.b-f.b,a:C.a-f.a}):m=u-f;c.attrs[x][this._id][d]={start:f,diff:m,end:u,trueEnd:b,trueStart:w},c.tweens[x][d]=this._id}_tweenFunc(d){var u,f,m,g,y,v,b,w,C=this.node,O=c.attrs[C._id][this._id];for(u in O){if(m=(f=O[u]).start,g=f.diff,w=f.end,e.Util._isArray(m))if(y=[],b=Math.max(m.length,w.length),u.indexOf("fill")===0)for(v=0;v<b;v++)v%2==0?y.push((m[v]||0)+g[v]*d):y.push("rgba("+Math.round(m[v].r+g[v].r*d)+","+Math.round(m[v].g+g[v].g*d)+","+Math.round(m[v].b+g[v].b*d)+","+(m[v].a+g[v].a*d)+")");else for(v=0;v<b;v++)y.push((m[v]||0)+g[v]*d);else y=a.indexOf(u)!==-1?"rgba("+Math.round(m.r+g.r*d)+","+Math.round(m.g+g.g*d)+","+Math.round(m.b+g.b*d)+","+(m.a+g.a*d)+")":m+g*d;C.setAttr(u,y)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var d=this.node,u=c.attrs[d._id][this._id];u.points&&u.points.trueEnd&&d.setAttr("points",u.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var d=this.node,u=c.attrs[d._id][this._id];u.points&&u.points.trueStart&&d.points(u.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(d){return this.tween.seek(1e3*d),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var d,u=this.node._id,f=this._id,m=c.tweens[u];for(d in this.pause(),m)delete c.tweens[u][d];delete c.attrs[u][f]}}n.Tween=c,c.attrs={},c.tweens={},r.Node.prototype.to=function(l){var d=l.onFinish;l.node=this,l.onFinish=function(){this.destroy(),d&&d()},new c(l).play()},n.Easings={BackEaseIn(l,d,u,f){var m=1.70158;return u*(l/=f)*l*((m+1)*l-m)+d},BackEaseOut(l,d,u,f){var m=1.70158;return u*((l=l/f-1)*l*((m+1)*l+m)+1)+d},BackEaseInOut(l,d,u,f){var m=1.70158;return(l/=f/2)<1?u/2*(l*l*((1+(m*=1.525))*l-m))+d:u/2*((l-=2)*l*((1+(m*=1.525))*l+m)+2)+d},ElasticEaseIn(l,d,u,f,m,g){var y=0;return l===0?d:(l/=f)==1?d+u:(g||(g=.3*f),!m||m<Math.abs(u)?(m=u,y=g/4):y=g/(2*Math.PI)*Math.asin(u/m),-m*Math.pow(2,10*(l-=1))*Math.sin((l*f-y)*(2*Math.PI)/g)+d)},ElasticEaseOut(l,d,u,f,m,g){var y=0;return l===0?d:(l/=f)==1?d+u:(g||(g=.3*f),!m||m<Math.abs(u)?(m=u,y=g/4):y=g/(2*Math.PI)*Math.asin(u/m),m*Math.pow(2,-10*l)*Math.sin((l*f-y)*(2*Math.PI)/g)+u+d)},ElasticEaseInOut(l,d,u,f,m,g){var y=0;return l===0?d:(l/=f/2)==2?d+u:(g||(g=f*(.3*1.5)),!m||m<Math.abs(u)?(m=u,y=g/4):y=g/(2*Math.PI)*Math.asin(u/m),l<1?m*Math.pow(2,10*(l-=1))*Math.sin((l*f-y)*(2*Math.PI)/g)*-.5+d:m*Math.pow(2,-10*(l-=1))*Math.sin((l*f-y)*(2*Math.PI)/g)*.5+u+d)},BounceEaseOut:(l,d,u,f)=>(l/=f)<1/2.75?u*(7.5625*l*l)+d:l<2/2.75?u*(7.5625*(l-=1.5/2.75)*l+.75)+d:l<2.5/2.75?u*(7.5625*(l-=2.25/2.75)*l+.9375)+d:u*(7.5625*(l-=2.625/2.75)*l+.984375)+d,BounceEaseIn:(l,d,u,f)=>u-n.Easings.BounceEaseOut(f-l,0,u,f)+d,BounceEaseInOut:(l,d,u,f)=>l<f/2?.5*n.Easings.BounceEaseIn(2*l,0,u,f)+d:.5*n.Easings.BounceEaseOut(2*l-f,0,u,f)+.5*u+d,EaseIn:(l,d,u,f)=>u*(l/=f)*l+d,EaseOut:(l,d,u,f)=>-u*(l/=f)*(l-2)+d,EaseInOut:(l,d,u,f)=>(l/=f/2)<1?u/2*l*l+d:-u/2*(--l*(l-2)-1)+d,StrongEaseIn:(l,d,u,f)=>u*(l/=f)*l*l*l*l+d,StrongEaseOut:(l,d,u,f)=>u*((l=l/f-1)*l*l*l*l+1)+d,StrongEaseInOut:(l,d,u,f)=>(l/=f/2)<1?u/2*l*l*l*l*l+d:u/2*((l-=2)*l*l*l*l+2)+d,Linear:(l,d,u,f)=>u*l/f+d}})(w_),function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Konva=void 0;const e=ge,t=ht,r=Je,i=Us,s=W3,o=Yl,a=Cu,h=da,c=zp,l=Et,d=ua,u=w_,f=Hr,m=sr;n.Konva=t.Util._assign(e.Konva,{Util:t.Util,Transform:t.Transform,Node:r.Node,Container:i.Container,Stage:s.Stage,stages:s.stages,Layer:o.Layer,FastLayer:a.FastLayer,Group:h.Group,DD:c.DD,Shape:l.Shape,shapes:l.shapes,Animation:d.Animation,Tween:u.Tween,Easings:u.Easings,Context:f.Context,Canvas:m.Canvas}),n.default=n.Konva}(V3);var xu={};Object.defineProperty(xu,"__esModule",{value:!0}),xu.Arc=void 0;const mc=ue,OK=Et,S_=ge,vc=ie,PK=ge;class Fr extends OK.Shape{_sceneFunc(e){var t=S_.Konva.getAngle(this.angle()),r=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,t,r),e.arc(0,0,this.innerRadius(),t,0,!r),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),t=this.outerRadius(),r=this.clockwise(),i=S_.Konva.getAngle(r?360-this.angle():this.angle()),s=Math.cos(Math.min(i,Math.PI)),o=Math.sin(Math.min(Math.max(Math.PI,i),3*Math.PI/2)),a=Math.sin(Math.min(i,Math.PI/2)),h=s*(s>0?e:t),c=o*(o>0?e:t),l=a*(a>0?t:e);return{x:h,y:r?-1*l:c,width:1*t-h,height:l-c}}}xu.Arc=Fr,Fr.prototype._centroid=!0,Fr.prototype.className="Arc",Fr.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,PK._registerNode)(Fr),mc.Factory.addGetterSetter(Fr,"innerRadius",0,(0,vc.getNumberValidator)()),mc.Factory.addGetterSetter(Fr,"outerRadius",0,(0,vc.getNumberValidator)()),mc.Factory.addGetterSetter(Fr,"angle",0,(0,vc.getNumberValidator)()),mc.Factory.addGetterSetter(Fr,"clockwise",!1,(0,vc.getBooleanValidator)());var Ou={},ql={};Object.defineProperty(ql,"__esModule",{value:!0}),ql.Line=void 0;const yc=ue,EK=Et,C_=ie,TK=ge;function d0(n,e,t,r,i,s,o){var a=Math.sqrt(Math.pow(t-n,2)+Math.pow(r-e,2)),h=Math.sqrt(Math.pow(i-t,2)+Math.pow(s-r,2)),c=o*a/(a+h),l=o*h/(a+h);return[t-c*(i-n),r-c*(s-e),t+l*(i-n),r+l*(s-e)]}function x_(n,e){var t,r,i=n.length,s=[];for(t=2;t<i-2;t+=2)r=d0(n[t-2],n[t-1],n[t],n[t+1],n[t+2],n[t+3],e),isNaN(r[0])||(s.push(r[0]),s.push(r[1]),s.push(n[t]),s.push(n[t+1]),s.push(r[2]),s.push(r[3]));return s}class pi extends EK.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var t,r,i,s=this.points(),o=s.length,a=this.tension(),h=this.closed(),c=this.bezier();if(o){if(e.beginPath(),e.moveTo(s[0],s[1]),a!==0&&o>4){for(r=(t=this.getTensionPoints()).length,i=h?0:4,h||e.quadraticCurveTo(t[0],t[1],t[2],t[3]);i<r-2;)e.bezierCurveTo(t[i++],t[i++],t[i++],t[i++],t[i++],t[i++]);h||e.quadraticCurveTo(t[r-2],t[r-1],s[o-2],s[o-1])}else if(c)for(i=2;i<o;)e.bezierCurveTo(s[i++],s[i++],s[i++],s[i++],s[i++],s[i++]);else for(i=2;i<o;i+=2)e.lineTo(s[i],s[i+1]);h?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():x_(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),t=e.length,r=this.tension(),i=d0(e[t-2],e[t-1],e[0],e[1],e[2],e[3],r),s=d0(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],r),o=x_(e,r);return[i[2],i[3]].concat(o).concat([s[0],s[1],e[t-2],e[t-1],s[2],s[3],i[0],i[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};for(var t,r,i=(e=this.tension()!==0?[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:this.points())[0],s=e[0],o=e[1],a=e[1],h=0;h<e.length/2;h++)t=e[2*h],r=e[2*h+1],i=Math.min(i,t),s=Math.max(s,t),o=Math.min(o,r),a=Math.max(a,r);return{x:i,y:o,width:s-i,height:a-o}}}ql.Line=pi,pi.prototype.className="Line",pi.prototype._attrsAffectingSize=["points","bezier","tension"],(0,TK._registerNode)(pi),yc.Factory.addGetterSetter(pi,"closed",!1),yc.Factory.addGetterSetter(pi,"bezier",!1),yc.Factory.addGetterSetter(pi,"tension",0,(0,C_.getNumberValidator)()),yc.Factory.addGetterSetter(pi,"points",[],(0,C_.getNumberArrayValidator)());var pa={};Object.defineProperty(pa,"__esModule",{value:!0}),pa.Path=void 0;const kK=ue,AK=Et,IK=ge;class Ut extends AK.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this.dataArray=Ut.parsePathData(this.data()),this.pathLength=0;for(var t=0;t<this.dataArray.length;++t)this.pathLength+=this.dataArray[t].pathLength;this.on("dataChange.konva",function(){this.dataArray=Ut.parsePathData(this.data()),this.pathLength=0;for(var r=0;r<this.dataArray.length;++r)this.pathLength+=this.dataArray[r].pathLength})}_sceneFunc(e){var t=this.dataArray;e.beginPath();for(var r=!1,i=0;i<t.length;i++){var s=t[i].command,o=t[i].points;switch(s){case"L":e.lineTo(o[0],o[1]);break;case"M":e.moveTo(o[0],o[1]);break;case"C":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":e.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var a=o[0],h=o[1],c=o[2],l=o[3],d=o[4],u=o[5],f=o[6],m=o[7],g=c>l?c:l,y=c>l?1:c/l,v=c>l?l/c:1;e.translate(a,h),e.rotate(f),e.scale(y,v),e.arc(0,0,g,d,d+u,1-m),e.scale(1/y,1/v),e.rotate(-f),e.translate(-a,-h);break;case"z":r=!0,e.closePath()}}r||this.hasFill()?e.fillStrokeShape(this):e.strokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(c){if(c.command==="A"){var l=c.points[4],d=c.points[5],u=c.points[4]+d,f=Math.PI/180;if(Math.abs(l-u)<f&&(f=Math.abs(l-u)),d<0)for(let m=l-f;m>u;m-=f){const g=Ut.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],m,0);e.push(g.x,g.y)}else for(let m=l+f;m<u;m+=f){const g=Ut.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],m,0);e.push(g.x,g.y)}}else if(c.command==="C")for(let m=0;m<=1;m+=.01){const g=Ut.getPointOnCubicBezier(m,c.start.x,c.start.y,c.points[0],c.points[1],c.points[2],c.points[3],c.points[4],c.points[5]);e.push(g.x,g.y)}else e=e.concat(c.points)});for(var t,r,i=e[0],s=e[0],o=e[1],a=e[1],h=0;h<e.length/2;h++)t=e[2*h],r=e[2*h+1],isNaN(t)||(i=Math.min(i,t),s=Math.max(s,t)),isNaN(r)||(o=Math.min(o,r),a=Math.max(a,r));return{x:i,y:o,width:s-i,height:a-o}}getLength(){return this.pathLength}getPointAtLength(e){var t,r=0,i=this.dataArray.length;if(!i)return null;for(;r<i&&e>this.dataArray[r].pathLength;)e-=this.dataArray[r].pathLength,++r;if(r===i)return{x:(t=this.dataArray[r-1].points.slice(-2))[0],y:t[1]};if(e<.01)return{x:(t=this.dataArray[r].points.slice(0,2))[0],y:t[1]};var s=this.dataArray[r],o=s.points;switch(s.command){case"L":return Ut.getPointOnLine(e,s.start.x,s.start.y,o[0],o[1]);case"C":return Ut.getPointOnCubicBezier(e/s.pathLength,s.start.x,s.start.y,o[0],o[1],o[2],o[3],o[4],o[5]);case"Q":return Ut.getPointOnQuadraticBezier(e/s.pathLength,s.start.x,s.start.y,o[0],o[1],o[2],o[3]);case"A":var a=o[0],h=o[1],c=o[2],l=o[3],d=o[4],u=o[5],f=o[6];return d+=u*e/s.pathLength,Ut.getPointOnEllipticalArc(a,h,c,l,d,f)}return null}static getLineLength(e,t,r,i){return Math.sqrt((r-e)*(r-e)+(i-t)*(i-t))}static getPointOnLine(e,t,r,i,s,o,a){o===void 0&&(o=t),a===void 0&&(a=r);var h=(s-r)/(i-t+1e-8),c=Math.sqrt(e*e/(1+h*h));i<t&&(c*=-1);var l,d=h*c;if(i===t)l={x:o,y:a+d};else if((a-r)/(o-t+1e-8)===h)l={x:o+c,y:a+d};else{var u,f,m=this.getLineLength(t,r,i,s),g=(o-t)*(i-t)+(a-r)*(s-r);u=t+(g/=m*m)*(i-t),f=r+g*(s-r);var y=this.getLineLength(o,a,u,f),v=Math.sqrt(e*e-y*y);c=Math.sqrt(v*v/(1+h*h)),i<t&&(c*=-1),l={x:u+c,y:f+(d=h*c)}}return l}static getPointOnCubicBezier(e,t,r,i,s,o,a,h,c){function l(m){return m*m*m}function d(m){return 3*m*m*(1-m)}function u(m){return 3*m*(1-m)*(1-m)}function f(m){return(1-m)*(1-m)*(1-m)}return{x:h*l(e)+o*d(e)+i*u(e)+t*f(e),y:c*l(e)+a*d(e)+s*u(e)+r*f(e)}}static getPointOnQuadraticBezier(e,t,r,i,s,o,a){function h(d){return d*d}function c(d){return 2*d*(1-d)}function l(d){return(1-d)*(1-d)}return{x:o*h(e)+i*c(e)+t*l(e),y:a*h(e)+s*c(e)+r*l(e)}}static getPointOnEllipticalArc(e,t,r,i,s,o){var a=Math.cos(o),h=Math.sin(o),c=r*Math.cos(s),l=i*Math.sin(s);return{x:e+(c*a-l*h),y:t+(c*h+l*a)}}static parsePathData(e){if(!e)return[];var t=e,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(var i=0;i<r.length;i++)t=t.replace(new RegExp(r[i],"g"),"|"+r[i]);var s,o=t.split("|"),a=[],h=[],c=0,l=0,d=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(i=1;i<o.length;i++){var u=o[i],f=u.charAt(0);for(u=u.slice(1),h.length=0;s=d.exec(u);)h.push(s[0]);for(var m=[],g=0,y=h.length;g<y;g++)if(h[g]!=="00"){var v=parseFloat(h[g]);isNaN(v)?m.push(0):m.push(v)}else m.push(0,0);for(;m.length>0&&!isNaN(m[0]);){var b,w,C,O,x,P,T,k,E,I,M=null,R=[],U=c,V=l;switch(f){case"l":c+=m.shift(),l+=m.shift(),M="L",R.push(c,l);break;case"L":c=m.shift(),l=m.shift(),R.push(c,l);break;case"m":var H=m.shift(),K=m.shift();if(c+=H,l+=K,M="M",a.length>2&&a[a.length-1].command==="z"){for(var $=a.length-2;$>=0;$--)if(a[$].command==="M"){c=a[$].points[0]+H,l=a[$].points[1]+K;break}}R.push(c,l),f="l";break;case"M":c=m.shift(),l=m.shift(),M="M",R.push(c,l),f="L";break;case"h":c+=m.shift(),M="L",R.push(c,l);break;case"H":c=m.shift(),M="L",R.push(c,l);break;case"v":l+=m.shift(),M="L",R.push(c,l);break;case"V":l=m.shift(),M="L",R.push(c,l);break;case"C":R.push(m.shift(),m.shift(),m.shift(),m.shift()),c=m.shift(),l=m.shift(),R.push(c,l);break;case"c":R.push(c+m.shift(),l+m.shift(),c+m.shift(),l+m.shift()),c+=m.shift(),l+=m.shift(),M="C",R.push(c,l);break;case"S":w=c,C=l,(b=a[a.length-1]).command==="C"&&(w=c+(c-b.points[2]),C=l+(l-b.points[3])),R.push(w,C,m.shift(),m.shift()),c=m.shift(),l=m.shift(),M="C",R.push(c,l);break;case"s":w=c,C=l,(b=a[a.length-1]).command==="C"&&(w=c+(c-b.points[2]),C=l+(l-b.points[3])),R.push(w,C,c+m.shift(),l+m.shift()),c+=m.shift(),l+=m.shift(),M="C",R.push(c,l);break;case"Q":R.push(m.shift(),m.shift()),c=m.shift(),l=m.shift(),R.push(c,l);break;case"q":R.push(c+m.shift(),l+m.shift()),c+=m.shift(),l+=m.shift(),M="Q",R.push(c,l);break;case"T":w=c,C=l,(b=a[a.length-1]).command==="Q"&&(w=c+(c-b.points[0]),C=l+(l-b.points[1])),c=m.shift(),l=m.shift(),M="Q",R.push(w,C,c,l);break;case"t":w=c,C=l,(b=a[a.length-1]).command==="Q"&&(w=c+(c-b.points[0]),C=l+(l-b.points[1])),c+=m.shift(),l+=m.shift(),M="Q",R.push(w,C,c,l);break;case"A":O=m.shift(),x=m.shift(),P=m.shift(),T=m.shift(),k=m.shift(),E=c,I=l,c=m.shift(),l=m.shift(),M="A",R=this.convertEndpointToCenterParameterization(E,I,c,l,T,k,O,x,P);break;case"a":O=m.shift(),x=m.shift(),P=m.shift(),T=m.shift(),k=m.shift(),E=c,I=l,c+=m.shift(),l+=m.shift(),M="A",R=this.convertEndpointToCenterParameterization(E,I,c,l,T,k,O,x,P)}a.push({command:M||f,points:R,start:{x:U,y:V},pathLength:this.calcLength(U,V,M||f,R)})}f!=="z"&&f!=="Z"||a.push({command:"z",points:[],start:void 0,pathLength:0})}return a}static calcLength(e,t,r,i){var s,o,a,h,c=Ut;switch(r){case"L":return c.getLineLength(e,t,i[0],i[1]);case"C":for(s=0,o=c.getPointOnCubicBezier(0,e,t,i[0],i[1],i[2],i[3],i[4],i[5]),h=.01;h<=1;h+=.01)a=c.getPointOnCubicBezier(h,e,t,i[0],i[1],i[2],i[3],i[4],i[5]),s+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;return s;case"Q":for(s=0,o=c.getPointOnQuadraticBezier(0,e,t,i[0],i[1],i[2],i[3]),h=.01;h<=1;h+=.01)a=c.getPointOnQuadraticBezier(h,e,t,i[0],i[1],i[2],i[3]),s+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;return s;case"A":s=0;var l=i[4],d=i[5],u=i[4]+d,f=Math.PI/180;if(Math.abs(l-u)<f&&(f=Math.abs(l-u)),o=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),d<0)for(h=l-f;h>u;h-=f)a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],h,0),s+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(h=l+f;h<u;h+=f)a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],h,0),s+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),s+=c.getLineLength(o.x,o.y,a.x,a.y)}return 0}static convertEndpointToCenterParameterization(e,t,r,i,s,o,a,h,c){var l=c*(Math.PI/180),d=Math.cos(l)*(e-r)/2+Math.sin(l)*(t-i)/2,u=-1*Math.sin(l)*(e-r)/2+Math.cos(l)*(t-i)/2,f=d*d/(a*a)+u*u/(h*h);f>1&&(a*=Math.sqrt(f),h*=Math.sqrt(f));var m=Math.sqrt((a*a*(h*h)-a*a*(u*u)-h*h*(d*d))/(a*a*(u*u)+h*h*(d*d)));s===o&&(m*=-1),isNaN(m)&&(m=0);var g=m*a*u/h,y=m*-h*d/a,v=(e+r)/2+Math.cos(l)*g-Math.sin(l)*y,b=(t+i)/2+Math.sin(l)*g+Math.cos(l)*y,w=function(E){return Math.sqrt(E[0]*E[0]+E[1]*E[1])},C=function(E,I){return(E[0]*I[0]+E[1]*I[1])/(w(E)*w(I))},O=function(E,I){return(E[0]*I[1]<E[1]*I[0]?-1:1)*Math.acos(C(E,I))},x=O([1,0],[(d-g)/a,(u-y)/h]),P=[(d-g)/a,(u-y)/h],T=[(-1*d-g)/a,(-1*u-y)/h],k=O(P,T);return C(P,T)<=-1&&(k=Math.PI),C(P,T)>=1&&(k=0),o===0&&k>0&&(k-=2*Math.PI),o===1&&k<0&&(k+=2*Math.PI),[v,b,a,h,x,k,l,o]}}pa.Path=Ut,Ut.prototype.className="Path",Ut.prototype._attrsAffectingSize=["data"],(0,IK._registerNode)(Ut),kK.Factory.addGetterSetter(Ut,"data"),Object.defineProperty(Ou,"__esModule",{value:!0}),Ou.Arrow=void 0;const bc=ue,MK=ql,O_=ie,NK=ge,P_=pa;class hs extends MK.Line{_sceneFunc(e){super._sceneFunc(e);var t=2*Math.PI,r=this.points(),i=r,s=this.tension()!==0&&r.length>4;s&&(i=this.getTensionPoints());var o,a,h=this.pointerLength(),c=r.length;if(s){const u=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],r[c-2],r[c-1]],f=P_.Path.calcLength(i[i.length-4],i[i.length-3],"C",u),m=P_.Path.getPointOnQuadraticBezier(Math.min(1,1-h/f),u[0],u[1],u[2],u[3],u[4],u[5]);o=r[c-2]-m.x,a=r[c-1]-m.y}else o=r[c-2]-r[c-4],a=r[c-1]-r[c-3];var l=(Math.atan2(a,o)+t)%t,d=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(r[c-2],r[c-1]),e.rotate(l),e.moveTo(0,0),e.lineTo(-h,d/2),e.lineTo(-h,-d/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(r[0],r[1]),s?(o=(i[0]+i[2])/2-r[0],a=(i[1]+i[3])/2-r[1]):(o=r[2]-r[0],a=r[3]-r[1]),e.rotate((Math.atan2(-a,-o)+t)%t),e.moveTo(0,0),e.lineTo(-h,d/2),e.lineTo(-h,-d/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var t=this.dashEnabled();t&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),t&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),t=this.pointerWidth()/2;return{x:e.x-t,y:e.y-t,width:e.width+2*t,height:e.height+2*t}}}Ou.Arrow=hs,hs.prototype.className="Arrow",(0,NK._registerNode)(hs),bc.Factory.addGetterSetter(hs,"pointerLength",10,(0,O_.getNumberValidator)()),bc.Factory.addGetterSetter(hs,"pointerWidth",10,(0,O_.getNumberValidator)()),bc.Factory.addGetterSetter(hs,"pointerAtBeginning",!1),bc.Factory.addGetterSetter(hs,"pointerAtEnding",!0);var Pu={};Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.Circle=void 0;const DK=ue,$K=Et,RK=ie,FK=ge;class vo extends $K.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}Pu.Circle=vo,vo.prototype._centroid=!0,vo.prototype.className="Circle",vo.prototype._attrsAffectingSize=["radius"],(0,FK._registerNode)(vo),DK.Factory.addGetterSetter(vo,"radius",0,(0,RK.getNumberValidator)());var Eu={};Object.defineProperty(Eu,"__esModule",{value:!0}),Eu.Ellipse=void 0;const Eg=ue,LK=Et,E_=ie,jK=ge;class fi extends LK.Shape{_sceneFunc(e){var t=this.radiusX(),r=this.radiusY();e.beginPath(),e.save(),t!==r&&e.scale(1,r/t),e.arc(0,0,t,0,2*Math.PI,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Eu.Ellipse=fi,fi.prototype.className="Ellipse",fi.prototype._centroid=!0,fi.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,jK._registerNode)(fi),Eg.Factory.addComponentsGetterSetter(fi,"radius",["x","y"]),Eg.Factory.addGetterSetter(fi,"radiusX",0,(0,E_.getNumberValidator)()),Eg.Factory.addGetterSetter(fi,"radiusY",0,(0,E_.getNumberValidator)());var Tu={};Object.defineProperty(Tu,"__esModule",{value:!0}),Tu.Image=void 0;const BK=ht,yo=ue,GK=Et,_c=ie,zK=ge;class qn extends GK.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const t=this.getWidth(),r=this.getHeight(),i=this.attrs.image;let s;if(i){const o=this.attrs.cropWidth,a=this.attrs.cropHeight;s=o&&a?[i,this.cropX(),this.cropY(),o,a,0,0,t,r]:[i,0,0,t,r]}(this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,t,r),e.closePath(),e.fillStrokeShape(this)),i&&e.drawImage.apply(e,s)}_hitFunc(e){var t=this.width(),r=this.height();e.beginPath(),e.rect(0,0,t,r),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,t;return(e=this.attrs.width)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.width}getHeight(){var e,t;return(e=this.attrs.height)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.height}static fromURL(e,t,r=null){var i=BK.Util.createImageElement();i.onload=function(){var s=new qn({image:i});t(s)},i.onerror=r,i.crossOrigin="Anonymous",i.src=e}}Tu.Image=qn,qn.prototype.className="Image",(0,zK._registerNode)(qn),yo.Factory.addGetterSetter(qn,"image"),yo.Factory.addComponentsGetterSetter(qn,"crop",["x","y","width","height"]),yo.Factory.addGetterSetter(qn,"cropX",0,(0,_c.getNumberValidator)()),yo.Factory.addGetterSetter(qn,"cropY",0,(0,_c.getNumberValidator)()),yo.Factory.addGetterSetter(qn,"cropWidth",0,(0,_c.getNumberValidator)()),yo.Factory.addGetterSetter(qn,"cropHeight",0,(0,_c.getNumberValidator)());var Wo={};Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.Tag=Wo.Label=void 0;const wc=ue,UK=Et,VK=da,Tg=ie,q3=ge;var Z3=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height"],HK=Z3.length;class kg extends VK.Group{constructor(e){super(e),this.on("add.konva",function(t){this._addListeners(t.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var t,r=this,i=function(){r._sync()};for(t=0;t<HK;t++)e.on(Z3[t]+"Change.konva",i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e,t,r,i,s,o,a,h=this.getText(),c=this.getTag();if(h&&c){switch(e=h.width(),t=h.height(),r=c.pointerDirection(),i=c.pointerWidth(),a=c.pointerHeight(),s=0,o=0,r){case"up":s=e/2,o=-1*a;break;case"right":s=e+i,o=t/2;break;case"down":s=e/2,o=t+a;break;case"left":s=-1*i,o=t/2}c.setAttrs({x:-1*s,y:-1*o,width:e,height:t}),h.setAttrs({x:-1*s,y:-1*o})}}}Wo.Label=kg,kg.prototype.className="Label",(0,q3._registerNode)(kg);class cs extends UK.Shape{_sceneFunc(e){var t=this.width(),r=this.height(),i=this.pointerDirection(),s=this.pointerWidth(),o=this.pointerHeight(),a=this.cornerRadius();let h=0,c=0,l=0,d=0;typeof a=="number"?h=c=l=d=Math.min(a,t/2,r/2):(h=Math.min(a[0]||0,t/2,r/2),c=Math.min(a[1]||0,t/2,r/2),d=Math.min(a[2]||0,t/2,r/2),l=Math.min(a[3]||0,t/2,r/2)),e.beginPath(),e.moveTo(h,0),i==="up"&&(e.lineTo((t-s)/2,0),e.lineTo(t/2,-1*o),e.lineTo((t+s)/2,0)),e.lineTo(t-c,0),e.arc(t-c,c,c,3*Math.PI/2,0,!1),i==="right"&&(e.lineTo(t,(r-o)/2),e.lineTo(t+s,r/2),e.lineTo(t,(r+o)/2)),e.lineTo(t,r-d),e.arc(t-d,r-d,d,0,Math.PI/2,!1),i==="down"&&(e.lineTo((t+s)/2,r),e.lineTo(t/2,r+o),e.lineTo((t-s)/2,r)),e.lineTo(l,r),e.arc(l,r-l,l,Math.PI/2,Math.PI,!1),i==="left"&&(e.lineTo(0,(r+o)/2),e.lineTo(-1*s,r/2),e.lineTo(0,(r-o)/2)),e.lineTo(0,h),e.arc(h,h,h,Math.PI,3*Math.PI/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,t=0,r=this.pointerWidth(),i=this.pointerHeight(),s=this.pointerDirection(),o=this.width(),a=this.height();return s==="up"?(t-=i,a+=i):s==="down"?a+=i:s==="left"?(e-=1.5*r,o+=r):s==="right"&&(o+=1.5*r),{x:e,y:t,width:o,height:a}}}Wo.Tag=cs,cs.prototype.className="Tag",(0,q3._registerNode)(cs),wc.Factory.addGetterSetter(cs,"pointerDirection","none"),wc.Factory.addGetterSetter(cs,"pointerWidth",0,(0,Tg.getNumberValidator)()),wc.Factory.addGetterSetter(cs,"pointerHeight",0,(0,Tg.getNumberValidator)()),wc.Factory.addGetterSetter(cs,"cornerRadius",0,(0,Tg.getNumberOrArrayOfNumbersValidator)(4));var Zl={};Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.Rect=void 0;const KK=ue,WK=Et,XK=ge,YK=ie;class Sc extends WK.Shape{_sceneFunc(e){var t=this.cornerRadius(),r=this.width(),i=this.height();if(e.beginPath(),t){let s=0,o=0,a=0,h=0;typeof t=="number"?s=o=a=h=Math.min(t,r/2,i/2):(s=Math.min(t[0]||0,r/2,i/2),o=Math.min(t[1]||0,r/2,i/2),h=Math.min(t[2]||0,r/2,i/2),a=Math.min(t[3]||0,r/2,i/2)),e.moveTo(s,0),e.lineTo(r-o,0),e.arc(r-o,o,o,3*Math.PI/2,0,!1),e.lineTo(r,i-h),e.arc(r-h,i-h,h,0,Math.PI/2,!1),e.lineTo(a,i),e.arc(a,i-a,a,Math.PI/2,Math.PI,!1),e.lineTo(0,s),e.arc(s,s,s,Math.PI,3*Math.PI/2,!1)}else e.rect(0,0,r,i);e.closePath(),e.fillStrokeShape(this)}}Zl.Rect=Sc,Sc.prototype.className="Rect",(0,XK._registerNode)(Sc),KK.Factory.addGetterSetter(Sc,"cornerRadius",0,(0,YK.getNumberOrArrayOfNumbersValidator)(4));var ku={};Object.defineProperty(ku,"__esModule",{value:!0}),ku.RegularPolygon=void 0;const T_=ue,qK=Et,k_=ie,ZK=ge;class ds extends qK.Shape{_sceneFunc(e){const t=this._getPoints();e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var r=1;r<t.length;r++)e.lineTo(t[r].x,t[r].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,t=this.attrs.radius||0,r=[];for(var i=0;i<e;i++)r.push({x:t*Math.sin(2*i*Math.PI/e),y:-1*t*Math.cos(2*i*Math.PI/e)});return r}getSelfRect(){const e=this._getPoints();var t=e[0].x,r=e[0].y,i=e[0].x,s=e[0].y;return e.forEach(o=>{t=Math.min(t,o.x),r=Math.max(r,o.x),i=Math.min(i,o.y),s=Math.max(s,o.y)}),{x:t,y:i,width:r-t,height:s-i}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}ku.RegularPolygon=ds,ds.prototype.className="RegularPolygon",ds.prototype._centroid=!0,ds.prototype._attrsAffectingSize=["radius"],(0,ZK._registerNode)(ds),T_.Factory.addGetterSetter(ds,"radius",0,(0,k_.getNumberValidator)()),T_.Factory.addGetterSetter(ds,"sides",0,(0,k_.getNumberValidator)());var Au={};Object.defineProperty(Au,"__esModule",{value:!0}),Au.Ring=void 0;const A_=ue,QK=Et,I_=ie,JK=ge;var M_=2*Math.PI;class us extends QK.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,M_,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),M_,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Au.Ring=us,us.prototype.className="Ring",us.prototype._centroid=!0,us.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,JK._registerNode)(us),A_.Factory.addGetterSetter(us,"innerRadius",0,(0,I_.getNumberValidator)()),A_.Factory.addGetterSetter(us,"outerRadius",0,(0,I_.getNumberValidator)());var Iu={};Object.defineProperty(Iu,"__esModule",{value:!0}),Iu.Sprite=void 0;const ps=ue,eW=Et,tW=ua,N_=ie,nW=ge;class fr extends eW.Shape{constructor(e){super(e),this._updated=!0,this.anim=new tW.Animation(()=>{var t=this._updated;return this._updated=!1,t}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var t=this.animation(),r=this.frameIndex(),i=4*r,s=this.animations()[t],o=this.frameOffsets(),a=s[i+0],h=s[i+1],c=s[i+2],l=s[i+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,c,l),e.closePath(),e.fillStrokeShape(this)),d)if(o){var u=o[t],f=2*r;e.drawImage(d,a,h,c,l,u[f+0],u[f+1],c,l)}else e.drawImage(d,a,h,c,l,0,0,c,l)}_hitFunc(e){var t=this.animation(),r=this.frameIndex(),i=4*r,s=this.animations()[t],o=this.frameOffsets(),a=s[i+2],h=s[i+3];if(e.beginPath(),o){var c=o[t],l=2*r;e.rect(c[l+0],c[l+1],a,h)}else e.rect(0,0,a,h);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),t=this.animation();e<this.animations()[t].length/4-1?this.frameIndex(e+1):this.frameIndex(0)}}Iu.Sprite=fr,fr.prototype.className="Sprite",(0,nW._registerNode)(fr),ps.Factory.addGetterSetter(fr,"animation"),ps.Factory.addGetterSetter(fr,"animations"),ps.Factory.addGetterSetter(fr,"frameOffsets"),ps.Factory.addGetterSetter(fr,"image"),ps.Factory.addGetterSetter(fr,"frameIndex",0,(0,N_.getNumberValidator)()),ps.Factory.addGetterSetter(fr,"frameRate",17,(0,N_.getNumberValidator)()),ps.Factory.backCompat(fr,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var Mu={};Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.Star=void 0;const Ag=ue,rW=Et,Ig=ie,iW=ge;class gi extends rW.Shape{_sceneFunc(e){var t=this.innerRadius(),r=this.outerRadius(),i=this.numPoints();e.beginPath(),e.moveTo(0,0-r);for(var s=1;s<2*i;s++){var o=s%2==0?r:t,a=o*Math.sin(s*Math.PI/i),h=-1*o*Math.cos(s*Math.PI/i);e.lineTo(a,h)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Mu.Star=gi,gi.prototype.className="Star",gi.prototype._centroid=!0,gi.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,iW._registerNode)(gi),Ag.Factory.addGetterSetter(gi,"numPoints",5,(0,Ig.getNumberValidator)()),Ag.Factory.addGetterSetter(gi,"innerRadius",0,(0,Ig.getNumberValidator)()),Ag.Factory.addGetterSetter(gi,"outerRadius",0,(0,Ig.getNumberValidator)());var As={};Object.defineProperty(As,"__esModule",{value:!0}),As.Text=As.stringToArray=void 0;const u0=ht,qt=ue,sW=Et,mi=ie,oW=ge;function Q3(n){return Array.from(n)}As.stringToArray=Q3;var D_,J3=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],aW=J3.length;function Mg(){return D_||(D_=u0.Util.createCanvasElement().getContext("2d"))}class ut extends sW.Shape{constructor(e){super(function(r){return(r=r||{}).fillLinearGradientColorStops||r.fillRadialGradientColorStops||r.fillPatternImage||(r.fill=r.fill||"black"),r}(e)),this._partialTextX=0,this._partialTextY=0;for(var t=0;t<aW;t++)this.on(J3[t]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(e){var t=this.textArr,r=t.length;if(this.text()){var i,s=this.padding(),o=this.fontSize(),a=this.lineHeight()*o,h=this.verticalAlign(),c=0,l=this.align(),d=this.getWidth(),u=this.letterSpacing(),f=this.fill(),m=this.textDecoration(),g=m.indexOf("underline")!==-1,y=m.indexOf("line-through")!==-1,v=0,b=(v=a/2,0),w=0;for(e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline","middle"),e.setAttr("textAlign","left"),h==="middle"?c=(this.getHeight()-r*a-2*s)/2:h==="bottom"&&(c=this.getHeight()-r*a-2*s),e.translate(s,c+s),i=0;i<r;i++){b=0,w=0;var C,O,x,P=t[i],T=P.text,k=P.width,E=P.lastInParagraph;if(e.save(),l==="right"?b+=d-k-2*s:l==="center"&&(b+=(d-k-2*s)/2),g&&(e.save(),e.beginPath(),e.moveTo(b,v+w+Math.round(o/2)),O=(C=T.split(" ").length-1)===0,x=l==="justify"&&E&&!O?d-2*s:k,e.lineTo(b+Math.round(x),v+w+Math.round(o/2)),e.lineWidth=o/15,e.strokeStyle=f,e.stroke(),e.restore()),y&&(e.save(),e.beginPath(),e.moveTo(b,v+w),O=(C=T.split(" ").length-1)===0,x=l==="justify"&&E&&!O?d-2*s:k,e.lineTo(b+Math.round(x),v+w),e.lineWidth=o/15,e.strokeStyle=f,e.stroke(),e.restore()),u!==0||l==="justify"){C=T.split(" ").length-1;for(var I=Q3(T),M=0;M<I.length;M++){var R=I[M];R!==" "||E||l!=="justify"||(b+=(d-2*s-k)/C),this._partialTextX=b,this._partialTextY=v+w,this._partialText=R,e.fillStrokeShape(this),b+=this.measureSize(R).width+u}}else this._partialTextX=b,this._partialTextY=v+w,this._partialText=T,e.fillStrokeShape(this);e.restore(),r>1&&(v+=a)}}}_hitFunc(e){var t=this.getWidth(),r=this.getHeight();e.beginPath(),e.rect(0,0,t,r),e.closePath(),e.fillStrokeShape(this)}setText(e){var t=u0.Util._isString(e)?e:e==null?"":e+"";return this._setAttr("text",t),this}getWidth(){return this.attrs.width==="auto"||this.attrs.width===void 0?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height==="auto"||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return u0.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var t,r=Mg(),i=this.fontSize();return r.save(),r.font=this._getContextFont(),t=r.measureText(e),r.restore(),{width:t.width,height:i}}_getContextFont(){return this.fontStyle()+" "+this.fontVariant()+" "+this.fontSize()+"px "+this.fontFamily().split(",").map(e=>{const t=(e=e.trim()).indexOf(" ")>=0,r=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!r&&(e=`"${e}"`),e}).join(", ")}_addTextLine(e){this.align()==="justify"&&(e=e.trim());var t=this._getTextWidth(e);return this.textArr.push({text:e,width:t,lastInParagraph:!1})}_getTextWidth(e){var t=this.letterSpacing(),r=e.length;return Mg().measureText(e).width+(r?t*(r-1):0)}_setTextData(){var e=this.text().split(`
`),t=+this.fontSize(),r=0,i=this.lineHeight()*t,s=this.attrs.width,o=this.attrs.height,a=s!=="auto"&&s!==void 0,h=o!=="auto"&&o!==void 0,c=this.padding(),l=s-2*c,d=o-2*c,u=0,f=this.wrap(),m=f!=="none",g=f!=="char"&&m,y=this.ellipsis();this.textArr=[],Mg().font=this._getContextFont();for(var v=y?this._getTextWidth("…"):0,b=0,w=e.length;b<w;++b){var C=e[b],O=this._getTextWidth(C);if(a&&O>l)for(;C.length>0;){for(var x=0,P=C.length,T="",k=0;x<P;){var E=x+P>>>1,I=C.slice(0,E+1),M=this._getTextWidth(I)+v;M<=l?(x=E+1,T=I,k=M):P=E}if(!T)break;if(g){var R,U=C[T.length];(R=(U===" "||U==="-")&&k<=l?T.length:Math.max(T.lastIndexOf(" "),T.lastIndexOf("-"))+1)>0&&(x=R,T=T.slice(0,x),k=this._getTextWidth(T))}if(T=T.trimRight(),this._addTextLine(T),r=Math.max(r,k),u+=i,!m||h&&u+i>d){var V=this.textArr[this.textArr.length-1];V&&y&&(this._getTextWidth(V.text+"…")<l||(V.text=V.text.slice(0,V.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(V.text+"…"));break}if((C=(C=C.slice(x)).trimLeft()).length>0&&(O=this._getTextWidth(C))<=l){this._addTextLine(C),u+=i,r=Math.max(r,O);break}}else this._addTextLine(C),u+=i,r=Math.max(r,O);if(h&&u+i>d)break;this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0)}this.textHeight=t,this.textWidth=r}getStrokeScaleEnabled(){return!0}}As.Text=ut,ut.prototype._fillFunc=function(n){n.fillText(this._partialText,this._partialTextX,this._partialTextY)},ut.prototype._strokeFunc=function(n){n.strokeText(this._partialText,this._partialTextX,this._partialTextY)},ut.prototype.className="Text",ut.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,oW._registerNode)(ut),qt.Factory.overWriteSetter(ut,"width",(0,mi.getNumberOrAutoValidator)()),qt.Factory.overWriteSetter(ut,"height",(0,mi.getNumberOrAutoValidator)()),qt.Factory.addGetterSetter(ut,"fontFamily","Arial"),qt.Factory.addGetterSetter(ut,"fontSize",12,(0,mi.getNumberValidator)()),qt.Factory.addGetterSetter(ut,"fontStyle","normal"),qt.Factory.addGetterSetter(ut,"fontVariant","normal"),qt.Factory.addGetterSetter(ut,"padding",0,(0,mi.getNumberValidator)()),qt.Factory.addGetterSetter(ut,"align","left"),qt.Factory.addGetterSetter(ut,"verticalAlign","top"),qt.Factory.addGetterSetter(ut,"lineHeight",1,(0,mi.getNumberValidator)()),qt.Factory.addGetterSetter(ut,"wrap","word"),qt.Factory.addGetterSetter(ut,"ellipsis",!1,(0,mi.getBooleanValidator)()),qt.Factory.addGetterSetter(ut,"letterSpacing",0,(0,mi.getNumberValidator)()),qt.Factory.addGetterSetter(ut,"text","",(0,mi.getStringValidator)()),qt.Factory.addGetterSetter(ut,"textDecoration","");var Nu={};Object.defineProperty(Nu,"__esModule",{value:!0}),Nu.TextPath=void 0;const $_=ht,Wn=ue,lW=Et,gr=pa,Ng=As,R_=ie,hW=ge;function F_(n){n.fillText(this.partialText,0,0)}function L_(n){n.strokeText(this.partialText,0,0)}class wt extends lW.Shape{constructor(e){super(e),this.dummyCanvas=$_.Util.createCanvasElement(),this.dataArray=[],this.dataArray=gr.Path.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){this.dataArray=gr.Path.parsePathData(this.attrs.data),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var t=this.textDecoration(),r=this.fill(),i=this.fontSize(),s=this.glyphInfo;t==="underline"&&e.beginPath();for(var o=0;o<s.length;o++){e.save();var a=s[o].p0;e.translate(a.x,a.y),e.rotate(s[o].rotation),this.partialText=s[o].text,e.fillStrokeShape(this),t==="underline"&&(o===0&&e.moveTo(0,i/2+1),e.lineTo(i,i/2+1)),e.restore()}t==="underline"&&(e.strokeStyle=r,e.lineWidth=i/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var t=this.glyphInfo;if(t.length>=1){var r=t[0].p0;e.moveTo(r.x,r.y)}for(var i=0;i<t.length;i++){var s=t[i].p1;e.lineTo(s.x,s.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return $_.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return Ng.Text.prototype.setText.call(this,e)}_getContextFont(){return Ng.Text.prototype._getContextFont.call(this)}_getTextSize(e){var t=this.dummyCanvas.getContext("2d");t.save(),t.font=this._getContextFont();var r=t.measureText(e);return t.restore(),{width:r.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var e=this,t=this._getTextSize(this.attrs.text),r=this.letterSpacing(),i=this.align(),s=this.kerningFunc();this.textWidth=t.width,this.textHeight=t.height;var o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);this.glyphInfo=[];for(var a=0,h=0;h<e.dataArray.length;h++)e.dataArray[h].pathLength>0&&(a+=e.dataArray[h].pathLength);var c=0;i==="center"&&(c=Math.max(0,a/2-o/2)),i==="right"&&(c=Math.max(0,a-o));for(var l,d,u,f=(0,Ng.stringToArray)(this.text()),m=this.text().split(" ").length-1,g=-1,y=0,v=function(){y=0;for(var E=e.dataArray,I=g+1;I<E.length;I++){if(E[I].pathLength>0)return g=I,E[I];E[I].command==="M"&&(l={x:E[I].points[0],y:E[I].points[1]})}return{}},b=function(E){var I=e._getTextSize(E).width+r;E===" "&&i==="justify"&&(I+=(a-o)/m);var M=0,R=0;for(d=void 0;Math.abs(I-M)/I>.01&&R<20;){R++;for(var U=M;u===void 0;)(u=v())&&U+u.pathLength<I&&(U+=u.pathLength,u=void 0);if(u==={}||l===void 0)return;var V=!1;switch(u.command){case"L":gr.Path.getLineLength(l.x,l.y,u.points[0],u.points[1])>I?d=gr.Path.getPointOnLine(I,l.x,l.y,u.points[0],u.points[1],l.x,l.y):u=void 0;break;case"A":var H=u.points[4],K=u.points[5],$=u.points[4]+K;y===0?y=H+1e-8:I>M?y+=Math.PI/180*K/Math.abs(K):y-=Math.PI/360*K/Math.abs(K),(K<0&&y<$||K>=0&&y>$)&&(y=$,V=!0),d=gr.Path.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],y,u.points[6]);break;case"C":y===0?y=I>u.pathLength?1e-8:I/u.pathLength:I>M?y+=(I-M)/u.pathLength/2:y=Math.max(y-(M-I)/u.pathLength/2,0),y>1&&(y=1,V=!0),d=gr.Path.getPointOnCubicBezier(y,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3],u.points[4],u.points[5]);break;case"Q":y===0?y=I/u.pathLength:I>M?y+=(I-M)/u.pathLength:y-=(M-I)/u.pathLength,y>1&&(y=1,V=!0),d=gr.Path.getPointOnQuadraticBezier(y,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3])}d!==void 0&&(M=gr.Path.getLineLength(l.x,l.y,d.x,d.y)),V&&(V=!1,u=void 0)}},w=c/(e._getTextSize("C").width+r)-1,C=0;C<w&&(b("C"),l!==void 0&&d!==void 0);C++)l=d;for(var O=0;O<f.length&&(b(f[O]),l!==void 0&&d!==void 0);O++){var x=gr.Path.getLineLength(l.x,l.y,d.x,d.y),P=0;if(s)try{P=s(f[O-1],f[O])*this.fontSize()}catch{P=0}l.x+=P,d.x+=P,this.textWidth+=P;var T=gr.Path.getPointOnLine(P+x/2,l.x,l.y,d.x,d.y),k=Math.atan2(d.y-l.y,d.x-l.x);this.glyphInfo.push({transposeX:T.x,transposeY:T.y,text:f[O],rotation:k,p0:l,p1:d}),l=d}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(l){e.push(l.p0.x),e.push(l.p0.y),e.push(l.p1.x),e.push(l.p1.y)});for(var t,r,i=e[0]||0,s=e[0]||0,o=e[1]||0,a=e[1]||0,h=0;h<e.length/2;h++)t=e[2*h],r=e[2*h+1],i=Math.min(i,t),s=Math.max(s,t),o=Math.min(o,r),a=Math.max(a,r);var c=this.fontSize();return{x:i-c/2,y:o-c/2,width:s-i+c,height:a-o+c}}}Nu.TextPath=wt,wt.prototype._fillFunc=F_,wt.prototype._strokeFunc=L_,wt.prototype._fillFuncHit=F_,wt.prototype._strokeFuncHit=L_,wt.prototype.className="TextPath",wt.prototype._attrsAffectingSize=["text","fontSize","data"],(0,hW._registerNode)(wt),Wn.Factory.addGetterSetter(wt,"data"),Wn.Factory.addGetterSetter(wt,"fontFamily","Arial"),Wn.Factory.addGetterSetter(wt,"fontSize",12,(0,R_.getNumberValidator)()),Wn.Factory.addGetterSetter(wt,"fontStyle","normal"),Wn.Factory.addGetterSetter(wt,"align","left"),Wn.Factory.addGetterSetter(wt,"letterSpacing",0,(0,R_.getNumberValidator)()),Wn.Factory.addGetterSetter(wt,"textBaseline","middle"),Wn.Factory.addGetterSetter(wt,"fontVariant","normal"),Wn.Factory.addGetterSetter(wt,"text",""),Wn.Factory.addGetterSetter(wt,"textDecoration",null),Wn.Factory.addGetterSetter(wt,"kerningFunc",null);var Du={};Object.defineProperty(Du,"__esModule",{value:!0}),Du.Transformer=void 0;const Be=ht,je=ue,cW=Je,dW=Et,uW=Zl,j_=da,Yn=ge,vi=ie,pW=ge;var fW=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(n=>n+".tr-konva").join(" "),gW=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],mW={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const vW="ontouchstart"in Yn.Konva._global;var Xc=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function e5(n,e,t){const r=t.x+(n.x-t.x)*Math.cos(e)-(n.y-t.y)*Math.sin(e),i=t.y+(n.x-t.x)*Math.sin(e)+(n.y-t.y)*Math.cos(e);return Object.assign(Object.assign({},n),{rotation:n.rotation+e,x:r,y:i})}function yW(n,e){const t=function(r){return{x:r.x+r.width/2*Math.cos(r.rotation)+r.height/2*Math.sin(-r.rotation),y:r.y+r.height/2*Math.cos(r.rotation)+r.width/2*Math.sin(r.rotation)}}(n);return e5(n,e,t)}class Te extends j_.Group{constructor(e){super(e),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(fW,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return Be.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return"tr-konva"+this._id}setNodes(e=[]){return this._nodes&&this._nodes.length&&this.detach(),this._nodes=e,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(t=>{const r=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),this._transforming||this.isDragging()||this.update()},i=t._attrsAffectingSize.map(s=>s+"Change."+this._getEventNamespace()).join(" ");t.on(i,r),t.on(gW.map(s=>s+`.${this._getEventNamespace()}`).join(" "),r),t.on(`absoluteTransformChange.${this._getEventNamespace()}`,r),this._proxyDrag(t)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let t;e.on(`dragstart.${this._getEventNamespace()}`,r=>{t=e.getAbsolutePosition(),this.isDragging()||e===this.findOne(".back")||this.startDrag(r,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!t)return;const i=e.getAbsolutePosition(),s=i.x-t.x,o=i.y-t.y;this.nodes().forEach(a=>{if(a===e||a.isDragging())return;const h=a.getAbsolutePosition();a.setAbsolutePosition({x:h.x+s,y:h.y+o}),a.startDrag(r)}),t=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache("nodesRect"),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache("nodesRect",this.__getNodeRect)}__getNodeShape(e,t=this.rotation(),r){var i=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=e.getAbsoluteScale(r),o=e.getAbsolutePosition(r),a=i.x*s.x-e.offsetX()*s.x,h=i.y*s.y-e.offsetY()*s.y;const c=(Yn.Konva.getAngle(e.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return e5({x:o.x+a*Math.cos(c)+h*Math.sin(-c),y:o.y+h*Math.cos(c)+a*Math.sin(c),width:i.width*s.x,height:i.height*s.y,rotation:c},-Yn.Konva.getAngle(t),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const e=[];this.nodes().map(h=>{const c=h.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var l=[{x:c.x,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x+c.width,y:c.y+c.height},{x:c.x,y:c.y+c.height}],d=h.getAbsoluteTransform();l.forEach(function(u){var f=d.point(u);e.push(f)})});const t=new Be.Transform;var r,i,s,o;t.rotate(-Yn.Konva.getAngle(this.rotation())),e.forEach(function(h){var c=t.point(h);r===void 0&&(r=s=c.x,i=o=c.y),r=Math.min(r,c.x),i=Math.min(i,c.y),s=Math.max(s,c.x),o=Math.max(o,c.y)}),t.invert();const a=t.point({x:r,y:i});return{x:a.x,y:a.y,width:s-r,height:o-i,rotation:Yn.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Xc.forEach((function(e){this._createAnchor(e)}).bind(this)),this._createAnchor("rotater")}_createAnchor(e){var t=new uW.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:vW?10:"auto"}),r=this;t.on("mousedown touchstart",function(i){r._handleMouseDown(i)}),t.on("dragstart",i=>{t.stopDrag(),i.cancelBubble=!0}),t.on("dragend",i=>{i.cancelBubble=!0}),t.on("mouseenter",()=>{var i=Yn.Konva.getAngle(this.rotation()),s=function(o,a){if(o==="rotater")return"crosshair";a+=Be.Util.degToRad(mW[o]||0);var h=(Be.Util.radToDeg(a)%360+360)%360;return Be.Util._inRange(h,337.5,360)||Be.Util._inRange(h,0,22.5)?"ns-resize":Be.Util._inRange(h,22.5,67.5)?"nesw-resize":Be.Util._inRange(h,67.5,112.5)?"ew-resize":Be.Util._inRange(h,112.5,157.5)?"nwse-resize":Be.Util._inRange(h,157.5,202.5)?"ns-resize":Be.Util._inRange(h,202.5,247.5)?"nesw-resize":Be.Util._inRange(h,247.5,292.5)?"ew-resize":Be.Util._inRange(h,292.5,337.5)?"nwse-resize":(Be.Util.error("Transformer has unknown angle for cursor detection: "+h),"pointer")}(e,i);t.getStage().content&&(t.getStage().content.style.cursor=s),this._cursorChange=!0}),t.on("mouseout",()=>{t.getStage().content&&(t.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(t)}_createBack(){var e=new dW.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(t){var r=this.getParent(),i=r.padding();t.beginPath(),t.rect(-i,-i,this.width()+2*i,this.height()+2*i),t.moveTo(this.width()/2,-i),r.rotateEnabled()&&t.lineTo(this.width()/2,-r.rotateAnchorOffset()*Be.Util._sign(this.height())-i),t.fillStrokeShape(this)},hitFunc:(t,r)=>{if(this.shouldOverdrawWholeArea()){var i=this.padding();t.beginPath(),t.rect(-i,-i,r.width()+2*i,r.height()+2*i),t.fillStrokeShape(r)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",t=>{t.cancelBubble=!0}),e.on("dragmove",t=>{t.cancelBubble=!0}),e.on("dragend",t=>{t.cancelBubble=!0}),this.on("dragmove",t=>{this.update()})}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var t=this._getNodeRect(),r=t.width,i=t.height,s=Math.sqrt(Math.pow(r,2)+Math.pow(i,2));this.sin=Math.abs(i/s),this.cos=Math.abs(r/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var o=e.target.getAbsolutePosition(),a=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-o.x,y:a.y-o.y},this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(h=>{h._fire("transformstart",{evt:e.evt,target:h})})}_handleMouseMove(e){var t,r,i,s=this.findOne("."+this._movingAnchorName),o=s.getStage();o.setPointersPositions(e);const a=o.getPointerPosition();let h={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const c=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(h=this.anchorDragBoundFunc()(c,h,e)),s.setAbsolutePosition(h);const l=s.getAbsolutePosition();if(c.x!==l.x||c.y!==l.y)if(this._movingAnchorName!=="rotater"){var d=this.keepRatio()||e.shiftKey,u=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(d){var f=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(f.x-s.x(),2)+Math.pow(f.y-s.y(),2));var m=this.findOne(".top-left").x()>f.x?-1:1,g=this.findOne(".top-left").y()>f.y?-1:1;t=i*this.cos*m,r=i*this.sin*g,this.findOne(".top-left").x(f.x-t),this.findOne(".top-left").y(f.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){d&&(f=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()},i=Math.sqrt(Math.pow(s.x()-f.x,2)+Math.pow(f.y-s.y(),2)),m=this.findOne(".top-right").x()<f.x?-1:1,g=this.findOne(".top-right").y()>f.y?-1:1,t=i*this.cos*m,r=i*this.sin*g,this.findOne(".top-right").x(f.x+t),this.findOne(".top-right").y(f.y-r));var y=s.position();this.findOne(".top-left").y(y.y),this.findOne(".bottom-right").x(y.x)}else this._movingAnchorName==="middle-left"?this.findOne(".top-left").x(s.x()):this._movingAnchorName==="middle-right"?this.findOne(".bottom-right").x(s.x()):this._movingAnchorName==="bottom-left"?(d&&(f=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()},i=Math.sqrt(Math.pow(f.x-s.x(),2)+Math.pow(s.y()-f.y,2)),m=f.x<s.x()?-1:1,g=s.y()<f.y?-1:1,t=i*this.cos*m,r=i*this.sin*g,s.x(f.x-t),s.y(f.y+r)),y=s.position(),this.findOne(".top-left").x(y.x),this.findOne(".bottom-right").y(y.y)):this._movingAnchorName==="bottom-center"?this.findOne(".bottom-right").y(s.y()):this._movingAnchorName==="bottom-right"?d&&(f=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()},i=Math.sqrt(Math.pow(s.x()-f.x,2)+Math.pow(s.y()-f.y,2)),m=this.findOne(".bottom-right").x()<f.x?-1:1,g=this.findOne(".bottom-right").y()<f.y?-1:1,t=i*this.cos*m,r=i*this.sin*g,this.findOne(".bottom-right").x(f.x+t),this.findOne(".bottom-right").y(f.y+r)):console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(u=this.centeredScaling()||e.altKey){var v=this.findOne(".top-left"),b=this.findOne(".bottom-right"),w=v.x(),C=v.y(),O=this.getWidth()-b.x(),x=this.getHeight()-b.y();b.move({x:-w,y:-C}),v.move({x:O,y:x})}var P=this.findOne(".top-left").getAbsolutePosition();t=P.x,r=P.y;var T=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),k=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:t,y:r,width:T,height:k,rotation:Yn.Konva.getAngle(this.rotation())},e)}else{var E=this._getNodeRect();t=s.x()-E.width/2,r=-s.y()+E.height/2;let I=Math.atan2(-r,t)+Math.PI/2;E.height<0&&(I-=Math.PI);const M=Yn.Konva.getAngle(this.rotation())+I,R=Yn.Konva.getAngle(this.rotationSnapTolerance()),U=function(H,K,$){let j=K;for(let S=0;S<H.length;S++){const A=Yn.Konva.getAngle(H[S]),D=Math.abs(A-K)%(2*Math.PI);Math.min(D,2*Math.PI-D)<$&&(j=A)}return j}(this.rotationSnaps(),M,R),V=yW(E,U-E.rotation);this._fitNodesInto(V,e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var t=this.getNode();this._fire("transformend",{evt:e,target:t}),t&&this._nodes.forEach(r=>{r._fire("transformend",{evt:e,target:r})}),this._movingAnchorName=null}}_fitNodesInto(e,t){var r=this._getNodeRect();if(Be.Util._inRange(e.width,2*-this.padding()-1,1))return void this.update();if(Be.Util._inRange(e.height,2*-this.padding()-1,1))return void this.update();const i=this.flipEnabled();var s=new Be.Transform;if(s.rotate(Yn.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const l=s.point({x:2*-this.padding(),y:0});if(e.x+=l.x,e.y+=l.y,e.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=l.x,this._anchorDragOffset.y-=l.y,!i)return void this.update()}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const l=s.point({x:2*this.padding(),y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=l.x,this._anchorDragOffset.y-=l.y,e.width+=2*this.padding(),!i)return void this.update()}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const l=s.point({x:0,y:2*-this.padding()});if(e.x+=l.x,e.y+=l.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=l.x,this._anchorDragOffset.y-=l.y,e.height+=2*this.padding(),!i)return void this.update()}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const l=s.point({x:0,y:2*this.padding()});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=l.x,this._anchorDragOffset.y-=l.y,e.height+=2*this.padding(),!i)return void this.update()}if(this.boundBoxFunc()){const l=this.boundBoxFunc()(r,e);l?e=l:Be.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const o=1e7,a=new Be.Transform;a.translate(r.x,r.y),a.rotate(r.rotation),a.scale(r.width/o,r.height/o);const h=new Be.Transform;h.translate(e.x,e.y),h.rotate(e.rotation),h.scale(e.width/o,e.height/o);const c=h.multiply(a.invert());this._nodes.forEach(l=>{var d;const u=l.getParent().getAbsoluteTransform(),f=l.getTransform().copy();f.translate(l.offsetX(),l.offsetY());const m=new Be.Transform;m.multiply(u.copy().invert()).multiply(c).multiply(u).multiply(f);const g=m.decompose();l.setAttrs(g),this._fire("transform",{evt:t,target:l}),l._fire("transform",{evt:t,target:l}),(d=l.getLayer())===null||d===void 0||d.batchDraw()}),this.rotation(Be.Util._getRotation(e.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,t){this.findOne(e).setAttrs(t)}update(){var e,t=this._getNodeRect();this.rotation(Be.Util._getRotation(t.rotation));var r=t.width,i=t.height,s=this.enabledAnchors(),o=this.resizeEnabled(),a=this.padding(),h=this.anchorSize();this.find("._anchor").forEach(c=>{c.setAttrs({width:h,height:h,offsetX:h/2,offsetY:h/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:h/2+a,offsetY:h/2+a,visible:o&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:h/2+a,visible:o&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:h/2-a,offsetY:h/2+a,visible:o&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:h/2+a,visible:o&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:i/2,offsetX:h/2-a,visible:o&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:h/2+a,offsetY:h/2-a,visible:o&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:i,offsetY:h/2-a,visible:o&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:i,offsetX:h/2-a,offsetY:h/2-a,visible:o&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*Be.Util._sign(i)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),j_.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return cW.Node.prototype.toObject.call(this)}}Du.Transformer=Te,Te.prototype.className="Transformer",(0,pW._registerNode)(Te),je.Factory.addGetterSetter(Te,"enabledAnchors",Xc,function(n){return n instanceof Array||Be.Util.warn("enabledAnchors value should be an array"),n instanceof Array&&n.forEach(function(e){Xc.indexOf(e)===-1&&Be.Util.warn("Unknown anchor name: "+e+". Available names are: "+Xc.join(", "))}),n||[]}),je.Factory.addGetterSetter(Te,"flipEnabled",!0,(0,vi.getBooleanValidator)()),je.Factory.addGetterSetter(Te,"resizeEnabled",!0),je.Factory.addGetterSetter(Te,"anchorSize",10,(0,vi.getNumberValidator)()),je.Factory.addGetterSetter(Te,"rotateEnabled",!0),je.Factory.addGetterSetter(Te,"rotationSnaps",[]),je.Factory.addGetterSetter(Te,"rotateAnchorOffset",50,(0,vi.getNumberValidator)()),je.Factory.addGetterSetter(Te,"rotationSnapTolerance",5,(0,vi.getNumberValidator)()),je.Factory.addGetterSetter(Te,"borderEnabled",!0),je.Factory.addGetterSetter(Te,"anchorStroke","rgb(0, 161, 255)"),je.Factory.addGetterSetter(Te,"anchorStrokeWidth",1,(0,vi.getNumberValidator)()),je.Factory.addGetterSetter(Te,"anchorFill","white"),je.Factory.addGetterSetter(Te,"anchorCornerRadius",0,(0,vi.getNumberValidator)()),je.Factory.addGetterSetter(Te,"borderStroke","rgb(0, 161, 255)"),je.Factory.addGetterSetter(Te,"borderStrokeWidth",1,(0,vi.getNumberValidator)()),je.Factory.addGetterSetter(Te,"borderDash"),je.Factory.addGetterSetter(Te,"keepRatio",!0),je.Factory.addGetterSetter(Te,"centeredScaling",!1),je.Factory.addGetterSetter(Te,"ignoreStroke",!1),je.Factory.addGetterSetter(Te,"padding",0,(0,vi.getNumberValidator)()),je.Factory.addGetterSetter(Te,"node"),je.Factory.addGetterSetter(Te,"nodes"),je.Factory.addGetterSetter(Te,"boundBoxFunc"),je.Factory.addGetterSetter(Te,"anchorDragBoundFunc"),je.Factory.addGetterSetter(Te,"shouldOverdrawWholeArea",!1),je.Factory.addGetterSetter(Te,"useSingleNodeRotation",!0),je.Factory.backCompat(Te,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var $u={};Object.defineProperty($u,"__esModule",{value:!0}),$u.Wedge=void 0;const Cc=ue,bW=Et,_W=ge,B_=ie,wW=ge;class Lr extends bW.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,_W.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}$u.Wedge=Lr,Lr.prototype.className="Wedge",Lr.prototype._centroid=!0,Lr.prototype._attrsAffectingSize=["radius"],(0,wW._registerNode)(Lr),Cc.Factory.addGetterSetter(Lr,"radius",0,(0,B_.getNumberValidator)()),Cc.Factory.addGetterSetter(Lr,"angle",0,(0,B_.getNumberValidator)()),Cc.Factory.addGetterSetter(Lr,"clockwise",!1),Cc.Factory.backCompat(Lr,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var Ru={};Object.defineProperty(Ru,"__esModule",{value:!0}),Ru.Blur=void 0;const G_=ue,SW=Je,CW=ie;function z_(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var xW=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],OW=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];Ru.Blur=function(n){var e=Math.round(this.blurRadius());e>0&&function(t,r){var i,s,o,a,h,c,l,d,u,f,m,g,y,v,b,w,C,O,x,P,T,k,E,I,M=t.data,R=t.width,U=t.height,V=r+r+1,H=R-1,K=U-1,$=r+1,j=$*($+1)/2,S=new z_,A=null,D=S,F=null,B=null,z=xW[r],Z=OW[r];for(o=1;o<V;o++)D=D.next=new z_,o===$&&(A=D);for(D.next=S,l=c=0,s=0;s<U;s++){for(w=C=O=x=d=u=f=m=0,g=$*(P=M[c]),y=$*(T=M[c+1]),v=$*(k=M[c+2]),b=$*(E=M[c+3]),d+=j*P,u+=j*T,f+=j*k,m+=j*E,D=S,o=0;o<$;o++)D.r=P,D.g=T,D.b=k,D.a=E,D=D.next;for(o=1;o<$;o++)a=c+((H<o?H:o)<<2),d+=(D.r=P=M[a])*(I=$-o),u+=(D.g=T=M[a+1])*I,f+=(D.b=k=M[a+2])*I,m+=(D.a=E=M[a+3])*I,w+=P,C+=T,O+=k,x+=E,D=D.next;for(F=S,B=A,i=0;i<R;i++)M[c+3]=E=m*z>>Z,E!==0?(E=255/E,M[c]=(d*z>>Z)*E,M[c+1]=(u*z>>Z)*E,M[c+2]=(f*z>>Z)*E):M[c]=M[c+1]=M[c+2]=0,d-=g,u-=y,f-=v,m-=b,g-=F.r,y-=F.g,v-=F.b,b-=F.a,a=l+((a=i+r+1)<H?a:H)<<2,d+=w+=F.r=M[a],u+=C+=F.g=M[a+1],f+=O+=F.b=M[a+2],m+=x+=F.a=M[a+3],F=F.next,g+=P=B.r,y+=T=B.g,v+=k=B.b,b+=E=B.a,w-=P,C-=T,O-=k,x-=E,B=B.next,c+=4;l+=R}for(i=0;i<R;i++){for(C=O=x=w=u=f=m=d=0,g=$*(P=M[c=i<<2]),y=$*(T=M[c+1]),v=$*(k=M[c+2]),b=$*(E=M[c+3]),d+=j*P,u+=j*T,f+=j*k,m+=j*E,D=S,o=0;o<$;o++)D.r=P,D.g=T,D.b=k,D.a=E,D=D.next;for(h=R,o=1;o<=r;o++)c=h+i<<2,d+=(D.r=P=M[c])*(I=$-o),u+=(D.g=T=M[c+1])*I,f+=(D.b=k=M[c+2])*I,m+=(D.a=E=M[c+3])*I,w+=P,C+=T,O+=k,x+=E,D=D.next,o<K&&(h+=R);for(c=i,F=S,B=A,s=0;s<U;s++)M[3+(a=c<<2)]=E=m*z>>Z,E>0?(E=255/E,M[a]=(d*z>>Z)*E,M[a+1]=(u*z>>Z)*E,M[a+2]=(f*z>>Z)*E):M[a]=M[a+1]=M[a+2]=0,d-=g,u-=y,f-=v,m-=b,g-=F.r,y-=F.g,v-=F.b,b-=F.a,a=i+((a=s+$)<K?a:K)*R<<2,d+=w+=F.r=M[a],u+=C+=F.g=M[a+1],f+=O+=F.b=M[a+2],m+=x+=F.a=M[a+3],F=F.next,g+=P=B.r,y+=T=B.g,v+=k=B.b,b+=E=B.a,w-=P,C-=T,O-=k,x-=E,B=B.next,c+=R}}(n,e)},G_.Factory.addGetterSetter(SW.Node,"blurRadius",0,(0,CW.getNumberValidator)(),G_.Factory.afterSetFilter);var Fu={};Object.defineProperty(Fu,"__esModule",{value:!0}),Fu.Brighten=void 0;const U_=ue,PW=Je,EW=ie;Fu.Brighten=function(n){var e,t=255*this.brightness(),r=n.data,i=r.length;for(e=0;e<i;e+=4)r[e]+=t,r[e+1]+=t,r[e+2]+=t},U_.Factory.addGetterSetter(PW.Node,"brightness",0,(0,EW.getNumberValidator)(),U_.Factory.afterSetFilter);var Lu={};Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.Contrast=void 0;const V_=ue,TW=Je,kW=ie;Lu.Contrast=function(n){var e,t=Math.pow((this.contrast()+100)/100,2),r=n.data,i=r.length,s=150,o=150,a=150;for(e=0;e<i;e+=4)s=r[e],o=r[e+1],a=r[e+2],s/=255,s-=.5,s*=t,s+=.5,o/=255,o-=.5,o*=t,o+=.5,a/=255,a-=.5,a*=t,a+=.5,s=(s*=255)<0?0:s>255?255:s,o=(o*=255)<0?0:o>255?255:o,a=(a*=255)<0?0:a>255?255:a,r[e]=s,r[e+1]=o,r[e+2]=a},V_.Factory.addGetterSetter(TW.Node,"contrast",0,(0,kW.getNumberValidator)(),V_.Factory.afterSetFilter);var ju={};Object.defineProperty(ju,"__esModule",{value:!0}),ju.Emboss=void 0;const yi=ue,xc=Je,AW=ht,H_=ie;ju.Emboss=function(n){var e=10*this.embossStrength(),t=255*this.embossWhiteLevel(),r=this.embossDirection(),i=this.embossBlend(),s=0,o=0,a=n.data,h=n.width,c=n.height,l=4*h,d=c;switch(r){case"top-left":s=-1,o=-1;break;case"top":s=-1,o=0;break;case"top-right":s=-1,o=1;break;case"right":s=0,o=1;break;case"bottom-right":s=1,o=1;break;case"bottom":s=1,o=0;break;case"bottom-left":s=1,o=-1;break;case"left":s=0,o=-1;break;default:AW.Util.error("Unknown emboss direction: "+r)}do{var u=(d-1)*l,f=s;d+f<1&&(f=0),d+f>c&&(f=0);var m=(d-1+f)*h*4,g=h;do{var y=u+4*(g-1),v=o;g+v<1&&(v=0),g+v>h&&(v=0);var b=m+4*(g-1+v),w=a[y]-a[b],C=a[y+1]-a[b+1],O=a[y+2]-a[b+2],x=w,P=x>0?x:-x;if((C>0?C:-C)>P&&(x=C),(O>0?O:-O)>P&&(x=O),x*=e,i){var T=a[y]+x,k=a[y+1]+x,E=a[y+2]+x;a[y]=T>255?255:T<0?0:T,a[y+1]=k>255?255:k<0?0:k,a[y+2]=E>255?255:E<0?0:E}else{var I=t-x;I<0?I=0:I>255&&(I=255),a[y]=a[y+1]=a[y+2]=I}}while(--g)}while(--d)},yi.Factory.addGetterSetter(xc.Node,"embossStrength",.5,(0,H_.getNumberValidator)(),yi.Factory.afterSetFilter),yi.Factory.addGetterSetter(xc.Node,"embossWhiteLevel",.5,(0,H_.getNumberValidator)(),yi.Factory.afterSetFilter),yi.Factory.addGetterSetter(xc.Node,"embossDirection","top-left",null,yi.Factory.afterSetFilter),yi.Factory.addGetterSetter(xc.Node,"embossBlend",!1,null,yi.Factory.afterSetFilter);var Bu={};Object.defineProperty(Bu,"__esModule",{value:!0}),Bu.Enhance=void 0;const K_=ue,IW=Je,MW=ie;function Dg(n,e,t,r,i){var s=t-e,o=i-r;return s===0?r+o/2:o===0?r:o*((n-e)/s)+r}Bu.Enhance=function(n){var e,t,r,i,s=n.data,o=s.length,a=s[0],h=a,c=s[1],l=c,d=s[2],u=d,f=this.enhance();if(f!==0){for(i=0;i<o;i+=4)(e=s[i+0])<a?a=e:e>h&&(h=e),(t=s[i+1])<c?c=t:t>l&&(l=t),(r=s[i+2])<d?d=r:r>u&&(u=r);var m,g,y,v,b,w,C,O,x;for(h===a&&(h=255,a=0),l===c&&(l=255,c=0),u===d&&(u=255,d=0),f>0?(g=h+f*(255-h),y=a-f*(a-0),b=l+f*(255-l),w=c-f*(c-0),O=u+f*(255-u),x=d-f*(d-0)):(g=h+f*(h-(m=.5*(h+a))),y=a+f*(a-m),b=l+f*(l-(v=.5*(l+c))),w=c+f*(c-v),O=u+f*(u-(C=.5*(u+d))),x=d+f*(d-C)),i=0;i<o;i+=4)s[i+0]=Dg(s[i+0],a,h,y,g),s[i+1]=Dg(s[i+1],c,l,w,b),s[i+2]=Dg(s[i+2],d,u,x,O)}},K_.Factory.addGetterSetter(IW.Node,"enhance",0,(0,MW.getNumberValidator)(),K_.Factory.afterSetFilter);var Gu={};Object.defineProperty(Gu,"__esModule",{value:!0}),Gu.Grayscale=void 0;Gu.Grayscale=function(n){var e,t,r=n.data,i=r.length;for(e=0;e<i;e+=4)t=.34*r[e]+.5*r[e+1]+.16*r[e+2],r[e]=t,r[e+1]=t,r[e+2]=t};var zu={};Object.defineProperty(zu,"__esModule",{value:!0}),zu.HSL=void 0;const bo=ue,$g=Je,Rg=ie;bo.Factory.addGetterSetter($g.Node,"hue",0,(0,Rg.getNumberValidator)(),bo.Factory.afterSetFilter),bo.Factory.addGetterSetter($g.Node,"saturation",0,(0,Rg.getNumberValidator)(),bo.Factory.afterSetFilter),bo.Factory.addGetterSetter($g.Node,"luminance",0,(0,Rg.getNumberValidator)(),bo.Factory.afterSetFilter);zu.HSL=function(n){var e,t,r,i,s,o=n.data,a=o.length,h=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,l=127*this.luminance(),d=1*h*Math.cos(c*Math.PI/180),u=1*h*Math.sin(c*Math.PI/180),f=.299+.701*d+.167*u,m=.587-.587*d+.33*u,g=.114-.114*d-.497*u,y=.299-.299*d-.328*u,v=.587+.413*d+.035*u,b=.114-.114*d+.293*u,w=.299-.3*d+1.25*u,C=.587-.586*d-1.05*u,O=.114+.886*d-.2*u;for(e=0;e<a;e+=4)t=o[e+0],r=o[e+1],i=o[e+2],s=o[e+3],o[e+0]=f*t+m*r+g*i+l,o[e+1]=y*t+v*r+b*i+l,o[e+2]=w*t+C*r+O*i+l,o[e+3]=s};var Uu={};Object.defineProperty(Uu,"__esModule",{value:!0}),Uu.HSV=void 0;const _o=ue,Fg=Je,Lg=ie;Uu.HSV=function(n){var e,t,r,i,s,o=n.data,a=o.length,h=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,d=h*c*Math.cos(l*Math.PI/180),u=h*c*Math.sin(l*Math.PI/180),f=.299*h+.701*d+.167*u,m=.587*h-.587*d+.33*u,g=.114*h-.114*d-.497*u,y=.299*h-.299*d-.328*u,v=.587*h+.413*d+.035*u,b=.114*h-.114*d+.293*u,w=.299*h-.3*d+1.25*u,C=.587*h-.586*d-1.05*u,O=.114*h+.886*d-.2*u;for(e=0;e<a;e+=4)t=o[e+0],r=o[e+1],i=o[e+2],s=o[e+3],o[e+0]=f*t+m*r+g*i,o[e+1]=y*t+v*r+b*i,o[e+2]=w*t+C*r+O*i,o[e+3]=s},_o.Factory.addGetterSetter(Fg.Node,"hue",0,(0,Lg.getNumberValidator)(),_o.Factory.afterSetFilter),_o.Factory.addGetterSetter(Fg.Node,"saturation",0,(0,Lg.getNumberValidator)(),_o.Factory.afterSetFilter),_o.Factory.addGetterSetter(Fg.Node,"value",0,(0,Lg.getNumberValidator)(),_o.Factory.afterSetFilter);var Vu={};Object.defineProperty(Vu,"__esModule",{value:!0}),Vu.Invert=void 0;Vu.Invert=function(n){var e,t=n.data,r=t.length;for(e=0;e<r;e+=4)t[e]=255-t[e],t[e+1]=255-t[e+1],t[e+2]=255-t[e+2]};var Hu={};Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.Kaleidoscope=void 0;const Oc=ue,W_=Je,NW=ht,X_=ie;Hu.Kaleidoscope=function(n){var e,t,r,i,s,o,a,h,c,l=n.width,d=n.height,u=Math.round(this.kaleidoscopePower()),f=Math.round(this.kaleidoscopeAngle()),m=Math.floor(l*(f%360)/360);if(!(u<1)){var g=NW.Util.createCanvasElement();g.width=l,g.height=d;var y=g.getContext("2d").getImageData(0,0,l,d);(function(x,P,T){var k,E,I,M,R=x.data,U=P.data,V=x.width,H=x.height,K=T.polarCenterX||V/2,$=T.polarCenterY||H/2,j=0,S=0,A=0,D=0,F=Math.sqrt(K*K+$*$);E=V-K,I=H-$,F=(M=Math.sqrt(E*E+I*I))>F?M:F;var B,z,Z,q,se=H,J=V,xe=360/J*Math.PI/180;for(z=0;z<J;z+=1)for(Z=Math.sin(z*xe),q=Math.cos(z*xe),B=0;B<se;B+=1)E=Math.floor(K+F*B/se*q),j=R[0+(k=4*((I=Math.floor($+F*B/se*Z))*V+E))],S=R[k+1],A=R[k+2],D=R[k+3],U[0+(k=4*(z+B*V))]=j,U[k+1]=S,U[k+2]=A,U[k+3]=D})(n,y,{polarCenterX:l/2,polarCenterY:d/2});for(var v=l/Math.pow(2,u);v<=8;)v*=2,u-=1;var b=v=Math.ceil(v),w=0,C=b,O=1;for(m+v>l&&(w=b,C=0,O=-1),t=0;t<d;t+=1)for(e=w;e!==C;e+=O)h=4*(l*t+Math.round(e+m)%l),i=y.data[h+0],s=y.data[h+1],o=y.data[h+2],a=y.data[h+3],c=4*(l*t+e),y.data[c+0]=i,y.data[c+1]=s,y.data[c+2]=o,y.data[c+3]=a;for(t=0;t<d;t+=1)for(b=Math.floor(v),r=0;r<u;r+=1){for(e=0;e<b+1;e+=1)h=4*(l*t+e),i=y.data[h+0],s=y.data[h+1],o=y.data[h+2],a=y.data[h+3],c=4*(l*t+2*b-e-1),y.data[c+0]=i,y.data[c+1]=s,y.data[c+2]=o,y.data[c+3]=a;b*=2}(function(x,P,T){var k,E,I,M,R,U,V=x.data,H=P.data,K=x.width,$=x.height,j=T.polarCenterX||K/2,S=T.polarCenterY||$/2,A=0,D=0,F=0,B=0,z=Math.sqrt(j*j+S*S);E=K-j,I=$-S,z=(U=Math.sqrt(E*E+I*I))>z?U:z;var Z,q,se,J=$,xe=K,Xt=0;for(E=0;E<K;E+=1)for(I=0;I<$;I+=1)M=E-j,R=I-S,Z=Math.sqrt(M*M+R*R)*J/z,q=(q=(180*Math.atan2(R,M)/Math.PI+360+Xt)%360)*xe/360,se=Math.floor(q),A=V[0+(k=4*(Math.floor(Z)*K+se))],D=V[k+1],F=V[k+2],B=V[k+3],H[0+(k=4*(I*K+E))]=A,H[k+1]=D,H[k+2]=F,H[k+3]=B})(y,n,{polarRotation:0})}},Oc.Factory.addGetterSetter(W_.Node,"kaleidoscopePower",2,(0,X_.getNumberValidator)(),Oc.Factory.afterSetFilter),Oc.Factory.addGetterSetter(W_.Node,"kaleidoscopeAngle",0,(0,X_.getNumberValidator)(),Oc.Factory.afterSetFilter);var Ku={};Object.defineProperty(Ku,"__esModule",{value:!0}),Ku.Mask=void 0;const Y_=ue,DW=Je,$W=ie;function Pc(n,e,t){var r=4*(t*n.width+e),i=[];return i.push(n.data[r++],n.data[r++],n.data[r++],n.data[r++]),i}function nl(n,e){return Math.sqrt(Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2)+Math.pow(n[2]-e[2],2))}Ku.Mask=function(n){var e=function(t,r){var i=Pc(t,0,0),s=Pc(t,t.width-1,0),o=Pc(t,0,t.height-1),a=Pc(t,t.width-1,t.height-1),h=r||10;if(nl(i,s)<h&&nl(s,a)<h&&nl(a,o)<h&&nl(o,i)<h){for(var c=function(f){for(var m=[0,0,0],g=0;g<f.length;g++)m[0]+=f[g][0],m[1]+=f[g][1],m[2]+=f[g][2];return m[0]/=f.length,m[1]/=f.length,m[2]/=f.length,m}([s,i,a,o]),l=[],d=0;d<t.width*t.height;d++){var u=nl(c,[t.data[4*d],t.data[4*d+1],t.data[4*d+2]]);l[d]=u<h?0:255}return l}}(n,this.threshold());return e&&function(t,r){for(var i=0;i<t.width*t.height;i++)t.data[4*i+3]=r[i]}(n,e=function(t,r,i){for(var s=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],o=Math.round(Math.sqrt(s.length)),a=Math.floor(o/2),h=[],c=0;c<i;c++)for(var l=0;l<r;l++){for(var d=c*r+l,u=0,f=0;f<o;f++)for(var m=0;m<o;m++){var g=c+f-a,y=l+m-a;if(g>=0&&g<i&&y>=0&&y<r){var v=s[f*o+m];u+=t[g*r+y]*v}}h[d]=u}return h}(e=function(t,r,i){for(var s=[1,1,1,1,1,1,1,1,1],o=Math.round(Math.sqrt(s.length)),a=Math.floor(o/2),h=[],c=0;c<i;c++)for(var l=0;l<r;l++){for(var d=c*r+l,u=0,f=0;f<o;f++)for(var m=0;m<o;m++){var g=c+f-a,y=l+m-a;if(g>=0&&g<i&&y>=0&&y<r){var v=s[f*o+m];u+=t[g*r+y]*v}}h[d]=u>=1020?255:0}return h}(e=function(t,r,i){for(var s=[1,1,1,1,0,1,1,1,1],o=Math.round(Math.sqrt(s.length)),a=Math.floor(o/2),h=[],c=0;c<i;c++)for(var l=0;l<r;l++){for(var d=c*r+l,u=0,f=0;f<o;f++)for(var m=0;m<o;m++){var g=c+f-a,y=l+m-a;if(g>=0&&g<i&&y>=0&&y<r){var v=s[f*o+m];u+=t[g*r+y]*v}}h[d]=u===2040?255:0}return h}(e,n.width,n.height),n.width,n.height),n.width,n.height)),n},Y_.Factory.addGetterSetter(DW.Node,"threshold",0,(0,$W.getNumberValidator)(),Y_.Factory.afterSetFilter);var Wu={};Object.defineProperty(Wu,"__esModule",{value:!0}),Wu.Noise=void 0;const q_=ue,RW=Je,FW=ie;Wu.Noise=function(n){var e,t=255*this.noise(),r=n.data,i=r.length,s=t/2;for(e=0;e<i;e+=4)r[e+0]+=s-2*s*Math.random(),r[e+1]+=s-2*s*Math.random(),r[e+2]+=s-2*s*Math.random()},q_.Factory.addGetterSetter(RW.Node,"noise",.2,(0,FW.getNumberValidator)(),q_.Factory.afterSetFilter);var Xu={};Object.defineProperty(Xu,"__esModule",{value:!0}),Xu.Pixelate=void 0;const Z_=ue,LW=ht,jW=Je,BW=ie;Xu.Pixelate=function(n){var e,t,r,i,s,o,a,h,c,l,d,u,f,m,g=Math.ceil(this.pixelSize()),y=n.width,v=n.height,b=Math.ceil(y/g),w=Math.ceil(v/g),C=n.data;if(g<=0)LW.Util.error("pixelSize value can not be <= 0");else for(u=0;u<b;u+=1)for(f=0;f<w;f+=1){for(i=0,s=0,o=0,a=0,c=(h=u*g)+g,d=(l=f*g)+g,m=0,e=h;e<c;e+=1)if(!(e>=y))for(t=l;t<d;t+=1)t>=v||(i+=C[(r=4*(y*t+e))+0],s+=C[r+1],o+=C[r+2],a+=C[r+3],m+=1);for(i/=m,s/=m,o/=m,a/=m,e=h;e<c;e+=1)if(!(e>=y))for(t=l;t<d;t+=1)t>=v||(C[(r=4*(y*t+e))+0]=i,C[r+1]=s,C[r+2]=o,C[r+3]=a)}},Z_.Factory.addGetterSetter(jW.Node,"pixelSize",8,(0,BW.getNumberValidator)(),Z_.Factory.afterSetFilter);var Yu={};Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.Posterize=void 0;const Q_=ue,GW=Je,zW=ie;Yu.Posterize=function(n){var e,t=Math.round(254*this.levels())+1,r=n.data,i=r.length,s=255/t;for(e=0;e<i;e+=1)r[e]=Math.floor(r[e]/s)*s},Q_.Factory.addGetterSetter(GW.Node,"levels",.5,(0,zW.getNumberValidator)(),Q_.Factory.afterSetFilter);var qu={};Object.defineProperty(qu,"__esModule",{value:!0}),qu.RGB=void 0;const Ec=ue,jg=Je,UW=ie;qu.RGB=function(n){var e,t,r=n.data,i=r.length,s=this.red(),o=this.green(),a=this.blue();for(e=0;e<i;e+=4)t=(.34*r[e]+.5*r[e+1]+.16*r[e+2])/255,r[e]=t*s,r[e+1]=t*o,r[e+2]=t*a,r[e+3]=r[e+3]},Ec.Factory.addGetterSetter(jg.Node,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),Ec.Factory.addGetterSetter(jg.Node,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),Ec.Factory.addGetterSetter(jg.Node,"blue",0,UW.RGBComponent,Ec.Factory.afterSetFilter);var Zu={};Object.defineProperty(Zu,"__esModule",{value:!0}),Zu.RGBA=void 0;const rl=ue,Tc=Je,VW=ie;Zu.RGBA=function(n){var e,t,r=n.data,i=r.length,s=this.red(),o=this.green(),a=this.blue(),h=this.alpha();for(e=0;e<i;e+=4)t=1-h,r[e]=s*h+r[e]*t,r[e+1]=o*h+r[e+1]*t,r[e+2]=a*h+r[e+2]*t},rl.Factory.addGetterSetter(Tc.Node,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),rl.Factory.addGetterSetter(Tc.Node,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),rl.Factory.addGetterSetter(Tc.Node,"blue",0,VW.RGBComponent,rl.Factory.afterSetFilter),rl.Factory.addGetterSetter(Tc.Node,"alpha",1,function(n){return this._filterUpToDate=!1,n>1?1:n<0?0:n});var Qu={};Object.defineProperty(Qu,"__esModule",{value:!0}),Qu.Sepia=void 0;Qu.Sepia=function(n){var e,t,r,i,s=n.data,o=s.length;for(e=0;e<o;e+=4)t=s[e+0],r=s[e+1],i=s[e+2],s[e+0]=Math.min(255,.393*t+.769*r+.189*i),s[e+1]=Math.min(255,.349*t+.686*r+.168*i),s[e+2]=Math.min(255,.272*t+.534*r+.131*i)};var Ju={};Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.Solarize=void 0;Ju.Solarize=function(n){var e=n.data,t=n.width,r=4*t,i=n.height;do{var s=(i-1)*r,o=t;do{var a=s+4*(o-1),h=e[a],c=e[a+1],l=e[a+2];h>127&&(h=255-h),c>127&&(c=255-c),l>127&&(l=255-l),e[a]=h,e[a+1]=c,e[a+2]=l}while(--o)}while(--i)};var ep={};Object.defineProperty(ep,"__esModule",{value:!0}),ep.Threshold=void 0;const J_=ue,HW=Je,KW=ie;ep.Threshold=function(n){var e,t=255*this.threshold(),r=n.data,i=r.length;for(e=0;e<i;e+=1)r[e]=r[e]<t?0:255},J_.Factory.addGetterSetter(HW.Node,"threshold",.5,(0,KW.getNumberValidator)(),J_.Factory.afterSetFilter),Object.defineProperty(_u,"__esModule",{value:!0}),_u.Konva=void 0;const ew=V3,WW=xu,XW=Ou,YW=Pu,qW=Eu,ZW=Tu,tw=Wo,QW=ql,JW=pa,eX=Zl,tX=ku,nX=Au,rX=Iu,iX=Mu,sX=As,oX=Nu,aX=Du,lX=$u,hX=Ru,cX=Fu,dX=Lu,uX=ju,pX=Bu,fX=Gu,gX=zu,mX=Uu,vX=Vu,yX=Hu,bX=Ku,_X=Wu,wX=Xu,SX=Yu,CX=qu,xX=Zu,OX=Qu,PX=Ju,EX=ep;_u.Konva=ew.Konva.Util._assign(ew.Konva,{Arc:WW.Arc,Arrow:XW.Arrow,Circle:YW.Circle,Ellipse:qW.Ellipse,Image:ZW.Image,Label:tw.Label,Tag:tw.Tag,Line:QW.Line,Path:JW.Path,Rect:eX.Rect,RegularPolygon:tX.RegularPolygon,Ring:nX.Ring,Sprite:rX.Sprite,Star:iX.Star,Text:sX.Text,TextPath:oX.TextPath,Transformer:aX.Transformer,Wedge:lX.Wedge,Filters:{Blur:hX.Blur,Brighten:cX.Brighten,Contrast:dX.Contrast,Emboss:uX.Emboss,Enhance:pX.Enhance,Grayscale:fX.Grayscale,HSL:gX.HSL,HSV:mX.HSV,Invert:vX.Invert,Kaleidoscope:yX.Kaleidoscope,Mask:bX.Mask,Noise:_X.Noise,Pixelate:wX.Pixelate,Posterize:SX.Posterize,RGB:CX.RGB,RGBA:xX.RGBA,Sepia:OX.Sepia,Solarize:PX.Solarize,Threshold:EX.Threshold}});var TX=aK(Object.freeze({__proto__:null,default:{}}));Object.defineProperty(U3,"__esModule",{value:!0});const p0=_u,nw=TX,f0=nw.default||nw;bu.DOMMatrix=f0.DOMMatrix;bu.document===void 0&&(p0.Konva.Util.createCanvasElement=()=>{const n=f0.createCanvas(300,300);return n.style||(n.style={}),n},p0.Konva.Util.createImageElement=()=>new f0.Image);var he=U3.default=p0.Konva,g0=function(n,e){return g0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},g0(n,e)};function De(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=n}g0(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var X=function(){return X=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},X.apply(this,arguments)};function Sn(n,e,t,r){return new(t||(t=Promise))(function(i,s){function o(c){try{h(r.next(c))}catch(l){s(l)}}function a(c){try{h(r.throw(c))}catch(l){s(l)}}function h(c){var l;c.done?i(c.value):(l=c.value,l instanceof t?l:new t(function(d){d(l)})).then(o,a)}h((r=r.apply(n,[])).next())})}function Cn(n,e){var t,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(h){return function(c){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||l[0]!==6&&l[0]!==2)){o=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){o.label=l[1];break}if(l[0]===6&&o.label<i[1]){o.label=i[1],i=l;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(l);break}i[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(n,o)}catch(d){l=[6,d],r=0}finally{t=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([h,c])}}}function Re(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r,i,s=t.call(n),o=[];try{for(;(e===void 0||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(t=s.return)&&t.call(s)}finally{if(i)throw i.error}}return o}function pe(n,e,t){if(arguments.length===2)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))}var kX=function(n){return function(e){return!!e&&typeof e=="object"}(n)&&!function(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||function(r){return r.$$typeof===AX}(e)}(n)},AX=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.element"):60103;function Ql(n,e){return e.clone!==!1&&e.isMergeableObject(n)?fa((t=n,Array.isArray(t)?[]:{}),n,e):n;var t}function IX(n,e,t){return n.concat(e).map(function(r){return Ql(r,t)})}function rw(n){return Object.keys(n).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[]}(n))}function iw(n,e){try{return e in n}catch{return!1}}function MX(n,e,t){var r={};return t.isMergeableObject(n)&&rw(n).forEach(function(i){r[i]=Ql(n[i],t)}),rw(e).forEach(function(i){(function(s,o){return iw(s,o)&&!(Object.hasOwnProperty.call(s,o)&&Object.propertyIsEnumerable.call(s,o))})(n,i)||(iw(n,i)&&t.isMergeableObject(e[i])?r[i]=function(s,o){if(!o.customMerge)return fa;var a=o.customMerge(s);return typeof a=="function"?a:fa}(i,t)(n[i],e[i],t):r[i]=Ql(e[i],t))}),r}function fa(n,e,t){(t=t||{}).arrayMerge=t.arrayMerge||IX,t.isMergeableObject=t.isMergeableObject||kX,t.cloneUnlessOtherwiseSpecified=Ql;var r=Array.isArray(e);return r===Array.isArray(n)?r?t.arrayMerge(n,e,t):MX(n,e,t):Ql(e,t)}fa.all=function(n,e){if(!Array.isArray(n))throw new Error("first argument should be an array");return n.reduce(function(t,r){return fa(t,r,e)},{})};var t5=fa,Yc={borderDash:[15,10],borderStroke:"#fff",borderStrokeWidth:3,anchorSize:15,anchorFill:"#fff",anchorStroke:"#fff",anchorStrokeWidth:1,anchorCornerRadius:30},dy={disableCanvasContextMenu:!0,containerClassName:"pikaso",transformer:Yc,snapToGrid:null,cropper:{transformer:Yc,circular:!1,fixed:!1,keepRatio:!0,aspectRatio:1,minWidth:100,minHeight:100,marginRatio:1.1,overlay:{color:"#262626",opacity:.5},guides:{show:!0,count:3,color:"#fff",width:1,dash:[15,10]}},drawing:{autoSelect:!1,keyboard:{cancelOnEscape:!0}},selection:{interactive:!0,keyboard:{enabled:!0,movingSpaces:5,map:{delete:["Backspace","Delete"],moveLeft:["ArrowLeft"],moveRight:["ArrowRight"],moveUp:["ArrowUp"],moveDown:["ArrowDown"],deselect:["Escape"]}},transformer:X(X({},Yc),{borderDash:[0,0]}),zone:{fill:"rgba(105, 105, 105, 0.7)",stroke:"#dbdbdb"}},history:{keyboard:{enabled:!0}},measurement:null};function Xo(n,e){return Object.entries(n).reduce(function(t,r){var i,s=Re(r,2),o=s[0],a=s[1];return e.includes(o)?t:X(X({},t),((i={})[o]=a,i))},{})}function NX(n){return X({container:n.container},t5(dy,Xo(n,["container"])))}function ti(n,e){var t=n.getClientRect(),r=t.x+t.width/2,i=t.y+t.height/2;n.rotation(e);var s=n.getClientRect(),o=r-(s.x+s.width/2),a=i-(s.y+s.height/2);n.setAttrs({x:n.x()+o,y:n.y()+a})}var On,uy=function(){function n(e){this.board=e}return n.prototype.apply=function(e,t){var r=this;this.board.history.create(this.board.layer,e.map(function(i){return i.node}),{undo:function(i){return r.clearCache(i)},redo:function(i){return r.addCache(i)}}),e.forEach(function(i){i.node.cache(),(Array.isArray(t)?t:[t]).forEach(function(s){"options"in s&&i.node.setAttrs(s.options);var o=i.node.filters()||[],a=r.getFilterFunction(s);o.includes(a)===!1&&i.node.filters(pe(pe([],Re(o),!1),[a],!1))})}),this.board.events.emit("filter:add",{shapes:e,data:{filters:t}})},n.prototype.remove=function(e,t){var r=this;this.board.history.create(this.board.layer,e.map(function(i){return i.node}),{undo:function(i){return r.addCache(i)},redo:function(i){return r.clearCache(i)}}),e.forEach(function(i){if(i.node.filters()){var s=Array.isArray(t)?t.map(r.getFilterFunction):[r.getFilterFunction(t)],o=i.node.filters().filter(function(a){return!s.includes(a)});o.length===0&&i.node.clearCache(),i.node.filters(o)}}),this.board.events.emit("filter:remove",{shapes:e,data:{filters:t}})},n.prototype.addCache=function(e){e.forEach(function(t){return t.nodes.forEach(function(r){var i;!r.isCached()&&(!((i=r.filters())===null||i===void 0)&&i.length)&&r.cache()})}),this.board.selection.reselect()},n.prototype.clearCache=function(e){e.forEach(function(t){return t.nodes.forEach(function(r){var i;r.isCached()&&!(!((i=r.filters())===null||i===void 0)&&i.length)&&r.clearCache()})}),this.board.selection.reselect()},n.prototype.getFilterFunction=function(e){return"customFn"in e?e.customFn:he.Filters[e.name]},n}(),n5=function(){function n(e){this.board=e}return n.prototype.horizontal=function(e){var t=(e??pe(pe([],Re(this.board.activeShapes),!1),[this.board.background.image],!1)).filter(function(r){return!r.hasGroup()});this.board.history.create(this.board.layer,t.map(function(r){return r.node})),t.forEach(function(r){var i=r.node,s=i.getClientRect();i.scaleX(-1*i.scaleX());var o=i.getClientRect();i.setAttrs({x:i.x()+(s.x-o.x),y:i.y()+(s.y-o.y)})}),this.board.events.emit("flip:x",{shapes:t})},n.prototype.vertical=function(e){var t=(e??pe(pe([],Re(this.board.activeShapes),!1),[this.board.background.image],!1)).filter(function(r){return!r.hasGroup()});this.board.history.create(this.board.layer,t.map(function(r){return r.node})),t.forEach(function(r){var i=r.node,s=i.getClientRect();i.scaleY(-1*i.scaleY());var o=i.getClientRect();i.setAttrs({x:i.x()+(s.x-o.x),y:i.y()+(s.y-o.y)})}),this.board.events.emit("flip:y",{shapes:t})},n}(),zn=function(){function n(e,t,r){r===void 0&&(r={});var i,s,o,a,h=this;this.deleted=!1,this.selectable=!1,this.filtersList=[],this.board=e,this.node=t,this.flip=new n5(e),this.filter=new uy(e),this.selectable=(o=(i=r.selectable)!==null&&i!==void 0?i:(s=this.board.settings.selection)===null||s===void 0?void 0:s.interactive)===null||o===void 0||o,this.config=X({transformer:{}},r),((a=r.history)===null||a===void 0||a)&&this.board.history.create(this.board.layer,[],{undo:function(){return h.delete()},redo:function(){return h.undelete()}}),this.board.events.emit("shape:create",{shapes:[this]}),this.selectable&&(this.node.draggable(!0),this.board.addShape(this)),this.board.layer.add(this.node),this.registerEvents()}return Object.defineProperty(n.prototype,"isActive",{get:function(){return!this.isDeleted&&!this.isInvisible},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDeleted",{get:function(){return this.deleted},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isVisible",{get:function(){return this.node.isVisible()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isInvisible",{get:function(){return this.isVisible===!1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSelectable",{get:function(){return this.selectable},set:function(e){this.selectable=e,this.node.draggable(e),e?this.board.addShape(this):(this.deselect(),this.board.removeShape(this)),this.board.events.emit("shape:selectable",{shapes:[this],data:{selectable:e}})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"group",{get:function(){return this.node.getAttr("__group__")},set:function(e){this.group&&e!==this.group&&this.board.groups.detach([this],this.group),e&&e.length>0&&this.board.groups.attach([this],e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this.node.name()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"filters",{get:function(){return this.filtersList},enumerable:!1,configurable:!0}),n.prototype.hasGroup=function(){return!!this.group},n.prototype.flipX=function(){this.flip.horizontal([this])},n.prototype.flipY=function(){this.flip.vertical([this])},n.prototype.select=function(){this.board.selection.add(this)},n.prototype.deselect=function(){this.board.selection.deselect(this)},n.prototype.addFilter=function(e){this.filter.apply([this],e),this.filtersList=pe(pe([],Re(this.getFiltersDiff(e)),!1),Re(Array.isArray(e)?e:[e]),!1)},n.prototype.removeFilter=function(e){this.filter.remove([this],e),this.filtersList=this.getFiltersDiff(e)},n.prototype.delete=function(){this.deleted||(this.deselect(),this.node.hide(),!this.node.isCached&&this.node.width()&&this.node.height()&&this.node.cache(),this.deleted=!0,this.board.events.emit("shape:delete",{shapes:[this]}))},n.prototype.undelete=function(){this.deleted&&(this.node.show(),this.node.isCached()&&this.node.clearCache(),this.deleted=!1,this.board.events.emit("shape:undelete",{shapes:[this]}))},n.prototype.destroy=function(){var e=this;this.node.destroy();var t=this.board.activeShapes.filter(function(r){return r.node!==e.node});this.board.setShapes(t),this.board.events.emit("shape:destroy",{shapes:[this]})},n.prototype.rotate=function(e){this.node.rotation(e),this.board.events.emit("shape:rotate",{shapes:[this]})},n.prototype.x=function(){return this.node.x()},n.prototype.y=function(){return this.node.y()},n.prototype.width=function(){return this.node.width()},n.prototype.height=function(){return this.node.height()},n.prototype.scale=function(){return this.node.scale()},n.prototype.scaleX=function(){return this.node.scaleX()},n.prototype.scaleY=function(){return this.node.scaleY()},n.prototype.show=function(){return this.node.show()},n.prototype.hide=function(){return this.node.hide()},n.prototype.update=function(e){this.board.history.create(this.board.layer,this.node),this.node.setAttrs(e)},n.prototype.to=function(e){this.board.history.create(this.board.layer,this.node),this.node.to(e)},n.prototype.registerEvents=function(){var e=this;this.node.addEventListener("mouseover",function(){e.selectable&&!e.board.activeDrawing&&(e.board.stage.getContent().style.cursor="move")}),this.node.addEventListener("mouseout",function(){e.board.stage.getContent().style.cursor="inherit"}),this.node.addEventListener("dragstart",function(){(e.selectable===!1||e.board.selection.isDisabled)&&e.node.stopDrag()}),this.node.on("dragend",function(t){return t.currentTarget.setAttrs({originalX:void 0,originalY:void 0})}),this.node.on("transformend",function(t){return t.currentTarget.setAttrs({originalScaleX:void 0,originalScaleY:void 0})})},n.prototype.getFiltersDiff=function(e){var t=Array.isArray(e)?e:[e];return this.filters.filter(function(r){return!t.find(function(i){return"name"in r&&"name"in i?i.name===r.name:"customFn"in r&&"customFn"in i&&r.customFn===i.customFn})})},n}(),DX=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return De(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"group"},enumerable:!1,configurable:!0}),e.prototype.rotate=function(t){ti(this.node,t),this.board.events.emit("shape:rotate",{shapes:[this]})},e}(zn),$X=function(){function n(e){this.groups=[],this.board=e}return Object.defineProperty(n.prototype,"list",{get:function(){return this.groups},enumerable:!1,configurable:!0}),n.prototype.findGroup=function(e){return this.groups.find(function(t){var r=t.container;return r.name===e&&r.isActive})},n.prototype.createGroup=function(e,t,r){var i=this;t===void 0&&(t={}),r===void 0&&(r=!0);var s={container:new DX(this.board,new he.Group(X({name:e,draggable:this.isDraggable()},t)),{history:r}),children:[]};return this.groups=pe(pe([],Re(this.groups),!1),[s],!1),r&&this.board.history.create(this.board.layer,[],{undo:function(){return i.destroyGroup(e)},redo:function(){return i.createGroup(e,t,!1)}}),this.board.events.emit("group:create",{data:{groupName:e}}),s},n.prototype.findOrCreateGroup=function(e,t,r){t===void 0&&(t={}),r===void 0&&(r=!0);var i=this.findGroup(e);return i??this.createGroup(e,t,r)},n.prototype.deleteGroup=function(e,t){var r=this;t===void 0&&(t=!0);var i=this.findGroup(e);i&&(i.container.delete(),i.children.forEach(function(s){return s.delete()}),t&&this.board.history.create(this.board.layer,[],{undo:function(){return r.undeleteGroup(e,!1)},redo:function(){return r.deleteGroup(e,!1)}}),this.board.events.emit("group:delete",{data:{groupName:e}}))},n.prototype.undeleteGroup=function(e,t){var r=this;t===void 0&&(t=!0);var i=this.groups.find(function(s){return s.container.name===e});i&&(i.container.undelete(),i.children.forEach(function(s){return s.undelete()}),t&&this.board.history.create(this.board.layer,[],{undo:function(){return r.deleteGroup(e,!1)},redo:function(){return r.undeleteGroup(e,!1)}}),this.board.events.emit("group:undelete",{data:{groupName:e}}))},n.prototype.destroyGroup=function(e){var t=this.findGroup(e);t&&(t.container.destroy(),t.children.forEach(function(r){return r.destroy()}),this.groups=this.groups.filter(function(r){var i=r.container;return t.container.name!==i.name}),this.board.events.emit("group:destroy",{data:{groupName:e}}))},n.prototype.splitGroup=function(e,t){var r=this;t===void 0&&(t=!0);var i=this.findGroup(e);i&&!i.container.node.isCached()&&(this.removeFromGroup(i.children,e,!1),i.container.delete(),this.groups=this.groups.filter(function(s){var o=s.container;return i.container.name!==o.name}),t&&this.board.history.create(this.board.layer,[],{undo:function(){return r.addToGroup(i.children,e,!1)},redo:function(){return r.splitGroup(e,!1)}}),this.board.events.emit("group:ungroup",{data:{groupName:e}}))},n.prototype.addToGroup=function(e,t,r){var i=this;r===void 0&&(r=!0);var s=this.findOrCreateGroup(t,{},r);return e.forEach(function(o){s.children.includes(o)||(i.groups=i.groups.map(function(a){var h=a.container,c=a.children;return h.name===t?{container:h,children:pe(pe([],Re(c),!1),[o],!1)}:{container:h,children:c}}),s.container.node.add(o.node),o.node.draggable(!1),o.node.setAttr("__group__",t))}),r&&this.board.history.create(this.board.layer,[],{undo:function(){i.removeFromGroup(e,t,!1),i.deleteEmpty(t,!1)},redo:function(){return i.addToGroup(e,t,!1)}}),this.board.events.emit("group:attach",{shapes:e,data:{groupName:t}}),s},n.prototype.removeFromGroup=function(e,t,r){var i=this;r===void 0&&(r=!0);var s=this.findGroup(t);s&&(e.forEach(function(o){var a;if(s.children.includes(o)!==!1){i.groups=i.groups.map(function(u){var f=u.container,m=u.children;return f.name===t?{container:f,children:m.filter(function(g){return o.node!==g.node})}:{container:f,children:m}});var h=o.node.getAbsolutePosition(),c=o.node.getAbsoluteScale(),l=o.node.getAbsoluteRotation();o.node.moveTo(s.container.node.parent),o.node.x(h.x),o.node.y(h.y),o.node.scale({x:c.x,y:c.y}),o.node.rotation(l),o.node.draggable(i.isDraggable());var d=s.container.node;d.children=(a=d.children)===null||a===void 0?void 0:a.filter(function(u){return u!==o.node}),o.node.setAttr("__group__",null)}}),r&&this.board.history.create(this.board.layer,[],{undo:function(){return i.addToGroup(e,t,!1)},redo:function(){i.removeFromGroup(e,t,!1),i.deleteEmpty(t,!1)}}),this.board.events.emit("group:detach",{shapes:e,data:{groupName:t}}))},n.prototype.isDraggable=function(){var e,t;return(t=(e=this.board.settings.selection)===null||e===void 0?void 0:e.interactive)===null||t===void 0||t},n.prototype.deleteEmpty=function(e,t){var r,i;t===void 0&&(t=!0),((i=(r=this.findGroup(e))===null||r===void 0?void 0:r.children)===null||i===void 0?void 0:i.length)===0&&this.deleteGroup(e,t)},n}(),RX=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return De(e,n),e.prototype.create=function(t,r){return r===void 0&&(r={}),this.createGroup(t,r)},e.prototype.find=function(t){return this.findGroup(t)},e.prototype.findOrCreate=function(t,r){return r===void 0&&(r={}),this.findOrCreateGroup(t,r)},e.prototype.delete=function(t){this.deleteGroup(t)},e.prototype.undelete=function(t){this.undeleteGroup(t)},e.prototype.destroy=function(t){this.destroyGroup(t)},e.prototype.ungroup=function(t){this.splitGroup(t)},e.prototype.attach=function(t,r){return this.addToGroup(t,r)},e.prototype.detach=function(t,r){this.removeFromGroup(t,r)},e}($X),r5=function(){function n(e,t){var r,i;t===void 0&&(t=!1),this.board=e,this.node=new he.Label,this.backgroundNode=new he.Tag((r=this.board.settings.measurement)===null||r===void 0?void 0:r.background),this.textNode=new he.Text(X({text:" "},(i=this.board.settings.measurement)===null||i===void 0?void 0:i.text)),this.node.add(this.backgroundNode,this.textNode),t===!1&&this.hide(),this.board.layer.add(this.node)}return Object.defineProperty(n.prototype,"position",{set:function(e){this.node.setAttrs({x:e.x,y:e.y}),this.node.moveToTop()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"text",{set:function(e){this.textNode.setAttr("text",e)},enumerable:!1,configurable:!0}),n.prototype.show=function(){this.node.isVisible()||(this.node.clearCache(),this.node.show())},n.prototype.hide=function(){this.node.isVisible()!==!1&&(this.node.hide(),this.node.cache())},n.prototype.measure=function(e,t){var r,i,s,o;if(e&&this.board.settings.measurement){var a=Math.max((r=this.board.settings.measurement.margin)!==null&&r!==void 0?r:0,(s=(i=this.board.settings.transformer)===null||i===void 0?void 0:i.anchorSize)!==null&&s!==void 0?s:0,(o=Yc.anchorSize)!==null&&o!==void 0?o:0),h=t??e.getClientRect();this.text="".concat(h.width.toFixed(0)," × ").concat(h.height.toFixed(0));var c=h.x+h.width/2-this.node.width()/2,l=h.y+h.height+a;l+this.node.height()>this.board.getDimensions().height&&(l=h.y+e.height()-2*this.node.height()-a),this.position={x:c,y:l},this.node.isVisible()===!1&&this.show()}},n}();function FX(n){n===void 0&&(n="");var e=String(n);return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/&nbsp;/gi," ")).replace(/&amp;/gi,"&")).replace(/<br>/gi,`
`)).replace(/<br\/>/gi,`
`)).replace(/<div>/gi,`
`)).replace(/<p>/gi,`
`)).replace(/<(.*?)>/g,"")).split(`
`).map(function(t){return t===void 0&&(t=""),t.trim()}).join(`
`)).replace(/\n\n+/g,`

`)).replace(/[ ]+/g," ")).trim()}function Er(){return typeof window<"u"&&window.document!==void 0}function ul(){var n;return!Er()&&typeof process<"u"&&!!(!((n=process.versions)===null||n===void 0)&&n.node)}(function(n){n.Svg="Svg",n.Text="Text",n.Pencil="Pencil",n.Line="Line",n.Arrow="Arrow",n.Circle="Circle",n.Rect="Rect",n.Ellipse="Ellipse",n.Polygon="Polygon",n.Triangle="Triangle"})(On||(On={}));var i5=function(n){function e(t,r,i){i===void 0&&(i={});var s=n.call(this,t,r,i)||this;return s.isEditingEnabled=!1,s.config=i,r.on("transform",s.transform.bind(s)),r.on("dblclick",s.inlineEdit.bind(s)),s}return De(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"label"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEditing",{get:function(){return this.isEditingEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textNode",{get:function(){return this.node.getText()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagNode",{get:function(){return this.node.getTag()},enumerable:!1,configurable:!0}),e.prototype.rotate=function(t){ti(this.node,t),this.board.events.emit("shape:rotate",{shapes:[this]})},e.prototype.updateTag=function(t){this.board.history.create(this.board.layer,this.tagNode),this.tagNode.setAttrs(t)},e.prototype.updateText=function(t){this.board.history.create(this.board.layer,this.textNode),this.textNode.setAttrs(t),this.updateTransformer()},e.prototype.transform=function(){this.config.keepScale!==!1&&this.board.selection.transformer.getActiveAnchor()!=="rotater"&&(this.textNode.setAttrs({width:this.node.width()*this.node.scaleX(),scaleX:this.node.scaleY()}),this.node.scaleX(this.textNode.scaleY()),this.tagNode.scaleX(this.node.scaleY()))},e.prototype.inlineEdit=function(t){var r,i,s,o=this;if(!ul()&&!this.node.isCached()){t.cancelBubble=!0,this.isEditingEnabled=!0,this.board.setActiveDrawing(On.Text);var a=t.target.absolutePosition(),h=this.textNode.getAttr("text");this.node.hide(),(r=this.node)===null||r===void 0||r.draggable(!1),this.board.selection.deselectAll();var c=document.createElement("span");(s=(i=this.board.container)===null||i===void 0?void 0:i.getElementsByClassName(this.board.settings.containerClassName)[0])===null||s===void 0||s.append(c),Er()&&this.setInputFocus(c),c.setAttribute("contenteditable",""),c.setAttribute("role","textbox"),c.innerText=this.textNode.getAttr("text"),Object.assign(c.style,{position:"absolute",display:"inline-block",left:"".concat(a.x-this.textNode.padding(),"px"),top:"".concat(a.y-this.textNode.padding(),"px"),width:"".concat(this.textNode.width()*this.node.scaleX(),"px"),minWidth:"".concat(2*this.textNode.padding(),"px"),maxWidth:"".concat(this.textNode.width()*this.node.scaleX(),"px"),minHeight:"".concat(this.textNode.height()*this.node.scaleY(),"px"),fontSize:"".concat(this.textNode.fontSize()*this.node.scaleY(),"px"),border:"none",padding:"".concat(this.textNode.padding(),"px"),margin:"".concat(this.textNode.padding(),"px"),overflow:"hidden",background:this.tagNode.fill(),borderRadius:"".concat(this.tagNode.cornerRadius(),"px"),outline:"none",resize:"none",lineHeight:this.textNode.lineHeight(),fontFamily:this.textNode.fontFamily(),transformOrigin:"left top",textAlign:this.textNode.align(),color:this.textNode.fill(),transform:"".concat(c.style.transform," rotateZ(").concat(this.node.rotation(),"deg)")}),c.addEventListener("blur",function(l){var d,u;o.isEditingEnabled=!1,(d=c.parentNode)===null||d===void 0||d.removeChild(c),o.board.setActiveDrawing(null);var f=FX(l.target.innerHTML);f!==h&&o.board.history.create(o.board.layer,[],{undo:function(){return o.changeText(h)},redo:function(){return o.changeText(f)}}),o.textNode.setText(f),o.node.show(),o.node.setAttrs({draggable:(u=o.board.settings.selection)===null||u===void 0?void 0:u.interactive,width:o.textNode.width()}),o.board.selection.add(o)})}},e.prototype.changeText=function(t){this.textNode.setAttrs({text:t}),this.updateTransformer(),this.board.events.emit("label:update-text",{shapes:[this],data:{text:t}})},e.prototype.updateTransformer=function(){this.board.selection.isVisible&&this.board.selection.transformer.forceUpdate()},e.prototype.setInputFocus=function(t){return Sn(this,void 0,void 0,function(){var r,i;return Cn(this,function(s){switch(s.label){case 0:return[4,new Promise(function(o){return setTimeout(o,50)})];case 1:return s.sent(),(r=document.createRange()).selectNodeContents(t),r.collapse(!1),(i=window.getSelection()).removeAllRanges(),i.addRange(r),[2]}})})},e}(zn),LX=function(){function n(e){this.list=[],this.board=e,this.filter=new uy(e),this.createZone(),this.createTransformer(),this.board.settings.measurement&&(this.dimensionsTag=new r5(this.board)),this.board.stage.on("mousedown touchstart",this.onDragZoneStart.bind(this)),this.board.stage.on("mousemove touchmove",this.onDragZoneMove.bind(this)),this.board.stage.on("mouseup touchend",this.onDragZoneEnd.bind(this)),Er()&&(window.addEventListener("mouseup",this.onWindowMouseUp.bind(this)),window.addEventListener("touchend",this.onWindowMouseUp.bind(this)),window.addEventListener("keydown",this.onKeyDown.bind(this)))}return Object.defineProperty(n.prototype,"shapes",{get:function(){return this.list},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isVisible",{get:function(){return this.list.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDisabled",{get:function(){return!!this.board.activeDrawing||this.board.activeShapes.some(function(e){return e instanceof i5&&e.isEditing})},enumerable:!1,configurable:!0}),n.prototype.getTransformer=function(){return this.transformer},n.prototype.find=function(e){var t=this.board.activeShapes.filter(function(r){return e(r)});this.multi(t)},n.prototype.selectAll=function(){this.multi(this.board.activeShapes)},n.prototype.deselectAll=function(){this.multi([])},n.prototype.reselect=function(){var e=this.list;this.deselectAll(),this.multi(e)},n.prototype.multi=function(e){var t,r,i;this.list=e;var s=X(X({visible:!0,centeredScaling:!0,rotationSnaps:[0,45,90,135,180,225,270,315],keepRatio:e.length>1,rotateEnabled:!0,enabledAnchors:["top-left","top-right","bottom-left","bottom-right","top-center","bottom-center","middle-left","middle-right"]},this.board.settings.transformer),(t=this.board.settings.selection)===null||t===void 0?void 0:t.transformer),o=e.reduce(function(a,h){var c,l=h.node.isCached()?[]:(c=h.config.transformer)===null||c===void 0?void 0:c.enabledAnchors;return X(X(X({},a),h.config.transformer),{enabledAnchors:l})},s);this.transformer.setAttrs(o).nodes(e.map(function(a){return a.node})),(r=this.dimensionsTag)===null||r===void 0||r.measure(this.transformer,this.getTransformerRect()),this.transformer.show(),this.transformer.moveToTop(),e.length===0&&(this.transformer.hide(),(i=this.dimensionsTag)===null||i===void 0||i.hide()),this.board.events.emit("selection:change",{shapes:e})},n.prototype.add=function(e){this.list.some(function(t){return t.node===e.node})||this.multi(pe(pe([],Re(this.list),!1),[e],!1))},n.prototype.toggle=function(e){this.list.some(function(t){return t.node===e.node})?this.deselect(e):this.multi(pe(pe([],Re(this.list),!1),[e],!1))},n.prototype.deselect=function(e){this.list=this.list.filter(function(t){return t!==e}),this.multi(this.list)},n.prototype.delete=function(){if(this.list.length!==0){var e=this.list;this.list=[],this.board.stage.getContent().style.cursor="inherit",this.transformer.nodes([]),this.board.history.create(this.board.layer,[],{undo:function(){return e.forEach(function(t){return t.undelete()})},redo:function(){return e.forEach(function(t){return t.delete()})}}),e.forEach(function(t){return t.delete()}),this.board.events.emit("selection:delete",{shapes:e})}},n.prototype.moveX=function(e){return Sn(this,void 0,void 0,function(){var t=this;return Cn(this,function(r){return[2,new Promise(function(i){t.board.history.create(t.board.layer,t.transformer.nodes()),t.list.forEach(function(s){s.node.to({x:s.node.x()+e,onFinish:i})}),t.board.events.emit("selection:move",{shapes:t.list,data:{axis:"x",value:e}})})]})})},n.prototype.moveY=function(e){return Sn(this,void 0,void 0,function(){var t=this;return Cn(this,function(r){return[2,new Promise(function(i){t.board.history.create(t.board.layer,t.transformer.nodes()),t.list.forEach(function(s){s.node.to({y:s.node.y()+e,onFinish:i})}),t.board.events.emit("selection:move",{shapes:t.list,data:{axis:"y",value:e}})})]})})},n.prototype.addFilter=function(e){this.filter.apply(this.list,e),this.reselect()},n.prototype.removeFilter=function(e){this.filter.remove(this.list,e),this.reselect()},n.prototype.group=function(e){this.board.groups.attach(this.list,e)},n.prototype.createZone=function(){var e;this.zone=new he.Rect(X({visible:!1},(e=this.board.settings.selection)===null||e===void 0?void 0:e.zone)),this.board.layer.add(this.zone)},n.prototype.createTransformer=function(){var e=this;this.transformer=new he.Transformer,this.transformer.on("dragstart",function(){var t;e.transformer.hide(),(t=e.dimensionsTag)===null||t===void 0||t.hide(),e.board.history.create(e.board.layer,e.list.map(function(r){return r.node})),e.board.events.emit("selection:dragstart",{shapes:e.list})}),this.transformer.on("dragmove",function(){e.board.events.emit("selection:dragmove",{shapes:e.list})}),this.transformer.on("dragend",function(){var t;e.transformer.show(),(t=e.dimensionsTag)===null||t===void 0||t.measure(e.transformer,e.getTransformerRect()),e.board.events.emit("selection:dragend",{shapes:e.list})}),this.transformer.on("transformstart",function(){e.board.history.create(e.board.layer,e.list.map(function(t){return t.node}),{execute:function(){return e.board.selection.transformer.forceUpdate()}}),e.board.events.emit("selection:transformstart",{shapes:e.list})}),this.transformer.on("transform",function(){var t;(t=e.dimensionsTag)===null||t===void 0||t.measure(e.transformer,e.getTransformerRect()),e.board.events.emit("selection:transform",{shapes:e.list})}),this.transformer.on("transformend",function(){e.board.events.emit("selection:transformend",{shapes:e.list})}),this.board.layer.add(this.transformer)},n.prototype.onDragZoneStart=function(e){var t,r=this;if(((t=this.board.settings.selection)===null||t===void 0?void 0:t.interactive)!==!1&&!this.isDisabled){var i=this.board.activeShapes.find(function(a){return a.node===r.getParentNode(e.target)});if(i&&!this.list.includes(i)){var s=e.evt.shiftKey===!0,o=e.evt.ctrlKey===!0;return s||o?s&&!o?this.add(i):o&&!s&&this.toggle(i):this.multi([i]),void this.board.setActiveDrawing(null)}this.board.activeDrawing===null&&this.isBackgroundNode(e.target)!==!1&&(this.startPointerPosition=this.board.stage.getPointerPosition(),this.zone.setAttrs({width:0,height:0,visible:!0}).moveToTop())}},n.prototype.onDragZoneMove=function(){if(this.zone.visible()){var e=this.board.stage.getPointerPosition(),t=e.x,r=e.y;this.zone.setAttrs({x:Math.min(this.startPointerPosition.x,t),y:Math.min(this.startPointerPosition.y,r),width:Math.abs(t-this.startPointerPosition.x),height:Math.abs(r-this.startPointerPosition.y)})}},n.prototype.onDragZoneEnd=function(){var e=this;if(this.zone.visible()){setTimeout(function(){e.zone.visible(!1)},10);var t=this.zone.getClientRect(),r=this.board.activeShapes.filter(function(i){return he.Util.haveIntersection(t,i.node.getClientRect())});this.multi(r)}},n.prototype.onWindowMouseUp=function(e){e.target instanceof HTMLCanvasElement||this.onDragZoneEnd()},n.prototype.onKeyDown=function(e){var t,r,i,s,o,a,h,c,l,d,u,f,m,g,y=(t=this.board.settings.selection)===null||t===void 0?void 0:t.keyboard;if((y==null?void 0:y.enabled)!==!1){var v=this.transformer.nodes(),b=(r=y==null?void 0:y.movingSpaces)!==null&&r!==void 0?r:5;this.transformer.getAttr("visible")!==!1&&v.length!==0&&(!((s=(i=y==null?void 0:y.map)===null||i===void 0?void 0:i.delete)===null||s===void 0)&&s.includes(e.key)&&this.delete(),!((a=(o=y==null?void 0:y.map)===null||o===void 0?void 0:o.moveLeft)===null||a===void 0)&&a.includes(e.key)&&this.moveX(-b),!((c=(h=y==null?void 0:y.map)===null||h===void 0?void 0:h.moveRight)===null||c===void 0)&&c.includes(e.key)&&this.moveX(b),!((d=(l=y==null?void 0:y.map)===null||l===void 0?void 0:l.moveUp)===null||d===void 0)&&d.includes(e.key)&&this.moveY(-b),!((f=(u=y==null?void 0:y.map)===null||u===void 0?void 0:u.moveDown)===null||f===void 0)&&f.includes(e.key)&&this.moveY(b),!((g=(m=y==null?void 0:y.map)===null||m===void 0?void 0:m.deselect)===null||g===void 0)&&g.includes(e.key)&&this.deselectAll())}},n.prototype.getParentNode=function(e){for(var t,r=e;r.parent&&((t=r.parent)===null||t===void 0?void 0:t.getType())!=="Layer";)r=r.parent;return r},n.prototype.isBackgroundNode=function(e){return e===this.board.stage||e===this.board.background.overlay.node},n.prototype.getTransformerRect=function(){return{x:this.transformer.x(),y:this.transformer.y(),width:this.transformer.width(),height:this.transformer.height()}},n}();function s5(n){return Sn(this,void 0,void 0,function(){return Cn(this,function(e){return[2,new Promise(function(t,r){var i=new FileReader;i.addEventListener("load",function(){t(i.result)}),i.addEventListener("error",function(s){r(s)}),i.readAsDataURL(n)})]})})}function py(n){return new Promise(function(e,t){he.Image.fromURL(n,function(r){r?e(r):t()})})}var o5=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return De(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"image"},enumerable:!1,configurable:!0}),e.prototype.rotate=function(t){ti(this.node,t),this.board.events.emit("shape:rotate",{shapes:[this]})},e}(zn),a5=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return De(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"rect"},enumerable:!1,configurable:!0}),e.prototype.rotate=function(t){ti(this.node,t),this.board.events.emit("shape:rotate",{shapes:[this]})},e}(zn),jX=function(){function n(e){this.board=e;var t=new he.Image({image:void 0}),r=new he.Rect;this.image=new o5(e,t,{selectable:!1,history:!1}),this.overlay=new a5(e,r,{selectable:!1,history:!1})}return Object.defineProperty(n.prototype,"nodes",{get:function(){return[this.image.node,this.overlay.node]},enumerable:!1,configurable:!0}),n.prototype.getPosition=function(){return{x:this.image.node.x()||this.overlay.node.x(),y:this.image.node.y()||this.overlay.node.y()}},n.prototype.setImageFromFile=function(e,t){return Sn(this,void 0,void 0,function(){var r;return Cn(this,function(i){switch(i.label){case 0:return[4,s5(e)];case 1:return r=i.sent(),this.setImageFromUrl(r,t),[2]}})})},n.prototype.setImageFromUrl=function(e,t){var r,i;return t===void 0&&(t={size:"resize"}),Sn(this,void 0,void 0,function(){var s,o,a,h,c;return Cn(this,function(l){switch(l.label){case 0:return this.board.history.create(this.board.layer,[this.board.stage,this.image.node,this.overlay.node],this.board.rescale.bind(this)),[4,py(e)];case 1:return s=l.sent(),o=s.width(),a=s.height(),h={width:this.board.stage.width()/o,height:this.board.stage.height()/a},t.size==="cover"&&(c=Math.max(h.width,h.height),o*=c,a*=c),t.size==="contain"&&(c=Math.min(h.width,h.height),o*=c,a*=c),t.size==="resize"&&this.board.stage.setAttrs({width:o,height:a}),t.size==="stretch"&&(o=this.board.stage.width(),a=this.board.stage.height()),this.image.node.setAttrs({width:o,height:a,image:s.image(),x:(r=t.x)!==null&&r!==void 0?r:s.x(),y:(i=t.y)!==null&&i!==void 0?i:s.y()}),this.overlay.node.setAttrs({width:o,height:a}),[2]}})})},n.prototype.fill=function(e){this.board.history.create(this.board.layer,this.overlay.node),this.overlay.node.setAttrs({width:this.board.stage.width(),height:this.board.stage.height(),fill:e})},n}(),BX=function(){function n(e,t,r){var i,s,o,a,h,c,l;this.activeDrawing=null,this.shapesList=[],this.settings=e,this.history=r,this.events=t;var d=(o=(i=this.settings.width)!==null&&i!==void 0?i:(s=this.settings.container)===null||s===void 0?void 0:s.clientWidth)!==null&&o!==void 0?o:0,u=(c=(a=this.settings.height)!==null&&a!==void 0?a:(h=this.settings.container)===null||h===void 0?void 0:h.clientHeight)!==null&&c!==void 0?c:0;this.stage=new he.Stage({width:d,height:u,container:this.settings.container}),this.stage.content&&(this.stage.content.className=this.settings.containerClassName,Object.assign(this.stage.content.style,{position:"relative",top:"50%",left:"50%",transform:"translate(-50%,-50%)"})),Er()&&(this.stage.on("widthChange",this.rescale.bind(this)),this.stage.on("heightChange",this.rescale.bind(this))),this.settings.disableCanvasContextMenu&&((l=this.settings.container)===null||l===void 0||l.addEventListener("contextmenu",function(f){return f.preventDefault()})),this.layer=new he.Layer,this.stage.add(this.layer),this.background=new jX(this),this.selection=new LX(this),this.groups=new RX(this),this.container=this.settings.container}return Object.defineProperty(n.prototype,"shapes",{get:function(){return this.shapesList},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"activeShapes",{get:function(){return this.shapesList.filter(function(e){return e.isActive})},enumerable:!1,configurable:!0}),n.prototype.getDimensions=function(){return{width:this.background.image.node.width()||this.background.overlay.node.width()||this.stage.width()||this.settings.width,height:this.background.image.node.height()||this.background.overlay.node.height()||this.stage.height()||this.settings.height}},n.prototype.getNodes=function(){return pe(pe([],Re(this.background.nodes),!1),Re(this.shapesList.map(function(e){return e.node})),!1)},n.prototype.addShape=function(e){this.shapesList.some(function(t){return t.node===e.node})||this.shapesList.push(e)},n.prototype.removeShape=function(e){this.shapesList=this.shapesList.filter(function(t){return t.node!==e.node})},n.prototype.setShapes=function(e){this.shapesList=e},n.prototype.rescale=function(){var e=this.getContainerTransform();e&&this.stage.content.style.transform!==e&&(this.stage.content.style.transform=e,this.events.emit("board:rescale",{data:{transform:e}}))},n.prototype.setActiveDrawing=function(e){e&&(this.selection.transformer.hide(),this.draw()),e!==this.activeDrawing&&this.events.emit("board:change-active-drawing",{data:{type:e}}),this.activeDrawing=e},n.prototype.getContainerTransform=function(){if(this.container){var e=this.getDimensions(),t=this.container.clientWidth<this.container.clientHeight?this.stage.width()/e.width:this.stage.height()/e.height;return t*this.stage.width()>this.container.clientWidth&&(t=this.container.clientWidth/this.stage.width()),t*this.stage.height()>this.container.clientHeight&&(t=this.container.clientHeight/this.stage.height()),"translate(-50%, -50%) scale(".concat(t.toFixed(6),")")}},n.prototype.draw=function(){this.layer.batchDraw()},n.prototype.gc=function(){this.shapesList=this.shapesList.filter(function(e){return!e.isDeleted||(e.node.destroy(),!1)})},n}(),GX=function(){function n(){this.listeners={}}return n.prototype.on=function(e,t){var r=this;(Array.isArray(e)?e:[e]).forEach(function(i){r.listeners[i]||(r.listeners[i]=[]),r.listeners[i].push(t)})},n.prototype.off=function(e,t){var r=this;(Array.isArray(e)?e:[e]).forEach(function(i){if(r.listeners[i]){var s=r.listeners[i].indexOf(t);s>-1&&r.listeners[i].splice(s,1)}})},n.prototype.emit=function(e,t){var r=this;(this.listeners[e]||this.listeners["*"])&&["*",e].forEach(function(i){var s;(s=r.listeners[i])===null||s===void 0||s.forEach(function(o){o(X({name:e},t))})})},n}(),zX=function(){function n(e,t){this.list=[],this.step=-1,this.settings=e,this.events=t,Er()&&window.addEventListener("keydown",this.onKeyDown.bind(this))}return n.prototype.getStep=function(){return this.step},n.prototype.getList=function(){return this.list},n.prototype.getState=function(){return this.list[this.step]},n.prototype.create=function(e,t,r){var i=this,s=Array.isArray(t)?t:[t];this.step+=1,this.list=pe(pe([],Re(this.list.slice(0,this.step)),!1),[{container:e,states:s.map(function(o){return i.getNodeState(o)}),hooks:r}],!1)},n.prototype.undo=function(){var e,t,r=this;this.step<0||(this.applyAttributes(function(i,s){return r.getNodeAttributes(i)}),(t=(e=this.list[this.step].hooks)===null||e===void 0?void 0:e.undo)===null||t===void 0||t.call(e,this.list[this.step].states),this.step-=1,this.events.emit("history:undo",this.getEventData()))},n.prototype.redo=function(){var e,t;this.step!==this.list.length-1&&(this.step+=1,this.applyAttributes(function(r,i){return i}),(t=(e=this.list[this.step].hooks)===null||e===void 0?void 0:e.redo)===null||t===void 0||t.call(e,this.list[this.step].states),this.events.emit("history:redo",this.getEventData()))},n.prototype.jump=function(e){if(!(e<0||e>this.list.length-1||this.step===e))for(;e!==this.step;)e<this.step?this.undo():this.redo()},n.prototype.getNodeState=function(e){var t=e.clone({});return e.getType()==="Group"?{nodes:this.getNodesTree(e),snapshots:this.getNodesTree(t).map(function(r){return r.attrs})}:{nodes:[e],snapshots:[t.attrs]}},n.prototype.applyAttributes=function(e){var t,r=this,i=this.list[this.step],s=i.container,o=i.states,a=i.hooks;o.forEach(function(h){var c=h.nodes,l=h.snapshots;c.forEach(function(d,u){var f=l[u],m=e(d,f);l[u]=X({},r.getNodeAttributes(d)),Object.entries(m).forEach(function(g){var y=Re(g,1)[0];d.setAttr(y,f[y])})})}),(t=a==null?void 0:a.execute)===null||t===void 0||t.call(a,o),s.batchDraw()},n.prototype.getNodesTree=function(e){var t=this;return e?(Array.isArray(e)?e:[e]).reduce(function(r,i){return pe(pe(pe([],Re(r),!1),[i],!1),Re(t.getNodesTree(i.hasChildren()?i.children:[])),!1)},[]):[]},n.prototype.getNodeAttributes=function(e){return Xo(X({x:e.x(),y:e.y(),scaleX:e.scaleX(),scaleY:e.scaleY(),width:e.width(),height:e.height()},e.attrs),["id","container"])},n.prototype.getEventData=function(){return{data:{step:this.step,total:this.list.length,canUndo:this.step>-1,canReset:this.step>-1,canRedo:this.step>-1&&this.step<this.list.length-1}}},n.prototype.onKeyDown=function(e){var t,r,i;if(((i=(r=(t=this.settings)===null||t===void 0?void 0:t.history)===null||r===void 0?void 0:r.keyboard)===null||i===void 0?void 0:i.enabled)!==!1){var s=e.metaKey||e.ctrlKey,o=e.shiftKey===!0,a=e.key.toLowerCase();s&&!o&&a==="z"&&this.undo(),s&&o&&a==="z"&&this.redo()}},n}(),UX=function(){function n(e){this.board=e}return n.prototype.export=function(e){var t,r=(t=this.board.stage.children)===null||t===void 0?void 0:t.flatMap(function(s){var o;return(o=s.children)===null||o===void 0?void 0:o.filter(function(a){return a.getClassName()==="Transformer"&&a.nodes().length>0})});r==null||r.forEach(function(s){return s==null?void 0:s.hide()});var i=this.board.stage.toDataURL(e);return r==null||r.forEach(function(s){return s==null?void 0:s.show()}),i},n}(),VX=function(){function n(e){this.board=e}return n.prototype.export=function(){var e=this,t=this.nodeToObject(this.board.stage,["container","children","zIndex"]),r=this.nodeToObject(this.board.layer,["children","zIndex"]),i=this.board.activeShapes.map(function(s){return X(X({},e.nodeToObject(s.node,[])),{group:s.group})});return{stage:t,layer:r,background:{image:X(X({},this.nodeToObject(this.board.background.image.node)),{group:this.board.background.image.group}),overlay:X(X({},this.nodeToObject(this.board.background.overlay.node)),{group:this.board.background.overlay.group})},shapes:i}},n.prototype.nodeToObject=function(e,t){var r,i;t===void 0&&(t=[]);var s=e.toObject();s.className==="Image"&&e.attrs.image&&(s.attrs.url=e.attrs.image.src);var o=(e.filters()||[]).map(function(h){return Object.keys(he.Filters).find(function(c){return he.Filters[c]===h})}),a=Xo(X(X({},s.attrs),Object.entries({x:(r=e.x())!==null&&r!==void 0?r:void 0,y:(i=e.y())!==null&&i!==void 0?i:void 0,width:e.width()||void 0,height:e.height()||void 0}).reduce(function(h,c){var l,d=Re(c,2),u=d[0],f=d[1];return X(X({},h),((l={})[u]=f&&Number(f==null?void 0:f.toFixed(2)),l))},{})),pe(["draggable","filters","__group__"],Re(t),!1));return X(X({attrs:a,filters:o,className:s.className},!t.includes("zIndex")&&{zIndex:e.zIndex()}),["Label"].includes(s.className)&&{children:s.children})},n}(),HX=function(){function n(e,t){this.board=e,this.cropper=t,this.image=new UX(this.board),this.json=new VX(this.board)}return n.prototype.toImage=function(e){return this.cropper.stop(),this.image.export(e)},n.prototype.toJson=function(){return this.json.export()},n}(),KX=function(){function n(e,t){this.board=e,this.shapes=t}return n.prototype.json=function(e){var t=e.stage,r=e.layer,i=e.background,s=e.shapes;return Sn(this,void 0,void 0,function(){var o=this;return Cn(this,function(a){switch(a.label){case 0:return this.board.background.overlay.update(i.overlay),i.image.attrs.url?[4,this.board.background.setImageFromUrl(i.image.attrs.url)]:[3,2];case 1:a.sent(),this.board.background.image.update(Xo(i.image.attrs,["url"])),a.label=2;case 2:return this.board.layer.setAttrs(Xo(r.attrs,["width","height"])),this.board.stage.setAttrs(t.attrs),s.forEach(function(h){h.className==="Group"&&o.board.groups.create(h.attrs.name,h.attrs)}),[4,Promise.all(s.map(function(h){return Sn(o,void 0,void 0,function(){var c,l,d,u;return Cn(this,function(f){switch(f.label){case 0:switch(h.className){case"Image":return[3,1];case"Label":return[3,3];case"Text":return[3,4];case"Line":return[3,5];case"Arrow":return[3,6];case"Circle":return[3,7];case"Ellipse":return[3,8];case"RegularPolygon":return[3,9];case"Rect":return[3,10];case"Path":return[3,11];case"Group":return[3,12]}return[3,13];case 1:return[4,this.shapes.image.insert(h.attrs.url,Xo(h.attrs,["url"]))];case 2:return c=f.sent(),[3,13];case 3:return c=this.shapes.label.insert({container:h.attrs,tag:h.children[0].attrs,text:h.children[1].attrs}),[3,13];case 4:return c=this.shapes.text.insert(h.attrs),[3,13];case 5:return c=this.shapes.line.insert(h.attrs),[3,13];case 6:return c=this.shapes.arrow.insert(h.attrs),[3,13];case 7:return c=this.shapes.circle.insert(h.attrs),[3,13];case 8:return c=this.shapes.ellipse.insert(h.attrs),[3,13];case 9:return c=this.shapes.polygon.insert(h.attrs),[3,13];case 10:return c=this.shapes.rect.insert(h.attrs),[3,13];case 11:return c=this.shapes.svg.insert(h.attrs),[3,13];case 12:return c=(l=this.board.groups.find(h.attrs.name))===null||l===void 0?void 0:l.container,[3,13];case 13:return c&&(c.group=h.group,c.node.zIndex((d=h.zIndex)!==null&&d!==void 0?d:0)),c&&Array.isArray(h.filters)&&((u=h.filters)===null||u===void 0?void 0:u.length)>0&&(h.filters.forEach(function(m){c.node.filters(pe(pe([],Re((c==null?void 0:c.node.filters())||[]),!1),[he.Filters[m]],!1))}),c.node.cache()),[2]}})})}))];case 3:return a.sent(),[2]}})})},n}();function m0(n,e){return{x:n.x*Math.cos(e)+-n.y*Math.sin(e),y:n.x*Math.sin(e)- -n.y*Math.cos(e)}}function v0(n){return Number(n)*Math.PI/180}var l5=function(){function n(e,t){this.board=e,this.options=this.createOptions(t),this.layer=new he.Layer;var r=new he.Rect({fill:this.options.overlay.color,opacity:this.options.overlay.opacity,width:this.board.stage.width(),height:this.board.stage.height()});this.overlay=this.createOverlay(),this.cropzone=this.createCropzone(),this.layer.add(r,this.overlay,this.cropzone)}return n.prototype.getCursorEvents=function(){return Er()?[{name:"mouseout",cursor:"default"},{name:"mouseover",cursor:"grab"},{name:"dragmove",cursor:"grabbing"},{name:"dragend",cursor:"default"}]:[]},n.prototype.createCropzone=function(){var e,t,r,i,s,o,a,h=this,c=new he.Group({x:this.options.x,y:this.options.y}),l={x:0,y:0,fill:"transparent",dash:this.options.transformer.borderDash};return this.options.circular?c.add(new he.Circle(X(X({},l),{radius:this.options.radius,stroke:(t=(e=this.options.circle)===null||e===void 0?void 0:e.borderStroke)!==null&&t!==void 0?t:this.options.transformer.borderStroke,strokeWidth:(i=(r=this.options.circle)===null||r===void 0?void 0:r.borderStrokeWidth)!==null&&i!==void 0?i:this.options.transformer.borderStrokeWidth,dash:(o=(s=this.options.circle)===null||s===void 0?void 0:s.borderDash)!==null&&o!==void 0?o:this.options.transformer.borderDash}))):c.add(new he.Rect(X(X({},l),{width:this.options.width,height:this.options.height,stroke:this.options.fixed?this.options.transformer.borderStroke:void 0,strokeWidth:this.options.fixed?this.options.transformer.borderStrokeWidth:void 0}))),!((a=this.options.guides)===null||a===void 0)&&a.show&&c.add.apply(c,pe([],Re(this.createGuideLines()),!1)),this.getCursorEvents().forEach(function(d){var u=d.name,f=d.cursor;c.on(u,function(){h.board.stage.container().style.cursor=f})}),c},n.prototype.createGuideLines=function(){var e,t,r=this.options.guides,i={stroke:r.color,strokeWidth:r.width,dash:r.dash};if(this.options.circular)return[new he.Line(X({points:[-this.options.radius,0,this.options.radius,0]},i)),new he.Line(X({points:[0,-this.options.radius,0,this.options.radius]},i))];var s=this.options,o=s.width,a=s.height,h=r.count||((t=(e=dy.cropper)===null||e===void 0?void 0:e.guides)===null||t===void 0?void 0:t.count);return Array.from({length:h}).flatMap(function(c,l){var d=o/(h+1),u=d+l*d,f=a/(h+1),m=f+l*f;return[new he.Line(X({points:[u,0,u,a]},i)),new he.Line(X({points:[0,m,o,m]},i))]})},n.prototype.createOverlay=function(){return new he.Rect({x:0,y:0,width:this.board.stage.width(),height:this.board.stage.height()})},n.prototype.createOptions=function(e){var t,r=X(X(X({},this.board.settings.cropper),{transformer:X(X(X({},this.board.settings.transformer),(t=this.board.settings.cropper)===null||t===void 0?void 0:t.transformer),e.transformer)}),e);return e.circular?X(X({circular:!0},r),this.getCircularCropperOptions(r)):X(X({circular:!1},r),this.getRectangularCropperOptions(r))},n.prototype.getCircularCropperOptions=function(e){var t,r,i,s,o=(t=e.transformer)===null||t===void 0?void 0:t.borderStrokeWidth,a=(Math.min(this.board.stage.width(),this.board.stage.height())-2*o)/2,h=(r=e.x)!==null&&r!==void 0?r:-1,c=(i=e.y)!==null&&i!==void 0?i:-1;return{radius:(s=e.radius)!==null&&s!==void 0?s:a/e.marginRatio,x:h>=Math.max(h,o)?h:this.board.stage.width()/2,y:c>=Math.max(c,o)?c:this.board.stage.height()/2}},n.prototype.getRectangularCropperOptions=function(e){var t,r,i,s,o=(t=e.transformer)===null||t===void 0?void 0:t.borderStrokeWidth,a=e.fixed?2*o:2*((r=e.transformer)===null||r===void 0?void 0:r.anchorSize),h=e.aspectRatio||this.board.stage.width()/this.board.stage.height(),c=e.width||(this.board.stage.width()-a)/e.marginRatio,l=e.height||c/h;l>this.board.stage.height()-a&&(c=(l=this.board.stage.height()-a)*h);var d=(i=e.x)!==null&&i!==void 0?i:-1,u=(s=e.y)!==null&&s!==void 0?s:-1;return{aspectRatio:h,width:c,height:l,x:d>=0?Math.max(d,o):(this.board.stage.width()-c)/2,y:u>=0?Math.max(u,o):(this.board.stage.height()-l)/2}},n}(),h5=function(n){function e(t,r){var i=n.call(this,t,r)||this;return i.draggable=i.createDraggableOverlay(),i.layer.add(i.draggable),i.setupCropzone(),i.board.stage.add(i.layer),i}return De(e,n),e.prototype.zoom=function(t){this.board.layer.scale({x:t,y:t});var r=this.board.layer.width()*t,i=this.board.layer.height()*t,s=[this.draggable.width()/2,this.draggable.height()/2],o=[r/2,i/2];this.draggable.width(r),this.draggable.height(i);var a=this.getDraggableOverlayBoundRect({x:this.draggable.x()+s[0]-o[0],y:this.draggable.y()+s[1]-o[1]}),h=a.x,c=a.y;this.draggable.x(h),this.draggable.y(c),this.board.layer.x(this.draggable.x()),this.board.layer.y(this.draggable.y()),this.board.draw()},e.prototype.setDraggableOverlayPosition=function(t){var r=t.x,i=t.y,s=this.getDraggableOverlayBoundRect({x:r,y:i}),o=s.x,a=s.y;this.draggable.x(o),this.board.layer.x(o),this.draggable.y(a),this.board.layer.y(a),this.board.draw()},e.prototype.setupCropzone=function(){this.cropzone.draggable(!1)},e.prototype.getDraggableOverlayBoundRect=function(t){var r=this.draggable,i=this.options.circular?2*this.options.radius:this.options.width,s=this.options.circular?2*this.options.radius:this.options.height,o=this.options.circular?this.options.x-this.options.radius:this.options.x,a=this.options.circular?this.options.y-this.options.radius:this.options.y,h=o+i-r.width(),c=a+s-r.height(),l=t.x,d=t.y;return l>=o?l=o:l<=h&&(l=h),d>=a?d=a:d<=c&&(d=c),{x:l,y:d}},e.prototype.createDraggableOverlay=function(){var t=this,r=new he.Rect({x:0,y:0,width:this.board.stage.width(),height:this.board.stage.height(),fill:"transparent",opacity:0,draggable:!0,dragBoundFunc:function(i){var s=t.getDraggableOverlayBoundRect(i),o=s.x,a=s.y;return t.board.layer.x(o),t.board.layer.y(a),t.board.draw(),{x:o,y:a}}});return this.getCursorEvents().forEach(function(i){var s=i.name,o=i.cursor;r.on(s,function(){t.board.stage.container().style.cursor=o})}),r},e}(l5),WX=function(n){function e(t,r){var i=n.call(this,t,X(X({},r),{keepRatio:!0}))||this;return i.setupOverlay(),i}return De(e,n),e.prototype.getRect=function(){var t=this.options,r=this.draggable.width()/this.layer.width(),i=this.draggable.height()/this.layer.height();return{x:(t.x-t.radius-this.draggable.x())/r,y:(t.y-t.radius-this.draggable.y())/i,width:2*t.radius/r,height:2*t.radius/i}},e.prototype.setupOverlay=function(){var t=this.options;this.overlay.sceneFunc(function(r,i){r.beginPath(),r.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),r.clip(),r.clearRect(t.x-t.radius,t.y-t.radius,2*t.radius,2*t.radius),r.closePath(),r.fillStrokeShape(i)})},e}(h5),XX=function(n){function e(t,r){var i=n.call(this,t,r)||this;return i.setupOverlay(),i}return De(e,n),e.prototype.getRect=function(){var t=this.options,r=this.draggable.width()/this.layer.width(),i=this.draggable.height()/this.layer.height();return{x:(t.x-this.draggable.x())/r,y:(t.y-this.draggable.y())/i,width:t.width/r,height:t.height/i}},e.prototype.setupOverlay=function(){var t=this.options;this.overlay.sceneFunc(function(r,i){r.beginPath(),r.clearRect(t.x,t.y,t.width,t.height),r.closePath(),r.fillStrokeShape(i)})},e}(h5),c5=function(n){function e(t,r){var i=n.call(this,t,r)||this;return i.transformer=i.createTransformer(),i.layer.add(i.transformer),i.setupCropzone(),i.board.stage.add(i.layer),i}return De(e,n),e.prototype.setPosition=function(t){var r=t===void 0?{x:this.options.x,y:this.options.y}:t,i=r.x,s=r.y,o=this.getCropzoneBoundRect({x:i,y:s}),a=o.x,h=o.y;this.cropzone.x(a),this.cropzone.y(h),this.layer.batchDraw()},e.prototype.getRect=function(){return{x:this.transformer.x(),y:this.transformer.y(),width:this.transformer.width(),height:this.transformer.height()}},e.prototype.setupCropzone=function(){var t=this;this.cropzone.draggable(!0),this.cropzone.dragBoundFunc(function(r){return t.getCropzoneBoundRect(r)})},e.prototype.getCropzoneBoundRect=function(t){var r=this.options.transformer.borderStrokeWidth,i=(this.options.circular?this.transformer.width()/2:0)+r,s=(this.options.circular?this.transformer.height()/2:0)+r,o=(this.options.circular?this.board.stage.width()-this.transformer.width()/2:this.board.stage.width()-this.transformer.width())-r,a=(this.options.circular?this.board.stage.height()-this.transformer.height()/2:this.board.stage.height()-this.transformer.height())-r;return{x:t.x<=i?Math.max(t.x,i):Math.min(t.x,o),y:t.y<=s?Math.max(t.y,s):Math.min(t.y,a)}},e.prototype.createTransformer=function(){var t=this;return new he.Transformer(X(X({nodes:[this.cropzone],keepRatio:this.options.keepRatio,rotateEnabled:!1},this.options.transformer),{enabledAnchors:pe(["top-left","top-right","bottom-left","bottom-right"],Re(this.options.keepRatio?[]:["top-center","bottom-center"]),!1),boundBoxFunc:function(r,i){return Math.ceil(i.x)<-1||Math.ceil(i.y)<-1||i.width<t.options.minWidth||i.height<t.options.minHeight||i.width>=t.board.stage.width()||i.height>=t.board.stage.height()||i.x+i.width>=t.board.stage.width()||i.y+i.height>=t.board.stage.height()?r:i}}))},e}(l5),YX=function(n){function e(t,r){var i=n.call(this,t,X(X({},r),{circular:!0,keepRatio:!0}))||this;return i.setupOverlay(),i}return De(e,n),e.prototype.setupOverlay=function(){var t=this;this.overlay.sceneFunc(function(r,i){r.beginPath();var s=t.transformer.width()/2;r.arc(t.cropzone.x(),t.cropzone.y(),s,0,2*Math.PI,!1),r.clip(),r.clearRect(t.cropzone.x()-s,t.cropzone.y()-s,2*s,2*s),r.closePath(),r.fillStrokeShape(i)})},e}(c5),qX=function(n){function e(t,r){var i=n.call(this,t,r)||this;return i.setupOverlay(),i}return De(e,n),e.prototype.setupOverlay=function(){var t=this;this.overlay.sceneFunc(function(r,i){r.beginPath(),r.clearRect(t.cropzone.x(),t.cropzone.y(),t.transformer.width(),t.transformer.height()),r.closePath(),r.fillStrokeShape(i)})},e}(c5),ZX=function(){function n(e){this.board=e}return Object.defineProperty(n.prototype,"isActive",{get:function(){return this.active},enumerable:!1,configurable:!0}),n.prototype.getInstance=function(){return this.instance},n.prototype.start=function(e){if(!this.active){var t=t5(dy.cropper,e);this.active=!0,this.board.selection.deselectAll();var r=t.circular,i=t.fixed&&this.board.stage.rotation()===0;!i&&r&&(this.instance=new YX(this.board,X(X({},t),{fixed:!1,circular:!0}))),i||r||(this.instance=new qX(this.board,X(X({},t),{fixed:!1,circular:!1}))),i&&r&&(this.instance=new WX(this.board,X(X({},t),{fixed:!0,circular:!0}))),i&&!r&&(this.instance=new XX(this.board,X(X({},t),{fixed:!0,circular:!1})))}},n.prototype.stop=function(){this.active&&(this.active=!1,this.instance.layer.remove(),this.board.layer.setAttrs({x:0,y:0,scale:{x:1,y:1}}),Er()&&(this.board.stage.container().style.cursor="default"))},n.prototype.zoom=function(e){if(!this.instance.options.fixed)return!1;this.instance.zoom(e)},n.prototype.setPosition=function(e){this.instance.options.fixed?this.instance.setDraggableOverlayPosition(e):this.instance.setPosition(e)},n.prototype.getRect=function(){return this.isActive?this.instance.getRect():null},n.prototype.crop=function(e){return e===void 0&&(e={}),Sn(this,void 0,void 0,function(){var t,r,i,s,o;return Cn(this,function(a){switch(a.label){case 0:return(t=e.rect||this.getRect())?(this.board.history.create(this.board.stage,pe([this.board.stage],Re(this.board.layer.children||[]),!1)),r=this.board.selection.isVisible,this.stop(),i=this.board.stage,s=Math.min(i.width()/t.width,i.height()/t.height),i.setAttrs({scale:{x:s*i.scaleX(),y:s*i.scaleY()},width:t.width*s,height:t.height*s,x:-t.x*s+i.x()*s,y:-t.y*s+i.y()*s,rotation:i.rotation()}),this.board.background.overlay.hide(),r&&this.board.selection.transformer.hide(),this.board.activeShapes.forEach(function(h){h.hasGroup()||h.node.hide()}),[4,py(this.board.stage.toDataURL({pixelRatio:1}))]):[2,null];case 1:return o=a.sent(),this.board.background.nodes.forEach(function(h){h.setAttrs({width:o.width(),height:o.height(),rotation:0,x:0,y:0,scale:{x:1,y:1}})}),this.board.background.image.node.setAttrs({image:o.image()}),this.board.shapes.forEach(function(h){if(!h.isDeleted&&!h.hasGroup()){var c=h.node,l=m0({x:c.x(),y:c.y()},v0(i.rotation()));c.setAttrs({rotation:c.rotation(),x:l.x*i.scaleX()+i.x(),y:l.y*i.scaleY()+i.y(),scaleX:c.scaleX()*i.scaleX(),scaleY:c.scaleY()*i.scaleY()}).show()}}),this.board.background.overlay.show(),r&&this.board.selection.transformer.show(),i.setAttrs({rotation:0,scaleX:1,scaleY:1,x:0,y:0}),i.batchDraw(),this.board.events.emit("crop",{data:{options:e,rect:t}}),[2,t]}})})},n}(),QX=function(){function n(e){this.board=e}return n.prototype.transform=function(e){var t=this;this.board.history.create(this.board.stage,pe([this.board.stage],Re(this.board.getNodes()),!1));var r=v0(Number(e)),i=this.board.getDimensions(),s=i.width,o=i.height,a=Math.abs(Math.cos(r)),h=Math.abs(Math.sin(r)),c=s*a+o*h,l=o,d=o/(o*a+s*h)*c,u=d/c,f=m0({x:s*u/2,y:o*u/2},r);this.board.stage.setAttrs({width:d,height:l}),[this.board.background.image,this.board.background.overlay].filter(function(m){return m.isSelectable===!1}).forEach(function(m){var g=m.node;g.scale({x:u,y:u}),g.rotation(Number(e)),g.x(d/2-f.x),g.y(l/2-f.y)}),this.board.activeShapes.forEach(function(m){var g,y,v,b;if(!m.hasGroup()){var w=(g=m.node.attrs.originalScaleX)!==null&&g!==void 0?g:m.node.scaleX(),C=(y=m.node.attrs.originalScaleY)!==null&&y!==void 0?y:m.node.scaleY(),O=(v=m.node.attrs.originalX)!==null&&v!==void 0?v:m.node.x(),x=(b=m.node.attrs.originalY)!==null&&b!==void 0?b:m.node.y(),P=m0({x:O,y:x},v0(e));m.node.setAttrs({originalX:O,originalY:x,originalScaleX:w,originalScaleY:C,rotation:Number(e),x:P.x*u+t.board.background.getPosition().x,y:P.y*u+t.board.background.getPosition().y,scaleX:w*u,scaleY:C*u})}}),this.board.events.emit("rotation:transform")},n.prototype.straighten=function(e){this.board.background.nodes.forEach(function(t){ti(t,e)}),this.board.activeShapes.forEach(function(t){t.hasGroup()||t.rotate(e)}),this.board.events.emit("rotation:straighten")},n}(),JX=function(){function n(e){this.lines=[],this.offset=5,this.options={},this.active=!1;var t=e.settings.snapToGrid;this.board=e,this.options=t,this.active=t!==null,this.active&&this.registerEvents()}return Object.defineProperty(n.prototype,"isActive",{get:function(){return this.active},enumerable:!1,configurable:!0}),n.prototype.setOptions=function(e){this.options=e},n.prototype.setOffset=function(e){this.offset=e},n.prototype.enable=function(){this.active||(this.active=!0,this.registerEvents())},n.prototype.disable=function(){this.active!==!1&&(this.active=!1,this.unregisterEvents())},n.prototype.getLineStops=function(e){var t={vertical:[0,this.board.stage.width()/2,this.board.stage.width()],horizontal:[0,this.board.stage.height()/2,this.board.stage.height()]};return this.board.activeShapes.forEach(function(r){if(r.node!==e&&!r.hasGroup()){var i=r.node.getClientRect();t={vertical:pe(pe([],Re(t.vertical),!1),[i.x,i.x+i.width,i.x+i.width/2],!1),horizontal:pe(pe([],Re(t.horizontal),!1),[i.y,i.y+i.height,i.y+i.height/2],!1)}}}),t},n.prototype.getNodeEdgeBounds=function(e){var t=e.getClientRect(),r=e.absolutePosition();return[{guide:Math.round(t.x),offset:Math.round(r.x-t.x),snap:"start",orientation:"vertical"},{guide:Math.round(t.x+t.width/2),offset:Math.round(r.x-t.x-t.width/2),snap:"center",orientation:"vertical"},{guide:Math.round(t.x+t.width),offset:Math.round(r.x-t.x-t.width),snap:"end",orientation:"vertical"},{guide:Math.round(t.y),offset:Math.round(r.y-t.y),snap:"start",orientation:"horizontal"},{guide:Math.round(t.y+t.height/2),offset:Math.round(r.y-t.y-t.height/2),snap:"center",orientation:"horizontal"},{guide:Math.round(t.y+t.height),offset:Math.round(r.y-t.y-t.height),snap:"end",orientation:"horizontal"}]},n.prototype.getGuideLines=function(e,t){var r=this,i=[];t.forEach(function(o){Object.entries(e).forEach(function(a){var h=Re(a,2),c=h[0],l=h[1];c===o.orientation&&l.forEach(function(d){var u=Math.abs(d-o.guide);u>=r.offset||i.push({diff:u,stop:d,snap:o.snap,offset:o.offset,orientation:o.orientation})})})});var s=function(o){return i.filter(function(a){return a.orientation===o}).sort(function(a,h){return a.diff-h.diff})[0]};return[s("vertical"),s("horizontal")].filter(function(o){return!!o})},n.prototype.draw=function(e){var t=this;e.length&&e.forEach(function(r){var i=X({stroke:"#000",strokeWidth:1,dash:[2,6]},t.options);r.orientation==="vertical"?i.points=[0,0,0,t.board.stage.height()]:r.orientation==="horizontal"&&(i.points=[0,0,t.board.stage.width(),0]);var s=new he.Line(i);r.orientation==="vertical"?s.absolutePosition({x:r.stop,y:0}):r.orientation==="horizontal"&&s.absolutePosition({x:0,y:r.stop}),t.board.layer.add(s),t.lines.push(s)})},n.prototype.setNodePosition=function(e,t){t.forEach(function(r){var i=r.orientation,s=r.stop,o=r.offset,a=e.absolutePosition();i==="vertical"?a.x=s+o:i==="horizontal"&&(a.y=s+o),e.absolutePosition(a)})},n.prototype.onDragMove=function(e){var t=e.target;if(this.board.activeShapes.find(function(i){return i.node===t})){this.destroy();var r=this.getGuideLines(this.getLineStops(t),this.getNodeEdgeBounds(t));this.draw(r),this.setNodePosition(t,r)}},n.prototype.onDragEnd=function(){this.destroy()},n.prototype.destroy=function(){this.lines.length>0&&(this.lines.forEach(function(e){return e.destroy()}),this.lines=[])},n.prototype.registerEvents=function(){this.board.layer.on("dragmove",this.onDragMove.bind(this)),this.board.layer.on("dragend",this.onDragEnd.bind(this))},n.prototype.unregisterEvents=function(){this.board.layer.removeEventListener("dragmove"),this.board.layer.removeEventListener("dragend")},n}();function Up(n,e){return Math.sqrt(Math.pow(Math.abs(n.x-e.x),2)+Math.pow(Math.abs(n.y-e.y),2))}var Tr=function(){function n(e,t,r){this.board=e,this.drawType=t,this.board.settings.measurement&&(r==null?void 0:r.measurement)!==!1&&(this.dimensionsTag=new r5(this.board)),this.onStartDrawing=this.onStartDrawing.bind(this),this.onFinishDrawing=this.onFinishDrawing.bind(this),this.onDrawing=this.onDrawing.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}return Object.defineProperty(n.prototype,"isDrawing",{get:function(){return this.board.activeDrawing===this.drawType},enumerable:!1,configurable:!0}),n.prototype.insert=function(e){return this.stopDrawing(),this.createShape(e)},n.prototype.draw=function(e){ul()||(this.config=e,this.stopDrawing(),this.board.setActiveDrawing(this.drawType),this.board.stage.on("mousedown touchstart",this.onStartDrawing),this.board.stage.on("mousemove touchmove",this.onDrawing),this.board.stage.on("mouseup touchend",this.onFinishDrawing),Er()&&(window.addEventListener("mouseup",this.onFinishDrawing),window.addEventListener("touchend",this.onFinishDrawing),window.addEventListener("keydown",this.onKeyDown)))},n.prototype.stopDrawing=function(){var e;ul()||(this.node=null,this.board.setActiveDrawing(null),this.board.stage.container().style.cursor="inherit",(e=this.dimensionsTag)===null||e===void 0||e.hide(),this.board.stage.off("mousedown touchstart",this.onStartDrawing),this.board.stage.off("mousemove touchmove",this.onDrawing),this.board.stage.off("mouseup touchend",this.onFinishDrawing),window.removeEventListener("mouseup",this.onFinishDrawing),window.removeEventListener("touchend",this.onFinishDrawing),window.removeEventListener("keydown",this.onKeyDown))},n.prototype.getShapePosition=function(){return{x:this.node.x(),y:this.node.y()}},n.prototype.onStartDrawing=function(){var e=this.board.stage.getPointerPosition(),t=e.x,r=e.y;this.startPoint={x:t,y:r}},n.prototype.onDrawing=function(e){ul()||this.isDrawing&&(this.board.stage.container().style.cursor="crosshair",this.node&&this.dimensionsTag&&this.dimensionsTag.measure(this.node,this.node.getClientRect()))},n.prototype.onFinishDrawing=function(){var e,t=this;ul()||(this.board.stage.container().style.cursor="inherit",this.node&&(!((e=this.board.settings.drawing)===null||e===void 0)&&e.autoSelect)&&this.board.selection.find(function(r){return r.node===t.node}),this.stopDrawing())},n.prototype.onKeyDown=function(e){var t,r;e.key==="Escape"&&!((r=(t=this.board.settings.drawing)===null||t===void 0?void 0:t.keyboard)===null||r===void 0)&&r.cancelOnEscape&&this.stopDrawing()},n}(),eY=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return De(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"svg"},enumerable:!1,configurable:!0}),e.prototype.width=function(){return this.node.getClientRect().width},e.prototype.height=function(){return this.node.getClientRect().height},e.prototype.rotate=function(t){ti(this.node,t),this.board.events.emit("shape:rotate",{shapes:[this]})},e}(zn),tY=function(n){function e(t){return n.call(this,t,On.Svg)||this}return De(e,n),e.prototype.insert=function(t){return n.prototype.insert.call(this,t)},e.prototype.draw=function(t){t===void 0&&(t={}),n.prototype.draw.call(this,t)},e.prototype.createShape=function(t){return this.node=new he.Path(t),new eY(this.board,this.node)},e.prototype.onStartDrawing=function(){n.prototype.onStartDrawing.call(this),this.isDrawing&&(this.createShape(X({x:this.startPoint.x,y:this.startPoint.y,scaleX:.001,scaleY:.001},this.config)),this.initialDimensions=this.node.getClientRect())},e.prototype.onDrawing=function(t){if(n.prototype.onDrawing.call(this,t),this.node){var r=this.initialDimensions,i=this.board.stage.getPointerPosition(),s=Up(i,this.getShapePosition());s&&this.node.setAttrs({x:i.x,scaleX:s/r.width*.001,scaleY:s/r.height*.001})}},e.prototype.onFinishDrawing=function(){n.prototype.onFinishDrawing.call(this),this.initialDimensions=void 0},e}(Tr),nY=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return De(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"text"},enumerable:!1,configurable:!0}),e.prototype.rotate=function(t){ti(this.node,t),this.board.events.emit("shape:rotate",{shapes:[this]})},e}(zn),rY=function(n){function e(t){return n.call(this,t,On.Text)||this}return De(e,n),e.prototype.insert=function(t){return n.prototype.insert.call(this,t)},e.prototype.draw=function(t){t===void 0&&(t={}),n.prototype.draw.call(this,t)},e.prototype.createShape=function(t){return this.node=new he.Text(t),new nY(this.board,this.node)},e.prototype.onStartDrawing=function(){n.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(X({x:this.startPoint.x,y:this.startPoint.y},this.config))},e.prototype.onDrawing=function(t){n.prototype.onDrawing.call(this,t)},e}(Tr),d5=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return De(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"line"},enumerable:!1,configurable:!0}),e.prototype.rotate=function(t){ti(this.node,t),this.board.events.emit("shape:rotate",{shapes:[this]})},e}(zn),iY=function(n){function e(t){return n.call(this,t,On.Line)||this}return De(e,n),e.prototype.insert=function(t){return n.prototype.insert.call(this,t)},e.prototype.draw=function(t){t===void 0&&(t={}),n.prototype.draw.call(this,t)},e.prototype.createShape=function(t){return this.node=new he.Line(X({hitStrokeWidth:15},t)),new d5(this.board,this.node)},e.prototype.onStartDrawing=function(){n.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(X({globalCompositeOperation:"source-over",points:[this.startPoint.x,this.startPoint.y]},this.config))},e.prototype.onDrawing=function(t){if(n.prototype.onDrawing.call(this,t),this.node){var r=this.board.stage.getPointerPosition();this.node.points(pe(pe([],Re(this.node.points().slice(0,2)),!1),[r.x,r.y],!1))}},e}(Tr),sY=function(n){function e(t){return n.call(this,t,On.Rect)||this}return De(e,n),e.prototype.insert=function(t){return n.prototype.insert.call(this,t)},e.prototype.draw=function(t){t===void 0&&(t={}),n.prototype.draw.call(this,t)},e.prototype.createShape=function(t){return this.node=new he.Rect(t),new a5(this.board,this.node)},e.prototype.onStartDrawing=function(){n.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(X({x:this.startPoint.x,y:this.startPoint.y},this.config))},e.prototype.onDrawing=function(t){if(n.prototype.onDrawing.call(this,t),this.node){var r=this.board.stage.getPointerPosition(),i=Math.abs(r.x-this.startPoint.x),s=Math.abs(r.y-this.startPoint.y);this.node.setAttrs({x:Math.min(this.startPoint.x,r.x),y:Math.min(this.startPoint.y,r.y),width:i,height:t.evt.shiftKey?i:s})}},e}(Tr),oY=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return De(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"arrow"},enumerable:!1,configurable:!0}),e.prototype.rotate=function(t){ti(this.node,t),this.board.events.emit("shape:rotate",{shapes:[this]})},e}(zn),aY=function(n){function e(t){return n.call(this,t,On.Arrow)||this}return De(e,n),e.prototype.insert=function(t){return n.prototype.insert.call(this,t)},e.prototype.draw=function(t){t===void 0&&(t={}),n.prototype.draw.call(this,t)},e.prototype.createShape=function(t){return this.node=new he.Arrow(t),new oY(this.board,this.node)},e.prototype.onStartDrawing=function(){n.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(X({globalCompositeOperation:"source-over",points:[this.startPoint.x,this.startPoint.y]},this.config))},e.prototype.onDrawing=function(t){if(n.prototype.onDrawing.call(this,t),this.node){var r=this.board.stage.getPointerPosition();this.node.points(pe(pe([],Re(this.node.points().slice(0,2)),!1),[r.x,r.y],!1))}},e}(Tr),lY=function(){function n(e){this.board=e}return n.prototype.insert=function(e){var t,r,i=e.container,s=e.text,o=e.tag,a=e.config,h=new he.Label(X(X({},i),{draggable:(t=this.board.settings.selection)===null||t===void 0?void 0:t.interactive})),c=new he.Text(s),l=new he.Tag(o);return c.setAttr("height","auto"),h.add(l).add(c),new i5(this.board,h,X(X({},a),{transformer:X({centeredScaling:!1,enabledAnchors:["middle-left","middle-right"]},(r=a==null?void 0:a.transformer)!==null&&r!==void 0?r:{})}))},n}(),hY=function(n){function e(t){return n.call(this,t,On.Pencil,{measurement:!1})||this}return De(e,n),e.prototype.draw=function(t){t===void 0&&(t={}),n.prototype.draw.call(this,t)},e.prototype.createShape=function(t){return this.node=new he.Line(t),new d5(this.board,this.node)},e.prototype.onStartDrawing=function(){n.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(X({globalCompositeOperation:"source-over",points:[this.startPoint.x,this.startPoint.y]},this.config))},e.prototype.onDrawing=function(t){if(n.prototype.onDrawing.call(this,t),this.node){var r=this.board.stage.getPointerPosition();this.node.points(this.node.points().concat([r.x,r.y]))}},e.prototype.onFinishDrawing=function(){n.prototype.onFinishDrawing.call(this),this.draw(this.config)},e}(Tr),cY=function(){function n(e){this.board=e}return n.prototype.insert=function(e,t){var r;return t===void 0&&(t={}),Sn(this,void 0,void 0,function(){var i,s,o,a,h;return Cn(this,function(c){switch(c.label){case 0:return e instanceof he.Image?(i=e,[3,6]):[3,1];case 1:return Er()&&e instanceof File?[4,s5(e)]:[3,3];case 2:return s=c.sent(),[3,4];case 3:s=e,c.label=4;case 4:return[4,py(s)];case 5:i=c.sent(),c.label=6;case 6:return o=i.width()/i.height(),a=this.board.stage.height()/2,h=a*o,i.setAttrs(X({width:h,height:a,x:(this.board.stage.width()-h)/2,y:(this.board.stage.height()-a)/2,rotation:-1*this.board.stage.rotation(),draggable:(r=this.board.settings.selection)===null||r===void 0?void 0:r.interactive},t)),[2,new o5(this.board,i,{transformer:{keepRatio:!0}})]}})})},n}(),dY=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return De(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"circle"},enumerable:!1,configurable:!0}),e}(zn),uY=function(n){function e(t){return n.call(this,t,On.Circle)||this}return De(e,n),e.prototype.insert=function(t){return n.prototype.insert.call(this,t)},e.prototype.draw=function(t){t===void 0&&(t={}),n.prototype.draw.call(this,t)},e.prototype.createShape=function(t){return this.node=new he.Circle(t),new dY(this.board,this.node)},e.prototype.onStartDrawing=function(){n.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(X({x:this.startPoint.x,y:this.startPoint.y,radius:0},this.config))},e.prototype.onDrawing=function(t){if(n.prototype.onDrawing.call(this,t),this.node){var r=this.board.stage.getPointerPosition();this.node.setAttrs({radius:Up(r,this.getShapePosition())})}},e}(Tr),pY=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return De(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"ellipse"},enumerable:!1,configurable:!0}),e}(zn),fY=function(n){function e(t){return n.call(this,t,On.Ellipse)||this}return De(e,n),e.prototype.insert=function(t){return n.prototype.insert.call(this,t)},e.prototype.draw=function(t){t===void 0&&(t={}),n.prototype.draw.call(this,t)},e.prototype.createShape=function(t){return this.node=new he.Ellipse(t),new pY(this.board,this.node)},e.prototype.onStartDrawing=function(){n.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(X({x:this.startPoint.x,y:this.startPoint.y,radiusX:0,radiusY:0},this.config))},e.prototype.onDrawing=function(t){if(n.prototype.onDrawing.call(this,t),this.node){var r=this.board.stage.getPointerPosition(),i=Math.abs(r.x-this.node.x()),s=Math.abs(r.y-this.node.y());this.node.setAttrs({radiusX:i,radiusY:t.evt.shiftKey?i:s})}},e}(Tr),gY=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return De(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"polygon"},enumerable:!1,configurable:!0}),e}(zn),mY=function(n){function e(t){return n.call(this,t,On.Polygon)||this}return De(e,n),e.prototype.insert=function(t){return n.prototype.insert.call(this,t)},e.prototype.draw=function(t){t===void 0&&(t={}),n.prototype.draw.call(this,t)},e.prototype.createShape=function(t){return this.node=new he.RegularPolygon(t),new gY(this.board,this.node)},e.prototype.onStartDrawing=function(){n.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(X({x:this.startPoint.x,y:this.startPoint.y,radius:0,sides:4},this.config))},e.prototype.onDrawing=function(t){if(n.prototype.onDrawing.call(this,t),this.node){var r=this.board.stage.getPointerPosition();this.node.setAttrs({radius:Up(r,this.getShapePosition())})}},e}(Tr),vY=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return De(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return"triangle"},enumerable:!1,configurable:!0}),e}(zn),yY=function(n){function e(t){return n.call(this,t,On.Triangle)||this}return De(e,n),e.prototype.insert=function(t){return n.prototype.insert.call(this,t)},e.prototype.draw=function(t){t===void 0&&(t={}),n.prototype.draw.call(this,X(X({},t),{sides:3}))},e.prototype.createShape=function(t){return this.node=new he.RegularPolygon(X({radius:10,sides:3},t)),new vY(this.board,this.node)},e.prototype.onStartDrawing=function(){n.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(X({x:this.startPoint.x,y:this.startPoint.y,radius:0},this.config))},e.prototype.onDrawing=function(t){if(n.prototype.onDrawing.call(this,t),this.node){var r=this.board.stage.getPointerPosition();this.node.setAttrs({radius:Up(r,this.getShapePosition())})}},e}(Tr),bY=function(){function n(e,t){if(Er()&&!e.container)throw new Error("It needs to have a container element");this.settings=NX(e),this.registerShapes=t,this.init()}return n.prototype.loadFromFile=function(e,t){return Sn(this,void 0,void 0,function(){return Cn(this,function(r){switch(r.label){case 0:return[4,this.board.background.setImageFromFile(e,t)];case 1:return r.sent(),[2]}})})},n.prototype.loadFromUrl=function(e,t){return Sn(this,void 0,void 0,function(){return Cn(this,function(r){switch(r.label){case 0:return[4,this.board.background.setImageFromUrl(e,t)];case 1:return r.sent(),[2]}})})},n.prototype.rescale=function(){this.board.rescale()},n.prototype.undo=function(){this.history.undo()},n.prototype.redo=function(){this.history.redo()},n.prototype.on=function(e,t){this.events.on(e,t)},n.prototype.off=function(e,t){this.events.off(e,t)},n.prototype.reset=function(){this.init(),this.events.emit("history:reset")},n.prototype.load=function(e){return Sn(this,void 0,void 0,function(){return Cn(this,function(t){switch(t.label){case 0:return this.reset(),[4,this.import.json(JSON.parse(e))];case 1:return t.sent(),[2]}})})},n.prototype.init=function(){var e,t=new GX,r=new zX(this.settings,t),i=new BX(this.settings,t,r);this.selection=i.selection,this.flip=new n5(i),this.filters=new uy(i),this.cropper=new ZX(i),this.rotation=new QX(i),this.snapGrid=new JX(i),this.shapes=X({arrow:new aY(i),circle:new uY(i),ellipse:new fY(i),image:new cY(i),label:new lY(i),line:new iY(i),pencil:new hY(i),polygon:new mY(i),rect:new sY(i),triangle:new yY(i),text:new rY(i),svg:new tY(i)},(e=this.registerShapes)===null||e===void 0?void 0:e.call(this,i)),this.import=new KX(i,this.shapes),this.export=new HX(i,this.cropper),this.board=i,this.events=t,this.history=r},n}();function sw(n={},e){const[t,r]=G.useState(null),i=G.useRef(null);return G.useEffect(()=>{const s=new bY({container:i.current,...n},e);r(s)},[]),[i,t]}function _Y(n){return bt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M488.6 104.1C505.3 122.2 513 143.8 511.9 169.8V372.2C511.5 398.6 502.7 420.3 485.4 437.3C468.2 454.3 446.3 463.2 419.9 464H92.02C65.57 463.2 43.81 454.2 26.74 436.8C9.682 419.4 .7667 396.5 0 368.2V169.8C.7667 143.8 9.682 122.2 26.74 104.1C43.81 87.75 65.57 78.77 92.02 78H121.4L96.05 52.19C90.3 46.46 87.42 39.19 87.42 30.4C87.42 21.6 90.3 14.34 96.05 8.603C101.8 2.868 109.1 0 117.9 0C126.7 0 134 2.868 139.8 8.603L213.1 78H301.1L375.6 8.603C381.7 2.868 389.2 0 398 0C406.8 0 414.1 2.868 419.9 8.603C425.6 14.34 428.5 21.6 428.5 30.4C428.5 39.19 425.6 46.46 419.9 52.19L394.6 78L423.9 78C450.3 78.77 471.9 87.75 488.6 104.1H488.6zM449.8 173.8C449.4 164.2 446.1 156.4 439.1 150.3C433.9 144.2 425.1 140.9 416.4 140.5H96.05C86.46 140.9 78.6 144.2 72.47 150.3C66.33 156.4 63.07 164.2 62.69 173.8V368.2C62.69 377.4 65.95 385.2 72.47 391.7C78.99 398.2 86.85 401.5 96.05 401.5H416.4C425.6 401.5 433.4 398.2 439.7 391.7C446 385.2 449.4 377.4 449.8 368.2L449.8 173.8zM185.5 216.5C191.8 222.8 195.2 230.6 195.6 239.7V273C195.2 282.2 191.9 289.9 185.8 296.2C179.6 302.5 171.8 305.7 162.2 305.7C152.6 305.7 144.7 302.5 138.6 296.2C132.5 289.9 129.2 282.2 128.8 273V239.7C129.2 230.6 132.6 222.8 138.9 216.5C145.2 210.2 152.1 206.9 162.2 206.5C171.4 206.9 179.2 210.2 185.5 216.5H185.5zM377 216.5C383.3 222.8 386.7 230.6 387.1 239.7V273C386.7 282.2 383.4 289.9 377.3 296.2C371.2 302.5 363.3 305.7 353.7 305.7C344.1 305.7 336.3 302.5 330.1 296.2C323.1 289.9 320.7 282.2 320.4 273V239.7C320.7 230.6 324.1 222.8 330.4 216.5C336.7 210.2 344.5 206.9 353.7 206.5C362.9 206.9 370.7 210.2 377 216.5H377z"},child:[]}]})(n)}function wY(n){return bt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"},child:[]}]})(n)}const SY=[{job:["sponser","code"],name:"爱走位的KN",icon:"https://avatars.githubusercontent.com/u/83012768?v=4",github:"https://github.com/ShrLeeKNsword/",bili:"https://space.bilibili.com/403314450",X:"",twich:""},{job:["code","translation"],name:"MiekoHikari",icon:"https://avatars.githubusercontent.com/u/77004524?v=4",github:"https://github.com/MiekoHikari/",bili:"",X:"https://x.com/MiekoHikariEN",twich:"https://www.twitch.tv/miekohikari"},{job:["translation"],name:"サルミナ(salutemenow)",icon:"https://s2.loli.net/2024/09/28/58XqieRV36aOCUx.webp",github:"",bili:"",X:"https://x.com/salutemenowjp",twich:"https://www.twitch.tv/salute_me_now_"}],CY=n=>N.jsxs("div",{style:{maxHeight:"800px",width:"400px",paddingTop:"5px",paddingBottom:"5px"},children:[N.jsx("div",{className:"none-scrollbar",style:{height:"100%",width:"100%",overflowY:"scroll"},children:SY.map(e=>N.jsx("div",{style:{height:"60px",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",padding:"5px",color:"rgba(var(--semi-grey-9), 1)"},children:N.jsxs(wr,{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[N.jsx(an,{span:1}),N.jsx(an,{span:4,children:N.jsx("img",{src:e.icon,style:{height:"50px",borderRadius:"50%",marginRight:"10px"}})}),N.jsxs(an,{span:10,style:{textAlign:"left",fontSize:"15px",fontWeight:"bold"},children:[N.jsx("div",{style:{width:"100%",marginBottom:"3px",marginTop:"3px"},children:e.name}),e.job.map(t=>N.jsx(xr,{size:"small",color:"light-blue",style:{marginRight:"5px",marginBottom:"2px",marginTop:"2px"},children:t}))]}),N.jsxs(an,{span:7,style:{textAlign:"right",display:"flex",alignItems:"right",justifyContent:"right"},children:[e.github!=""?N.jsx("a",{href:e.github,target:"_blank",style:{margin:"5px"},children:N.jsx(hy,{})}):N.jsx("div",{style:{width:"25px",height:"100%",textAlign:"center",marginTop:"2px"},children:"/"}),e.bili!=""?N.jsx("a",{href:e.bili,target:"_blank",style:{margin:"5px"},children:N.jsx(_Y,{})}):N.jsx("div",{style:{width:"25px",height:"100%",textAlign:"center",marginTop:"2px"},children:"/"}),e.X!=""?N.jsx("a",{href:e.X,target:"_blank",style:{margin:"5px"},children:N.jsx(wY,{})}):N.jsx("div",{style:{width:"25px",height:"100%",textAlign:"center",marginTop:"2px"},children:"/"}),e.twich!=""?N.jsx("a",{href:e.twich,target:"_blank",style:{margin:"5px"},children:N.jsx(rU,{})}):N.jsx("div",{style:{width:"25px",height:"100%",textAlign:"center",marginTop:"2px"},children:"/"})]}),N.jsx(an,{span:2,style:{}})]})},e.name))}),n.learnmore!=""||n.learnmore!=null?N.jsx("div",{style:{fontSize:"15px",fontWeight:"bold",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",height:"30px",margin:"5px",color:"rgba(var(--semi-grey-9), 1)"},children:n.learnmore}):N.jsx(N.Fragment,{})]});function xY(n){return bt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Cloud_On"},child:[{tag:"path",attr:{d:"M21.917,13.484a4.381,4.381,0,0,0-5.19-4.26,6.281,6.281,0,0,0-11.75,2.19,3.237,3.237,0,0,0-2.66,2,3.433,3.433,0,0,0,.82,3.74c1.12,1.03,2.54.89,3.94.89h10.15a4.514,4.514,0,0,0,4.69-4.32Zm-4.65,3.56c-1.19.01-2.38,0-3.56,0-2.75,0-5.49.06-8.23,0a2.383,2.383,0,0,1-2.33-1.73,2.333,2.333,0,0,1,2.28-2.94.515.515,0,0,0,.5-.5,5.3,5.3,0,0,1,10.11-1.81.5.5,0,0,0,.56.23,3.366,3.366,0,0,1,4.33,3.32A3.489,3.489,0,0,1,17.267,17.044Z"},child:[]}]}]})(n)}function OY(n){return bt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Heart"},child:[{tag:"path",attr:{d:"M12,20.043a.977.977,0,0,1-.7-.288L4.63,13.08A5.343,5.343,0,0,1,6.053,4.513,5.266,5.266,0,0,1,12,5.371a5.272,5.272,0,0,1,5.947-.858A5.343,5.343,0,0,1,19.37,13.08l-6.676,6.675A.977.977,0,0,1,12,20.043ZM8.355,4.963A4.015,4.015,0,0,0,6.511,5.4,4.4,4.4,0,0,0,4.122,8.643a4.345,4.345,0,0,0,1.215,3.73l6.675,6.675,6.651-6.675a4.345,4.345,0,0,0,1.215-3.73A4.4,4.4,0,0,0,17.489,5.4a4.338,4.338,0,0,0-4.968.852h0a.744.744,0,0,1-1.042,0A4.474,4.474,0,0,0,8.355,4.963Z"},child:[]}]}]})(n)}const{Title:ow}=Xs,PY=n=>{const[e,t]=G.useState(!1),r=()=>{t(!0)},i=()=>{t(!1),console.log("Ok button clicked")},s=()=>{t(!1),console.log("Cancel button clicked")},o=()=>{console.log("After Close callback executed")};return N.jsxs(N.Fragment,{children:[N.jsxs(He,{onClick:r,style:{marginLeft:"10px"},children:[N.jsx(OY,{style:{color:"red",fontSize:"20px",marginRight:"5px"}}),n.name]}),N.jsx(pn,{title:n.name,visible:e,onOk:i,afterClose:o,onCancel:s,closeOnEsc:!0,children:N.jsxs("div",{children:[N.jsxs("div",{children:[N.jsx("strong",{children:"卡拉彼丘地图助手"}),"是一款开源软件，"]}),N.jsx("div",{children:"因此你可以免费在 GPL-3.0 开源协议的范畴下使用本软件。"}),N.jsx("div",{children:"美术资料与部分UI版权归原作者与官方所有，"}),N.jsx("div",{children:"请咨询对应作者与官方授权！"}),N.jsx("br",{}),N.jsx("div",{children:"但即便如此，你的赞助也可以给予开发者前进的动力，让这个项目变得更好。"}),N.jsxs("div",{children:["无论你使用何种形式赞助，你都可以在",N.jsx("strong",{children:"卡拉彼丘地图助手"}),"的 GitHub 项目主页和网站展示您的信息（个人主页、公司主页、GitHub 资料页等）。"]}),N.jsxs("div",{children:["如需展示，请在留言中留下需要展示的内容或将内容连同赞助收据发送至 ",N.jsx("a",{href:"mailto:fsltech@email.cn",children:"fsltech@email.cn"})]}),N.jsx("br",{}),N.jsx(na,{margin:"12px"}),N.jsx("div",{children:N.jsx(ow,{heading:6,children:"International"})}),N.jsx("div",{onClick:()=>{open("https://ko-fi.com/MiekoHikari","_blank")},children:N.jsx("img",{src:"https://s2.loli.net/2024/10/01/LpQN1lIvu97HdMy.webp",style:{height:"50px",marginTop:"10px"}})}),N.jsx(na,{margin:"12px"}),N.jsx("div",{children:N.jsx(ow,{heading:6,children:"中国境内"})}),N.jsxs("div",{onClick:()=>{open("https://afdian.com/a/fsltech","_blank")},style:{display:"flex",height:"50px"},children:[N.jsx("img",{src:"https://s2.loli.net/2024/10/01/Xw74impc6osJDCL.png",style:{height:"50px",marginTop:"10px",marginLeft:"5px"}}),N.jsx("div",{style:{display:"flex",height:"100%",placeItems:"center",fontSize:"20px",marginLeft:"20px",marginTop:"10px",color:"rgba(var(--semi-grey-9), 1)"},children:N.jsx("strong",{children:"爱发电"})})]})]})})]})},aw={Global:[{icon:N.jsx(N.Fragment,{children:N.jsx(hy,{style:{color:"rgba(var(--semi-grey-9), 1)",fontSize:"20px",marginRight:"10px"}})}),content:"Github Page",url:"https://strinova.fsltech.cn/"}],CN:[{icon:N.jsx(N.Fragment,{}),content:"腾讯云 -  上海 - 1",url:"https://sh-1.strinova.fsltech.cn/"},{icon:N.jsx(N.Fragment,{}),content:"香港 - 1",url:"https://hk-1.strinova.fsltech.cn/"}]},{Title:lw}=Xs,EY=n=>{const[e,t]=G.useState(!1),r=()=>{t(!0)},i=()=>{t(!1),console.log("Ok button clicked")},s=()=>{t(!1),console.log("Cancel button clicked")},o=()=>{console.log("After Close callback executed")};return N.jsxs(N.Fragment,{children:[N.jsxs(He,{onClick:r,style:{marginLeft:"10px"},children:[N.jsx(xY,{style:{color:"rgba(var(--semi-grey-9), 1)",fontSize:"20px",marginRight:"5px"}}),n.name]}),N.jsx(pn,{title:n.name,visible:e,onOk:i,afterClose:o,onCancel:s,closeOnEsc:!0,children:N.jsxs("div",{children:[N.jsx("div",{children:"为了提供更快的访问速度以及减轻服务器压力，"}),N.jsx("div",{children:"我们开设了不同节点"}),N.jsx("br",{}),N.jsx(lw,{heading:5,children:"国际节点"}),N.jsx(na,{margin:"12px"}),N.jsx(wr,{style:{width:"100%",marginTop:"10px"},children:aw.Global.map(a=>N.jsx(an,{span:12,style:{},children:N.jsxs(He,{type:"tertiary",onClick:()=>{open(a.url,"_blank")},style:{width:"90%"},children:[a.icon,a.content]})}))}),N.jsx("br",{}),N.jsx(lw,{heading:5,children:"中国节点"}),N.jsx(na,{margin:"12px"}),N.jsx(wr,{style:{width:"100%",marginTop:"10px"},children:aw.CN.map(a=>N.jsx(an,{span:12,style:{},children:N.jsxs(He,{type:"tertiary",onClick:()=>{open(a.url,"_blank")},style:{width:"90%"},children:[a.icon,a.content]})}))}),N.jsx("br",{})]})})]})},TY=({currentLanguage:n})=>N.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"80px",color:"rgba(var(--semi-grey-9), 1)"},children:[N.jsx("a",{href:"https://creativecommons.org/licenses/by-nc-sa/4.0/",target:"_blank",rel:"nofollow",children:N.jsx("img",{decoding:"async",loading:"lazy",src:"https://s2.loli.net/2024/09/16/TPdoKCrgVb4i37J.png",width:"107",height:"38",style:{marginRight:"20px",marginTop:"5px"}})}),N.jsxs("div",{style:{marginBottom:"0px"},children:["© 番石榴网络科技工作室 & ",N.jsx(un,{content:N.jsx(CY,{learnmore:n.sidebar.learnmore}),position:"top",children:N.jsx("a",{children:"Contributors"})})," & ",N.jsx("a",{href:"https://wiki.biligame.com/klbq/%E9%A6%96%E9%A1%B5",target:"_blank",children:"卡拉彼丘Wiki"})," | "]}),N.jsxs("div",{style:{height:"max",display:"flex",alignItems:"center",marginLeft:"10px",marginTop:"6px"},children:[N.jsx(gt,{content:"Github repository",children:N.jsx("a",{href:"https://github.com/ShrLeeKNsword/klbq-map-assist",target:"_blank",style:{},children:N.jsx(hy,{})})}),N.jsx(gt,{content:"Discord channel",children:N.jsx("a",{href:"https://discord.com/invite/C6AYFvgR",target:"_blank",style:{marginLeft:"5px"},children:N.jsx(nU,{})})})]}),N.jsx("div",{style:{marginBottom:"0px",marginLeft:"10px",marginRight:"10px"},children:" | "}),N.jsxs("div",{style:{marginBottom:"0px"},children:[N.jsx(EY,{name:"选择网站节点"}),N.jsx(PY,{name:n.sidebar.supportus})]})]}),u5=["#FFFFFF","#000000","#f44336","#ffeb3b","#8bc34a","#2196f3"],Bg=n=>{const e=N.jsxs("div",{className:"grid grid-flex",style:{width:"280px",height:"50px",display:"flex",justifyContent:"space-around"},children:[N.jsx(ty,{style:{marginTop:"8px",marginLeft:"10px",width:"200px"},min:1,max:5,defaultValue:n.penWidth,onChange:t=>{n.setpenWidth(t)}}),N.jsx("div",{style:{borderRadius:"100%",margin:"auto",width:n.penWidth*3,height:n.penWidth*3,display:"flex",placeItems:"center",placeContent:"center",backgroundColor:n.penColor,overflow:"hidden"}})]});return N.jsx(un,{content:e,position:"left",children:N.jsx(He,{icon:N.jsx(n.icon,{size:"2rem"}),size:"large",style:{width:"100%",height:"4rem"},type:n.isActiveTool?"secondary":"tertiary",onClick:n.onClick})})},y0=G.forwardRef(({color:n,onClick:e,key:t},r)=>N.jsx(He,{ref:r,color:n,theme:"solid",size:"small",style:{width:"3rem",height:"3rem",background:n},onClick:()=>e(n)},t)),kY=({children:n,setPenColor:e})=>{const t=N.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[u5.map(r=>N.jsx(y0,{color:r,onClick:i=>e(i)},r)),N.jsx(jp,{onChange:r=>e(r.hex),alpha:!1,usePopover:!0,popoverProps:{position:"left"},children:N.jsx("div",{children:N.jsx(y0,{color:"linear-gradient(70deg, red, blue)",onClick:()=>0},"custom")})})]});return N.jsx(un,{content:t,position:"left",children:N.jsx("div",{children:n})})},Gg=G.forwardRef(({Icon:n,isActiveTool:e,onClick:t,typeOverride:r},i)=>N.jsx(He,{ref:i,icon:N.jsx(n,{size:"2rem"}),size:"large",style:{width:"100%",height:"4rem"},type:r||(e?"secondary":"tertiary"),onClick:t}));function AY(n){return bt({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M221.66,133.66l-72,72A8,8,0,0,1,136,200V136H40a8,8,0,0,1,0-16h96V56a8,8,0,0,1,13.66-5.66l72,72A8,8,0,0,1,221.66,133.66Z"},child:[]}]})(n)}function IY(n){return bt({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M211.81,83.79a28,28,0,0,1-33.12,4.83L88.62,178.69a28,28,0,1,1-44.43-6.48h0a28,28,0,0,1,33.12-4.83l90.07-90.07a28,28,0,1,1,44.43,6.48Z"},child:[]}]})(n)}const MY=({canvasTool:n,setTool:e,setpenWidth:t,penWidth:r,penColor:i,lineWidth:s,setLineWidth:o,editor:a,setPenColor:h,currentLanguage:c})=>{const[l,d]=_.useState(!1),[u,f]=_.useState(!1);return a==null||a.on("selection:change",m=>{m.shapes.length>0?f(!0):f(!1)}),N.jsxs("div",{children:[N.jsx(Gg,{Icon:sU,isActiveTool:n==="SELECT",onClick:()=>e("SELECT")}),N.jsx(Bg,{icon:eU,isActiveTool:n===Xe.Pencil,onClick:()=>e(Xe.Pencil),penWidth:r,setpenWidth:t,penColor:i}),N.jsx(Bg,{icon:IY,isActiveTool:n===Xe.Line,onClick:()=>e(Xe.Line),penWidth:s,setpenWidth:o,penColor:i}),N.jsx(Bg,{icon:AY,isActiveTool:n===Xe.Arrow,onClick:()=>e(Xe.Arrow),penWidth:s,setpenWidth:o,penColor:i}),N.jsx(kY,{setPenColor:h,children:N.jsx("div",{style:{width:"4rem",height:"4rem",backgroundColor:"var(--semi-color-bg-3)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:N.jsx(y0,{color:i,onClick:()=>{}},i)})}),N.jsx(Gg,{Icon:Zz,isActiveTool:!1,onClick:()=>a==null?void 0:a.undo()}),N.jsx(sa,{visible:l,title:c.markbox.clearwarning.title,content:c.markbox.clearwarning.content,okText:c.markbox.clearwarning.ok,cancelText:c.markbox.clearwarning.cancel,onConfirm:()=>{a==null||a.reset(),d(!l),Oz.success(c.markbox.clearwarning.success)},onCancel:()=>{d(!l)},position:"left",children:N.jsx(Gg,{Icon:u?qz:Yz,typeOverride:u?"secondary":"danger",isActiveTool:!1,onClick:()=>u?a==null?void 0:a.selection.delete():d(!l)})})]})},NY=({pikasoRef:n,pikasoEditor:e,currentMap:t,style:r})=>(G.useLayoutEffect(()=>{const i=new Image;i.src=t,i.onload=()=>{const s=i.height/e.board.stage.height();e==null||e.board.background.setImageFromUrl(t,{size:"contain",x:e.board.stage.width()/2-i.width/2/s})}},[t,e,e==null?void 0:e.board.background,e==null?void 0:e.board.stage]),N.jsx("div",{ref:n,style:{...r,width:"100%",height:"100%",minHeight:"600px"},className:"pikaso"})),DY=G.forwardRef(({onClick:n,abilityData:e},t)=>{const r=Object.keys(e).map(i=>N.jsx(He,{ref:t,style:{width:"4rem",height:"4rem",display:"flex",justifyContent:"center",alignItems:"center"},onClick:()=>n(),children:N.jsx("img",{width:"100%",height:"100%",src:e[i].canvasImage,alt:i})},i));return N.jsx("div",{children:r})}),$Y=({selectedCharacter:n,currentSiderSide:e})=>{const t=N.jsx("div",{style:{transform:"rotate(180deg)",writingMode:"vertical-rl",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",padding:"2rem 0"},children:N.jsx(fh,{weight:100,style:{color:"var(--semi-color-disabled-text)"},children:"Drag a character from the sidebar to get started!"})});return N.jsx("div",{children:n?N.jsx(DY,{abilityData:n[e].skills,onClick:()=>0}):t})},RY=()=>{const[n,e]=G.useState(Nd.简体中文),[t,r]=G.useState(Rd.WindyTown),[i,s]=sw({selection:{transformer:{borderStroke:"rgba(77, 238, 234, 1)",anchorStroke:"rgba(77, 238, 234, 1)",anchorFill:"rgba(77, 238, 234, 1)"},zone:{fill:"rgba(77, 238, 234, 0.1)",stroke:"rgba(77, 238, 234, 1)"}}}),[o,a]=sw({selection:{interactive:!1,keyboard:{enabled:!1}},disableCanvasContextMenu:!0,history:{keyboard:{enabled:!1}}}),[h,c]=G.useState(null),[l,d]=G.useState("SELECT"),[u,f]=G.useState(u5[2]),[m,g]=G.useState(2),[y,v]=G.useState(2),[b,w]=G.useState(!0),[C,O]=G.useState("attack"),[x,P]=G.useState({imgPrepareLink:Ym[0].imgPrepareLink,imgBlankLink:Ym[0].imgBlankLink}),{Header:T,Footer:k,Sider:E,Content:I}=Wr,M=Xm[n];return N.jsxs(Wr,{style:{border:"1px solid var(--semi-color-border)",height:"100%",width:"100%",minHeight:"720px",minWidth:"1280px"},children:[N.jsx(T,{style:{backgroundColor:"var(--semi-color-bg-1)"},children:N.jsx(lU,{editor:s,currentLanguageMode:n,currentMap:t,changeLanguage:e,setPresentMap:r,setPresentMapURL:P,mapPrepareMode:b,setMapPrepareMode:w})}),N.jsxs(Wr,{children:[N.jsx(E,{style:{backgroundColor:"var(--semi-color-bg-1)",width:"260px"},children:N.jsx(dU,{currentLanguage:M,setSelectedCharacter:c,setSiderSide:O})}),N.jsx(E,{style:{backgroundColor:"var(--semi-color-bg-1)",width:"4rem",height:"100%",border:"1px solid var(--semi-color-border)"},children:N.jsx($Y,{currentSiderSide:C,selectedCharacter:h,setSelectedCharacter:c})}),N.jsx(I,{style:{backgroundColor:"var(--semi-color-bg-2)",height:"100%",display:"flex",placeItems:"center",padding:"0 auto"},children:N.jsxs("div",{style:{overflow:"hidden",position:"relative",top:0,left:0,width:"100%",height:"100%"},children:[N.jsx(NY,{currentMap:b?x.imgPrepareLink:x.imgBlankLink,pikasoEditor:a,pikasoRef:o,style:{position:"absolute",top:"0",left:"0"}}),N.jsx(oK,{pikasoRef:i,pikasoEditor:s,currentMap:b?x.imgPrepareLink:x.imgBlankLink,canvasTool:l,lineWidth:y,penColor:u,penWidth:m})]})}),N.jsx(E,{style:{backgroundColor:"var(--semi-color-bg-1)",width:"4rem"},children:N.jsx(MY,{currentLanguage:M,canvasTool:l,setTool:d,penColor:u,penWidth:m,setpenWidth:g,setLineWidth:v,lineWidth:y,editor:s,setPenColor:f})})]}),N.jsx(k,{style:{backgroundColor:"var(--semi-color-bg-1)"},children:N.jsx(TY,{currentLanguage:M})})]})};wC(document.getElementById("root")).render(N.jsx(G.StrictMode,{children:N.jsx(RY,{})}));
